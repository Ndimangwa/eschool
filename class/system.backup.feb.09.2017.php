<?php 
abstract class Object	{
	/*
	RELEASED on 20th November, 2016
	It is a mandatory every object that fetches data from the database to inherit from this object, object with zero properties
	All methods of this object/class should be protected
	Designer: Ndimangwa Fadhili Ngoya
	Code Writer: Ndimangwa Fadhili Ngoya
	Phone: +255 787 101 808
	Box: P.O Box 7436, Moshi Tanzania
	Email: ndimangwa@gmail.com 
	
	zoomtong company limited
	*/
	static $generalProfileHeader = "(A Constituent of Tumaini University Makumira)";
	static $defaultContextValue = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX";
	static $hashText="Developed by: Ndimangwa Fadhili Ngoya";
	static $resultsFileCode="Results File";
	static $numberOfResultsFileLeadingColumn = 6;
	static $numberOfTranscriptFileColumns = 12;
	static $iconPath="sysimage/";
	static $xmlVersion="1.0";
	static $defaultPassword = "12345678";
	static $__DEFAULT_MAXIMUM_SCORE = 100;
	static $__MAXIMUM_UPLOADED_IMAGE_SIZE = 2097153;
	static $__GPA_PRECISION = 1;
	private $dataHolder;
	public final static function assignRightMostBitsOfFlag($flags, $number_of_bits, $value_to_assign)	{
		$number_of_bits = intval("".$number_of_bits);
		$value_to_assign = intval("".$value_to_assign);
		if ($number_of_bits < 0) return $flags;
		if ($value_to_assign < 0) return $flags;
		$baseNumber = pow(2, $number_of_bits);
		$baseNumber = $baseNumber - 1; //ie from 100 to 011
		if ($value_to_assign > $baseNumber) return $flags;
		$baseNumber = 65535 - $baseNumber;
		$flags = ($flags & $baseNumber);
		return ($flags | $value_to_assign);
	}
	public final static function getRightMostBitsOfFlag($flags, $number_of_bits)	{
		$number_of_bits = intval("".$number_of_bits);
		if ($number_of_bits < 0) return $flags;
		$baseNumber = pow(2, $number_of_bits);
		$baseNumber = $baseNumber - 1;
		return ($flags & $baseNumber);
	}
	public final static function resetRightMostFlags($flags, $number_of_bits)	{
		$number_of_bits = intval("".$number_of_bits);
		if ($number_of_bits < 0) return $flags;
		$baseNumber = pow(2, $number_of_bits);
		$baseNumber = $baseNumber - 1;
		$flags = $flags | $baseNumber; // Make sure the right - nth bits are set prior to substraction
		return ($flags - $baseNumber);
	}
	public final static function setRightMostFlags($flags, $number_of_bits)	{
		$number_of_bits = intval("".$number_of_bits);
		if ($number_of_bits < 0) return $flags;
		$baseNumber = pow(2, $number_of_bits); //if 2 then get 4
		$baseNumber = $baseNumber - 1; //the set the right most bits ie 4-1 = 3 // 11 
		return ($flags | $baseNumber);
	}
	public final static function resetControlFlagsAt($controlFlags, $pos)	{
		$pos = intval("".$pos);
		if ($pos < 0) return $controlFlags;
		$baseNumber = pow(2, $pos);
		$controlFlags = intval("".$controlFlags);
		$baseNumber = 65535 - $baseNumber;
		return ($controlFlags & $baseNumber);
	}
	public final static function setControlFlagsAt($controlFlags, $pos)	{
		$pos = intval("".$pos);
		if ($pos < 0) return $controlFlags;
		$baseNumber = pow(2, $pos);
		$controlFlags = intval("".$controlFlags);
		return ($controlFlags | $baseNumber);
	}
	public final static function isControlFlagsSetAt($controlFlags, $pos)	{
		$controlFlags = intval("".$controlFlags);
		$baseNumber = pow(2, intval("".$pos));
		return (($controlFlags & $baseNumber) == $baseNumber);
	}
	public final static function linuxWKHTMLTOPDFCommand($sourceFile, $pdfFile)	{
		exec("xvfb-run wkhtmltopdf -L 0 -R 0 -T 10mm -B 10mm $sourceFile $pdfFile");
	}
	public final static function getWrappedHTMLFileContent($title, $content)	{
		$html = "<html><head><title>$title</title></head><body>$content</body></html>";
		return $html;
	}
	public function putData($key, $val)	{
		if (is_null($this->dataHolder)) $this->dataHolder = array();
		$this->dataHolder[$key] = $val;
	}
	public function getData($key)	{
		$mydata = null;
		if (! is_null($this->dataHolder) && isset($this->dataHolder[$key])) $mydata = $this->dataHolder[$key];
		return $mydata;
	}
	public final static function getRandomMD5Key()	{
		return md5(rand(10,999999));
	}
	public final static function summarizeString($string, $summaryLength)	{
		$summaryLength = intval($summaryLength);
		if (strlen($string) > $summaryLength)	{
			//We need to process this string 
			$string = substr($string, 0, $summaryLength);
			$string .= "...";
		}
		return $string;
	}
	public final static function getCaptionLabelFromPropertyName($propertyName)	{
		/*
		INPUT nextRegistrationNumber 
		OUTPUT Next Registration Number
		*/
		$propertyArray = preg_split('/(?=[A-Z])/', $propertyName);
		$captionLabel = "";
		foreach ($propertyArray as $val)	{
			if ($val != "")	{
				$captionLabel .= ucfirst($val)." ";
			}
		}
		return $captionLabel;
	}
	public final static function getUploadedFileExtension($fileArray1)	{
		$temp = explode(".", $fileArray1['name']);
		$fileextension = end($temp);
		$fileextension = strtolower($fileextension);
		return $fileextension;
	}
	public final static function isThereAnyFileReceivedFromTheClient($fileArray1)	{
		return ! ($fileArray1['name'] == "" || $fileArray1['type'] == "" || $fileArray1['tmp_name'] == "");
	}
	public final static function checkUploadedFile($fileArray1, $validTypes, $validExtensions, $maximumUploadedSize)	{
		$promise1 = new Promise();
		if (intval($fileArray1['error']) != 0)	{
			$promise1->setReason("Error Occured during uploading of the file");
			return $promise1;
		}
		/*if (! (is_null($validTypes) || in_array(strtolower($fileArray1['type']), $validTypes)))	{
			$promise1->setReason("Types not in a range of valid Types");
			return $promise1;
		}*/
		$fileextension = self::getUploadedFileExtension($fileArray1);
		if (! (is_null($validExtensions) || in_array(strtolower($fileextension), $validExtensions)))	{
			$promise1->setReason("File Extension not in a range of valid Extensions");
			return $promise1;
		}
		if (intval($fileArray1['size']) > intval($maximumUploadedSize))	{
			$promise1->setReason("The File has exceeded the file Limit");
			return $promise1;
		}
		$promise1->setResults($fileArray1['tmp_name']); //You can use this read and do your things
		$promise1->setPromise(true);
		return $promise1;
	}
	public final static function saveUploadedFile($fileArray1, $folderToSave, $filename, $validTypes, $validExtensions, $maximumUploadedSize)	{
		$promise1 = new Promise();
		if (intval($fileArray1['error']) != 0)	{
			$promise1->setReason("Error Occured during uploading of the file");
			return $promise1;
		}
		/*if (! (is_null($validTypes) || in_array(strtolower($fileArray1['type']), $validTypes)))	{
			$promise1->setReason("Types not in a range of valid Types");
			return $promise1;
		}*/
		$fileextension = self::getUploadedFileExtension($fileArray1);
		if (! (is_null($validExtensions) || in_array(strtolower($fileextension), $validExtensions)))	{
			$promise1->setReason("File Extension not in a range of valid Extensions");
			return $promise1;
		}
		if (intval($fileArray1['size']) > intval($maximumUploadedSize))	{
			$promise1->setReason("The File has exceeded the file Limit");
			return $promise1;
		}
		$absoluteFilePathToSave = $folderToSave."/".$filename.".".$fileextension;
		if (! move_uploaded_file($fileArray1['tmp_name'], $absoluteFilePathToSave))	{
			$promise1->setReason("Perhaps the server does not allow you to save this file");
			return $promise1;
		}
		$promise1->setResults($absoluteFilePathToSave);
		$promise1->setPromise(true);
		return $promise1;
	}
	public final static function getPropertiesValueFromAnObjectProperty($properties, $propertyname)	{
		//if property is @field1=val1@field2=val2@field3=val3....@fieldn=valn@field3=val3i
		//and the propertyname=field3, arr[0]['propertyname'] = val3, arr[1]['propertyname'] =val3i
		$dataArray = array();
		$propArray = explode("@", $properties);
		foreach ($propArray as $aprop)	{
			//In the form of propertyname=fieldvalue 
			$keyValue = explode("=", $aprop);
			$key = $aprop[0];
			$value = $aprop[1];
			if ($key == $propertyname) {
				//$wordIndex = "'".$key."'";
				$wordIndex = $key;
				$dataArray[sizeof($dataArray)][$wordIndex] = $value;
			}
		}
		if (sizeof($dataArray) == 0) $dataArray=null;
		return $dataArray;
	}
	public final static function getSearchTextFromUserFieldDataExtended($controlIndexArray, $fieldNameArr, $opArr, $namespaceTagArr, $fieldValueArr, $datasourceArr)	{
		$lineToSearch = "";
		foreach ($controlIndexArray as $index)	{
			$fieldname = $fieldNameArr[$index];
			$op = $opArr[$index];
			$namespaceTag = $namespaceTagArr[$index];
			$fieldvalue = $fieldValueArr[$index];
			$datasource = $datasourceArr[$index];
			$lineToSearch .= ";".$namespaceTag.".".$fieldname.$op.$fieldvalue."__!__".$datasource;
		}
		$lineToSearch = substr($lineToSearch, 1);
		$lineToSearch=trim($lineToSearch);
		return $lineToSearch;
	}
	public final static function getSearchTextFromUserFieldData($controlIndexArray, $fieldNameArr, $opArr, $namespaceTagArr, $fieldValueArr)	{
		$lineToSearch = "";
		foreach ($controlIndexArray as $index)	{
			$fieldname = $fieldNameArr[$index];
			$op = $opArr[$index];
			$namespaceTag = $namespaceTagArr[$index];
			$fieldvalue = $fieldValueArr[$index];
			$datasource = "db";
			$lineToSearch .= ";".$namespaceTag.".".$fieldname.$op.$fieldvalue."__!__".$datasource;
		}
		$lineToSearch = substr($lineToSearch, 1);
		$lineToSearch=trim($lineToSearch);
		return $lineToSearch;
	}
	public final static function getLineToSortFromUserFieldDataExtended($fieldNameArr, $fieldTypeArr, $namespaceTagArr, $fieldValueArr, $datasourceArr)	{
		$lineToSort = "";
		//We need to use fieldValueArr as a control 
		foreach ($fieldValueArr as $i => $fieldvalue)	{
			$fieldname=$fieldNameArr[$i];
			$fieldtype=$fieldTypeArr[$i];
			$namespaceTag=$namespaceTagArr[$i];
			$datasource=$datasourceArr[$i];
//fieldvalue might be an array too			
			if ($fieldtype == "list")	{
				foreach ($fieldvalue as $afieldvalue)	{
					if ($afieldvalue == "") $afieldvalue="emptydata";
					$lineToSort .= ";$fieldname,$afieldvalue,$namespaceTag,$datasource";
				}
			} else if ($fieldtype == "boolean")	{
				if ($fieldvalue == "_@32767@_") $fieldvalue="emptydata";
				$lineToSort .= ";$fieldname,$fieldvalue,$namespaceTag,$datasource";
			} else {
				//Default Text 
				if ($fieldvalue == "") $fieldvalue="emptydata";
				$lineToSort .= ";$fieldname,$fieldvalue,$namespaceTag,$datasource";
			}
		}
		//Remove the leading ;
		$lineToSort = substr($lineToSort, 1);
		$lineToSort=trim($lineToSort);
		return $lineToSort;
	}
	public final static function getLineToSortFromUserFieldData($fieldNameArr, $fieldTypeArr, $namespaceTagArr, $fieldValueArr)	{
		$lineToSort = "";
		//We need to use fieldValueArr as a control 
		foreach ($fieldValueArr as $i => $fieldvalue)	{
			$fieldname=$fieldNameArr[$i];
			$fieldtype=$fieldTypeArr[$i];
			$namespaceTag=$namespaceTagArr[$i];
			$datasource="db";
//fieldvalue might be an array too			
			if ($fieldtype == "list")	{
				foreach ($fieldvalue as $afieldvalue)	{
					if ($afieldvalue == "") $afieldvalue="emptydata";
					$lineToSort .= ";$fieldname,$afieldvalue,$namespaceTag,$datasource";
				}
			} else if ($fieldtype == "boolean")	{
				if ($fieldvalue == "_@32767@_") $fieldvalue="emptydata";
				$lineToSort .= ";$fieldname,$fieldvalue,$namespaceTag,$datasource";
			} else {
				//Default Text 
				if ($fieldvalue == "") $fieldvalue="emptydata";
				$lineToSort .= ";$fieldname,$fieldvalue,$namespaceTag,$datasource";
			}
		}
		//Remove the leading ;
		$lineToSort = substr($lineToSort, 1);
		$lineToSort=trim($lineToSort);
		return $lineToSort;
	}
	public final static function getUICSVDivSortable($lineToSort)	{
		//Format to expect
		//fieldname,fieldvalue,namespaceTag;fieldname,fieldvalue,namespaceTag;....
		//if fieldvalue == "emptydata" means hakuna data in the fieldvalue
		$uiDPanel="<div class='ui-sortable-container ui-sys-csv-data-center' data-control-index-prefix='controlIndex'><div>";
		$uiDPanel .= "<table class='pure-table pure-table-odd ui-sortable-table'><thead><tr><th></th><th>Field Name</th><th>Op</th><th>Field Value</th></tr></thead><tbody>";
		$trFieldArray = explode(";", $lineToSort);
		for ($i=0; $i<sizeof($trFieldArray); $i++)	{
			//fieldname,fieldtype,fieldvalue
			$cellValueArray = explode(",", $trFieldArray[$i]);
			$fieldname=$cellValueArray[0];
			$fieldvalue=$cellValueArray[1];
			$namespaceTag=$cellValueArray[2];
			$datasource=$cellValueArray[3];
			$serialNumber = $i + 1;
			$op = "="; //Default There is data 
			if ($fieldvalue == "emptydata") { $op=""; $fieldvalue=""; }
			$uiDPanel .= "<tr class='ui-sortable-row'><td><button class='ui-sortable-button'>".$serialNumber."</button><input type='hidden' class='sortable-control' name='controlIndex[".$i."]' value='".$i."'/></td><td><input type='hidden' name='fieldname[".$i."]' value='".$fieldname."'/><input type='hidden' name='namespaceTag[".$i."]' value='".$namespaceTag."'/><input type='hidden' name='datasource[".$i."]' value='".$datasource."'/>".Object::getCaptionLabelFromPropertyName($fieldname)."</td><td><input type='hidden' name='op[".$i."]' value='".$op."'/>".$op."</td><td><input type='hidden' name='fieldvalue[".$i."]' value='".$fieldvalue."'/>".$fieldvalue."</td></tr>";
		}//end-for
		$uiDPanel .= "</tbody></table>";
		$uiDPanel .= "</div><div class='ui-sortable-controls ui-sys-search-controls ui-sys-right'>";
		$uiDPanel .= "<a class='ui-sys-move-up ui-sys-hidden' title='Move Selected Item Up'><img alt='DAT' src='".self::$iconPath."up.png'/></a>";
		$uiDPanel .= "<a class='ui-sys-move-down ui-sys-hidden' title='Move Selected Item Down'><img alt='DAT' src='".self::$iconPath."down.png'/></a>";
		$uiDPanel .= "<a class='ui-sys-clear ui-sys-hidden' title='Clear Selection'><img alt='DAT' src='".self::$iconPath."clear.png'/></a>";
		$uiDPanel .= "</div></div>";
		return $uiDPanel;
	}
	public final static function getUICSVTables($database, $lineToView, $conn)	{
		//Step One, separate at class boundary
		$exprDL255Name="^(\w|\W){0,255}$";
		$msgDL255Name="0 - 255 characters";
		//Remove the leading @
		$lineToView = substr($lineToView, 1);
		$lineToView=trim($lineToView);
		$lineToViewPerClassArray = explode("@", $lineToView);
		$uiDPanel="";
		$controlVariableIndex = 0; //global Increment
		//die($lineToView);
		$checkUniqueClassName = array();
		$baseDataIndex = 0; //We will make multiples of 100
		foreach ($lineToViewPerClassArray as $lineclass)	{
			$tempArr = explode("/", $lineclass);
			$classname = $tempArr[0]; //classname
			//Check if it exists 
			if (in_array($classname, $checkUniqueClassName)) continue; //Avoid duplicates
			$blockIndex = 0; //Locally per class
			//Add to existing classNames
			//Enabling Adding Extra Block someclass names might have the form of string#string ie banks#bank 
			$checkUniqueClassName[sizeof($checkUniqueClassName)] = $classname;
			$enableMultipleBlocks = false;
			$classnameArr = explode("#", $classname);
			$datasource="db";
			if (sizeof($classnameArr) == 3)	{
				$classname = $classnameArr[0];
				$enableMultipleBlocks = true;
				$datasource = $classnameArr[2];
			}
			if ($enableMultipleBlocks)	{
				$baseDataIndex += 4096;	//Applicable Only for Multiple Blocks
				$uiDPanel .= "<div class=\"ui-sys-field-block-container-csv\" data-base-index=\"$baseDataIndex\"><div class=\"ui-sys-field-block\" data-index=\"$baseDataIndex\">";
				$uiDPanel .= "<div class=\"ui-sys-field-block-remove-csv\"><span class=\"ui-sys-field-block-title\"><a class=\"button-link\">Remove Block</a></span></div>";
				$uiDPanel .= "<fieldset class=\"ui-sys-field-block-table\">";
			}
			$uiDPanel .="<table class='pure-table ui-sys-csv-table'>";
			$uiDPanel .= "<thead><tr><th colspan='4'><b>".$classname."</b></th></tr></thead><tbody>";
			$uiDPanel .= "<tr><th></th><th></th><th>Field Name</th><th>Field Value</th></tr>";
			$completeFieldArr = explode(";", $tempArr[1]); 
			$counterIndex=0;
			foreach ($completeFieldArr as $aCompleteField)	{
				$counterIndex++;
				//aCompleteField= fieldname,text 
				$tempArr = explode(",", $aCompleteField);
				$fieldname = $tempArr[0];
				$fieldtype = $tempArr[1]; //type=boolean,text,list 
				$namespaceTag = $tempArr[2]; 
				$captionname = $fieldname;
				$classname = null;
				if (isset($tempArr[3])) {
					$classname=$tempArr[3];
					$captionname = $classname;
				}
				$bgcolor="";
				if (($counterIndex % 2) == 1) $bgcolor="background-color: #bcbcbc;";
				$uiDPanel .= "<tr data-block-index=\"$blockIndex\" style='".$bgcolor."' class='field-container'><td>".$counterIndex."</td><td><input title='Include OR Exclue ".$fieldname."' type='checkbox' class='field-checkbox' value='0'/></td><td><label>".Object::getCaptionLabelFromPropertyName($captionname)."</label></td><td class='ui-sys-list-parent' data-control-to-add='text' data-closest-parent-of-collection='td' data-error-control='perror' data-image-path='".self::$iconPath."' data-prefix='fieldvalue[".$controlVariableIndex."]' data-message-length='You have exceeded number of ".$fieldname."' data-message-error='".$fieldname." at' validate_expression='".$exprDL255Name."' validate_message='".$msgDL255Name."' validate_length='255'>";
				$uiDPanel .= "<input class='hidden-storage' data-storage-name-prefix='fieldname' type='hidden' name='fieldname[".$controlVariableIndex."]' value='".$fieldname."'/>";
				$uiDPanel .= "<input class='hidden-storage' data-storage-name-prefix='fieldtype' type='hidden' name='fieldtype[".$controlVariableIndex."]' value='".$fieldtype."'/>";
				$uiDPanel .= "<input class='hidden-storage' data-storage-name-prefix='namespaceTag' type='hidden' name='namespaceTag[".$controlVariableIndex."]' value='".$namespaceTag."'/>";
				$uiDPanel .= "<input class='hidden-storage' data-storage-name-prefix='datasource' type='hidden' name='datasource[".$controlVariableIndex."]' value='".$datasource."'/>";
				if ($fieldtype=="boolean")	{
					$uiDPanel .= "<select name='fieldvalue[".$controlVariableIndex."]' class='field-capturedata' validate_control='select' validate_expression='select' validate_message='Kindly Select ".$fieldname."' disabled>";
					$uiDPanel .= "<option value='_@32767@_'>--select--</option>";
					$uiDPanel .= "<option value='1'>true</option>";
					$uiDPanel .= "<option value='0'>false</option>";
					$uiDPanel .= "</select>";
				} else if ($fieldtype=="list")	{
					$uiDPanel .= "<div class='fieldvalue_".$controlVariableIndex."_ ui-sys-list-edit' data-index='0'>";
					$uiDPanel .= "<input type='text' name='fieldvalue[".$controlVariableIndex."][0]' class='field-capturedata' size='32' required pattern='".$exprDL255Name."' validate='true' validate_control='text' validate_expression='".$exprDL255Name."' validate_message='".$fieldname." at row 0: ".$msgDL255Name."' disabled/>";
					$uiDPanel .= "<a class='ui-sys-control-icon ui-sys-hidden' title='Delete ".$fieldname."'><img alt='DAT' src='".self::$iconPath."buttondelete.png'/></a>";
					$uiDPanel .= "</div>";
					$uiDPanel .= "<div class='ui-sys-list-add'><a class='ui-sys-control-icon ui-sys-hidden' title='Add a New ".$fieldname."'><img alt='DAT' src='".self::$iconPath."buttonadd.png'/></a></div>";
				} else if (! is_null($classname) && ($fieldtype=="class"))	{
					$uiDPanel .= "<select name='fieldvalue[".$controlVariableIndex."]' class='field-capturedata' validate_control='select' validate_expression='select' validate_message='Kindly Select ".$captionname."' disabled>";
					$uiDPanel .= "<option value='_@32767@_'>--select--</option>";
					$list = ClassRegistry::loadAllData($database, $conn, $classname);
					if (! is_null($list))	{
						foreach ($list as $alist)	{
							$id=$alist['id'];
							$val=$alist['val'];
							$uiDPanel .= "<option value=\"$id\">$val</option>";
						}
					}
					$uiDPanel .= "</select>";
				} else {
					//default type=text
					$uiDPanel .= "<input type='text' name='fieldvalue[".$controlVariableIndex."]' class='field-capturedata' size='32' required pattern='".$exprDL255Name."' validate='true' validate_control='text' validate_expression='".$exprDL255Name."' validate_message='".$fieldname." : ".$msgDL255Name."' disabled/>";
				}
				$uiDPanel .= "</td></tr>";
				$blockIndex++;
				$controlVariableIndex++; //index of all variables
			}
			$uiDPanel .= "</tbody></table>";
			if ($enableMultipleBlocks)	{
				$uiDPanel .= "</fieldset>";
				$uiDPanel .= "</div><div class=\"ui-sys-field-block-add-csv\"><a class=\"button-link\">Add Another Block</a></div></div>";
			}
		}
		return $uiDPanel;
	}
	public final static function staticSearchAlgorithm($sub, $string1)	{
		/* Search existence of $sub in $string1 
		@username=2@sasa=7
		*/
		$searchArray = explode(";", $sub);
		$found = true;
		for ($i=0; $i < sizeof($searchArray); $i++)	{
			$blnNOTCorrection=true;
			/* Check to see if this element has a NOT ! */
			if (strpos($searchArray[$i], "!") === 0)	{
				/*NOT found in 1st location*/
				$blnNOTCorrection = false;
				$searchArray[$i]=substr($searchArray[$i], 1);
			}
			$pos = stripos($string1, $searchArray[$i]);
			if ($pos === false) $bln = false;
			else $bln = true;
			$found = $found && (($bln && $blnNOTCorrection) || (! ($bln || $blnNOTCorrection)));
			if (! $found) break;
		}
		return $found;
	}
	public final static function getUniqueArrayFromArray($listInArray)	{
		$uniqueArray = array();
		for ($i = 0; $i < sizeof($listInArray); $i++)	{
			$isUnique = true;
			for ($j = 0; $j < sizeof($uniqueArray); $j++)	{
				if (trim($listInArray[$i]) == trim($uniqueArray[$j]))	{
					$isUnique = false;
					break; //Break Inner Loop
				}
			}
			if ($isUnique)	{
				$uniqueArray[sizeof($uniqueArray)] = $listInArray[$i];
			}
		}
		return $uniqueArray;
	}
	public final static function getArrayReferenceFromObjectList($objectList1)	{
		if (is_null($objectList1)) Object::shootException("Could not find the Object List");
		$list = array();
		foreach ($objectList1 as $obj1)	{
			$list[sizeof($list)] = $obj1->getId();
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function attachIdListToObjectList($objectList1, $list1)	{
		/* return new list  */
		if (is_null($list1)) Object::shootException("Attach, Either the Source Object List or the Supplied List is empty");
		$newList = array();
		if (! is_null($objectList1))	{
			foreach ($objectList1 as $obj1)	{
				$newList[sizeof($newList)] = $obj1->getId();
			}
		}
		foreach ($list1 as $alist1)	{
			$newList[sizeof($newList)] = $alist1;
		}
		return self::getCommaSeparatedListFromArray(self::getUniqueArrayFromArray($newList));
	}
	public final static function detachArrayFromArray($mainArray1, $subArray1)	{
		if (is_null($mainArray1) || is_null($subArray1)) Object::shootException("Main Array or Sub Array is nulled");
		/*
		$newArray1 = $mainArray1 - $subArray1 
		Meaning add Only in mainArray1 which is not in subArray1 
		*/
		$newArray1 = array();
		foreach ($mainArray1 as $maindata)	{
			$addThisData = true;
			foreach ($subArray1 as $subdata)	{
				if ($maindata == $subdata)	{
					$addThisData = false;
					break;
				}
			}
			if ($addThisData) $newArray1[sizeof($newArray1)] = $maindata;
		}
		return $newArray1;
	}
	public final static function detachIdListFromObjectList($objectList1, $list1)	{
		/* return new List or null */
		if (is_null($objectList1) || is_null($list1)) Object::shootException("Attach, Either the Source Object List or the Supplied List is empty");
		$newList = array();
		foreach ($objectList1 as $obj1)	{
			if (! in_array($obj1->getId(), $list1))	{
				$newList[sizeof($newList)] = $obj1->getId();
			}
		}
		return self::getCommaSeparatedListFromArray(self::getUniqueArrayFromArray($newList));
	}
	public final static function getCommaSeparatedListFromObjectArray($listOfObjects)	{
		//We Assume these Object supports a getId function 
		$list = "";
		$counter=0;
		foreach ($listOfObjects as $item1)	{
			if ($counter == 0)	$list = $item1->getId();
			else $list = $list.",".$item1->getId();
			$counter++;
		}
		return $list;
	}
	public final static function getCommaSeparatedListFromArray($listInArrayFormat)	{
		$list = "";
		$counter = 0;
		foreach ($listInArrayFormat as $item)	{
			if ($counter == 0)	$list = $item;
			else $list = $list.",".$item;
			$counter++;
		}
		return $list;
	}
	public final static function getAdvancedPropertiesFromArray($property, $dataArray, $namespaceTag)	{
		$list = "";
		$count = sizeof($dataArray); // number of array elements
		for ($i = 0; $i < $count; $i++)	{
			$dataValue = str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $dataArray[$i]));
			//dataArray index 
		/*	for ($j = 0; $j < $count; $j++)	{
				//data count 
				if (($i + $j) == 0)	{
					$list .= "".$property.$j."=".$dataValue;
				} else	{
					$list .= "@".$property.$j."=".$dataValue;
				}
			} //end for inner */
			if ($i==0)	{
				$list .= "".$namespaceTag.".".$property."=".$dataValue;
			} else {
				$list .= "@".$namespaceTag.".".$property."=".$dataValue;
			}
		} //end for outer
		return $list;
	}
	public final static function getPropertiesFromArray($property, $dataArray)	{
		$list = "";
		for ($i = 0; $i < sizeof($dataArray); $i++)	{
			if ($i ==	0)	{
				$list .= "".$property."=".$dataArray[$i];
			} else	{
				$list .= "@".$property."=".$dataArray[$i];
			}
		} //end for
		return $list;
	}
	public final static function arrayToList($arr)	{
		$list = "";
		for ($i=0; $i < sizeof($arr); $i++)	{
			if ($i == 0)	{
				$list=$arr[$i];
			} else	{
				$list .= ", ".$arr[$i];
			}
		}
		return $list;
	}
	public final static function returnBooleanValue($booleanValue)	{
		return $booleanValue;
	}
	public final static function shootException($message)	{
		throw new Exception($message);
	}
	private $update = array();	/*Used to keep update list */
	protected function throwMe($message)	{
		throw new Exception($message);
	}
	protected function addToUpdateList($key, $value)	{
		$this->update[$key] = $value;
	}
	protected function getUpdateListLength()	{ return sizeof($this->update); }
	public function getUpdateList()	{
		/* return where criteria 
		Caution, ID of objects are not allowed to be updated
		*/
		$setList="";
		$counter = 0;
		foreach ($this->update as $key => $value)	{
			if ($counter == 0)	{
				$setList = $key."='".$value."'";
			} else {
				$setList = $setList.", ".$key."='".$value."'";
			}
			$counter++;
		}
		return $setList;
	}
	protected function searchAlgorithim($sub, $string1)	{
		/* Search existence of $sub in $string1 
		@username=2@sasa=7
		*/
		$searchArray = explode(";", $sub);
		$found = true;
		for ($i=0; $i < sizeof($searchArray); $i++)	{
			$blnNOTCorrection=true;
			/* Check to see if this element has a NOT ! */
			if (strpos($searchArray[$i], "!") === 0)	{
				/*NOT found in 1st location*/
				$blnNOTCorrection = false;
				$searchArray[$i]=substr($searchArray[$i], 1); //Check this Later my dear
			}
			$pos = stripos($string1, $searchArray[$i]);
			if ($pos === false) $bln = false;
			else $bln = true;
			$found = $found && (($bln && $blnNOTCorrection) || (! ($bln || $blnNOTCorrection)));
			if (! $found) break;
		}
		return $found;
	}
	private function getPowerOfTwoFor($pos)	{
		//This is a 16 bit 
		//if greater than 15 return, accept 0 .. 15 
		$pos = intval("".$pos);
		if (($pos < 0) || ($pos > 15)) return 0;
		$powerOfTwo = 1;
		for ($i = 0; $i < $pos; $i++)	{
			$powerOfTwo = $powerOfTwo * 2;
		}
		return $powerOfTwo;
	}
	public function setFlagAt($pos)	{
		$powerOfTwo = $this->getPowerOfTwoFor($pos);
		if ($powerOfTwo != 0)	{
			$flagValue = intval("".$this->getFlags());
			$flagValue = $flagValue | $powerOfTwo;
			$this->setFlags($flagValue);
		}
	}
	public function resetFlagAt($pos)	{
		$powerOfTwo = $this->getPowerOfTwoFor($pos);
		if ($powerOfTwo != 0)	{
			$flagValue = intval("".$this->getFlags());
			$powerOfTwo = 65535 - $powerOfTwo; //This is a 16bit operation 
			$flagValue = $flagValue & $powerOfTwo;
			$this->setFlags($flagValue);
		}
	}
	public function isFlagSetAt($pos)	{
		$powerOfTwo = $this->getPowerOfTwoFor($pos);
		$blnSet = false;
		if ($powerOfTwo != 0)	{
			$flagValue = intval("".$this->getFlags());
			$blnSet = (($flagValue & $powerOfTwo) == $powerOfTwo);
		} 
		return $blnSet;
	}
	public function isANewSubmission()	{
		if (! isset($_REQUEST['rndx'])) return false;
		return (trim($_REQUEST['rndx']) == trim($this->getExtraFilter()));
	}
	public final static function isACustomNewSubmission($config, $classname, $refId)	{
		include($config);
		$conn = mysql_connect($hostname, $user, $pass) or die("Could not connect to a database services");
		$object1 = ClassRegistry::getObjectReference($database, $conn, $classname, $refId);
		mysql_close($conn);
		if (is_null($object1)) return false;
		return $object1->isANewSubmission();
	}
	abstract protected function setMe($database, $id, $conn);
	abstract public function cloneMe($updateDataArray);
	abstract public function reload();
	abstract public function getClassName();
	abstract protected function getAdvancedProperties();
	abstract protected function getProperties();
	abstract public function debug();
	abstract public function searchMatrix($matrix);
	abstract public function processCSV($csvProcessor1);
	abstract public function commitUpdate();
	abstract public function commitDelete();
}
class UIServices {
	public final static function displayUIPrintableBlocks($database, $conn, $domList1, $displayList1)	{
		//if no printable-section found return empty 
		/*
		Intent Format 
		labelCaption, tagName, className, dataType [select/text]
		*/
		if (is_null($domList1)) return "";
		$displayName = "";
		if (! is_null($displayList1->getDisplayName()))	{  
			$displayName = $displayList1->getDisplayName();
		}
		$printableBlock = "<div class=\"ui-sys-printable-list\"><div class=\"ui-sys-printable-block-title\">$displayName</div>";
		//Dealing with sections 
		foreach ($domList1 as $dom1)	{
			$printableBlock .= "<div class=\"ui-sys-printable-block\">";
			$intentList1 = $displayList1->getAllIntents();
			foreach ($intentList1 as $intent1)	{
				$rowPrintableBlock = "";
				$labelCaption = $intent1->getExtra("labelCaption");
				$tagName = $intent1->getExtra("tagName");
				$className = $intent1->getExtra("className");
				$dataType = strtolower($intent1->getExtra("dataType"));
				$rowPrintableBlock .= "<div class=\"ui-sys-printable-section\"><div class=\"ui-sys-printable-section-dimension\">";
				$rowPrintableBlock .= "<span class=\"ui-sys-printable-section-label\">$labelCaption</span>";
				//Pull StoredValue 
				$storedValue = "";
				$tempVal = $dom1->getElementsByTagName($tagName);
				if (! is_null($tempVal) && ($tempVal->length > 0))	{
					$storedValue = $tempVal->item(0)->nodeValue;
				}
				if (trim($storedValue) == "") continue; //skip this row
				if ($dataType == "object")	{
					//We need to convert id to object->getName //
					$refObject1 = null;
					try {
						$refObject1 = ClassRegistry::getObjectReference($database, $conn, $className, $storedValue);
					} catch (Exception $e)	{
						continue; //Skip this row 
					}
					$storedValue = $refObject1->getName();
				}
				$rowPrintableBlock .= "<span class=\"ui-sys-printable-section-data\">$storedValue</span>";
				$rowPrintableBlock .= "</div></div>";
				$printableBlock .= $rowPrintableBlock;
			}
			$printableBlock .= "<div class=\"ui-sys-clearboth\">&nbsp;</div></div>";
		}
		$printableBlock .= "</div>";
		return $printableBlock;
	}
	public final static function displayUIFieldBlocks($database, $conn, $domList1, $displayList1, $beginIndexAt)	{
		/*
		If domList1 is null then , only one div will be returned with the index=beginIndexAt,
		beginIndexAt is used only if domList1 is null 
		Note Intent Structure 
		Fortunately all object supports getId() method 
		The Intents have the following stucture 
		*namePrefix, *labelCaption, *validate[true/false], *validateControl, validateExpression, validateMessage, className (should be existing on the Registry),
		tagName, in getElementsByTagName($tagName)->item(0)->nodeValue 
		*/
		$fieldBlock = "";
		if (is_null($domList1))	{
			//Single Div 
			$i = $beginIndexAt; //Just let us use i 
			$disp_i = $i + 1;
			$intentList1 = $displayList1->getAllIntents();
			$fieldBlock = "<div class=\"ui-sys-field-block\" data-index=\"".$i."\">";
			$fieldBlock .= "<div class=\"ui-sys-field-block-remove\"><span class=\"ui-sys-field-block-title\">Block $disp_i</span><a class=\"button-link\">Remove</a></div>";
			$fieldBlock .= "<fieldset class=\"ui-sys-field-block-table\">";
			foreach ($intentList1 as $intent1)	{
				$namePrefix = $intent1->getExtra('namePrefix');
				$controlName= $intent1->getExtra('namePrefix')."[".$i."]";
				$controlId= $intent1->getExtra('namePrefix')."_".$i."_";
				$labelCaption = $intent1->getExtra('labelCaption');
				$validate = $intent1->getExtra('validate');
				$validateControl = $intent1->getExtra('validateControl');
				$validateExpression = $intent1->getExtra('validateExpression');
				$validateMessageBackup = $intent1->getExtra('validateMessage');
				$validateMessage = "Block $disp_i: ".$intent1->getExtra('validateMessage');
				$className = $intent1->getExtra('className');
				$required = "required";
				$pattern = "pattern=\"".$validateExpression."\"";
				if (! is_null($intent1->getExtra('notrequired')))	{
					$pattern = "";
					$required = "notrequired=\"true\"";
				}
				$tagName = $intent1->getExtra('tagName');
				$fieldBlock .= "<div class=\"pure-control-group\"><label class=\"data-prefix-label\" data-name-prefix=\"$namePrefix\" for=\"$controlId\">$labelCaption</label>";
				if (trim($validateControl) == "text")	{
					$fieldBlock .= "<input class=\"data-capture-control data-text-control $namePrefix\" type=\"text\" id=\"$controlId\" name=\"$controlName\" size=\"32\" validate=\"true\" $required $pattern validate_expression=\"$validateExpression\" validate_control=\"$validateControl\" validate_message=\"$validateMessage\" backup_validate_message=\"$validateMessageBackup\"/>";
				} else if (trim($validateControl) == "select")	{
					$fieldBlock .= "<select class=\"data-capture-control data-select-control $namePrefix\" id=\"$controlId\" name=\"$controlName\" validate=\"true\" validate_expression=\"$validateExpression\" validate_control=\"$validateControl\" validate_message=\"$validateMessage\" backup_validate_message=\"$validateMessageBackup\">";
					$fieldBlock .= "<option value=\"_@32767@_\">--select--</option>";
					$listArray = ClassRegistry::loadAllData($database, $conn, $className);
					if (! is_null($listArray))	{
						foreach ($listArray as $alist1)	{
							$__id = $alist1['id'];
							$__val = $alist1['val'];
							$fieldBlock .= "<option value=\"$__id\">$__val</option>";
						}
					}
					$fieldBlock .="</select>";
				}
				$fieldBlock .= "</div>";
			}
			$fieldBlock .= "</fieldset>";
			$fieldBlock .= "</div>";
		} else {
			//Multiple divs
			//We have our domList set 
			for ($i=0; $i < sizeof($domList1); $i++)	{
				$dom1 = $domList1[$i]; //Array of doms 
				
				//Insert Here --begin 
				$disp_i = $i + 1;
				$intentList1 = $displayList1->getAllIntents();
				$fieldBlock .= "<div class=\"ui-sys-field-block\" data-index=\"".$i."\">";
				$fieldBlock .= "<div class=\"ui-sys-field-block-remove\"><span class=\"ui-sys-field-block-title\">Block $disp_i</span><a class=\"button-link\">Remove</a></div>";
				$fieldBlock .= "<fieldset class=\"ui-sys-field-block-table\">";
				foreach ($intentList1 as $intent1)	{
					$namePrefix = $intent1->getExtra('namePrefix');
					$controlName= $intent1->getExtra('namePrefix')."[".$i."]";
					$controlId= $intent1->getExtra('namePrefix')."_".$i."_";
					$labelCaption = $intent1->getExtra('labelCaption');
					$validate = $intent1->getExtra('validate');
					$validateControl = $intent1->getExtra('validateControl');
					$validateExpression = $intent1->getExtra('validateExpression');
					$validateMessageBackup = $intent1->getExtra('validateMessage');
					$validateMessage = "Block $disp_i: ".$intent1->getExtra('validateMessage');
					$className = $intent1->getExtra('className');
					$required = "required";
					$pattern = "pattern=\"".$validateExpression."\"";
					if (! is_null($intent1->getExtra('notrequired')))	{
						$pattern = "";
						$required = "notrequired=\"true\"";
					}
					$tagName = $intent1->getExtra('tagName');
					//Pull StoredValue 
					$storedValue = "";
					$tempVal = $dom1->getElementsByTagName($tagName);
					if (! is_null($tempVal))	{
						$storedValue = $tempVal->item(0)->nodeValue;
					}
					$fieldBlock .= "<div class=\"pure-control-group\"><label class=\"data-prefix-label\" data-name-prefix=\"$namePrefix\" for=\"$controlId\">$labelCaption</label>";
					if (trim($validateControl) == "text")	{
						$fieldBlock .= "<input value=\"$storedValue\" class=\"data-capture-control data-text-control $namePrefix\" type=\"text\" id=\"$controlId\" name=\"$controlName\" size=\"32\" validate=\"true\" $required $pattern validate_expression=\"$validateExpression\" validate_control=\"$validateControl\" validate_message=\"$validateMessage\" backup_validate_message=\"$validateMessageBackup\"/>";
					} else if (trim($validateControl) == "select")	{
						$fieldBlock .= "<select class=\"data-capture-control data-select-control $namePrefix\" id=\"$controlId\" name=\"$controlName\" validate=\"true\" validate_expression=\"$validateExpression\" validate_control=\"$validateControl\" validate_message=\"$validateMessage\" backup_validate_message=\"$validateMessageBackup\">";
						$fieldBlock .= "<option value=\"_@32767@_\">--select--</option>";
						$listArray = ClassRegistry::loadAllData($database, $conn, $className);
						if (! is_null($listArray))	{
							foreach ($listArray as $alist1)	{
								$__id = $alist1['id'];
								$__val = $alist1['val'];
								$selected = "";
								if ($__id == $storedValue) $selected="selected";
								$fieldBlock .= "<option $selected value=\"$__id\">$__val</option>";
							}
						}
						$fieldBlock .="</select>";
					}
					$fieldBlock .= "</div>";
				}
				$fieldBlock .= "</fieldset>";
				$fieldBlock .= "</div>";
				//Insert Here --end
				
			} //end-for-mult-div
		}
		return $fieldBlock;
	}
}
class Intent {
	private $dataHolder;
	/*--name--status--extra--extra--*/
	public function __construct($name)	{
		$this->dataHolder = array();
		$this->dataHolder['name'] = $name;
		$this->dataHolder['status'] = false; //default to false
	}
	public function putExtra($fieldname, $fieldvalue)	{
		$this->dataHolder[$fieldname] = $fieldvalue;
	}
	public function getExtra($fieldname)	{
		$val = null;
		if (isset($this->dataHolder[$fieldname]))	{
			$val = $this->dataHolder[$fieldname];
		}
		return $val;
	}
	public function isStatusSet()	{
		return $this->dataHolder['status'];
	}
}
class Collection	{
	//An Advanced form of Array 
	private $list1;
	public function __construct()	{
		$this->list1 = array();
	}
	public function __destruct()	{
		
	}
	public function sortAscending()	{
		$datasize = sizeof($this->list1);
		for ($i = 0; $i < ($datasize - 1); $i++)	{
			$swapped = false;
			for ($j = 0; $j < ($datasize - 1 -$i); $j++)	{
				if (floatval($this->list1[$j]) > floatval($this->list1[$j+1]))	{
					$temp = $this->list1[$j];
					$this->list1[$j] = $this->list1[$j+1];
					$this->list1[$j+1] = $temp;
					$swapped = true;
				}
			}
			if (! $swapeed)	break;
		}
	} 
	public function sortDescending()	{
		$datasize = sizeof($this->list1);
		for ($i = 0; $i < ($datasize - 1); $i++)	{
			$swapped = false;
			for ($j = 0; $j < ($datasize - 1 -$i); $j++)	{
				if (floatval($this->list1[$j+1]) > floatval($this->list1[$j]))	{
					$temp = $this->list1[$j];
					$this->list1[$j] = $this->list1[$j+1];
					$this->list1[$j+1] = $temp;
					$swapped = true;
				}
			}
			if (! $swapeed)	break;
		}
	}
	public function getLength()	{
		return sizeof($this->list1);
	}
	public function isItemInACollection($item)	{
		$found = false;
		$item = trim($item);
		foreach ($this->list1 as $storedItem)	{
			if ($item == trim($storedItem))	{
				$found = true; break;
			}
		}
		return $found;
	}
	public function addCommaSeparatedList($commaList)	{
		//Input 1,2,3....
		$listArr = explode(",", $commaList);
		foreach ($listArr as $item)	{
			$this->list1[sizeof($this->list1)] = trim($item);
		}
		return $this;
	}
	public function addItem($item)	{
		$this->list1[sizeof($this->list1)] = $item;
		return $this;
	}
	public function addItemAt($item, $index)	{
		$this->list1[$index] = $item;
		return $this;
	}
	public function addList($collection1)	{
		if (! is_null($collection1))	{
			foreach ($collection1 as $item)	{
				$this->list1[sizeof($this->list1)] = $item;
			}
		}
		return $this;
	}
	public function addCollection($collection1)	{
		//this is object now 
		return $this->addList($collection1->getCollection());
	}
	public function addObjectToCollection($object1)	{
		if (is_null($object1)) return;
		$this->addItem($object1->getId());
	}
	public function addObjectListToCollection($objectList1)	{
		if (is_null($objectList1)) return;
		foreach ($objectList1 as $obj1)	{
			$this->addItem($obj1->getId());
		}
	}
	public function removeCollection($collectionRemove1)	{
		if (is_null($collectionRemove1)) return;
		$list = array();
		//add the original collection which is not in the remove 
		foreach ($this->list1 as $item)	{
			if (! $collectionRemove1->isItemInACollection($item))	{
				$list[sizeof($list)] = $item;
			}	
		}
		$this->list1 = $list;
		return $this;
	}
	public function getCollection()	{ return $this->list1; }
	public function makeUnique()	{
		$list1 = array();
		foreach ($this->list1 as $item)	{
			$isUnique = true;
			foreach ($list1 as $refItem)	{
				if ($item == $refItem)	{
					$isUnique = false;
					break; //Exit Inner Loop 
				}
			}
			if ($isUnique)	{
				$list1[sizeof($list1)] = $item;
			}
		}
		$this->list1 = $list1;
		return $this;
	}
}
class Counter {
	private $counts;
	public function __construct()	{ $this->counts = 0; }
	public function __destruct()	{ }
	public function advanceCounter()	{ $this->counts++; }
	public function getCounts()	{ return $this->counts; }
	public function setCounts($counts)	{ $this->counts = $counts; }
	public function addCounts($counts)	{ $this->counts = $this->counts + $counts; }
}
class Communication {
	public final static function getSMSUIFromInfoBipAPIResponse($responseBody, $profile1)	{
		$messages = $responseBody->messages;
		$sqlReturnedRowCount = 0;
		$perTbodyCounter = 0;
		$numberOfTBodies = 0;
		$table1 = "<table class=\"pure-table ui-sys-table-search-results-k\"><thead><tr><th></th><th>Message ID</th><th>To</th><th>Status Group ID</th><th>Status Group Name</th><th>Status ID</th><th>Status Name</th><th>Status Description</th><th>SMS Count</th></tr></thead>";
		$maximumReturnedRows = intval($profile1->getMaximumNumberOfReturnedSearchRecords());
		$maximumRowsPerPage = intval($profile1->getMaximumNumberOfDisplayedRowsPerPage());
		$tbodyClosed = true;
		foreach ($messages as $message)	{
			if ($sqlReturnedRowCount > $maximumReturnedRows)	{
				break;
			}
			if ($tbodyClosed && ($sqlReturnedRowCount % $maximumRowsPerPage) == 0)	{
				$table1 .=  "<tbody tbody-index=\"$numberOfTBodies\">"; 
				$numberOfTBodies++;
				$tbodyClosed = false;
			} else if (! $tbodyClosed && ($sqlReturnedRowCount % $maximumRowsPerPage) == 0)	{
				$table1 .= "</tbody><tbody tbody-index=\"$numberOfTBodies\" class=\"ui-sys-hidden\">";
				$numberOfTBodies++;
				$perTbodyCounter = 0;
			}
			//Extract Data 
			$messageId = $message->messageId;
			$to = $message->to;
			$statusGroupId = $message->status->groupId;
			$statusGroupName = $message->status->groupName;
			$statusId = $message->status->id;
			$statusName = $message->status->name;
			$statusDescription = $message->status->description;
			$smsCount = $message->smsCount;
			$pureTableOddClass = "";
			$rowCount = $sqlReturnedRowCount + 1;
			if (($perTbodyCounter % 2) != 0) $pureTableOddClass = "pure-table-odd";
			$table1 .= "<tr class=\"$pureTableOddClass\"><td>$rowCount</td><td>$messageId</td><td>$to</td><td>$statusGroupId</td><td>$statusGroupName</td><td>$statusId</td><td>$statusName</td><td>$statusDescription</td><td>$smsCount</td></tr>";
			$perTbodyCounter++;
			$sqlReturnedRowCount++;
		}//end--for-each-loop
		if (! $tbodyClosed)	{
			$table1 .= "</tbody>";
			$tbodyClosed = true;
		}
		$table1 .= "</table>";
		//Navigation System 
		$table1 .= "<ul class=\"ui-sys-pagination-k\"></ul>";
		$table1 .= "<script type=\"text/javascript\">
			(function(\$)	{
				\$(function()	{
					$('ul.ui-sys-pagination-k').twbsPagination({
						totalPages: $numberOfTBodies,
						visiblePages: 5,
						onPageClick: function (event, page) {
							//page is page number 
							var \$tbodyList1 = $('table.ui-sys-table-search-results-k tbody');
							if (! \$tbodyList1.length) return;
							//Hide All tbody 
							\$tbodyList1.addClass('ui-sys-hidden');
							//Now show only the one corresponding to this page
							\$tbodyList1.eq(page-1).removeClass('ui-sys-hidden');			
						}
					});
				});
			})(jQuery);
				</script>";
		return $table1;
	}
	public final static function sendSMSUsingInfoBipAPI($ch, $username, $password, $postUrl, $messageId, $phoneCollections, $from, $text, $notifyUrl, $notifyContentType, $callbackData)	{
		if (is_null($phoneCollections)) Object::shootException("There were no phone numbers found");
		$mydestinations = array();
		foreach ($phoneCollections as $phonenumber)	{
			$destination = array("messageId"=>$messageId,"to"=>$phonenumber);
			$mydestinations[sizeof($mydestinations)] = $destination;
		}
		$message = array("from"=>$from,
			"destinations"=>$mydestinations,
			"text"=>$text,
			"notifyUrl"=>$notifyUrl,
			"notifyContentType"=>$notifyContentType,
			"callbackData"=>$callbackData);
		$postData = array("messages"=>array($message));
		$postDataJson = json_encode($postData);
		// Executing SMS Sending Algorithm
		$header = array("Content-Type:application/json", "Accept:application/json");
        curl_setopt($ch, CURLOPT_URL, $postUrl);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
        curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
        curl_setopt($ch, CURLOPT_USERPWD, $username . ":" . $password);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 4);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
        curl_setopt($ch, CURLOPT_MAXREDIRS, 2);
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $postDataJson);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
		return curl_exec($ch);
	}
}
class DisplayList {
	//Used to Hold Intents 
	private $intentHolder;
	private $displayName;
	public function __construct()	{
		$this->intentHolder = array();
		$this->displayName = null;
	}
	public function setDisplayName($displayName)	{
		if (! is_null($displayName))	{
			$this->displayName = $displayName;
		}
	}
	public function getDisplayName()	{ return $this->displayName; }
	public function add($intent1)	{
		$this->intentHolder[sizeof($this->intentHolder)] = $intent1;
	}
	public function getIntentAt($index)	{
		$intent1 = null;
		if ($index < sizeof($this->intentHolder))	{
			$intent1 = $this->intentHolder[$index];
		}
		return $intent1;
	}
	public function getAllIntents()	{
		$intentList = $this->intentHolder;
		if (sizeof($this->intentHolder) == 0) $intentList = null;
		return $intentList;
	}
	public function getPositiveIntents()	{
		$intentList = array();
		foreach ($this->intentHolder as $anIntent1)	{
			if ($anIntent1->getExtra('status'))	{
				$intentHolder[sizeof($intentHolder)] = $anIntent1;
			}
		}
		if (sizeof($intentList) == 0) $intentList = null;
		return $intentList;
	}
	public function getNegativeIntents()	{
		$intentList = array();
		foreach ($this->intentHolder as $anIntent1)	{
			if (! $anIntent1->getExtra('status'))	{
				$intentHolder[sizeof($intentHolder)] = $anIntent1;
			}
		}
		if (sizeof($intentList) == 0) $intentList = null;
		return $intentList;
	}
	public function setAllStatus($bln)	{
		foreach ($this->intentHolder as $anIntent1)	{
			$anIntent1->putExtra('status', $bln);
		}
	}
	public function sortDescending()	{
		//every intent should have a sortvalue field 
		$datasize = sizeof($this->intentHolder);
		for ($i=0; $i < (sizeof($this->intentHolder) - 1); $i++)	{
			$swapped = false;
			for ($j =0; $j < (sizeof($this->intentHolder) - 1 - $i); $j++)	{
				$intent1 = $this->intentHolder[$j];
				$intent2 = $this->intentHolder[$j+1];
				if (! is_null($intent1->getExtra('sortvalue')) && ! is_null($intent2->getExtra('sortvalue')))	{
					if (floatval($intent2->getExtra('sortvalue')) > floatval($intent1->getExtra('sortvalue')))	{
						$temp = $this->intentHolder[$j];
						$this->intentHolder[$j] = $this->intentHolder[$j+1];
						$this->intentHolder[$j+1] = $temp;
						$swapped = true;
					}
				}
			}
			if (! $swapped)	break;
		}
	}
	public function sortAscending()	{
		//every intent should have a sortvalue field 
		$datasize = sizeof($this->intentHolder);
		for ($i=0; $i < (sizeof($this->intentHolder) - 1); $i++)	{
			$swapped = false;
			for ($j =0; $j < (sizeof($this->intentHolder) - 1 - $i); $j++)	{
				$intent1 = $this->intentHolder[$j];
				$intent2 = $this->intentHolder[$j+1];
				if (! is_null($intent1->getExtra('sortvalue')) && ! is_null($intent2->getExtra('sortvalue')))	{
					if (floatval($intent1->getExtra('sortvalue')) > floatval($intent2->getExtra('sortvalue')))	{
						$temp = $this->intentHolder[$j];
						$this->intentHolder[$j] = $this->intentHolder[$j+1];
						$this->intentHolder[$j+1] = $temp;
						$swapped = true;
					}
				}
			}
			if (! $swapped) break;
		}
	}
}
class SearchMatrix	{
	//This is a New type of search
	/*
	Each row corresponds to a search keyword
	Columns are as follows
	 col 0 : signs, if words contains NOT or otherwise
	 col 1: reserved for future
	 col 2: reserved for future
	*/
	private $keywords;
	private $keyvalue; //search of the form key=value
	private $matrix;
	private $searchText;
	private $filepath;
	private function init($searchText)	{
		$this->searchText = $searchText;
		// Split original words
		$words = explode(";", $searchText);
		$this->matrix = array(); 
		$this->keyvalue = array();
		$this->keywords = array();
		// we need to check for presence of ! 
		foreach ($words as $word)	{
			$sign = true;
			if (strpos($word, "!") === 0)	{
				//! found
				$word=substr($word, 1);
				$sign = false;
			}
			$wordIndex = "'".$word."'";
			$this->matrix[$wordIndex] = array();
			$this->matrix[$wordIndex][sizeof($this->matrix[$wordIndex])] = $sign; // col 0 sorted
			$this->matrix[$wordIndex][sizeof($this->matrix[$wordIndex])] = true; // col 1 reserved
			$this->matrix[$wordIndex][sizeof($this->matrix[$wordIndex])] = true; // col 2 reserved
			$this->keywords[sizeof($this->keywords)] = $word;
			// Now is keyvalue turn
			$kvs = explode("=", $word);
			if (sizeof($kvs) == 2)	{
				$index = sizeof($this->keyvalue);
				$this->keyvalue[$index] = array();
				$this->keyvalue[$index]['key']=$kvs[0];
				$this->keyvalue[$index]['value']=$kvs[1];
				$this->keyvalue[$index]['keyvalue']=$word;
			}
		}
	}
	public function evaluateResult()	{
		$bln = true;
		foreach ($this->matrix as $amatrix)	{
			$invertedAnd = true;
			$orGate1 = false;
			$sign = $amatrix[0];
			for ($i=3; $i< sizeof($amatrix); $i++)	{
				// start fro pos = 3 onward
				$invertedAnd = $invertedAnd && (! $amatrix[$i]);
				$orGate1 = $orGate1 || $amatrix[$i];
			}
			$lineLogic = (! $sign) && $invertedAnd;
			$lineLogic = $lineLogic || ($sign && $orGate1);
			// combine to overall product
			$bln = $bln && $lineLogic;
			if (! $bln) break;
		}
		return $bln;
	}
	public function setFilepath($filepath)	{
		$this->filepath = $filepath;
	}
	public function getFilepath()	{ return $this->filepath; }
	public function searchText($string1)	{
		foreach ($this->keywords as $aword)	{
			$pos = stripos($string1, $aword);
			if ($pos === false)	{
				$this->append($aword, false);
			} else	{
				$this->append($aword, true);
			}
		}
	}
	public function searchFile($filename)	{
		$path = $this->filepath;
		$filename = $path.$filename;
		if (! file_exists($filename)) return;
		$doc = new DOMDocument(Object::$xmlVersion);
		$doc->load($filename);
		foreach ($this->keyvalue as $kv)	{
			$key = $kv['key'];
			$value = $kv['value'];
			$word = $kv['keyvalue'];
			$node1 = $doc->getElementsByTagName($key);
			if (is_null($node1)) continue;
			$nodeValue = $node1->item(0)->nodeValue;
			if (is_null($nodeValue)) continue;
			if (strtolower($nodeValue) == strtolower($value))	{
				$this->append($word, true);
			} else	{
				$this->append($word, false);
			}
		}
	}
	public function append($keyword, $blnFound)	{
		$keywordIndex = "'".$keyword."'";
		$this->matrix[$keywordIndex][sizeof($this->matrix[$keywordIndex])] = $blnFound; //col > 2
	}
	public function reset()	{ $this->init($this->searchText); }
	public function getKeywords()	{ return $this->keywords; }
	public function getMatrix()	{ return $this->matrix; }
	public function __construct($searchText)	{
		$this->init($searchText);
	}
}
class CSVProcessor	{
	private $searchTextDataArray;
	private $searchTextColumnNameArray;
	private $searchTextSignArray;
	private $searchTextDataSourceArray;
	private $searchTextDataOriginalBlock;
	private $searchTextXMLOnlyDataArray;
	private $objectPropertiesDataArray;
	private $filehandler;
	private $XMLDataPresent;
	public function setXMLDataPresent($value)	{
		$this->XMLDataPresent = (intval($value) == 1);
	}
	public function isXMLDataPresent()	{ return $this->XMLDataPresent; }
	public function evaluateResult()	{
		$bln = true;
		foreach ($this->searchTextDataArray as $index => $val)	{
			//
			//$wordIndex = "'".$index."'";
			$wordIndex = $index;
			//We need to remove the _@32767@_ since this is the last exit function 
			if ($this->objectPropertiesDataArray[$wordIndex] == "_@32767@_") $this->objectPropertiesDataArray[$wordIndex] = "";
			//Founding Logic 
			$logicA = $this->searchTextSignArray[$wordIndex];
			$logicB = ($this->searchTextDataArray[$wordIndex] == "");
			$logicC = (strtolower($this->objectPropertiesDataArray[$wordIndex]) == strtolower($this->searchTextDataArray[$wordIndex]));
			$tempBln = ($logicA && $logicB) || ($logicA && $logicC) || (! $logicA && ! $logicB && ! $logicC); 
			$bln = $bln && $tempBln;
			if (! $bln) break;
		}
		//Hello Now write to file this is a data, You need to use objectPropertiesDataArray if bln=true 
		if ($bln)	{
			//ctd The objectPropertiesDataArray contains data for writing 
			//Nb Arrays Are Organised in the same order the user specified
			$lineToWrite = "";
			foreach ($this->objectPropertiesDataArray as $adata)	{
				$adata = str_replace(",", " ", $adata); //Remove commas in the data
				$lineToWrite .= ",".$adata;
			}
			//Remove the leading comma(,)
			$lineToWrite = substr($lineToWrite, 1)."\n";
			fwrite($this->filehandler, $lineToWrite) or Object::shootException("CSVProcessor -> Could not write $lineToWrite");
		}
		return $bln;
	}
	public function clearData()	{
		//Just Initialize to null
		foreach ($this->objectPropertiesDataArray as $index => $val)	{
			//$wordIndex = "'".$index."'"; 
			$wordIndex = $index;
			$this->objectPropertiesDataArray[$wordIndex] = "_@32767@_";
		}
	}
	public function reload()	{
		$this->clearData();
	}
	private function isColumnInSearchTextData($columnname)	{
		//$wordIndex = "'".$columnname."'";
		$wordIndex=$columnname;
		return isset($this->searchTextDataArray[$wordIndex]);
	}
	public function appendXMLCSVData($doc)	{
		//We need to extract CSV Data From File 
		$list = $this->groupMySourceDataTypeBlockwise("xml");
		if (sizeof($list) == 0) return;
		/*
			My Data Now is in the form of list[namespaceTag][index] = wordIndex 
		*/
		foreach ($list as $namespaceTag => $indexArray)	{
			$pos = 0;
			$dataArray = array(); 
			foreach ($indexArray as $index => $wordIndex)	{
				$nodeName = $this->searchTextColumnNameArray[$wordIndex];
				$nodeValue = $this->searchTextDataArray[$wordIndex];
				if (trim($nodeValue) == "") $nodeValue = "_@32767@_";
				$dataArray[$nodeName] = $nodeValue;
			}
			$resultArray = FileFactory::findResultsWhichMatches($doc, $dataArray, $pos);
			$pos++;
			if (! is_null($resultArray))	{
				//of the form list[nodeName] = nodeValue 
				foreach ($resultArray as $nodeName => $nodeValue)	{
					//Restoring the wordIndex
					$wordIndex = $namespaceTag.".".$nodeName;
					//It has to be set in the objectPropertiesDataArray 
					if (isset($this->objectPropertiesDataArray[$wordIndex]))	{
						$this->objectPropertiesDataArray[$wordIndex] = $nodeValue;
					}
				}
			}
		}
	}
	public function appendCSVData($properties)	{ 
		//Properties should be loaded for each found objects
		//The keypoint here is
		// Any objectPropertiesDataArray which has any value apart from _@32767@_ is suitable for writing
		// If proved the sign is fine
		// Note : This is type db only 
		$tempArr = explode("@", $properties);
		foreach ($tempArr as $aprop)	{
			//field=value 
			$keyAndValue = explode("=", $aprop);
			$key = trim($keyAndValue[0]);
			$value = "";
			if (isset($keyAndValue[1]))	{
				$value = trim($keyAndValue[1]);
				//This value from the properties might contain _kdAt_ and _kdEq_
				//Restore at their original meaning 
				$value = str_replace("_kdAt_", "@", str_replace("_kdEq_", "=", $value));
			}
			//$wordIndex = "'".$key."'";
			$wordIndex = $key;
			//We need to deal with only columns which we are interested with 
			//Check if the key and the value matches 
			if ($this->isColumnInSearchTextData($key))	{
				//$this->objectPropertiesDataArray[$wordIndex] = $value;
				$referenceValue = trim($this->searchTextDataArray[$wordIndex]);
				if (($this->objectPropertiesDataArray[$wordIndex] == "_@32767@_") && ($referenceValue == ""))	{
					// Non Specified so fetch the content 
					// Not Overwrite if existing
					$this->objectPropertiesDataArray[$wordIndex] = $value;
				} else {
					//Since specified value is not empty, it has to match with the one in the object 
					if (strtolower($value) == strtolower($referenceValue))	{
						$this->objectPropertiesDataArray[$wordIndex] = $value;
					}
				}
			}
		}
	}
	public function groupMyDataBlockwise()	{
		//return list[$namespaceTag][i] = wordIndex 
		$list = array();
		foreach ($this->searchTextDataOriginalBlock as $wordIndex => $namespaceTag)	{
			if (! isset($list[$namespaceTag])) $list[$namespaceTag] = array();
			$list[$namespaceTag][sizeof($list[$namespaceTag])] = $wordIndex;
		}
		return $list;
	}
	public function groupMySourceDataTypeBlockwise($dataSourceType)	{
		//return list[$namespaceTag][i] = wordIndex 
		$list = array();
		foreach ($this->searchTextDataOriginalBlock as $wordIndex => $namespaceTag)	{
			if	($this->searchTextDataSourceArray[$wordIndex] == $dataSourceType)	{
				if (! isset($list[$namespaceTag])) $list[$namespaceTag] = array();
				$list[$namespaceTag][sizeof($list[$namespaceTag])] = $wordIndex;
			}
		}
		return $list;
	}
	public function init($searchText, $filehandler)	{ 
		$this->XMLDataPresent = false;
		$this->searchTextDataArray = array(); //From the Formed Search String User scope search
		$this->searchTextColumnNameArray = array();	//Withot namespaceTag ie 1001.flags becomes flags
		$this->searchTextSignArray = array(); //Search Text does not alter User scope search
		$this->searchTextDataSourceArray = array();	//Formed Search Data Source db, xml etc
		$this->searchTextXMLOnlyDataArray = array(); //Hold Only XML Data 
		$this->searchTextDataOriginalBlock = array(); // From namespaceTag , this should be the same per block
		/* Dealing with searchText */
		//We need to intialize the object properties array to null/_@32767@_
		$this->objectPropertiesDataArray = array(); //Object scope
		$tempArr = explode(";", $searchText); 
		$columnsToWrite = "";
		foreach ($tempArr as $asearch)	{
			$keyAndValue = explode("=", $asearch);
			$key = trim($keyAndValue[0]);
			$column = $key;
			$keyTempArr = explode(".", $key);
			$namespaceTag = $keyTempArr[0]; //The leading term
			if (isset($keyTempArr[1]))	$column = $keyTempArr[1];
			$value = "";
			$datasource = "";
			if (sizeof($keyAndValue) > 1)	{
				//Now is value__!__datasource
				$value = trim($keyAndValue[1]);
				$valArr = explode("__!__", $value);
				if (sizeof($valArr) == 2)	{
					$value = $valArr[0];
					$datasource = $valArr[1];
				}
			} else {
				//Need to do key correction 
				//ie 1001.flags__!__xml since value were missing 
				$valArr = explode("__!__", $key);
				if (sizeof($valArr) == 2)	{
					$key = $valArr[0];
					$keyTempArr = explode(".", $key);
					if (isset($keyTempArr[1])) $column = $keyTempArr[1];
					$datasource = $valArr[1];
				}
			}
			$sign = true;
			if (strpos($value, "!") === 0)	{
				//! found
				$value=substr($value, 1); //I think the sign need to be checked on the value and not key
				$sign = false;
			}
			//$wordIndex = "'".$key."'";
			$wordIndex = $key;
			$this->searchTextDataArray[$wordIndex] = $value;
			$this->searchTextColumnNameArray[$wordIndex] = $column;
			$this->searchTextSignArray[$wordIndex] = $sign;
			$this->searchTextDataSourceArray[$wordIndex] = $datasource;
			$this->searchTextDataOriginalBlock[$wordIndex] = $namespaceTag; 
			if ($datasource == "xml") $this->searchTextXMLOnlyDataArray[$wordIndex] = $value;
			$this->objectPropertiesDataArray[$wordIndex] = "_@32767@_";
			//Every key represents a columnName 
			$columnsToWrite .= ",".$key;
		}
		$this->filehandler = $filehandler;
		$columnsToWrite = substr($columnsToWrite, 1)."\n"; //Remove the leading comma(,)
		fwrite($this->filehandler, $columnsToWrite) or Object::shootException("CSVProcessor -> Could not write headers");
	}
	public function __construct($searchText, $filehandler)	{
		$this->init($searchText, $filehandler);
	}
	public function __destruct()	{
		/*Compiled by Ndimangwa Fadhili Ngoya*/
	}
}
class ViawableColumnsDigestor	{
	private $classlist;
	private $propertylist;
	public function getClassList()	{ return $this->classlist; }
	public function getColumnStructure()	{
		/*
		Return arr['classname']['propertyname'] = propertype
		*/
		return $this->propertylist;
	}
	public function __constuct($line)	{
		$this->classlist = array();
		$this->propertylist = array();
		//Input @classname/prop1,type1;prop2,type2....;propn,typen@classname/prop1,type1...;typen,typen...@classname/..
		$arrayOfClasses = explode("@", $line);  
		foreach ($arrayOfClasses as $ln)	{
			//classname/prop1,type1;prop2,type2...;propn,typen 
			$classAndProperties = explode("/",$ln); //Index 0 = classname; Index 1 = prop1,type1;prop2,type2----;propn,typen
			if (sizeof($classAndProperties) != 2) Object::shootException('Class List (1) Not well formed');
			$classname = $classAndProperties[0];
			$argumentList = $classAndProperties[1];
			$classsize = sizeof($this->classlist);
			$this->classlist[$classsize] = $classname;
			$classText = "'".$classname."'";
			//Dealing with Arguments 
			$propertyType = explode(";", $argumentList);
			$this->propertylist[$classText] = array();
			foreach ($propertyType as $pt)	{
				//pt is prop1,type1
				$ptArr = explode(",", $pt);
				if (sizeof($ptArr) != 2) Object::shootException("Class List (2) Not well formed");
				$property1 = $ptArr[0];
				$type1 = $ptArr[1];
				$propertyText = "'".$property1."'";
				$this->propertylist[$classText][$propertyText] = $type1;
			}
		} //foreach
	} //construct ends here
}
class Date	extends Object {
	private $year;
	private $month;
	private $day;
	private $hour;
	private $minute;
	private $second;
	private $dateValue;
	private $dateTimeString;
	private $positive;
	public function setPositive($positive)	{
		$this->positive = $positive;
	}
	public function isPositive()	{ return $this->positive; }
	final public static function getCurrentDateAndTime($profile1)	{
		$timezone="Africa/Dar_es_Salaam";
		if (! is_null($profile1->getPHPTimezone())) $timezone = $profile1->getPHPTimezone()->getZoneName();
		date_default_timezone_set($timezone);
		return date("Y:m:d:H:i:s");
	}
	public function getDayOfAWeekOffsetValue($profile1)	{
		$timezone="Africa/Dar_es_Salaam";
		if (! is_null($profile1->getPHPTimezone())) $timezone = $profile1->getPHPTimezone()->getZoneName();
		date_default_timezone_set($timezone);
		$dtString1 = $this->year;
		$dtString1 .= "-".$this->month;
		$dtString1 .= "-".$this->day;
		//Format 2011-11-28
		return date("w", strtotime($dtString1));
	}
	public function synchronize()	{
		$string = $this->year;
		$string .= ":".$this->month;
		$string .= ":".$this->day;
		$string .= ":".$this->hour;
		$string .= ":".$this->minute;
		$string .= ":".$this->second;
		$this->dateTimeString = $string;
	}
	public function __construct($datetime)	{
		/* Format yyyy:mm:dd:hh:mm:ss */
		$this->setDateAndTime($datetime);
	}
	public function setDateAndTime($datetime)	{
		$dt = explode(":", $datetime);
		if (sizeof($dt) != 6) {
			$this->year = "-1";
			$this->month = "-1";
			$this->day = "-1";
			$this->hour = "-1";
			$this->minute = "-1";
			$this->second = "-1";
			$this->dateValue = array();
			$this->dateTimeString=$datetime;
			return;
		}
		$this->year = $dt[0];
		$this->month = $dt[1];
		$this->day = $dt[2];
		$this->hour = $dt[3];
		$this->minute = $dt[4];
		$this->second = $dt[5];
		$this->dateValue = $dt;
		$this->dateTimeString=$datetime;
	}
	protected function setMe($database, $id, $conn)	{}
	public function cloneMe($updateDataArray)	{ return -1; }
	public function reload()	{}
	public function getClassName()	{ return "Date"; }
	protected function getAdvancedProperties()	{ return $this->getProperties();}
	protected function getProperties()	{ return "@year=$this->year@month=$this->month@day=$this->day@hour=$this->hour@minute=$this->minute@second=$this->second"; }
	public function getDateAndTimeString()	{ return $this->dateTimeString; }
	public function debug()	{
		
	}
	public function searchMatrix($matrix1)	{
		$string1 = $this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	public function commitUpdate()	{}
	public function commitDelete()	{}
	public function getYear()	{ return $this->year; }
	public function getYearInTwoDigitsOnly()	{
		if (! is_numeric($this->year)) return 0;
		$twoDigitsOnly = "".(intval($this->year) % 100);
		for ($i = strlen($twoDigitsOnly); $i < 2; $i++) $twoDigitsOnly = "0".$twoDigitsOnly;
		return $twoDigitsOnly;
	}
	public function getMonth()	{ return $this->month; }
	public function getDay()	{ return $this->day; }
	public function getHour()	{ return $this->hour; }
	public function getMinute()	{ return $this->minute; }
	public function getSecond()	{ return $this->second; }
	public function getDateAndTimeValue()	{ return $this->dateValue; }
	public function compareDateAndTime($date1)	{
		/*
			Return -1 if this date is less than $date1
			Return 0 if this date is equal to $date1
			Return 1 if this date is greater than $date1
		*/
		$cmp = 0;
		$dt1 = $this->getDateAndTimeValue();
		$dt2 = $date1->getDateAndTimeValue();
		for ($i=0; ($i<sizeof($dt1))||($i<sizeof($dt2)); $i++)	{
			if (! (is_numeric($dt1[$i]) && is_numeric($dt2[$i]))) continue;
			if (intval($dt1[$i]) < intval($dt2[$i]))	{
				$cmp = -1; break;
			} else if (intval($dt1[$i]) > intval($dt2[$i]))	{
				$cmp = 1; break;
			}
		}
		return $cmp;
	}
	public function dateDifference($__date)	{
		/*  
			if this date is less than date1 then 
			We assume this date is ahead of the reference date
		*/
		$date1 = $this;
		$date2 = $__date;
		$positive = true;
		if ($date1->compareDateAndTime($date2) < 0)	{
			$positive = false;
			$date1 = $__date;
			$date2 = $this;
		}
		$yearComplement = 9999;
		$monthComplement = 11; //0-11 month, 0-30 days setup 31 days default
		$dayComplement = 30;
		$hourComplement = 23;
		$minuteComplement = 59;
		$secondComplement = 59;
		//Complement - date2 , we need to adjust month and date one value less 
		$yearDiff = $yearComplement - intval($date2->getYear());
		$monthDiff = $monthComplement - (intval($date2->getMonth()) - 1);
		$dayDiff = $dayComplement - (intval($date2->getDay()) - 1);
		$hourDiff = $hourComplement - intval($date2->getHour());
		$minuteDiff = $minuteComplement - intval($date2->getMinute());
		$secondDiff = $secondComplement - intval($date2->getSecond());
		//Add diff to date1 , date 1 should be adjusted too 
		//Since this was a complement addition, we need to add 1
		$yearDiff = 1 + $yearDiff + intval($date1->getYear());
		$monthDiff = 1 + $monthDiff + (intval($date1->getMonth()) - 1);
		$dayDiff = 1 + $dayDiff + (intval($date1->getDay()) - 1);
		$hourDiff = 1 + $hourDiff + intval($date1->getHour());
		$minuteDiff = 1+ $minuteDiff + intval($date1->getMinute());
		$secondDiff = 1+ $secondDiff + intval($date1->getSecond());
		//Difference correction and take over marker, working right to left 
		$markMinute = false;
		$markHour = false;
		$markDay = false;
		$markMonth = false;
		$markYear = false;
		if ($secondDiff >= ($secondComplement + 1))	{
			$secondDiff = $secondDiff - ($secondComplement + 1);
		} else {
			$markMinute = true; //We have alredy borrowed
		}
		if ($minuteDiff >= ($minuteComplement + 1))	{
			$minuteDiff = $minuteDiff - ($minuteComplement + 1);
		} else {
			$markHour = true; //We have alredy borrowed
		}
		if ($hourDiff >= ($hourComplement + 1))	{
			$hourDiff = $hourDiff - ($hourComplement + 1);
		} else {
			$markDay = true; //We have alredy borrowed
		}
		if ($dayDiff >= ($dayComplement + 1))	{
			$dayDiff = $dayDiff - ($dayComplement + 1);
		} else {
			$markMonth = true; //We have alredy borrowed
		}
		if ($monthDiff >= ($monthComplement + 1))	{
			$monthDiff = $monthDiff - ($monthComplement + 1);
		} else {
			$markYear = true; //We have alredy borrowed
		}
		if ($yearDiff >= ($yearComplement + 1))	{
			$yearDiff = $yearDiff - ($yearComplement + 1);
		}
		//We have already add marks and adjusted
		if ($markMinute)	{			
			$minuteDiff = $minuteComplement + $minuteDiff; //same as substract one 
			if ($minuteDiff >= ($minuteComplement + 1)) { $minuteDiff = $minuteDiff - ($minuteComplement + 1); }
			//Transitive borrow 
			if ($date1->getMinute() == $date2->getMinute())	{ $markHour = true; }
		}
		if ($markHour)	{			
			$hourDiff = $hourComplement + $hourDiff; //same as substract one 
			if ($hourDiff >= ($hourComplement + 1)) { $hourDiff = $hourDiff - ($hourComplement + 1); }
			//Transitive borrow 
			if ($date1->getHour() == $date2->getHour())	{ $markDay = true; }
		}
		if ($markDay)	{			
			$dayDiff = $dayComplement + $dayDiff; //same as substract one 
			if ($dayDiff >= ($dayComplement + 1)) { $dayDiff = $dayDiff - ($dayComplement + 1); }
			//Transitive borrow 
			if ($date1->getDay() == $date2->getDay()) { $markMonth = true; }
		}
		if ($markMonth)	{
			$monthDiff = $monthComplement + $monthDiff; //same as substract one 
			if ($monthDiff >= ($monthComplement + 1)) { $monthDiff = $monthDiff - ($monthComplement + 1); }
			//Transitive borrow 
			if ($date1->getMonth() == $date2->getMonth())	{ $markYear = true; }
		}
		if ($markYear)	{
			$yearDiff = $yearComplement + $yearDiff; //same as substract one 
			if ($yearDiff >= ($yearComplement + 1)) { $yearDiff = $yearDiff - ($yearComplement + 1); }
		}
		//No need to adjust anything because this is just a difference 
		$dateString = $yearDiff.":".$monthDiff.":".$dayDiff.":".$hourDiff.":".$minuteDiff.":".$secondDiff;
		$mydate = new Date($dateString);
		$mydate->setPositive($positive);
		return $mydate;
	}
	public function inDateAndTimeRange($date1, $date2)	{
		return ($this->compareDateAndTime($date1) > 0) && ($this->compareDateAndTime($date2) < 0);
	}
	public function inDateAndTimeRangeInclude($date1, $date2)	{
		return ($this->compareDateAndTime($date1) >= 0) && ($this->compareDateAndTime($date2) <= 0);
	}
	public function getTimeHeight()	{
		return (intval($this->minute) + 60 * intval($this->hour));
	}
}
class DateAndTime extends Date	{
	private $extraFilter;
	public function setExtraFilter($extraFilter) { $this->extraFilter = $extraFilter; }
	public function getExtraFilter()	{ return $this->extraFilter; }
	public function synchronize()	{
		$string = $this->year;
		$string .= ":".$this->month;
		$string .= ":".$this->day;
		$string .= ":".$this->hour;
		$string .= ":".$this->minute;
		$string .= ":".$this->second;
		$this->dateTimeString = $string;
	}
	public function updateDateAndTimeFromBiometric($dateAndTime)	{
		//INPUT : mm/dd/yyyy hh:mm 
		$dateAndTime = trim($dateAndTime);
		$dtArr1 = explode(" ",$dateAndTime);
		if (sizeof($dtArr1) != 2) Object::shootException("Invalid Date and Time format");
		$dateSection1 = trim($dtArr1[0]);
		$timeSection1 = trim($dtArr1[1]);
		//Dealing with date section 
		$dateArr1 = explode("/", $dateSection1);
		if (sizeof($dateArr1) != 3) Object::shootException("Invalid Date Format");
		$month = $dateArr1[0];
		$day = $dateArr1[1];
		$year = $dateArr1[2];
		//Dealing with Time 
		$timeArr1 = explode(":", $timeSection1);
		if (sizeof($timeArr1) < 2) Object::shootException("Invalid Time Format");
		$hour = $timeArr1[0];
		$minute = $timeArr1[1];
		$second = 0;
		if (isset($timeArr1[2])) $second = $timeArr1[2];
		$dateAndTimeString = $year.":".$month.":".$day.":".$hour.":".$minute.":".$second;
		return (new DateAndTime("Ndimangwa", $dateAndTimeString, "Fadhili"));
	}
	public function getDateOnly()	{
		return $this->getYear().":".$this->getMonth().":".$this->getDay();
	}
	public final static function getAvailableViewableColumns()	{	
		$lineToView = "@DateAndTime/year,text,k100;month,text,k100;day,text,k100;hour,text,k100;minute,text,k100;second,text,k100;dateTimeValue,text,k100;dateTimeString,text,k100";
		return $lineToView;
	}
	public final static function isTimeRangeOverlap($time1, $time2, $timea, $timeb)	{
		//Range 1 : time1 .... time2 
		//Range 2 : timea .... timeb 
		return ($timea->inDateAndTimeRangeInclude($time1, $time2) || $timeb->inDateAndTimeRangeInclude($time1, $time2) || $time1->inDateAndTimeRangeInclude($timea, $timeb) || $time2->inDateAndTimeRangeInclude($timea, $timeb));
	}
	public final static function convertFromSystemDateAndTimeFormatToTimeOnlyFormat($__time)	{
		$tArr = explode(":", $__time);
		if (sizeof($tArr) == 6)	{
			$__time = $tArr[3].":".$tArr[4].":".$tArr[5];
		}
		return $__time;
	}
	public final static function convertFromGUIDateAndTimeFormatToSystemDateAndTimeFormat($__date, $__time)	{
		$dtArr = explode("/", $__date);
		$dtString = intval($dtArr[2]).":".intval($dtArr[1]).":".intval($dtArr[0]);
		$__time = explode(":", $__time);
		$tmString = ":00:00:00";
		if (sizeof($__time) == 2)	{
			$tmString = ":".trim($__time[0]);
			$tmString .= ":".trim($__time[1]);
			$tmString .= ":00";
		}
		return $dtString.$tmString;
	}
	public final static function convertFromGUIDateFormatToSystemDateAndTimeFormat($__date)	{
		$dtArr = explode("/", $__date);
		$dtString = intval($dtArr[2]).":".intval($dtArr[1]).":".intval($dtArr[0]).":00:00:00";
		return $dtString;
	}
	public final static function convertFromSystemDateAndTimeFormatToGUIDateAndTimeFormat($__date)	{
		$list = array();
		$list['date'] = self::convertFromSystemDateAndTimeFormatToGUIDateFormat($__date);
		$list['time'] = self::convertFromSystemDateAndTimeFormatToGUITimeFormat($__date);
		return $list;
	}
	public final static function convertFromSystemDateAndTimeFormatToGUIDateFormat($__date)	{
		$dtArr = explode(":", $__date);
		//System::convertIntegerToStringOfAGivenLength($__data, $__len)
		$dtString = System::convertIntegerToStringOfAGivenLength($dtArr[2], 2)."/".System::convertIntegerToStringOfAGivenLength($dtArr[1], 2)."/".System::convertIntegerToStringOfAGivenLength($dtArr[0], 4);
		return $dtString;
	}
	public final static function convertFromSystemDateAndTimeFormatToGUITimeFormat($__date)	{
		$dtArr = explode(":", $__date);
		$dtString = System::convertIntegerToStringOfAGivenLength($dtArr[3], 2)." : ".System::convertIntegerToStringOfAGivenLength($dtArr[4], 2);
		return $dtString;
	}
	public final static function convertFromDateTimeObjectToGUIDateFormat($dateObject1)	{
		return self::convertFromSystemDateAndTimeFormatToGUIDateFormat($dateObject1->getDateAndTimeString());
	}
	public function __construct($emptydatabase, $date, $emptyconn)	{
		parent::__construct($date);
	}
	//Overriding function 
	public function getClassName()	{ return "DateAndDate"; }
}
class System {
	/*Begin The following functions have been added at this place simply because we do not know where to add them*/
	public final static function getClientIPAddress()	{
		if( isset($_SERVER['HTTP_X_FORWARDED_FOR']) && $_SERVER['HTTP_X_FORWARDED_FOR'] != '' ){
			$client_ip =
				( !empty($_SERVER['REMOTE_ADDR']) ) ?
					$_SERVER['REMOTE_ADDR']
						:
					( ( !empty($_ENV['REMOTE_ADDR']) ) ?
						$_ENV['REMOTE_ADDR']
							:
						"unknown" );
 
			$entries = split('[, ]', $_SERVER['HTTP_X_FORWARDED_FOR']);
			reset($entries);
			while (list(, $entry) = each($entries)){
				$entry = trim($entry);
				if ( preg_match("/^([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)/", $entry, $ip_list) ){
					// http://www.faqs.org/rfcs/rfc1918.html
					$private_ip = array(
						'/^0\./',
						'/^127\.0\.0\.1/',
						'/^192\.168\..*/',
						'/^172\.((1[6-9])|(2[0-9])|(3[0-1]))\..*/',
						'/^10\..*/');
 
					$found_ip = preg_replace($private_ip, $client_ip, $ip_list[1]);
 
					if ($client_ip != $found_ip){
						$client_ip = $found_ip;
						break;
					}
				}
			}
		} else {
			$client_ip =
				( !empty($_SERVER['REMOTE_ADDR']) ) ?
					$_SERVER['REMOTE_ADDR']
						:
					( ( !empty($_ENV['REMOTE_ADDR']) ) ?
						$_ENV['REMOTE_ADDR']
							:
						"unknown" );
		}
		return $client_ip;
	}
	public final static function isSystemSSLTLSCertificateVerificationSuccessful($profile1)	{
		$logic_A = $profile1->isSecureConnectionRequired();
		$logic_B = $profile1->isStrictSecureConnectionRequired();
		$logic_C = System::isSecureConnection();
		$network1 = new Network($profile1->getServerIPAddress(), $profile1->getLocalAreaNetworkMask());
		$clientIPAddress = self::getClientIPAddress();
		$logic_D = ($clientIPAddress == "127.0.0.1") || $network1->isThisIpAddressBelongToMyNetwork($clientIPAddress);
		$bln = true;
		if (($logic_A && ! $logic_C && ! $logic_D) || ($logic_A && $logic_B && ! $logic_C))	{
			$bln = false; //Need Redirection
		} else if ((! $logic_A && $logic_C) || (! $logic_B && $logic_C && $logic_D))	{
			$bln = false; //Need Redirection
		}
		return $bln;
	}
	public final static function systemSSLTLSCertificateVerification($profile1)	{
		$logic_A = $profile1->isSecureConnectionRequired();
		$logic_B = $profile1->isStrictSecureConnectionRequired();
		$logic_C = System::isSecureConnection();
		$network1 = new Network($profile1->getServerIPAddress(), $profile1->getLocalAreaNetworkMask());
		$clientIPAddress = self::getClientIPAddress();
		$logic_D = ($clientIPAddress == "127.0.0.1") || $network1->isThisIpAddressBelongToMyNetwork($clientIPAddress);
		if (($logic_A && ! $logic_C && ! $logic_D) || ($logic_A && $logic_B && ! $logic_C))	{
			self::secureConnectionRedirection();
		} else if ((! $logic_A && $logic_C) || (! $logic_B && $logic_C && $logic_D))	{
			self::insecureConnectionRedirection();
		}
	}
	public final static function isSecureConnection()	{
		return (
			(!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off')
		|| 	$_SERVER['SERVER_PORT'] == 443
		|| (
				(!empty($_SERVER['HTTP_X_FORWARDED_PROTO']) && $_SERVER['HTTP_X_FORWARDED_PROTO'] == 'https')
			|| 	(!empty($_SERVER['HTTP_X_FORWARDED_SSL'])   && $_SERVER['HTTP_X_FORWARDED_SSL'] == 'on')
			)
		);
	}
	public final static function secureConnectionRedirection()	{
		header('Location: https://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'], true, 301);
        exit;
	}
	public final static function insecureConnectionRedirection()	{
		header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'], true, 301);
        exit;
	}
	public final static function getPhonesForMembers($database, $conn, $profile1, $groupArr, $jobArr, $usernameList)	{
		$collection1 = new Collection();
		//Check with Group
		if (! is_null($groupArr))	{
			foreach ($groupArr as $groupId)	{
				$collection1 = $collection1->addList(Group::getPhonesForMembers($database, $conn, $groupId, null, $profile1));
			} 
		}
		//Check with Job Title 
		if (! is_null($jobArr))	{
			foreach ($jobArr as $jobId)	{
				$collection1 = $collection1->addList(JobTitle::getPhonesForMembers($database, $conn, $jobId, $profile1));
			}
		}
		//Check with usernameList 
		if (! is_null($usernameList))	{
			$usernameArr = explode(",", $usernameList);
			foreach ($usernameArr as $username)	{
				$username = trim(strtolower($username));
				$phone = Login::getPhoneForMember($database, $conn, $username, $profile1);
				if (! is_null($phone)) $collection1 = $collection1->addItem($phone);
			}
		}
		$collection1 = $collection1->makeUnique();
		return $collection1;
	}
	public final static function getEmailsForMembers($database, $conn, $groupArr, $jobArr, $usernameList)	{
		$collection1 = new Collection();
		//Check with Group
		if (! is_null($groupArr))	{
			foreach ($groupArr as $groupId)	{
				$collection1 = $collection1->addList(Group::getEmailsForMembers($database, $conn, $groupId, null));
			} 
		}
		//Check with Job Title 
		if (! is_null($jobArr))	{
			foreach ($jobArr as $jobId)	{
				$collection1 = $collection1->addList(JobTitle::getEmailsForMembers($database, $conn, $jobId));
			}
		}
		//Check with usernameList 
		if (! is_null($usernameList))	{
			$usernameArr = explode(",", $usernameList);
			foreach ($usernameArr as $username)	{
				$username = trim(strtolower($username));
				$email = Login::getEmailForMember($database, $conn, $username);
				if (! is_null($email)) $collection1 = $collection1->addItem($email);
			}
		}
		$collection1 = $collection1->makeUnique();
		return $collection1;
	}
	/*End The following functions have been added at this place simply because we do not know where to add them*/
	public final static function getAStandardMobileFormat($phone, $profile1)	{
		$len = strlen($phone);
		if ($len >= 9)	{
			//Last Digit 
			$phone = substr($phone, $len-9, 9); //Last Characters ie 787101808
			$code = "255"; //Default TZ 
			if (! is_null($profile1->getCountry()))	$code = $profile1->getCountry()->getCode();
			$phone = $code.$phone;
		}
		return $phone;
	}
	public final static function getCummulativeSemester($year, $semester, $profile1)	{
		//Profile carries numberOfSemestersPerYear 
		return (intval($profile1->getNumberOfSemestersPerYear()) * (intval($year) -1) + intval($semester));
	}
	public final static function getYearAndSemesterFromACummulativeSemester($cummulativeSemester, $profile1)	{
		$list1 = null;
		$cummulativeSemester = intval("".$cummulativeSemester);
		$isAlreadyFound = false;
		for ($year = 1; $year <= $cummulativeSemester; $year++)	{ /* Ofcourse a year can not exceed value of cummulative Semester */
			$maxNumberOfSemesters = intval($profile1->getNumberOfSemestersPerYear());
			for ($semester = 1; $semester <= $maxNumberOfSemesters; $semester++)	{
				$currentCummulativeSemester = self::getCummulativeSemester($year, $semester, $profile1);
				if ($currentCummulativeSemester == $cummulativeSemester)	{
					$list1 = array();
					$list1['year'] = $year;
					$list1['semester'] = $semester;
					$isAlreadyFound = true;
					break;
				}
			}
			if ($isAlreadyFound) break;
		}
		return $list1;
	}
	public final static function scriptNumberAdjustment($dayOfAMonth)	{
		$dayOfAMonth = intval($dayOfAMonth);
		$superscript = "<sup>th</sup>";
		if (($dayOfAMonth % 10) == 1)	{
			$superscript = "<sup>st</sup>";
		} else if (($dayOfAMonth % 10) == 2)	{
			$superscript = "<sup>nd</sup>";
		} else if (($dayOfAMonth % 10) == 3)	{
			$superscript = "<sup>rd</sup>";
		}
		return $dayOfAMonth.$superscript;
	}
	public final static function dayOfAMonthValueAdjustment($dayOfAMonth)	{
		return self::scriptNumberAdjustment($dayOfAMonth);
	}
	public final static function numberWidthCorrection($number, $width)	{
		$number = "".$number;
		$width = intval($width);
		for ($i = strlen($number); $i < $width; $i++) $number = "0".$number;
		return $number;
	}
	public final static function convertToTelephoneFormat($telno)	{
		$tno = $telno;
		$len = strlen($tno);
		$tarr = array();
		while ($len > 0)	{
			if ($len > 3)	{
				$tarr[sizeof($tarr)] = substr($tno, $len - 3, 3);
				$tno = substr($tno, 0, $len-3);
			} else	{
				$tarr[sizeof($tarr)] = $tno;
				$tno = ""; //Just to make sure the loop terminate
			}
			$len = strlen($tno);
		} //end-of-while-loop
		$telno = $tarr[0];
		for ($i=1; $i < sizeof($tarr) - 1; $i++)	{
			$telno = $tarr[$i]."-".$telno;
		}
		$tdata = $tarr[sizeof($tarr)-1];
		if (strlen($tdata) == 1)	{
			$telno = $tdata.$telno;
		} else	{
			$telno = $tdata."-".$telno;
		}
		return $telno;
	}
	public final static function getCodeString($codeLength)	{
		 $lk[1] = "A"; $lk[2] = "B"; $lk[3] = "C"; $lk[4] = "D";
        $lk[5] = "E"; $lk[6] = "F"; $lk[7] = "G"; $lk[8] = "H";
        $lk[9] = "I"; $lk[10] = "J"; $lk[11] = "K"; $lk[12] = "L";
        $lk[13] = "M"; $lk[14] = "N"; $lk[15] = "O"; $lk[16] = "P";
        $lk[17] = "Q"; $lk[18] = "R"; $lk[19] = "S"; $lk[20] = "T";
        $lk[21] = "U"; $lk[22] = "V"; $lk[23] = "W"; $lk[24] = "X";
        $lk[25] = "Y" ; $lk[26] = "Z";
        $lk[27] = "0"; $lk[28] = "1"; $lk[29] = "2"; $lk[30] = "3";
        $lk[31] = "4"; $lk[32] = "5"; $lk[33] = "6"; $lk[34] = "7";
        $lk[35] = "8"; $lk[36] = "9";
        $lk[37] = "a"; $lk[38] = "b"; $lk[39] = "c"; $lk[40] = "d";
        $lk[41] = "e"; $lk[42] = "f"; $lk[43] = "g"; $lk[44] = "h";
        $lk[45] = "i"; $lk[46] = "j"; $lk[47] = "k"; $lk[48] = "l";
        $lk[49] = "m"; $lk[50] = "n"; $lk[51] = "o"; $lk[52] = "p";
        $lk[53] = "q"; $lk[54] = "r"; $lk[55] = "s"; $lk[56] = "t";
        $lk[57] = "u"; $lk[58] = "v"; $lk[59] = "w"; $lk[60] = "x";
        $lk[61] = "y"; $lk[62] = "z";
		$codeLength = intval($codeLength);
        $code = "";
        for ($i = 0; $i < $codeLength; $i++)      {
                $code = $code.$lk[rand(1, 62)];
        }
        return $code;
	}
	public final static function convertIntegerToStringOfAGivenLength($__data, $__len)	{
		$__data = "".$__data; //toString 
		$tempVal = $__data;
		for ($i=strlen($__data); $i < $__len; $i++) $tempVal = "0".$tempVal;
		return $tempVal;
	}
}
class Network {
	private $ipAddress;
	private $subnetMask;
	private $networkAddress;
	private $broadcastAddress;
	private $numberOfHost;
	public final static function convertASingleBlockToBitString($blockNumber)	{
		//192 
		$blockNumber = intval("".$blockNumber);
		if (($blockNumber < 0) || ($blockNumber > 255)) return null;
		$octet = "";
		while ($blockNumber >= 1)	{
			$octet = ($blockNumber % 2).$octet."";
			$blockNumber = $blockNumber / 2;
		}
		for ($i=strlen($octet); $i < 8; $i++)	$octet = "0".$octet;
		return $octet;
	}
	public final static function convertABitStringBlockToNumber($bitString)	{
		//To speed up prepare a lookup table 
		$positionArray1 = array();
		$positionArray1[0] = 128;
		$positionArray1[1] = 64;
		$positionArray1[2] = 32;
		$positionArray1[3] = 16;
		$positionArray1[4] = 8;
		$positionArray1[5] = 4;
		$positionArray1[6] = 2;
		$positionArray1[7] = 1;
		if (strlen($bitString) != 8) return null;
		$number = 0;
		for ($i = 0; $i < 8; $i++)	{
			if (intval(substr($bitString, $i, 1)) == 1)	$number = $number + $positionArray1[$i];
		}
		return $number;
	}
	public final static function convertIpAddressToBitString($ipAddress)	{
		//Input 192.168.0.1 
		//Output 1100000001000000002000010
		$ipAddressArr = explode(".", $ipAddress);
		if (sizeof($ipAddressArr) != 4) return null;
		$bitString = "";
		foreach ($ipAddressArr as $ip)	{
			$octet = self::convertASingleBlockToBitString($ip);
			if (! is_null($octet))	{
				$bitString = $bitString.$octet;
			} else {
				$bitString = null;
				break;
			}
		}
		return $bitString;
	}
	public final static function convertBitStringToIpAddress($bitString)	{
		if (strlen($bitString) != 32) return null;
		$ipAddress = "";
		$block1 = substr($bitString, 0, 8);
		$ipAddress = self::convertABitStringBlockToNumber($block1);
		$block1 = substr($bitString, 8, 8);
		$ipAddress = $ipAddress.".".self::convertABitStringBlockToNumber($block1);
		$block1 = substr($bitString, 16, 8);
		$ipAddress = $ipAddress.".".self::convertABitStringBlockToNumber($block1);
		$block1 = substr($bitString, 24, 8);
		$ipAddress = $ipAddress.".".self::convertABitStringBlockToNumber($block1);
		return $ipAddress;
	}	
	public final static function isValidIpAddress($ipAddress)	{
		$ipAddressArr = explode(".", $ipAddress);
		if (sizeof($ipAddressArr) != 4) return false;
		$validIp = true;
		foreach ($ipAddressArr as $block1)	{
			$block1 = intval($block1);
			if (! ($block1 >= 0 && $block1 <= 255)) {
				$validIp = false;
				break;
			}
		}
		return $validIp;
	}
	public final static function isValidSubnetMask($netmask)	{
		if (! self::isValidIpAddress($netmask)) return false;
		$bitString = self::convertIpAddressToBitString($netmask);
		if (is_null($bitString)) return false;
		$bitLength = strlen($bitString);
		$validMask = true;
		$state = 0;
		for ($i=0; $i < $bitLength; $i++)	{
			//Fill Transition states only
			if (($state == 0) && (intval(substr($bitString, $i, 1)) == 0)) {
				$state = 1; 
				continue;
			}
			if (($state == 1) && (intval(substr($bitString, $i, 1)) == 1)) {
				$state = 2; //Error State 
				$validMask = false;
				break;
			}
		}
		return $validMask;
	}
	public final static function calculateBroadcastAddress($ipAddress, $subnetMask)	{
		//To be used by Object only, we assume ip and its subnet mask are valid 
		$ipBits = self::convertIpAddressToBitString($ipAddress);
		if (is_null($ipBits)) Object::shootException("A Problem During Conversion");
		$netBits = self::convertIpAddressToBitString($subnetMask);
		if (is_null($netBits)) Object::shootException("A Problem During Conversion");
		$bitLength = strlen($ipBits);
		$networkBits = "";
		for ($i=0; $i < $bitLength; $i++)	{
			$val1 = intval(substr($ipBits, $i, 1));
			$val2 = intval(substr($netBits, $i, 1));
			$bit = 1;
			if ($val2 > $val1) $bit = 0;
			$networkBits .= $bit;
		}
		//convert back to Ip Address 
		return self::convertBitStringToIpAddress($networkBits);
	}
	public final static function calculateNetworkAddress($ipAddress, $subnetMask)	{
		//To be used by Object only, we assume ip and its subnet mask are valid 
		$ipBits = self::convertIpAddressToBitString($ipAddress);
		if (is_null($ipBits)) Object::shootException("A Problem During Conversion");
		$netBits = self::convertIpAddressToBitString($subnetMask);
		if (is_null($netBits)) Object::shootException("A Problem During Conversion");
		$bitLength = strlen($ipBits);
		$networkBits = "";
		for ($i=0; $i < $bitLength; $i++)	{
			$networkBits .= intval(substr($ipBits, $i, 1)) * intval(substr($netBits, $i, 1));
		}
		//convert back to Ip Address 
		return self::convertBitStringToIpAddress($networkBits);
	}
	public function isThisIpAddressBelongToMyNetwork($ipAddress)	{
		if (! Network::isValidIpAddress($ipAddress)) return false;
		$networkAddress = Network::calculateNetworkAddress($ipAddress, $this->subnetMask);
		return (strcmp($this->networkAddress, $networkAddress) == 0);
	}
	public function __construct($ipAddress, $subnetMask)	{
		if (! Network::isValidIpAddress($ipAddress)) Object::shootException("Network, IP Address is not valid");
		if (! Network::isValidSubnetMask($subnetMask)) Object::shootException("Network, Subnet Mask not valid");
		$this->ipAddress = $ipAddress;
		$this->subnetMask = $subnetMask;
		$this->networkAddress = Network::calculateNetworkAddress($ipAddress, $subnetMask);
		$this->broadcastAddress = Network::calculateBroadcastAddress($ipAddress, $subnetMask);
	}
	public function getIpAddress()	{ return $this->ipAddress; }
	public function getSubnetMask()	{ return $this->subnetMask; }
	public function getNetworkAddress()	{ return $this->networkAddress; }
	public function getBroadcastAddress()	{ return $this->broadcastAddress; }
	public function getNumberOfHost()	{ return $this->numberOfHost; }
	public function isAddressInThisNetwork($ipAddress)	{
		return true;
	}
}
class Color {
	public static final function convertFromGUIFormatToDbFormat($color)	{
		//INPUT #ffffff ; OUTPUT ffffff
		if ($color == "") return "";
		if (strpos($color, "#") === false)	{
			//Do Nothing
		} else {
			$color = substr($color, 1);
		}
		return $color;
	}
	public static final function convertFromDbFormatToGUIFormat($color)	{
		if ($color == "") return "";
		//INPUT ffffff ; OUTPUT #ffffff 
		return "#".$color;
	}
}
class Number	{
	public final static function truncate($floatNumber, $precision)	{
		//$precision = 1 
		if ($precision < 0) $precision = 0;
		$base = 1;	for (; $precision > 0; $precision--) $base = $base * 10;
		return (floor($floatNumber * $base) / $base);
	}
	public final static function displayFloatDecimal($floatNumber, $precision)	{
		$floatNumber = "".$floatNumber;
		$floatArr1 = explode(".", $floatNumber);
		$displayedNumber = $floatArr1[0];
		$decimalPartNumber = "";
		if (isset($floatArr1[1]))	{
			$decimalPartNumber = $floatArr1[1];
		}
		//Dealing with precision 
		for ($i = strlen($decimalPartNumber); $i < $precision; $i++) $decimalPartNumber .= "0";
		if (strlen($decimalPartNumber) > 0) $displayedNumber .= ".".$decimalPartNumber;
		return $displayedNumber;
	}
	public final static function truncateFloatDecimal($floatNumber, $precision)	{
		$floatNumber = "".$floatNumber;
		$floatArr1 = explode(".", $floatNumber);
		$truncatedFloat = $floatArr1[0];
		if (isset($floatArr1[1]))	{
			$temp = $floatArr1[1];
			$decimalPartNumber = "";
			for ($i=0; ($i < $precision) && $i < strlen($temp); $i++) $decimalPartNumber .= substr($temp, $i, 1);
			if (strlen($decimalPartNumber) > 0) $truncatedFloat .= ".".$decimalPartNumber;
		}
		return floatval($truncatedFloat);
	}
	final public static function commaSeparatorHelper($num)	{
		$num = intval($num);
		/* Exit condition, always this will be a leading part */
		$remainder = $num % 1000;
		$multiple = $num / 1000;
		if ($multiple < 1)	{
			return $remainder;
		}
		/* Now multiple is 1 or great, adjust length of string to be three */
		$remainder="".$remainder;
		for ($i=strlen($remainder); $i < 3; $i++)	$remainder = "0".$remainder;
		return self::commaSeparatorHelper($multiple).",".$remainder;
	}
	final public static function getCommaSeparatorFormat($num)	{
		return self::commaSeparatorHelper($num);
	}
	final public static function convertToWord($number)	{
		/*
		This function convertToWord was sourced from the link below, on August 06, 2014
		The original function was named convert_number_to_words
		http://www.karlrixon.co.uk/writing/convert-numbers-to-words-with-php/
		*/
		$hyphen      = '-';
		$conjunction = ' and ';
		$separator   = ', ';
		$negative    = 'negative ';
		$decimal     = ' point ';
		$dictionary  = array(
			0                   => 'zero',
			1                   => 'one',
			2                   => 'two',
			3                   => 'three',
			4                   => 'four',
			5                   => 'five',
			6                   => 'six',
			7                   => 'seven',
			8                   => 'eight',
			9                   => 'nine',
			10                  => 'ten',
			11                  => 'eleven',
			12                  => 'twelve',
			13                  => 'thirteen',
			14                  => 'fourteen',
			15                  => 'fifteen',
			16                  => 'sixteen',
			17                  => 'seventeen',
			18                  => 'eighteen',
			19                  => 'nineteen',
			20                  => 'twenty',
			30                  => 'thirty',
			40                  => 'fourty',
			50                  => 'fifty',
			60                  => 'sixty',
			70                  => 'seventy',
			80                  => 'eighty',
			90                  => 'ninety',
			100                 => 'hundred',
			1000                => 'thousand',
			1000000             => 'million',
			1000000000          => 'billion',
			1000000000000       => 'trillion',
			1000000000000000    => 'quadrillion',
			1000000000000000000 => 'quintillion'
		);
   
		if (!is_numeric($number)) {
			return false;
		}
   
		if (($number >= 0 && (int) $number < 0) || (int) $number < 0 - PHP_INT_MAX) {
			// overflow
			trigger_error(
				'convertToWord only accepts numbers between -' . PHP_INT_MAX . ' and ' . PHP_INT_MAX,
				E_USER_WARNING
			);
			return false;
		}

		if ($number < 0) {
			return $negative . self::convertToWord(abs($number));
		}
   
		$string = $fraction = null;
   
		if (strpos($number, '.') !== false) {
			list($number, $fraction) = explode('.', $number);
		}
   
		switch (true) {
			case $number < 21:
				$string = $dictionary[$number];
				break;
			case $number < 100:
				$tens   = ((int) ($number / 10)) * 10;
				$units  = $number % 10;
				$string = $dictionary[$tens];
				if ($units) {
					$string .= $hyphen . $dictionary[$units];
				}
				break;
			case $number < 1000:
				$hundreds  = $number / 100;
				$remainder = $number % 100;
				$string = $dictionary[$hundreds] . ' ' . $dictionary[100];
				if ($remainder) {
					$string .= $conjunction . self::convertToWord($remainder);
				}
				break;
			default:
				$baseUnit = pow(1000, floor(log($number, 1000)));
				$numBaseUnits = (int) ($number / $baseUnit);
				$remainder = $number % $baseUnit;
				$string = self::convertToWord($numBaseUnits) . ' ' . $dictionary[$baseUnit];
				if ($remainder) {
					$string .= $remainder < 100 ? $conjunction : $separator;
					$string .= self::convertToWord($remainder);
				}
				break;
		}
   
		if (null !== $fraction && is_numeric($fraction)) {
			$string .= $decimal;
			$words = array();
			foreach (str_split((string) $fraction) as $number) {
				$words[] = $dictionary[$number];
			}
			$string .= implode(' ', $words);
		}
   
		return $string;
	}
	final public static function convertToWordByNdimangwa($num)	{
		$num=intval($num);
		if ($num == 0) return "Zero";
		/* Level One conversion, table lookup */
		$wordArray=array();
		$tenArray=array();
		$position=array();
		$wordArray[0] = "Zero"; 	$tenArray[0] = "Zero";    	$position[0]="";
		$wordArray[1] = "One";  	$tenArray[1] = "Ten";		$position[1]="Ten";
		$wordArray[2] = "Two";		$tenArray[2] = "Twenty";	$position[2]="Hundred and";
		$wordArray[3] = "Three";	$tenArray[3] = "Thirty";	$position[3]="Thousand,";
		$wordArray[4] = "Four";		$tenArray[4] = "Forty";		$position[4]="Ten";
		$wordArray[5] = "Five";		$tenArray[5] = "Fifty";		$position[5]="Hundred and";
		$wordArray[6] = "Six";		$tenArray[6] = "Sixty";		$position[6]="Million,";
		$wordArray[7] = "Seven";	$tenArray[7] = "Seventy";	$position[7]="Ten";
		$wordArray[8] = "Eight";	$tenArray[8] = "Eighty";	$position[8]="Hundred and";
		$wordArray[9] = "Nine";		$tenArray[9] = "Ninety";	$position[9]="Billion";
		$position[10] = "Ten"; $position[11]="Hundred and"; $position[12]="Trillion";
		$position[13]="Ten"; $position[14]="Hundred and";
		$toWord="";
		$pos=0;
		$originalNumber=$num;
		while (($num > 1) && ($pos < 15))	{
			$posWeight = $position[$pos];
			$remainder=($num % 10);
			$num = ($num / 10);
			if ($remainder == 0)	{	
				if ((($pos==3) && (($originalNumber % 1000000) != 0)) || (($pos==6) && ($originalNumber % 1000000000) != 0) || (($pos==9) && ($originalNumber % 1000000000000) != 0) || (($pos==12) && ($originalNumber % 1000000000000000)) != 0) $toWord= $posWeight." ".$toWord;
			} else {
				$toWord = $wordArray[$remainder]." ".$posWeight." ".$toWord;
			}
			$pos++;
		}
		
		/* Preparing Substitution tables */
		$old=array(); $new=array();
		$old[0]="One Ten Zero"; $new[0]="Ten";
		$old[1]="One Ten One"; $new[1]="Eleven";
		$old[2]="One Ten Two"; $new[2]="Twelve";
		$old[3]="One Ten Three"; $new[3]="Thirteen";
		$old[4]="One Ten Four"; $new[4]="Fourteen";
		$old[5]="One Ten Five"; $new[5]="Fifteen";
		$old[6]="One Ten Six"; $new[6]="Sixteen";
		$old[7]="One Ten Seven"; $new[7]="Seventeen";
		$old[8]="One Ten Eight"; $new[8]="Eighteen";
		$old[9]="One Ten Nine"; $new[9]="Nineteen";
		$old[10]="Two Ten"; $new[10]="Twenty";
		$old[11]="Three Ten"; $new[11]="Thirty";
		$old[12]="Four Ten"; $new[12]="Forty";
		$old[13]="Five Ten"; $new[13]="Fifty";
		$old[14]="Six Ten"; $new[14]="Sixty";
		$old[15]="Seven Ten"; $new[15]="Seventy";
		$old[16]="Eight Ten"; $new[16]="Eighty";
		$old[17]="Nine Ten"; $new[17]="Ninety";
		$toWord=str_replace($old, $new, $toWord);
		
		/* Replace All Occurance of a word Zero if any, and a word One Ten should read Ten*/
		$toWord=str_replace("One Ten", "Ten", $toWord);
		$toWord=str_replace("Zero", "", $toWord);
		/* Replace now a word and , with nothing */
		$toWord=str_replace("and ,", "", $toWord);
		/* Now I need to replace the last comma with And */
		$toWordArray = explode(",", $toWord);
		$toWord=$toWordArray[0];
		$len = sizeof($toWordArray);
		for ($i=1; $i< $len; $i++)	{
			if ($i == ($len -1)) {
				$toWord = $toWord." and ".$toWordArray[$i];
			} else	{
				$toWord = $toWord.", ".$toWordArray[$i];
			}
			
		}
		/*Treat the trailing and*/
		$toWord = $toWord."ikAsoft";
		//$toWord = str_replace("and ikAsoft", "", $toWord);
		//$toWord = str_replace("andikAsoft", "", $toWord);
		//$toWord = str_replace("ikAsoft", "", $toWord);
		return $toWord;
	}
}
class GPSCoordinate	{
	private $syscoordinate;
	private $coordinateClean=false;
	private function convertFromNorthEastFormatToSystemFormat($gpscoordinate)	{
		//Input N 71 27.826
		$tempArr = array();
		$gpsArr = explode(" ",$gpscoordinate);
		if (sizeof($gpsArr) < 2) Object::shootException("GPS Coordinate Conversion, Source Coordinate has no enough data");
		if (sizeof($gpsArr) > 3) Object::shootException("GPS Coordinate Conversion, Source Coordinate has extra data");
		if ($gpsArr[0] == "N" || $gpsArr[0] == "n" || $gpsArr[0] == "E" || $gpsArr[0] == "e")	{
			$tempArr[0] = "";
		} else if ($gpsArr[0] == "S" || $gpsArr[0] == "s" || $gpsArr[0] == "W" || $gpsArr[0] == "w")	{
			$tempArr[0] = "-";
		} else	{
			Object::shootException("GPS Coordinate Conversion, Invalid direction NnEeSsWw");
		}
		$tempArr[1] = $gpsArr[1]; //Number Part As it is 
		//Dealing with decimal point part
		//Set Default 
		$tempArr[2] = 0.000000;
		if (sizeof($gpsArr) == 3)	{
			//Decimal Part Exists
			$decimalPartNumber = floatval($gpsArr[2]) / 60; 
			$tempArr[2] = round($decimalPartNumber, 6);
		} //end-if
		$decimalPartNumber = floatval($tempArr[1]) + floatval($tempArr[2]);
		$decimalPartNumber = $tempArr[0]."".$decimalPartNumber;
		$decimalPartNumber=trim($decimalPartNumber);
		return floatval($decimalPartNumber);
	}
	public function __construct($gpscoordinate)	{
		$exprGPSCoordinateSubFormat1="/^(\-)?\d+(\.\d+)?\,(\-)?\d+(\.\d+)?$/";
		$exprGPSCoordinateSubFormat2="/^[NnSs]\s\d+\s\d+(\.\d+)?\,[EeWw]\s\d+\s\d+(\.\d+)?$/";
		if (preg_match($exprGPSCoordinateSubFormat1, $gpscoordinate))	{
			//Already in the correct format 
			$this->syscoordinate = $gpscoordinate;
			$this->coordinateClean = true;
		} else if (preg_match($exprGPSCoordinateSubFormat2, $gpscoordinate))	{
			//Convert first 
			$tempArr = explode(",", $gpscoordinate);
			$syscoordinate = "";
			$count = 0;
			foreach ($tempArr as $coord1)	{
				if ($count == 0)	{
					$syscoordinate = $this->convertFromNorthEastFormatToSystemFormat($coord1);
				} else {
					$syscoordinate .= ",".$this->convertFromNorthEastFormatToSystemFormat($coord1);
				}				
				$count++;
			}//end-for-each
			$this->syscoordinate=$syscoordinate;
			$this->coordinateClean=true;
		}
	}
	public function getSystemCoordinate()	{ return $this->syscoordinate; }
	public function isCoordinateClean()	{ return $this->coordinateClean; }
}
class Promise	{
	public static $COMPLETED = 1;
	public static $NOT_YET = 2;
	private $success;
	private $reason;
	private $results;
	private $extraInfo;
	private $filename;	//If there is a corresponding file
	private $status;
	private $position;
	public function __construct()	{
		$this->success = false;
	}
	public function setPromise($bln)	{ $this->success = $bln; }
	public function getPromise()	{ return $this->success; }
	public function isPromising()	{ return $this->success; }
	public function setReason($reason)	{ $this->reason = $reason; }
	public function getReason()	{ return $this->reason; }
	public function setExtraInformation($extraInfo)	{ $this->extraInfo = $extraInfo; }
	public function getExtraInformation()	{ return $this->extraInfo; }	
	public function setFileName($filename)	{ $this->filename = $filename; }
	public function getFileName()	{ return $this->filename; }
	public function setStatus($status)	{ $this->status = $status; }
	public function getStatus()	{ return $this->status; }
	public function setPosition($position)	{ $this->position = $position; }
	public function getPosition()	{ return $this->position; }
	public function setResults($results)	{ $this->results = $results; }
	public function getResults()	{ return $this->results; }
}
class Compiler {
	/* This is a service class, it is an object since we need to trace changes */
	private $nextTokenIndex;
	private $backupOfNextTokenIndex;
	private $originalText;
	private $tokenMatrix; //hold the token matrix 
	private $lastTokenWord = null;
	private $greaterThanSymbol = false;
	private $negationSymbol = false;
	private function getNextToken()	{
		$returnedCharacter = $this->originalText[$this->nextTokenIndex];
		$this->backupOfNextTokenIndex = $this->nextTokenIndex;
		$this->nextTokenIndex++;
	}
	private function readNextToken()	{
		//None Advance
		$returnedCharacter = $this->originalText[$this->nextTokenIndex];
	}
	private function undoGetNextToken()	{
		$this->nextTokenIndex = $this->backupOfNextTokenIndex;
	}
	private function optionSpace()	{
		$nextToken = $this->readNextToken();
		while (true)	{
			if ($nextToken != " ") break;
			$nextToken = $this->getNextToken(); //Skip All Spaces
		}
		return true;
	}
	private function optionGreaterThanSymbol()	{
		$nextToken = $this->readNextToken();
		if ($nextToken == ">")	{
			$this->greaterThanSymbol = true;
			$nextToken = $this->getNextToken();
		}
		return true;
	}
	private function optionNegationSymbol()	{
		$nextToken = $this->readNextToken();
		if ($nextToken == "!")	{
			$this->negationSymbol = true;
			$nextToken = $this->getNextToken();
		}
		return true;
	}
	private function getWordToken()	{
		$state = 0;
		$wordToken = "";
		$nextToken = $this->readNextToken();
		while (true)	{
			if ($nextTokenIndex >= strlen($this->originalText)) break;
			if (($state == 0) && (preg_match("/^[A-Za-z]$/", $nextToken)))	{
				$state = 1;  $wordToken .= $nextToken; $nextToken = $this->getNextToken(); continue;
			} 
			if (($state == 1) && (preg_match("/^[A-Za-z0-9]$/", $nextToken)))	{
				$wordToken .= $nextToken; $nextToken = $this->getNextToken(); continue;
			}
			if ($state == 1) {
				//Another character has been found 
				$state=2;
			}
			if ($state == 2)	{
				/*We need to 
				*/
				$index = sizeof($this->tokenMatrix);
				$this->tokenMatrix[$index] = array();
				$this->tokenMatrix[$index][0] = $wordToken;
				$this->tokenMatrix[$index][1] = $greaterThanSymbol;
				$this->tokenMatrix[$index][2] = $negationSymbol;
				break;
			}
		}
		return true;
	}
	private function firstWordToken()	{
		return ($this->optionSpace()) && ($this->optionNegationSymbol()) && ($this->optionSpace()) && ($this->getWordToken());
	}
	private function otherWordToken()	{
		return ($this->optionSpace()) && ($this->optionGreaterThanSymbol()) && ($this->optionSpace()) && ($this->optionNegationSymbol()) && ($this->optionSpace()) && ($this->getWordToken());
	}
	public function __construct($originalText)	{
		$this->originalText = $originalText;
		$this->nextTokenIndex = 0;
		$this->backupOfNextTokenIndex = 0;
		$this->tokenMatrix = array();
	}
	public function compile()	{
		return ($this->firstWordToken()) && ($this->otherWordToken());
	}
	public function getTokenMatrix()	{
		return $this->tokenMatrix;
	}
}
class FileDataLine	{
	private $dataArray1;
	private $headerLine1;
	private $line;
	private $included;
	public function __construct($line, $headerLine1)	{
		if (is_null($headerLine1)) Object::shootException("Control Header is not set");
		$lineArr = explode(",",$line);
		if (sizeof($lineArr) < sizeof($headerLine1->getHeaderArray())) Object::shootException("Line do not have enough columns");
		$headerArray1 = $headerLine1->getHeaderArray();
		if (is_null($headerArray1)) Object::shootException("Empty Header in the data");
		$this->headerLine1 = $headerLine1;
		$this->dataArray1 = array();
		$this->line = $line;
		$this->included = true;
		foreach ($headerArray1 as $index)	{
			$this->dataArray1[$index] = $lineArr[$index];
		}
	}
	public function setData($columnname, $value)	{
		$index = $this->headerLine1->getHeaderPosition($columnname);
		if (! is_null($index))	{
			$this->dataArray1[$index] = $value;
		}
	}
	public function getData($columnname)	{
		$index = $this->headerLine1->getHeaderPosition($columnname);
		if (is_null($index)) return null;
		return $this->dataArray1[$index];
	}
	public function excludeLine()	{
		$this->included = false;
	}
	public function includeLine()	{
		$this->included = true;
	}
	public function isIncluded()	{
		return $this->included;
	}
	public function getLine()	{
		return $this->line;
	}
}
class FileHeader	{
	private $headerArray1;
	private $headerList1;
	private $line;
	public final static function getFileHeaderFromFile($filename)	{
		if (! file_exists($filename)) Object::shootException("The source file is not available");
		$file1 =  fopen($filename, "r") or Object::shootException("Could not open source file for reading");
		$line = fgets($file1); //We need just a first line 
		if (is_null($line)) Object::shootException("Header returned an empty data");
		fclose($file1);
		return (new FileHeader($line));
	}
	public function __construct($line)	{
		$this->line = $line;
		$lineArr = explode(",", $line);
		$this->headerArray1 = array();
		$this->headerList1 = array();
		foreach ($lineArr as $item)	{
			$listsize = sizeof($this->headerArray1);
			$this->headerArray1[$item] = $listsize;
			$this->headerList1[$listsize] = $item;
		}
	}
	public function getHeaderArray()	{ return $this->headerArray1; }
	public function getListOfHeaders()	{ return $this->headerList1; }
	public function getNumberOfColumns()	{ return sizeof($this->headerArray1); }
	public function isHeaderAvailable($header)	{
		if (isset($this->headerArray1[$header])) return true;
		return false;
	}
	public function getHeaderPosition($header)	{
		if ($this->isHeaderAvailable($header)) return $this->headerArray1[$header];
		return null;
	}
	public function getLine()	{ return $this->line; }
}
class FileManager	{
	private $dataLines;
	private $headerLine1;
	private $filename;
	static $__IS_CLONE_MODE = "__is_clone_mode__";
	public static final function compareFileManagers($fileManager1, $fileManager2, $filename, $column1, $column2, $blnMatch, $controlFlags)	{
		/*
		Returns null or FileManager 
		Inputs fileManager1 , this is the one contains data for writing , call it A 
				fileManager2, this is a control, reference file			, call it B 
				filename, where to save atlast
				$column1, column in fileManager1 
				$column2, column in fileManager2 
				$blnMatch, true, will check for matching , else if false check to make sure no match 
				$controlFlags, reserved for future, default 0
		*/
		if (is_null($fileManager1)) Object::shootException("The source File Manager is Empty");
		if (is_null($fileManager2)) Object::shootException("The reference File Manager is Empty");
		$headerLine1 = $fileManager1->getHeaderLine(); 
		if (is_null($headerLine1)) Object::shootException("The Source Header is Empty");
		$headerLine2 = $fileManager2->getHeaderLine();
		if (is_null($headerLine2)) Object::shootException("The Reference Header is Empty");
		//Check if submitted Columns are available 
		if (! $headerLine1->isHeaderAvailable($column1)) Object::shootException("The Source column is not available in the source File");
		if (! $headerLine2->isHeaderAvailable($column2)) Object::shootException("The Reference Column is not available in the Reference File");
		$dataLines = array();
		foreach ($fileManager1->getDataLines()	as $dataLine1)	{
			$confirmWriteLine = ! $blnMatch; //Initialize Opposite
			foreach ($fileManager2->getDataLines() as $dataLine2)	{
				$__data_1 = $dataLine1->getData($column1);
				$__data_2 = $dataLine2->getData($column2);
				if (trim($__data_1) === trim($__data_2))	{
					$confirmWriteLine = ! $confirmWriteLine;
					break;
				}
			}
			//write at this point 
			if ($confirmWriteLine)	{
				//Now writing 
				$dataLines[sizeof($dataLines)] = new FileDataLine($dataLine1->getLine(), $headerLine1);
			}
		}
		$finalFileManager1 = new FileManager(FileManager::$__IS_CLONE_MODE);
		$finalFileManager1->setHeaderLine($headerLine1);
		$finalFileManager1->setDataLines($dataLines);
		$finalFileManager1->setFilename($filename);
		return $finalFileManager1;		
	}
	public function getHeaderLine()	{ return $this->headerLine1; }
	public function setHeaderLine($headerLine1)	{ $this->headerLine1 = $headerLine1; }
	public function getDataLines()	{ return $this->dataLines; }
	public function setDataLines($dataLines)	{ $this->dataLines = $dataLines; }
	public function getFilename()	{ return $this->filename; }
	public function setFilename($filename)	{ $this->filename = $filename; }
	public function save()	{
		$file1 = fopen($this->filename, "w") or Object::shootException("Could not open a file for writing");
		//Writing Headers 
		$line = $this->headerLine1->getLine();
		$line = str_replace("\n","", str_replace("\r", "", $line));
		$line .= "\n";
		fwrite($file1, $line) or Object::shootException("Could not write to a file");
		foreach ($this->dataLines as $dataLine1)	{
			if ($dataLine1->isIncluded())	{
				$line = $dataLine1->getLine();
				$line = str_replace("\n","", str_replace("\r", "", $line));
				$line .= "\n";
				fwrite($file1, $line) or Object::shootException("Could not write to a file");
			}
		}
		fclose($file1);
	}
	public function __construct($filename)	{
		if ($filename == FileManager::$__IS_CLONE_MODE)	return;
		if (! file_exists($filename)) Object::shootException("File not found");
		$file1 = fopen($filename, "r") or Object::shootException("Can not open file for reading");
		$linenumber = 0;
		$this->filename = $filename;
		$this->dataLines = array();
		while (($line = fgets($file1)) !== false)	{
			$linenumber++;
			if ($linenumber == 1)	{
				//Header 
				$this->headerLine1 = new FileHeader($line);
			} else {
				//Data
				$this->dataLines[sizeof($this->dataLines)] = new FileDataLine($line, $this->headerLine1);
			}
		}
		fclose($file1);
	}
}
class FileFactory {
	/*
	These are statically defined file Manager
	If not supposed to return data, they should return a promise object with data 
	A function which does file editing should create a backup file with 
	Append with .backup extension 
	The promise object should have the position of the next element, this means the length of returned records
		since this is a zero based
	*/
	public final static function addDOMListToTree($doc, $parentNodeName, $domListArray)	{
		/*
		parentNodeName : ie product 
		domListArray : key val
		*/
		$__parentNode1 = $doc->createElement($parentNodeName);
		foreach ($domListArray as $__key => $__val)	{
			$__itemHolder1 = $doc->createElement($__key);
			$__itemHolder1->appendChild($doc->createTextNode($__val));
			$__parentNode1->appendChild($__itemHolder1);
		}
		return $__parentNode1;
	}
	public final static function updateExistingFile($filename, $doc)	{
		//Create a backup first
		//Input, the Updated DOMDocument 
		//This applies during deleting and editing 
		/*checksum begins here*/
		$doc = self::createDOMChecksum($doc);
		$promise1 = new Promise();
		$promise1->setPromise(true);
		if (is_null($doc))	{
			$promise1->setPromise(false);
			$promise1->setReason("Duplicate Checksum keys were found");
			return $promise1;
		}
		if ($promise1->isPromising())	{
			//Reset the promise Object 
			$promise1->setPromise(false);
			$doc->formatOutput = true;
			if ($doc->save($filename))	{
				$promise1->setPromise(true);
			} else {
				$promise1->setReason("Could not create update a file, perpahs the server policy or timeout has occured");
			}
		}
		return $promise1;
	}
	public final static function createBackupFile($filename)	{
		$promise1 = new Promise();
		if (copy($filename, $filename.".backup"))	{
			$promise1->setPromise(true); //successful
		} else {
			$promise1->setReason("Could not make a backup file");
		}
		return $promise1;
	}
	public final static function createFile($filename, $rootnodename)	{
		$doc=new DOMDocument(Object::$xmlVersion);
		$doc->formatOutput = true;
		$doc->appendChild($doc->createElement($rootnodename));
		$promise1 = new Promise();
		if ($doc->save($filename))	{
			$promise1->setPromise(true);
		} else {
			$promise1->setReason("Could not create a file, perhaps you do not have permission to this server");
		}
		return $promise1;
	}
	public final static function readFile($filename)	{
		//return xmlDocumenRoot or null 
		$doc = null;
		if (file_exists($filename))	{
			$doc = new DOMDocument();
			$doc->load($filename);
		}
		return $doc;
	}
	public final static function findNodes($doc, $nodename, $pos)	{
		/*
		doc refer to the outer node 
		if pos = *, you will get all matched nodes from the outer node 
		else specific position
		*/
		$pos = trim("".$pos);
		$nodeList = array();
		$tempList = $doc->getElementsByTagName($nodename);
		if ($pos == "*")	{
			//All records 
			foreach ($tempList as $alist)	{
				$nodeList[sizeof($nodeList)] = $alist;
			}
		} else {
			//Specific position 
			$pos = intval($pos);
			if ($pos < intval($tempList->length))	{
				$nodeList[sizeof($nodeList)] = $tempList->item($pos);
			}
		}
		if (sizeof($nodeList) == 0) $nodeList = null;
		return $nodeList;
	}
	public final static function deleteWithoutSavingNodeCollections($filename, $doc, $collectionToDelete)	{
		/*
		INPUT filename, DOMDocument and collectionToBe Deleted 
		OUTPUT promise Object 
		*/
		$promise1 = new Promise();
		$enableUpdate = false;
		if (is_null($collectionToDelete))	{
			$promise1->setReason("Collection to delete were not found");
			return $promise1;
		}
		foreach ($collectionToDelete as $anode1)	{
			$parent1 = $anode1->parentNode;
			if (! is_null($parent1))	{
				$parent1->removeChild($anode1); $enableUpdate=true;
			}
		}
		if ($enableUpdate)	{
			$promise1->setPromise(true);
		} else {
			$promise1->setReason("There were Nothing to Delete from the Collection");
		}
		return $promise1;
	}
	public final static function findResultsWhichMatches($doc, $dataArray, $pos)	{
		/*
		INPUT: active doc , dataArray[nodeName] = value, empty is presented as "_@32767@_"
							return list[nodeName] = value or null
							if all in dataArray are empty then use position to return 
						
							All of the returned nodes should be siblings , must have a common parent 
						h788
									
		*/
		if (is_null($doc)) return null;
		if (is_null($dataArray)) return null;
		$list = array();
		//User the firstIndex just to begin with 
		reset($dataArray);
		$tagName = key($dataArray);
		$nodeList = $doc->getElementsByTagName($tagName);
		if (is_null($nodeList)) return null;
		$allAreEmpty = true;
		foreach ($nodeList as $anode1)	{
			$listsize = sizeof($list);
			$list[$listsize] = array();
			$parent1 = $anode1->parentNode;
			if (is_null($parent1)) return null;
			$blnmatch = true;
			$isempty = true;
			$isvalid = true;
			foreach ($dataArray as $nodeName => $suppliedValue)	{
				$valueFound = "";
				$blnNodeFound = false;
				/*foreach ($parent1->childNodes as $child1)	{
					//Now All siblings are here 
					$domNodeName = $child1->nodeName;
					$domNodeValue = $child1->nodeValue;
					//echo "<br/>Supplied [Name, Value] = [$nodeName , $suppliedValue]; Stored [Name, Value] = [$domNodeName , $domNodeValue]";
					if ($nodeName == $domNodeName)	{
						if ($suppliedValue != "_@32767@_")	$isempty = false; //User filled nothing
						if (($suppliedValue == "_@32767@_") || (trim($suppliedValue) == trim($domNodeValue)))	{
							$valueFound = $domNodeValue;
							$blnNodeFound = true;
						}
						break;
					}
				}*/
				//Try Alternative -- Begin 
				$tempNode = $parent1->getElementsByTagName($nodeName);
				if ($tempNode->length > 0)	{
					$domNodeValue = $tempNode->item(0)->nodeValue;
					if ($suppliedValue != "_@32767@_")	$isempty = false; //User filled nothing
					if (($suppliedValue == "_@32767@_") || (trim($suppliedValue) == trim($domNodeValue)))	{
						$valueFound = $domNodeValue;
						$blnNodeFound = true;
					}
				}
				//Try Alternative -- Ends
				if ($blnNodeFound) $list[$listsize][$nodeName] = $valueFound;
				$isvalid = $isvalid && $blnNodeFound;
			}
			$list[$listsize]['empty'] = $isempty;
			$allAreEmpty = $allAreEmpty && $isempty;
			$list[$listsize]['valid'] = $isvalid;
		}
		//Now we have 
		/*
		list in the form of list[i][nodename] = value 
		Now we need to pick the best one 
		*/
		$listToReturn = array();
		if ($allAreEmpty)	{
			//use position 
			if ($pos < sizeof($list))	{
				$listToReturn = $list[$pos];
			}
		}	else {
			//Pick the first one which is valid 
			foreach ($list as $alist)	{
				if ($alist['valid']) $listToReturn = $alist;
			}
		}
		$list = $listToReturn;
		if (sizeof($list) == 0) $list = null;
		if (! is_null($list)) {
			$listToReturn = array(); 
			//Write Only columns available in the original dataArray 
			foreach ($dataArray as $nodeName => $suppliedValue)	{
				if (isset($list[$nodeName]))	{
					$listToReturn[$nodeName] = $list[$nodeName];
				}
			}
		}
		$list = $listToReturn;
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function deleteNodeCollections($filename, $doc, $collectionToDelete)	{
		/*
		INPUT filename, DOMDocument and collectionToBe Deleted 
		OUTPUT promise Object 
		*/
		$promise1 = new Promise();
		$enableUpdate = false;
		if (is_null($collectionToDelete))	{
			$promise1->setReason("Collection to delete were not found");
			return $promise1;
		}
		foreach ($collectionToDelete as $anode1)	{
			$parent1 = $anode1->parentNode;
			if (! is_null($parent1))	{
				$parent1->removeChild($anode1); $enableUpdate=true;
			}
		}
		if ($enableUpdate)	{
			$promise1 = self::updateExistingFile($filename, $doc);
		} else {
			$promise1->setReason("There is nothing to delete from the collection");
		}
		return $promise1;
	}
	public final static function addNodeAfterCollections($filename, $doc, $referenceCollection, $nodeToAdd)	{
		/*
		The node should have been created with the same doc Object
		*/
		$promise1 = new Promise();
		if (is_null($referenceCollection))	{
			$promise1->setReason("Reference Collection is Empty");
			return $promise1;
		}
 		$enableUpdate = false;
		foreach ($referenceCollection as $anode1)	{
			$parent1 = $anode1->parentNode;
			if (! is_null($parent1))	{
				$clonedNode = $nodeToAdd->cloneNode(true);
				$parent1->appendChild($clonedNode); $enableUpdate = true;
			}
		}
		if ($enableUpdate)	{
			$promise1 = self::updateExistingFile($filename, $doc);
		} else {
			$promise1->setReason("There is nothing to Append in the NodeTree");
		}
		return $promise1;
	}
	public final static function addNodeBeforeCollections($filename, $doc, $referenceCollection, $nodeToAdd)	{
		/*
		The node should have been created with the same doc Object
		*/
		$promise1 = new Promise();
		if (is_null($referenceCollection))	{
			$promise1->setReason("Reference Collection is Empty");
			return $promise1;
		}
		$enableUpdate = false;
		foreach ($referenceCollection as $anode1)	{
			$parent1 = $anode1->parentNode;
			if (! is_null($parent1))	{
				$clonedNode = $nodeToAdd->cloneNode(true);
				$parent1->insertBefore($clonedNode, $anode1); $enableUpdate = true;
			}
		}
		if ($enableUpdate)	{
			$promise1 = self::updateExistingFile($filename, $doc);
		} else {
			$promise1->setReason("There is nothing to Append in the NodeTree");
		}
		return $promise1;
	}
	public final static function appendNode($filename, $doc, $referenceCollection, $nodeToAdd)	{
		/*
		if pos is * append to All Matched nodes 
		nodeToAppend is an xml node, create a backup 
		*/
		$promise1 = new Promise();
		if (is_null($referenceCollection))	{
			$promise1->setReason("Reference Collection is Empty");
			return $promise1;
		}
 		$enableUpdate = false;
		foreach ($referenceCollection as $anode1)	{
			$clonedNode = $nodeToAdd->cloneNode(true);
			$anode1->appendChild($clonedNode); $enableUpdate = true;
			
		}
		if ($enableUpdate)	{
			$promise1 = self::updateExistingFile($filename, $doc);
		} else {
			$promise1->setReason("There is nothing to Append in the NodeTree");
		}
		return $promise1;
	}
	public final static function replaceContentOfNodeCollectionsWithoutSaving($filename, $doc, $referenceCollection, $contentText)	{
		/*
		if pos is * replace all matched nodes
		newNode is a new XML Node , create a backup
		NodeToReplace should be a member created by the same DOMDocument ($doc)
		*/
		$promise1 = new Promise();
		if (is_null($referenceCollection))	{
			$promise1->setReason("Reference Collection is Empty");
			return $promise1;
		}
		$enableUpdate = false;
		foreach ($referenceCollection as $anode1)	{
			if ($anode1->hasChildNodes())	{
				//Clear All Childres 
				foreach ($anode1->childNodes as $child1)	{
					$anode1->removeChild($child1);
				}
			}
			//Now Add the content Node 
			$anode1->appendChild($doc->createTextNode($contentText)); $enableUpdate=true;
		}
		if (! $enableUpdate) $promise1->setReason("There is nothing to Replace in the Collection");
		return $promise1;
	}
	public final static function replaceContentOfNodeCollections($filename, $doc, $referenceCollection, $contentText)	{
		/*
		if pos is * replace all matched nodes
		newNode is a new XML Node , create a backup
		NodeToReplace should be a member created by the same DOMDocument ($doc)
		*/
		$promise1 = new Promise();
		if (is_null($referenceCollection))	{
			$promise1->setReason("Reference Collection is Empty");
			return $promise1;
		}
		$enableUpdate = false;
		foreach ($referenceCollection as $anode1)	{
			if ($anode1->hasChildNodes())	{
				//Clear All Childres 
				foreach ($anode1->childNodes as $child1)	{
					$anode1->removeChild($child1);
				}
			}
			//Now Add the content Node 
			$anode1->appendChild($doc->createTextNode($contentText)); $enableUpdate=true;
		}
		if ($enableUpdate)	{
			$promise1 = self::updateExistingFile($filename, $doc);
		} else {
			$promise1->setReason("There is nothing to Replace in the Collection");
		}
		return $promise1;
	}
	public final static function replaceNodeCollections($filename, $doc, $referenceCollection, $nodeToReplace)	{
		/*
		if pos is * replace all matched nodes
		newNode is a new XML Node , create a backup
		NodeToReplace should be a member created by the same DOMDocument ($doc)
		*/
		$promise1 = new Promise();
		if (is_null($referenceCollection))	{
			$promise1->setReason("Reference Collection is Empty");
			return $promise1;
		}
		$enableUpdate = false;
		foreach ($referenceCollection as $anode1)	{
			$parent1 = $anode1->parentNode;
			if (! is_null($parent1))	{
				$clonedNode = $nodeToReplace->cloneNode(true);
				$parent1->replaceChild($clonedNode, $anode1);
				$enableUpdate = true;
			}
		}
		if ($enableUpdate)	{
			$promise1 = self::updateExistingFile($filename, $doc);
		} else {
			$promise1->setReason("There is nothing to Replace in the Collection");
		}
		return $promise1;
	}
	public final static function getListOfNodesWithValueFromCollection($listOfAllNodes, $pos, $value, $iscasesensitive)	{
		if (is_null($listOfAllNodes)) return null;
		$pos = trim("".$pos);
		$listOfMatchedNodes = array();
		foreach ($listOfAllNodes as $anode1)	{
			//anode1 is doc 
			$nodeValue = $anode1->nodeValue;
			//Lower value equivalent
			$ivalue = strtolower($value);
			$inodeValue = strtolower($nodeValue);
			//Expression B + !A!BC 
			$logic_A = $iscasesensitive;
			$logic_B = ($value == $nodeValue);
			$logic_C = ($ivalue == $inodeValue);
			if ($logic_B || (! $logic_A)&& (! $logic_B) && $logic_C)	{
				//Add to matched list 
				$listOfMatchedNodes[sizeof($listOfMatchedNodes)] = $anode1;
			}
		}
		/*
		We need to filter Accoring to the matched Nodes 
		*/
		if ($pos == "*")	{
			//What is matched is Alrite 
		} else {
			$pos = intval($pos);
			if ($pos < sizeof($listOfMatchedNodes))	{
				$tempVal = $listOfMatchedNodes[$pos];
				$listOfMatchedNodes = array();
				$listOfMatchedNodes[0] = $tempVal;
			} else {
				$listOfMatchedNodes = array(); //clear array
			}
		}
		/* Return now the results */
		if (sizeof($listOfMatchedNodes) == 0) $listOfMatchedNodes = null;
		return $listOfMatchedNodes;
	}
	private final static function convertCustomStringToArray($customString1)	{
		/*
		INPUT 0:nodename1;3:nodename2;*:nodename3 
		OUTPUT array[0][0]=0
				array[0][1]=nodename1 
				array[1][0]=3
				
				so nodename1 is/are a parent of nodename2 which is/are parent of nodename3 
		*/
		$customArray = array();
		$nodeListArray = explode(";", $customString1);
		foreach ($nodeListArray as $aListArray)	{
			//0:nodename1 
			$listsize = sizeof($customArray);
			$customArray[$listsize] = array();
			$splitNodesArray = explode(":", $aListArray);
			if (sizeof($splitNodesArray) != 2) return null;
			$customArray[$listsize][0] = $splitNodesArray[0]; 
			$customArray[$listsize][1] = $splitNodesArray[1]; 
		}
		return $customArray;
	}
	private final static function packAllCustomNodes($doc, $nodeCollectionArray, $customArray, $currentArrayPosition)	{
		//Terminating Condition
		if (is_null($customArray)) return null;
		if (($currentArrayPosition + 1)> sizeof($customArray)) return $nodeCollectionArray;
		if (($currentArrayPosition != 0) && (sizeof($nodeCollectionArray) == 0)) return null;
		//Fetch the position and the nodename 
		$pos = trim("".$customArray[$currentArrayPosition][0]);
		$nodename = trim($customArray[$currentArrayPosition][1]);
		//Initially the nodeCollectionArray would be null
		if ($currentArrayPosition == 0)	{
			$nodeCollectionArray = array();
			$tempList = $doc->getElementsByTagName($nodename);
			if ($tempList->length == 0) return null;
			if ($pos == "*")	{
				//All records 
				foreach ($tempList as $alist)	{
					$nodeCollectionArray[sizeof($nodeCollectionArray)] = $alist;
				}
			} else {
				//Specific position 
				$pos = intval($pos);
				if ($pos < intval($tempList->length))	{
					$nodeCollectionArray[sizeof($nodeCollectionArray)] = $tempList->item($pos);
				}
			}
			return self::packAllCustomNodes($doc, $nodeCollectionArray, $customArray, $currentArrayPosition + 1);
		} //end-if-pos-zero
		/*Proceed Now with the list */
		$tempNodeCollection = array();
		foreach ($nodeCollectionArray as $node1)	{
			$tempList = $node1->getElementsByTagName($nodename);
			if ($tempList->length == 0) return null;
			if ($pos == "*")	{
				//All records 
				foreach ($tempList as $alist)	{
					$tempNodeCollection[sizeof($tempNodeCollection)] = $alist;
				}
			} else {
				//Specific position 
				$pos = intval($pos);
				if ($pos < intval($tempList->length))	{
					$tempNodeCollection[sizeof($tempNodeCollection)] = $tempList->item($pos);
				}
			}
		}//end-foreach-anode 
		return self::packAllCustomNodes($doc, $tempNodeCollection, $customArray, $currentArrayPosition + 1);
	}
	public final static function findCustomNodes($doc, $customExpression)	{
		/*
		Input: pos:nodename;pos:nodename.....;pos:nodename
		*/
		$nodeListArray = self::convertCustomStringToArray($customExpression);
		$nodeListArray = self::packAllCustomNodes($doc, null, $nodeListArray, 0);
		if (sizeof($nodeListArray) == 0) $nodeListArray = null;
		return $nodeListArray;
	}
	public final static function findParentOfNode($doc, $refnodename, $pos)	{
		/*
			return xml parent or null 
			parent of pos-th node 
			pack this in an array too
		*/
		$pos = trim("".$pos);
		if ($pos == "*") return null; //does not allow all, should be specific 
		$nodeList = self::findNodes($doc, $refnodename, $pos);
		if (is_null($nodeList)) return null;
		// For compliance , pack in array
		$parentArray = array();
		$parentArray[0] = $nodeList[0]->parentNode;
		return $parentArray;
	}
	public final static function findParentOfCustomNode($doc, $customExpression)	{
		$nodeList = self::findCustomNodes($doc, $customExpression);
		if (is_null($nodeList)) return null;
		//Return ONLY the parent of the first march 
		$parentArray = array();
		$parentArray[0] = $nodeList[0]->parentNode;
		return $parentArray;
	}
	public final static function calculateFileChecksum($filename)	{
		/*
		isaacompletechecksum
		*/
		$doc = new DOMDocument(Object::$xmlVersion);
		$doc->load($filename);
		return self::calculateDOMChecksum($doc);
	}
	public final static function calculateDOMChecksum($doc)	{
		$referenceHash = md5(Object::$hashText);
		return self::documentHash($doc, $referenceHash);
	}
	public final static function createDOMChecksum($doc)	{
		/*
		INPUT A New DOMDocument, can have checksum or not 
		OUTPUT Return a DOMDocument with a valid checksum , same original DOM 
		*/
		$checksumvalue = self::calculateDOMChecksum($doc);
		$rootElement = $doc->documentElement;
		$checksum = $rootElement->getElementsByTagName('isaacompletechecksum');
		if (intval($checksum->length) == 0)	{
			//Not Existing
			$checksum = $doc->createElement('isaacompletechecksum');
			$checksum->appendChild($doc->createTextNode($checksumvalue));
			$rootElement->appendChild($checksum);
		} else if (intval($checksum->length) == 1)	{
			$checksum->item(0)->nodeValue = $checksumvalue;
		} else {
			//Incase of duplicate destroy the DOM 
			$doc = null;
		}
		return $doc;
	}
	public final static function getFileChecksum($filename)	{
		/*
		return null or read from isaacompletechecksum
		*/
		if (! file_exists($filename)) return null;
		$doc = new DOMDocument(Object::$xmlVersion);
		$doc->load($filename);
		return self::getDOMChecksum($doc);
	}
	public final static function getDOMChecksum($doc)	{
		$checksumvalue = null;
		$checksum = $doc->getElementsByTagName('isaacompletechecksum');
		if (intval($checksum->length) == 1)	{
			//Must be a unique existence 
			$checksumvalue = $checksum->item(0)->nodeValue; 
		}
		return $checksumvalue;
	}
	public final static function isDOMIntegrityPassed($doc)	{
		$storedDocumentHashValue = trim(self::getDOMChecksum($doc));
		$calculatedDocumentHashValue = trim(self::calculateDOMChecksum($doc));
		return (strcmp($calculatedDocumentHashValue, $storedDocumentHashValue) == 0);
	}
	public final static function isFileIntegrityPassed($filename)	{
		/*
		return true or false compare calculated and from get 
		*/
		//Load DOM Once 
		if (! file_exists($filename)) return false;
		$doc = new DOMDocument(Object::$xmlVersion);
		$doc->load($filename);
		return self::isDOMIntegrityPassed($doc);
	}
	private static final function documentHash($node1, $referenceHash)	{
		$hashCode = $referenceHash;
		$applyLock = false;
		//Pre Order for Non Binary Tree 
		//Deal with this Node first 
		if ($node1->nodeType == XML_ELEMENT_NODE)	{
			if (ctype_space($node1->tagName))	{
				//retain the value of hashCode, same change not 
			} else if ($node1->tagName == 'isaacompletechecksum')	{
				//Make sure the value of a checksum is not part of the calculation 
				//This is to avoid recursive logic which will not end, logic error avoidance
				$applyLock = true;
			} else	{
				//Other Nodes 
				$val = trim($node1->tagName);
				$hashCode = $hashCode.$val;
				$hashCode=md5($hashCode);
			}
		} else if ($node1->nodeType == XML_TEXT_NODE)	{
			$val = trim($node1->nodeValue);
			$hashCode = $hashCode.$val;
			$hashCode = md5($hashCode);
		}
		//We are done with this Node, Check if child nodes present 
		if (! $applyLock && $node1->hasChildNodes())	{
			foreach ($node1->childNodes as $child1)	{
				$hashCode = self::documentHash($child1, $hashCode);
			}
		}
		return $hashCode;
	}
	public final static function restoreFile($filename)	{
		/*
		restore from a .backup file
		*/
		$promise1 = new Promise();
		$backupfile = $filename.".backup";
		if (file_exists($backupfile))	{
			if (copy($backupfile, $filename))	{
				$promise1->setPromise(true);
			} else {
				$promise1->setReason("Could not create a backup file");
			}			
		} else {
			$promise1->setReason("There is no backup file for supplied file");
		}		
		return $promise1;
	}
}
class ContextManager	{
	public final static function isSystemDefaultAllowed($database, $conn)	{
		$query="SELECT defaultXValue FROM contextManager";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException("Context Manager: Could not load the default Do not care Definition");
		if (mysql_num_rows($result) != 1) Object::shootException("Context Manager: None or Duplicate Final Definition of Do not were found");
		list($defaultXValue)=mysql_fetch_row($result);
		return (intval($defaultXValue) == 1);
	}
	public final static function setSystemDefaultAllowed($database, $conn, $sysAllowedValue)	{
		$query="UPDATE contextManager SET defaultXValue='$sysAllowedValue'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Context Manager: Could not update the Default Definition of Do not Care");
	}
}
class ContextDefinition extends Object {
	private $contextId;
	private $contextCharacter;
	private $contextValue;
	private $database;
	private $conn;
	final public static function getValueFromCharacter($database, $char1, $conn)	{
		$query="SELECT cVal FROM contextDefinition WHERE cChar='$char1'";
		$result = mysql_db_query($database, $query, $conn) or $this->throwMe("Could not fetch value");
		if (mysql_num_rows($result) != 1) $this->throwMe("Multiple or duplicate records for context definitions");
		list($val)=mysql_fetch_row($result);
		return $val;
	}
	final public static function getCharacterFromValue($database, $val, $conn)	{
		$query="SELECT cChar FROM contextDefinition WHERE cVal='$val'";
		$result = mysql_db_query($database, $query, $conn) or $this->throwMe("Could not fetch Character");
		if (mysql_num_rows($result) != 1) $this->throwMe("Multiple or duplicate records for context definitions");
		list($ch1)=mysql_fetch_row($result);
		return $ch1;
	}
	final public static function getDefinitionList($database, $conn)	{
		/*  
		Returns an array of characters based on value as index
		*/
		$list1 = array();
		$query = "SELECT cChar, cVal FROM contextDefinition";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe("Could not load list");
		while(list($char1, $val)=mysql_fetch_row($result))	{
			$list1[$val] = $char1;
		}
		return $list1;
	}
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype;propertyname,propertytype;*/
		$lineToView = "@ContextDefinition/contextCharacter,text,k101;contextValue,text,k101";
		return $lineToView;
	}
	public final static function getClassContextName()	{
		return "managecontextdefinition";
	}
	public final static function getUniqueContextId($database, $conn)	{
		$query="SELECT cId FROM contextDefinition";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ContextDefinition, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('ContextDefinition, None or Duplicate Row/Multiple Rows Found');
		list($contextId)=mysql_fetch_row($result);
		return $contextId;
	}
	public final static function add($database, $conn, $cChar, $cVal)	{
		$query="INSERT INTO contextDefinition (cChar, cVal) VALUES('$cChar', '$cVal')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ContextDefinition, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ContextDefinition, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('ContextDefinition, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getContextId() {
		return $this->contextId;
	}
	public function getContextCharacter() {
		return $this->contextCharacter;
	}
	public function setContextCharacter($cChar) {
		if (! is_null($cChar))	{
			$this->addToUpdateList("cChar", $cChar);
			$this->contextCharacter = $cChar;
		}
	}
	public function getContextValue() {
		return $this->contextValue;
	}
	public function setContextValue($cVal) {
		if (! is_null($cVal))	{
			$this->addToUpdateList("cVal", $cVal);
			$this->contextValue = $cVal;
		}
	}
	public function getQueryText()	{
		$query="SELECT cId FROM contextDefinition";
		return $query;
	}
	public function __construct($database, $cId, $conn) {
		$this->setMe($database, $cId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->contextId, $this->conn);
	}
	public function commitUpdate()	{
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE contextDefinition SET $setList WHERE cId = '$this->cId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ContextDefinition, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		$query="DELETE FROM contextDefinition WHERE cId = '$this->cId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ContextDefinition, Row Deletion Failed');
	}
	public function getClassName()	{
		return "ContextDefinition";
	}
	protected function getProperties()	{
		return "contextId=$this->contextId"."@contextCharacter=$this->contextCharacter"."@contextValue=$this->contextValue";
	}
	protected function getAdvancedProperties()	{
		return "contextId=$this->contextId"."@contextCharacter=$this->contextCharacter"."@contextValue=$this->contextValue";
	}
	public function debug()	{
		
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $cId, $conn) {
		$query="SELECT cId, cChar, cVal FROM contextDefinition WHERE cId = '$cId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('ContextDefinition, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ContextDefinition, Duplicate or No Record');
		list($cId, $cChar, $cVal)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->contextId = $cId;
		if (! is_null($cChar))	{
			$this->contextCharacter = $cChar;
		}
		if (! is_null($cVal))	{
			$this->contextValue = $cVal;
		}
	}
	public function cloneMe($updateDataArray)	{ return -1; }
}
class ContextPosition extends Object {
	private $contextId;
	private $contextName;
	private $characterPosition;
	private $contextCaption;
	private $database;
	private $conn;
	final public static function getContextIdFromName($database, $name, $conn)	{
		$query = "SELECT cId FROM contextPosition WHERE cName='$name'";
		$result = mysql_db_query($database, $query, $conn) or die("Could not fetch this index");
		if (mysql_num_rows($result) != 1) die("Multiple or No Records for $name");
		list($cid) = mysql_fetch_row($result);
		return $cid;
	}
	final public static function getPositionFromName($database, $name, $conn)	{
		$query = "SELECT cPosition FROM contextPosition WHERE cName='$name'";
		$result = mysql_db_query($database, $query, $conn) or die("Could not fetch this position");
		if (mysql_num_rows($result) != 1) die("Multiple or No Records for $name");
		list($pos) = mysql_fetch_row($result);
		return $pos;
	}
	final public static function getNameFromPosition($database, $pos, $conn)	{
		$query = "SELECT cName FROM contextPosition WHERE cPosition='$pos'";
		$result = mysql_db_query($database, $query, $conn) or $this->throwMe("Could not fetch this name");
		if (mysql_num_rows($result) != 1) $this->throwMe("Multiple or records");
		list($cname) = mysql_fetch_row($result);
		return $cname;
	}
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype;propertyname,propertytype;*/
		$lineToView = "@ContextPosition/contextName,text,k102;characterPosition,text,k102;contextCaption,text,k102";
		return $lineToView;
	}
	public final static function getClassContextName()	{
		return "managecontextposition";
	}
	public final static function getUniqueContextId($database, $conn)	{
		$query="SELECT cId FROM contextPosition";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ContextPosition, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('ContextPosition, None or Duplicate Row/Multiple Rows Found');
		list($contextId)=mysql_fetch_row($result);
		return $contextId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT cId, cName FROM contextPosition";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ContextPosition, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $cName, $cPosition, $caption)	{
		$query="INSERT INTO contextPosition (cName, cPosition, caption) VALUES('$cName', '$cPosition', '$caption')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ContextPosition, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ContextPosition, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('ContextPosition, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getContextId() {
		return $this->contextId;
	}
	public function getContextName() {
		return $this->contextName;
	}
	public function setContextName($cName) {
		if (! is_null($cName))	{
			$this->addToUpdateList("cName", $cName);
			$this->contextName = $cName;
		}
	}
	public function getCharacterPosition() {
		return $this->characterPosition;
	}
	public function setCharacterPosition($cPosition) {
		if (! is_null($cPosition))	{
			$this->addToUpdateList("cPosition", $cPosition);
			$this->characterPosition = $cPosition;
		}
	}
	public function getContextCaption() {
		return $this->contextCaption;
	}
	public function setContextCaption($caption) {
		if (! is_null($caption))	{
			$this->addToUpdateList("caption", $caption);
			$this->contextCaption = $caption;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT cId FROM contextPosition";
		return $query;
	}
	public function __construct($database, $cId, $conn) {
		$this->setMe($database, $cId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->contextId, $this->conn);
	}
	public function commitUpdate()	{
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE contextPosition SET $setList WHERE cId = '$this->cId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ContextPosition, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		$query="DELETE FROM contextPosition WHERE cId = '$this->cId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ContextPosition, Row Deletion Failed');
	}
	public function getClassName()	{
		return "ContextPosition";
	}
	protected function getProperties()	{
		return "contextId=$this->contextId"."@contextName=$this->contextName"."@characterPosition=$this->characterPosition"."@contextCaption=$this->contextCaption";
	}
	protected function getAdvancedProperties()	{
		return "contextId=$this->contextId"."@contextName=$this->contextName"."@characterPosition=$this->characterPosition"."@contextCaption=$this->contextCaption";
	}
	public function debug()	{
		
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $cId, $conn) {
		$query="SELECT cId, cName, cPosition, caption FROM contextPosition WHERE cId = '$cId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('ContextPosition, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ContextPosition, Duplicate or No Record');
		list($cId, $cName, $cPosition, $caption)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->contextId = $cId;
		if (! is_null($cName))	{
			$this->contextName = $cName;
		}
		if (! is_null($cPosition))	{
			$this->characterPosition = $cPosition;
		}
		if (! is_null($caption))	{
			$this->contextCaption = $caption;
		}
	}
	public function cloneMe($updateDataArray)	{ return -1; }
}
class SystemLogs extends Object {
	private $logId;
	private $logName;
	private $database;
	private $conn;
	public final static function searchFromSystemLogs($database, $conn, $searchtext, $count)	{
		$count=intval($count);
		$query="SELECT logName FROM systemlogs ORDER BY logName DESC";
		$result=mysql_db_query($database, $query, $conn) or die("Could not extract from system logs");
		$list=array();
		while (($count > 0) &&(list($logdata)=mysql_fetch_row($result)))	{
			$tlist=explode("%", $logdata);
			$mydate=$tlist[0];
			$username=$tlist[1];
			$target=$tlist[3];
			$actionId=$tlist[2];
			$query="SELECT caption FROM contextPosition WHERE cId='$actionId'";
			$actionResult=mysql_db_query($database, $query, $conn) or die("Could not get a reference action");
			list($action)=mysql_fetch_row($actionResult);
			try	{
				$mydate=new Date($mydate);
			} catch (Exception $e)	{ die("Date could not be Assembled"); }
			$mydate = $mydate->getDay()."/".$mydate->getMonth()."/".$mydate->getYear()." at ".$mydate->getHour().":".$mydate->getMinute().":".$mydate->getSecond();
			$originalString = "@when=$mydate@who=$username@what=$action@towhom=$target";
			if (Object::staticSearchAlgorithm($searchtext, $originalString))	{
				$count--;
				$index=sizeof($list);
				$list[$index]=array();
				$list[$index]['when']=$mydate;
				$list[$index]['who']=$username;
				$list[$index]['what']=$action;
				$list[$index]['towhom']=$target;
			}
		}
		return $list;
	}
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype;propertyname,propertytype;*/
		$lineToView = "@SystemLogs/logName,text,k103";
		return $lineToView;
	}
	public final static function getClassContextName()	{
		return "managesystemlogs";
	}
	public final static function getUniqueLogId($database, $conn)	{
		$query="SELECT logId FROM systemlogs";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SystemLogs, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('SystemLogs, None or Duplicate Row/Multiple Rows Found');
		list($logId)=mysql_fetch_row($result);
		return $logId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT logId, logName FROM systemlogs";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SystemLogs, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $logName)	{
		$query="INSERT INTO systemlogs (logName) VALUES('$logName')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SystemLogs, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SystemLogs, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('SystemLogs, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getLogId() {
		return $this->logId;
	}
	public function getLogName() {
		return $this->logName;
	}
	public function setLogName($logName) {
		if (! is_null($logName))	{
			$this->addToUpdateList("logName", $logName);
			$this->logName = $logName;
		}
	}
	public function getQueryText()	{
		$query="SELECT logId FROM systemlogs";
		return $query;
	}
	public function __construct($database, $logId, $conn) {
		$this->setMe($database, $logId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->logId, $this->conn);
	}
	public function commitUpdate()	{
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE systemlogs SET $setList WHERE logId = '$this->logId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('SystemLogs, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		$query="DELETE FROM systemlogs WHERE logId = '$this->logId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('SystemLogs, Row Deletion Failed');
	}
	public function getClassName()	{
		return "SystemLogs";
	}
	protected function getProperties()	{
		return "logId=$this->logId"."@logName=$this->logName";
	}
	protected function getAdvancedProperties()	{
		return "logId=$this->logId"."@logName=$this->logName";
	}
	public function debug()	{
		
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $logId, $conn) {
		$query="SELECT logId, logName FROM systemlogs WHERE logId = '$logId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('SystemLogs, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('SystemLogs, Duplicate or No Record');
		list($logId, $logName)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->logId = $logId;
		if (! is_null($logName))	{
			$this->logName = $logName;
		}
	}
	public function cloneMe($updateDataArray)	{ return -1; }
}
class SystemPolicy extends Object {
	private $policyId;
	private $policyClassName;
	private $policyCaption;
	private $root;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	static $ENABLE_ADD_RECORD = 4;
	static $ENABLE_EDIT_RECORD = 5;
	static $ENABLE_DELETE_RECORD = 6;
	static $ENABLE_VIEW_RECORD = 7;
	static $ENABLE_CREATE_OBJECT = 8;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getClassPolicyReference($database, $conn, $classname)	{
		$query = "SELECT policyId FROM systemPolicy WHERE className='$classname'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("$classname, ClassNameReferencePolicy Failed ".mysql_error());
		$policy1 = null;
		if (mysql_num_rows($result) == 1)	{
			list($policyId) = mysql_fetch_row($result);
			try {
				$policy1 = new SystemPolicy($database, $policyId, $conn);
			} catch (Exception $e)	{
				$policy1 = null;
			}
		}
		return $policy1;
	}
	public final static function enableAddRecord($database, $conn, $classname)	{
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		if (! is_null($policy1))	{
			$policy1->setFlagAt(SystemPolicy::$ENABLE_ADD_RECORD);
			try {
				$policy1->commitUpdate();
			} catch (Exception $e)	{
				
			}
		}
	}
	public final static function disableAddRecord($database, $conn, $classname)	{
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		if (! is_null($policy1))	{
			$policy1->resetFlagAt(SystemPolicy::$ENABLE_ADD_RECORD);
			try {
				$policy1->commitUpdate();
			} catch (Exception $e)	{
				
			}
		}
	}
	public final static function isAddRecordEnabled($database, $conn, $classname)	{
		//If not defined return true 
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		return (is_null($policy1) || $policy1->isFlagSetAt(SystemPolicy::$ENABLE_ADD_RECORD));
	}
	public final static function enableEditRecord($database, $conn, $classname)	{
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		if (! is_null($policy1))	{
			$policy1->setFlagAt(SystemPolicy::$ENABLE_EDIT_RECORD);
			try {
				$policy1->commitUpdate();
			} catch (Exception $e)	{
				
			}
		}
	}
	public final static function disableEditRecord($database, $conn, $classname)	{
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		if (! is_null($policy1))	{
			$policy1->resetFlagAt(SystemPolicy::$ENABLE_EDIT_RECORD);
			try {
				$policy1->commitUpdate();
			} catch (Exception $e)	{
				
			}
		}
	}
	public final static function isEditRecordEnabled($database, $conn, $classname)	{
		//If not defined return true 
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		return (is_null($policy1) || $policy1->isFlagSetAt(SystemPolicy::$ENABLE_EDIT_RECORD));
	}
	public final static function enableDeleteRecord($database, $conn, $classname)	{
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		if (! is_null($policy1))	{
			$policy1->setFlagAt(SystemPolicy::$ENABLE_DELETE_RECORD);
			try {
				$policy1->commitUpdate();
			} catch (Exception $e)	{
				
			}
		}
	}
	public final static function disableDeleteRecord($database, $conn, $classname)	{
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		if (! is_null($policy1))	{
			$policy1->resetFlagAt(SystemPolicy::$ENABLE_DELETE_RECORD);
			try {
				$policy1->commitUpdate();
			} catch (Exception $e)	{
				
			}
		}
	}
	public final static function isDeleteRecordEnabled($database, $conn, $classname)	{
		//If not defined return true 
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		return (is_null($policy1) || $policy1->isFlagSetAt(SystemPolicy::$ENABLE_DELETE_RECORD));
	}
	public final static function enableViewRecord($database, $conn, $classname)	{
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		if (! is_null($policy1))	{
			$policy1->setFlagAt(SystemPolicy::$ENABLE_VIEW_RECORD);
			try {
				$policy1->commitUpdate();
			} catch (Exception $e)	{
				
			}
		}
	}
	public final static function disableViewRecord($database, $conn, $classname)	{
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		if (! is_null($policy1))	{
			$policy1->resetFlagAt(SystemPolicy::$ENABLE_VIEW_RECORD);
			try {
				$policy1->commitUpdate();
			} catch (Exception $e)	{
				
			}
		}
	}
	public final static function isViewRecordEnabled($database, $conn, $classname)	{
		//If not defined return true 
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		return (is_null($policy1) || $policy1->isFlagSetAt(SystemPolicy::$ENABLE_VIEW_RECORD));
	}
	public final static function enableCreateObject($database, $conn, $classname)	{
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		if (! is_null($policy1))	{
			$policy1->setFlagAt(SystemPolicy::$ENABLE_CREATE_OBJECT);
			try {
				$policy1->commitUpdate();
			} catch (Exception $e)	{
				
			}
		}
	}
	public final static function disableCreateObject($database, $conn, $classname)	{
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		if (! is_null($policy1))	{
			$policy1->resetFlagAt(SystemPolicy::$ENABLE_CREATE_OBJECT);
			try {
				$policy1->commitUpdate();
			} catch (Exception $e)	{
				
			}
		}
	}
	public final static function isCreateObjectEnabled($database, $conn, $classname)	{
		//If not defined return true 
		$policy1 = SystemPolicy::getClassPolicyReference($database, $conn, $classname);
		return (is_null($policy1) || $policy1->isFlagSetAt(SystemPolicy::$ENABLE_CREATE_OBJECT));
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@SystemPolicy/policyClassName,text,k104;policyCaption,text,k104;root,boolean,k104;extraFilter,text,k104;extraInformation,text,k104;flags,text,k104";
		return $lineToView;
	}
	public final static function getClassContextName()	{
		return "managesystempolicy";
	}
	public final static function getUniquePolicyId($database, $conn)	{
		$query="SELECT policyId FROM systemPolicy";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SystemPolicy, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('SystemPolicy, None or Duplicate Row/Multiple Rows Found');
		list($policyId)=mysql_fetch_row($result);
		return $policyId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT policyId, className FROM systemPolicy";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SystemPolicy, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $className, $policyCaption, $root, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO systemPolicy (className, policyCaption, root, extraFilter, extraInformation, flags) VALUES('$className', '$policyCaption', '$root', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SystemPolicy, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SystemPolicy, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('SystemPolicy, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->policyId;
	}
	public function getPolicyId() {
		return $this->policyId;
	}
	public function getPolicyClassName() {
		return $this->policyClassName;
	}
	public function setPolicyClassName($className) {
		if (! is_null($className))	{
			$this->addToUpdateList("className", $className);
			$this->policyClassName = $className;
		}
	}
	public function getPolicyCaption() {
		return $this->policyCaption;
	}
	public function setPolicyCaption($policyCaption) {
		if (! is_null($policyCaption))	{
			$this->addToUpdateList("policyCaption", $policyCaption);
			$this->policyCaption = $policyCaption;
		}
	}
	public function isRoot() {
		return $this->root;
	}
	public function setRoot($root) {
		if (! is_null($root))	{
			$this->addToUpdateList("root", $root);
			$this->root = ($root == "1");
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT policyId FROM systemPolicy";
		return $query;
	}
	public function __construct($database, $policyId, $conn) {
		$this->setMe($database, $policyId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->policyId, $this->conn);
	}
	public function commitUpdate()	{
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE systemPolicy SET $setList WHERE policyId = '$this->policyId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('SystemPolicy, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		$query="DELETE FROM systemPolicy WHERE policyId = '$this->policyId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('SystemPolicy, Row Deletion Failed');
	}
	public function getClassName()	{
		return "SystemPolicy";
	}
	protected function getProperties()	{
		return "policyId=$this->policyId"."@policyClassName=$this->policyClassName"."@policyCaption=$this->policyCaption"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags"."@root=$this->root";
	}
	protected function getAdvancedProperties()	{
		return "1002.policyId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->policyId))."@1002.policyClassName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->policyClassName))."@1002.policyCaption=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->policyCaption))."@1002.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1002.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1002.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags))."@1002.root=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->root));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: SystemPolicy (NAMESPACETAG = 1002) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $policyId, $conn) {
		$query="SELECT policyId, className, policyCaption, root, extraFilter, extraInformation, flags FROM systemPolicy WHERE policyId = '$policyId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('SystemPolicy, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('SystemPolicy, Duplicate or No Record');
		list($policyId, $className, $policyCaption, $root, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->policyId = $policyId;
		if (! is_null($className))	{
			$this->policyClassName = $className;
		}
		if (! is_null($policyCaption))	{
			$this->policyCaption = $policyCaption;
		}
		if (! is_null($root))	{
			$this->root = ($root == "1");
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT className, policyCaption, root, extraFilter, extraInformation, flags FROM systemPolicy WHERE policyId = '$this->policyId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('SystemPolicy, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('SystemPolicy, [Clone] Duplicate or No Record');
		list($className, $policyCaption, $root, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['className'] = $className;
		$masterDataArray['policyCaption'] = $policyCaption;
		$masterDataArray['root'] = $root;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO systemPolicy ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("SystemPolicy [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("SystemPolicy [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("SystemPolicy [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
?><?php
class PHPTimezone extends Object {
	private $zoneId;
	private $zoneName;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@PHPTimezone/zoneName,text,1001;extraFilter,text,1001;extraInformation,text,1001;flags,text,1001";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "phptimezone";
	}
	public final static function getClassContextName()	{
		return "managephptimezone";
	}
	public final static function getUniqueZoneId($database, $conn)	{
		$query="SELECT zoneId FROM pHPTimezone";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('PHPTimezone, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('PHPTimezone, None or Duplicate Row/Multiple Rows Found');
		list($zoneId)=mysql_fetch_row($result);
		return $zoneId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT zoneId, zoneName FROM pHPTimezone";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('PHPTimezone, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $zoneName, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO pHPTimezone (zoneName, extraFilter, extraInformation, flags) VALUES('$zoneName', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('PHPTimezone, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('PHPTimezone, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('PHPTimezone, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->zoneId;
	}
	public function getZoneId() {
		return $this->zoneId;
	}
	public function getZoneName() {
		return $this->zoneName;
	}
	public function setZoneName($zoneName) {
		if (! is_null($zoneName))	{
			$this->addToUpdateList("zoneName", $zoneName);
			$this->zoneName = $zoneName;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT zoneId FROM pHPTimezone";
		return $query;
	}
	public function __construct($database, $zoneId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "PHPTimezone")) Object::shootException("PHPTimezone System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $zoneId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->zoneId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "PHPTimezone")) Object::shootException("PHPTimezone System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE pHPTimezone SET $setList WHERE zoneId = '$this->zoneId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('PHPTimezone, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "PHPTimezone")) Object::shootException("PHPTimezone System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM pHPTimezone WHERE zoneId = '$this->zoneId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('PHPTimezone, Row Deletion Failed');
	}
	public function getClassName()	{
		return "PHPTimezone";
	}
	protected function getProperties()	{
		return "zoneId=$this->zoneId"."@zoneName=$this->zoneName"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1001.zoneId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->zoneId))."@1001.zoneName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->zoneName))."@1001.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1001.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1001.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: PHPTimezone (NAMESPACETAG = 1001) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $zoneId, $conn) {
		$query="SELECT zoneId, zoneName, extraFilter, extraInformation, flags FROM pHPTimezone WHERE zoneId = '$zoneId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('PHPTimezone, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('PHPTimezone, Duplicate or No Record');
		list($zoneId, $zoneName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->zoneId = $zoneId;
		if (! is_null($zoneName))	{
			$this->zoneName = $zoneName;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT zoneName, extraFilter, extraInformation, flags FROM pHPTimezone WHERE zoneId = '$this->zoneId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('PHPTimezone, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('PHPTimezone, [Clone] Duplicate or No Record');
		list($zoneName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['zoneName'] = $zoneName;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO pHPTimezone ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("PHPTimezone [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("PHPTimezone [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("PHPTimezone [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class DaysOfAWeek extends Object {
	private $dayId;
	private $dayName;
	private $dayAbbreviation;
	private $offsetValue;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function readjustOffsetValue($currentOffset, $adjustBy)	{
		$numberOfDaysInAWeek = 7;
		return ((intval($currentOffset) + intval($adjustBy)) % intval($numberOfDaysInAWeek));
	}
	public final static function adjustOffsetValue($currentOffset, $adjustBy)	{
		$numberOfDaysInAWeek = 7;
		return (($numberOfDaysInAWeek + intval($currentOffset) - intval($adjustBy)) % intval($numberOfDaysInAWeek));
	}
	public final static function getDayIdFromOffset($database, $conn, $offset)	{
		$query = "SELECT dayId FROM daysOfAWeek WHERE offsetValue='$offset'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("DaysOfAWeek [static], Malfunctioned query");
		if (mysql_num_rows($result) != 1) Object::shootException("DaysOfAWeek [static], Non Unique day reference");
		list($dayId) = mysql_fetch_row($result);
		return $dayId;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@DaysOfAWeek/dayName,text,1002;dayAbbreviation,text,1002;offsetValue,text,1002;extraFilter,text,1002;extraInformation,text,1002;flags,text,1002";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "daysofaweek";
	}
	public final static function getClassContextName()	{
		return "managedaysofaweek";
	}
	public final static function getUniqueDayId($database, $conn)	{
		$query="SELECT dayId FROM daysOfAWeek";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('DaysOfAWeek, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('DaysOfAWeek, None or Duplicate Row/Multiple Rows Found');
		list($dayId)=mysql_fetch_row($result);
		return $dayId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT dayId, dayName FROM daysOfAWeek";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('DaysOfAWeek, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $dayName, $dayAbbreviation, $offsetValue, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO daysOfAWeek (dayName, dayAbbreviation, offsetValue, extraFilter, extraInformation, flags) VALUES('$dayName', '$dayAbbreviation', '$offsetValue', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('DaysOfAWeek, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('DaysOfAWeek, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('DaysOfAWeek, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->dayId;
	}
	public function getDayId() {
		return $this->dayId;
	}
	public function getDayName() {
		return $this->dayName;
	}
	public function setDayName($dayName) {
		if (! is_null($dayName))	{
			$this->addToUpdateList("dayName", $dayName);
			$this->dayName = $dayName;
		}
	}
	public function getDayAbbreviation() {
		return $this->dayAbbreviation;
	}
	public function setDayAbbreviation($dayAbbreviation) {
		if (! is_null($dayAbbreviation))	{
			$this->addToUpdateList("dayAbbreviation", $dayAbbreviation);
			$this->dayAbbreviation = $dayAbbreviation;
		}
	}
	public function getOffsetValue() {
		return $this->offsetValue;
	}
	public function setOffsetValue($offsetValue) {
		if (! is_null($offsetValue))	{
			$this->addToUpdateList("offsetValue", $offsetValue);
			$this->offsetValue = $offsetValue;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT dayId FROM daysOfAWeek";
		return $query;
	}
	public function __construct($database, $dayId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "DaysOfAWeek")) Object::shootException("DaysOfAWeek System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $dayId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->dayId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "DaysOfAWeek")) Object::shootException("DaysOfAWeek System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE daysOfAWeek SET $setList WHERE dayId = '$this->dayId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('DaysOfAWeek, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "DaysOfAWeek")) Object::shootException("DaysOfAWeek System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM daysOfAWeek WHERE dayId = '$this->dayId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('DaysOfAWeek, Row Deletion Failed');
	}
	public function getClassName()	{
		return "DaysOfAWeek";
	}
	protected function getProperties()	{
		return "dayId=$this->dayId"."@dayName=$this->dayName"."@dayAbbreviation=$this->dayAbbreviation"."@offsetValue=$this->offsetValue"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1002.dayId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->dayId))."@1002.dayName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->dayName))."@1002.dayAbbreviation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->dayAbbreviation))."@1002.offsetValue=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->offsetValue))."@1002.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1002.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1002.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: DaysOfAWeek (NAMESPACETAG = 1002) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $dayId, $conn) {
		$query="SELECT dayId, dayName, dayAbbreviation, offsetValue, extraFilter, extraInformation, flags FROM daysOfAWeek WHERE dayId = '$dayId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('DaysOfAWeek, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('DaysOfAWeek, Duplicate or No Record');
		list($dayId, $dayName, $dayAbbreviation, $offsetValue, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->dayId = $dayId;
		if (! is_null($dayName))	{
			$this->dayName = $dayName;
		}
		if (! is_null($dayAbbreviation))	{
			$this->dayAbbreviation = $dayAbbreviation;
		}
		if (! is_null($offsetValue))	{
			$this->offsetValue = $offsetValue;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT dayName, dayAbbreviation, offsetValue, extraFilter, extraInformation, flags FROM daysOfAWeek WHERE dayId = '$this->dayId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('DaysOfAWeek, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('DaysOfAWeek, [Clone] Duplicate or No Record');
		list($dayName, $dayAbbreviation, $offsetValue, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['dayName'] = $dayName;
		$masterDataArray['dayAbbreviation'] = $dayAbbreviation;
		$masterDataArray['offsetValue'] = $offsetValue;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO daysOfAWeek ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("DaysOfAWeek [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("DaysOfAWeek [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("DaysOfAWeek [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class MonthOfAYear extends Object {
	private $monthId;
	private $monthName;
	private $monthAbbreviation;
	private $monthNumber;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getMonthOfAYearReferenceFromMonthNumber($database, $monthNumber, $conn)	{
		$monthNumber = intval("".$monthNumber);
		$query = "SELECT monthId FROM monthOfAYear WHERE monthNumber='$monthNumber'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("MonthOfAYear[static], Could not execute Query");
		if (mysql_num_rows($result) != 1) Object::shootException("MonthOfAYear[static], None or Duplicate Records Returned");
		list($monthId) = mysql_fetch_row($result);
		return $monthId;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@MonthOfAYear/monthName,text,1003;monthAbbreviation,text,1003;monthNumber,text,1003;extraFilter,text,1003;extraInformation,text,1003;flags,text,1003";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "monthofayear";
	}
	public final static function getClassContextName()	{
		return "managemonthofayear";
	}
	public final static function getUniqueMonthId($database, $conn)	{
		$query="SELECT monthId FROM monthOfAYear";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MonthOfAYear, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('MonthOfAYear, None or Duplicate Row/Multiple Rows Found');
		list($monthId)=mysql_fetch_row($result);
		return $monthId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT monthId, monthName FROM monthOfAYear";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MonthOfAYear, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $monthName, $monthAbbreviation, $monthNumber, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO monthOfAYear (monthName, monthAbbreviation, monthNumber, extraFilter, extraInformation, flags) VALUES('$monthName', '$monthAbbreviation', '$monthNumber', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MonthOfAYear, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MonthOfAYear, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('MonthOfAYear, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->monthId;
	}
	public function getMonthId() {
		return $this->monthId;
	}
	public function getMonthName() {
		return $this->monthName;
	}
	public function setMonthName($monthName) {
		if (! is_null($monthName))	{
			$this->addToUpdateList("monthName", $monthName);
			$this->monthName = $monthName;
		}
	}
	public function getMonthAbbreviation() {
		return $this->monthAbbreviation;
	}
	public function setMonthAbbreviation($monthAbbreviation) {
		if (! is_null($monthAbbreviation))	{
			$this->addToUpdateList("monthAbbreviation", $monthAbbreviation);
			$this->monthAbbreviation = $monthAbbreviation;
		}
	}
	public function getMonthNumber() {
		return $this->monthNumber;
	}
	public function setMonthNumber($monthNumber) {
		if (! is_null($monthNumber))	{
			$this->addToUpdateList("monthNumber", $monthNumber);
			$this->monthNumber = $monthNumber;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT monthId FROM monthOfAYear";
		return $query;
	}
	public function __construct($database, $monthId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "MonthOfAYear")) Object::shootException("MonthOfAYear System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $monthId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->monthId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "MonthOfAYear")) Object::shootException("MonthOfAYear System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE monthOfAYear SET $setList WHERE monthId = '$this->monthId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MonthOfAYear, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "MonthOfAYear")) Object::shootException("MonthOfAYear System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM monthOfAYear WHERE monthId = '$this->monthId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MonthOfAYear, Row Deletion Failed');
	}
	public function getClassName()	{
		return "MonthOfAYear";
	}
	protected function getProperties()	{
		return "monthId=$this->monthId"."@monthName=$this->monthName"."@monthAbbreviation=$this->monthAbbreviation"."@monthNumber=$this->monthNumber"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1003.monthId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->monthId))."@1003.monthName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->monthName))."@1003.monthAbbreviation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->monthAbbreviation))."@1003.monthNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->monthNumber))."@1003.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1003.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1003.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: MonthOfAYear (NAMESPACETAG = 1003) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $monthId, $conn) {
		$query="SELECT monthId, monthName, monthAbbreviation, monthNumber, extraFilter, extraInformation, flags FROM monthOfAYear WHERE monthId = '$monthId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('MonthOfAYear, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('MonthOfAYear, Duplicate or No Record');
		list($monthId, $monthName, $monthAbbreviation, $monthNumber, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->monthId = $monthId;
		if (! is_null($monthName))	{
			$this->monthName = $monthName;
		}
		if (! is_null($monthAbbreviation))	{
			$this->monthAbbreviation = $monthAbbreviation;
		}
		if (! is_null($monthNumber))	{
			$this->monthNumber = $monthNumber;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT monthName, monthAbbreviation, monthNumber, extraFilter, extraInformation, flags FROM monthOfAYear WHERE monthId = '$this->monthId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MonthOfAYear, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('MonthOfAYear, [Clone] Duplicate or No Record');
		list($monthName, $monthAbbreviation, $monthNumber, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['monthName'] = $monthName;
		$masterDataArray['monthAbbreviation'] = $monthAbbreviation;
		$masterDataArray['monthNumber'] = $monthNumber;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO monthOfAYear ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("MonthOfAYear [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("MonthOfAYear [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("MonthOfAYear [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Theme extends Object {
	private $themeId;
	private $themeName;
	private $themeFolder;
	private $themeBackgroundColor;
	private $themeBackgroundImage;
	private $themeFontFace;
	private $themeFontSize;
	private $themeFontColor;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Theme/themeName,text,1004;themeFolder,text,1004;themeBackgroundColor,text,1004;themeBackgroundImage,text,1004;themeFontFace,text,1004;themeFontSize,text,1004;themeFontColor,text,1004;extraFilter,text,1004;extraInformation,text,1004;flags,text,1004";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "theme";
	}
	public final static function getClassContextName()	{
		return "managetheme";
	}
	public final static function getUniqueThemeId($database, $conn)	{
		$query="SELECT themeId FROM themes";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Theme, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Theme, None or Duplicate Row/Multiple Rows Found');
		list($themeId)=mysql_fetch_row($result);
		return $themeId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT themeId, themeName FROM themes";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Theme, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $themeName, $themeFolder, $themeBackgroundColor, $themeBackgroundImage, $themeFontFace, $themeFontSize, $themeFontColor, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO themes (themeName, themeFolder, themeBackgroundColor, themeBackgroundImage, themeFontFace, themeFontSize, themeFontColor, extraFilter, extraInformation, flags) VALUES('$themeName', '$themeFolder', '$themeBackgroundColor', '$themeBackgroundImage', '$themeFontFace', '$themeFontSize', '$themeFontColor', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Theme, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Theme, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Theme, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->themeId;
	}
	public function getThemeId() {
		return $this->themeId;
	}
	public function getThemeName() {
		return $this->themeName;
	}
	public function setThemeName($themeName) {
		if (! is_null($themeName))	{
			$this->addToUpdateList("themeName", $themeName);
			$this->themeName = $themeName;
		}
	}
	public function getThemeFolder() {
		return $this->themeFolder;
	}
	public function setThemeFolder($themeFolder) {
		if (! is_null($themeFolder))	{
			$this->addToUpdateList("themeFolder", $themeFolder);
			$this->themeFolder = $themeFolder;
		}
	}
	public function getThemeBackgroundColor() {
		return $this->themeBackgroundColor;
	}
	public function setThemeBackgroundColor($themeBackgroundColor) {
		if (! is_null($themeBackgroundColor))	{
			$this->addToUpdateList("themeBackgroundColor", $themeBackgroundColor);
			$this->themeBackgroundColor = $themeBackgroundColor;
		}
	}
	public function getThemeBackgroundImage() {
		return $this->themeBackgroundImage;
	}
	public function setThemeBackgroundImage($themeBackgroundImage) {
		if (! is_null($themeBackgroundImage))	{
			$this->addToUpdateList("themeBackgroundImage", $themeBackgroundImage);
			$this->themeBackgroundImage = $themeBackgroundImage;
		}
	}
	public function getThemeFontFace() {
		return $this->themeFontFace;
	}
	public function setThemeFontFace($themeFontFace) {
		if (! is_null($themeFontFace))	{
			$this->addToUpdateList("themeFontFace", $themeFontFace);
			$this->themeFontFace = $themeFontFace;
		}
	}
	public function getThemeFontSize() {
		return $this->themeFontSize;
	}
	public function setThemeFontSize($themeFontSize) {
		if (! is_null($themeFontSize))	{
			$this->addToUpdateList("themeFontSize", $themeFontSize);
			$this->themeFontSize = $themeFontSize;
		}
	}
	public function getThemeFontColor() {
		return $this->themeFontColor;
	}
	public function setThemeFontColor($themeFontColor) {
		if (! is_null($themeFontColor))	{
			$this->addToUpdateList("themeFontColor", $themeFontColor);
			$this->themeFontColor = $themeFontColor;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT themeId FROM themes";
		return $query;
	}
	public function __construct($database, $themeId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Theme")) Object::shootException("Theme System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $themeId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->themeId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Theme")) Object::shootException("Theme System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE themes SET $setList WHERE themeId = '$this->themeId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Theme, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Theme")) Object::shootException("Theme System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM themes WHERE themeId = '$this->themeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Theme, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Theme";
	}
	protected function getProperties()	{
		return "themeId=$this->themeId"."@themeName=$this->themeName"."@themeFolder=$this->themeFolder"."@themeBackgroundColor=$this->themeBackgroundColor"."@themeBackgroundImage=$this->themeBackgroundImage"."@themeFontFace=$this->themeFontFace"."@themeFontSize=$this->themeFontSize"."@themeFontColor=$this->themeFontColor"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1004.themeId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->themeId))."@1004.themeName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->themeName))."@1004.themeFolder=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->themeFolder))."@1004.themeBackgroundColor=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->themeBackgroundColor))."@1004.themeBackgroundImage=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->themeBackgroundImage))."@1004.themeFontFace=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->themeFontFace))."@1004.themeFontSize=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->themeFontSize))."@1004.themeFontColor=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->themeFontColor))."@1004.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1004.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1004.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Theme (NAMESPACETAG = 1004) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $themeId, $conn) {
		$query="SELECT themeId, themeName, themeFolder, themeBackgroundColor, themeBackgroundImage, themeFontFace, themeFontSize, themeFontColor, extraFilter, extraInformation, flags FROM themes WHERE themeId = '$themeId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Theme, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Theme, Duplicate or No Record');
		list($themeId, $themeName, $themeFolder, $themeBackgroundColor, $themeBackgroundImage, $themeFontFace, $themeFontSize, $themeFontColor, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->themeId = $themeId;
		if (! is_null($themeName))	{
			$this->themeName = $themeName;
		}
		if (! is_null($themeFolder))	{
			$this->themeFolder = $themeFolder;
		}
		if (! is_null($themeBackgroundColor))	{
			$this->themeBackgroundColor = $themeBackgroundColor;
		}
		if (! is_null($themeBackgroundImage))	{
			$this->themeBackgroundImage = $themeBackgroundImage;
		}
		if (! is_null($themeFontFace))	{
			$this->themeFontFace = $themeFontFace;
		}
		if (! is_null($themeFontSize))	{
			$this->themeFontSize = $themeFontSize;
		}
		if (! is_null($themeFontColor))	{
			$this->themeFontColor = $themeFontColor;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT themeName, themeFolder, themeBackgroundColor, themeBackgroundImage, themeFontFace, themeFontSize, themeFontColor, extraFilter, extraInformation, flags FROM themes WHERE themeId = '$this->themeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Theme, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Theme, [Clone] Duplicate or No Record');
		list($themeName, $themeFolder, $themeBackgroundColor, $themeBackgroundImage, $themeFontFace, $themeFontSize, $themeFontColor, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['themeName'] = $themeName;
		$masterDataArray['themeFolder'] = $themeFolder;
		$masterDataArray['themeBackgroundColor'] = $themeBackgroundColor;
		$masterDataArray['themeBackgroundImage'] = $themeBackgroundImage;
		$masterDataArray['themeFontFace'] = $themeFontFace;
		$masterDataArray['themeFontSize'] = $themeFontSize;
		$masterDataArray['themeFontColor'] = $themeFontColor;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO themes ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Theme [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Theme [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Theme [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Country extends Object {
	private $countryId;
	private $countryName;
	private $abbreviation;
	private $code;
	private $timezone;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Country/countryName,text,1005;abbreviation,text,1005;code,text,1005;timezone,text,1005;extraFilter,text,1005;extraInformation,text,1005;flags,text,1005";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "country";
	}
	public final static function getClassContextName()	{
		return "managecountry";
	}
	public final static function getUniqueCountryId($database, $conn)	{
		$query="SELECT countryId FROM country";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Country, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Country, None or Duplicate Row/Multiple Rows Found');
		list($countryId)=mysql_fetch_row($result);
		return $countryId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT countryId, countryName FROM country";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Country, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $countryName, $abbreviation, $code, $timezone, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO country (countryName, abbreviation, code, timezone, extraFilter, extraInformation, flags) VALUES('$countryName', '$abbreviation', '$code', '$timezone', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Country, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Country, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Country, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->countryId;
	}
	public function getCountryId() {
		return $this->countryId;
	}
	public function getCountryName() {
		return $this->countryName;
	}
	public function setCountryName($countryName) {
		if (! is_null($countryName))	{
			$this->addToUpdateList("countryName", $countryName);
			$this->countryName = $countryName;
		}
	}
	public function getAbbreviation() {
		return $this->abbreviation;
	}
	public function setAbbreviation($abbreviation) {
		if (! is_null($abbreviation))	{
			$this->addToUpdateList("abbreviation", $abbreviation);
			$this->abbreviation = $abbreviation;
		}
	}
	public function getCode() {
		return $this->code;
	}
	public function setCode($code) {
		if (! is_null($code))	{
			$this->addToUpdateList("code", $code);
			$this->code = $code;
		}
	}
	public function getTimezone() {
		return $this->timezone;
	}
	public function setTimezone($timezone) {
		if (! is_null($timezone))	{
			$this->addToUpdateList("timezone", $timezone);
			$this->timezone = $timezone;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT countryId FROM country";
		return $query;
	}
	public function __construct($database, $countryId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Country")) Object::shootException("Country System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $countryId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->countryId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Country")) Object::shootException("Country System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE country SET $setList WHERE countryId = '$this->countryId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Country, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Country")) Object::shootException("Country System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM country WHERE countryId = '$this->countryId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Country, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Country";
	}
	protected function getProperties()	{
		return "countryId=$this->countryId"."@countryName=$this->countryName"."@abbreviation=$this->abbreviation"."@code=$this->code"."@timezone=$this->timezone"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1005.countryId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->countryId))."@1005.countryName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->countryName))."@1005.abbreviation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->abbreviation))."@1005.code=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->code))."@1005.timezone=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->timezone))."@1005.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1005.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1005.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Country (NAMESPACETAG = 1005) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $countryId, $conn) {
		$query="SELECT countryId, countryName, abbreviation, code, timezone, extraFilter, extraInformation, flags FROM country WHERE countryId = '$countryId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Country, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Country, Duplicate or No Record');
		list($countryId, $countryName, $abbreviation, $code, $timezone, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->countryId = $countryId;
		if (! is_null($countryName))	{
			$this->countryName = $countryName;
		}
		if (! is_null($abbreviation))	{
			$this->abbreviation = $abbreviation;
		}
		if (! is_null($code))	{
			$this->code = $code;
		}
		if (! is_null($timezone))	{
			$this->timezone = $timezone;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT countryName, abbreviation, code, timezone, extraFilter, extraInformation, flags FROM country WHERE countryId = '$this->countryId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Country, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Country, [Clone] Duplicate or No Record');
		list($countryName, $abbreviation, $code, $timezone, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['countryName'] = $countryName;
		$masterDataArray['abbreviation'] = $abbreviation;
		$masterDataArray['code'] = $code;
		$masterDataArray['timezone'] = $timezone;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO country ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Country [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Country [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Country [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class AccademicYear extends Object {
	private $accademicYearId;
	private $accademicYear;
	private $accademicYearNumber;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getResultsOfTheBatchForTheYearOfStudy($database, $conn, $batchId, $year)	{
		//We need a batchreference from current Accademic Year 
		$batch1 = new AccademicYear($database, $batchId, $conn);
		$number = ($year + $batch1->getAccademicYearNumber() - 1);
		return self::getBatchIdFromAccademicNumber($database, $conn, $number);
	}
	public final static function getBatchIdFromAccademicNumber($database, $conn, $number)	{
		$query = "SELECT accademicYearId FROM accademicYear WHERE accademicYearNumber='$number'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Accademic Year [static], Could not query reference from number");
		if (mysql_num_rows($result) != 1) Object::shootException("Accademic Year [static], None or Duplicate found");
		list($batchId)=mysql_fetch_row($result);
		return $batchId;
	}
	public final static function getBatchFromCurrentAccademicYear($database, $conn, $batchId, $year)	{
		//We need a batchreference from current Accademic Year 
		$batch1 = new AccademicYear($database, $batchId, $conn);
		$number = (1 + $batch1->getAccademicYearNumber() - $year);
		return self::getBatchIdFromAccademicNumber($database, $conn, $number);
	}
	public final static function getBatchIdFromName($database, $conn, $accademicYear)	{
		$query = "SELECT accademicYearId FROM accademicYear WHERE accademicYear.accademicYear='$accademicYear'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Accademic Year [static--Query] Could not get the Accademic Year Reference : $accademicYear");
		if (mysql_num_rows($result) != 1) Object::shootException("Accademic Year, None or Duplicate Accademic Year : $accademicYear");
		list($batchId)=mysql_fetch_row($result);
		return $batchId;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@AccademicYear/accademicYear,text,1006;accademicYearNumber,text,1006;extraFilter,text,1006;extraInformation,text,1006;flags,text,1006";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "accademicyear";
	}
	public final static function getClassContextName()	{
		return "manageaccademicyear";
	}
	public final static function getUniqueAccademicYearId($database, $conn)	{
		$query="SELECT accademicYearId FROM accademicYear";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('AccademicYear, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('AccademicYear, None or Duplicate Row/Multiple Rows Found');
		list($accademicYearId)=mysql_fetch_row($result);
		return $accademicYearId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT accademicYearId, accademicYear FROM accademicYear";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('AccademicYear, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $accademicYear, $accademicYearNumber, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO accademicYear (accademicYear, accademicYearNumber, extraFilter, extraInformation, flags) VALUES('$accademicYear', '$accademicYearNumber', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('AccademicYear, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('AccademicYear, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('AccademicYear, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->accademicYearId;
	}
	public function getAccademicYearId() {
		return $this->accademicYearId;
	}
	public function getAccademicYear() {
		return $this->accademicYear;
	}
	public function setAccademicYear($accademicYear) {
		if (! is_null($accademicYear))	{
			$this->addToUpdateList("accademicYear", $accademicYear);
			$this->accademicYear = $accademicYear;
		}
	}
	public function getAccademicYearNumber() {
		return $this->accademicYearNumber;
	}
	public function setAccademicYearNumber($accademicYearNumber) {
		if (! is_null($accademicYearNumber))	{
			$this->addToUpdateList("accademicYearNumber", $accademicYearNumber);
			$this->accademicYearNumber = $accademicYearNumber;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT accademicYearId FROM accademicYear";
		return $query;
	}
	public function __construct($database, $accademicYearId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "AccademicYear")) Object::shootException("AccademicYear System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $accademicYearId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->accademicYearId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "AccademicYear")) Object::shootException("AccademicYear System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE accademicYear SET $setList WHERE accademicYearId = '$this->accademicYearId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('AccademicYear, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "AccademicYear")) Object::shootException("AccademicYear System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM accademicYear WHERE accademicYearId = '$this->accademicYearId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('AccademicYear, Row Deletion Failed');
	}
	public function getClassName()	{
		return "AccademicYear";
	}
	protected function getProperties()	{
		return "accademicYearId=$this->accademicYearId"."@accademicYear=$this->accademicYear"."@accademicYearNumber=$this->accademicYearNumber"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1006.accademicYearId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->accademicYearId))."@1006.accademicYear=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->accademicYear))."@1006.accademicYearNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->accademicYearNumber))."@1006.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1006.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1006.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: AccademicYear (NAMESPACETAG = 1006) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $accademicYearId, $conn) {
		$query="SELECT accademicYearId, accademicYear, accademicYearNumber, extraFilter, extraInformation, flags FROM accademicYear WHERE accademicYearId = '$accademicYearId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('AccademicYear, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('AccademicYear, Duplicate or No Record');
		list($accademicYearId, $accademicYear, $accademicYearNumber, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->accademicYearId = $accademicYearId;
		if (! is_null($accademicYear))	{
			$this->accademicYear = $accademicYear;
		}
		if (! is_null($accademicYearNumber))	{
			$this->accademicYearNumber = $accademicYearNumber;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT accademicYear, accademicYearNumber, extraFilter, extraInformation, flags FROM accademicYear WHERE accademicYearId = '$this->accademicYearId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('AccademicYear, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('AccademicYear, [Clone] Duplicate or No Record');
		list($accademicYear, $accademicYearNumber, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['accademicYear'] = $accademicYear;
		$masterDataArray['accademicYearNumber'] = $accademicYearNumber;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO accademicYear ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("AccademicYear [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("AccademicYear [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("AccademicYear [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
} 
class AttendanceFile	{
	private $headerLine; //FirstLine of Each File
	private $dataLines;
	private $database;
	private $filename; /* Format $filename = "attendance_".$monthId."_".$year.".csv"; */
	private $month;
	private $year;
	private $conn;
	static $__IS_CLONE_MODE = "is_clone_mode";
	public final static function getAttendanceFileFromAttendanceTemplate($database, $conn, $attendanceFolder, $template1, $systemTime1)	{
		$data1 = new AttendanceFile($database, AttendanceFile::$__IS_CLONE_MODE, $conn);
		$headerLine = array();
		$headerLine[0] = "timetableId";
		$headerLine[1] = "activityName";
		$headerLine[2] = "startTime";
		$headerLine[3] = "endTime";
		$headerLine[4] = "date";
		$headerLine[5] = "staffLoginId";
		$headerLine[6] = "staffName";
		$headerLine[7] = "loginId";
		$headerLine[8] = "fullName";
		$headerLine[9] = "courseId";
		$headerLine[10] = "groupId";
		$headerLine[11] = "attended";
		//
		$template1 = $template1->getAttendedOnlyTemplateFile();
		if (is_null($template1)) Object::shootException("The template returned an empty records");
		//Extracting Common Data 
		
		$templateDataLines = $template1->getDataLines();
		//Preparing He
		$dataLines = array();
		if (! is_null($templateDataLines))	{
			foreach ($templateDataLines as $templateDataLine1)	{
				$dataLines[sizeof($dataLines)] = AttendanceDataLine::getAttendanceDataLineFromTemplateDataLine($database, $conn, $template1, $templateDataLine1, $headerLine, $systemTime1);
			}
		}
		//Preparing Filename attendance_monthId_year.csv 
		$dateAndTime1 = $template1->getDate();
		$monthId = MonthOfAYear::getMonthOfAYearReferenceFromMonthNumber($database, $dateAndTime1->getMonth(), $conn);
		$year = $dateAndTime1->getYear(); 
		$filename = "attendance_".$monthId."_".$year.".csv";
		$filename = $attendanceFolder.$filename;
		$data1->assignData($database, $conn, $headerLine, $dataLines, $filename, $monthId, $conn);
		return $data1;
	}
	public function assignData($database, $conn, $headerLine, $dataLines, $filename, $month, $year)	{
		$this->database = $database;
		$this->conn = $conn;
		$this->headerLine = $headerLine;
		$this->dataLines = $dataLines;
		$this->filename = $filename;
		$this->month = $month;
		$this->year = $year;
	}
	public function cloneMe()	{
		$data1 = new AttendanceFile("Zoomtong Company Limited", AttendanceFile::$__IS_CLONE_MODE, "Ndimangwa Fadhili Ngoya");
		$dataLines = array();
		foreach ($this->dataLines as $key => $dataLine1)	{
			$dataLines[$key] = $dataLine1;
		}
		$data1->assignData($this->database, $this->conn, $this->headerLine, $dataLines, $this->filename, $this->month, $this->year);
		return $data1;
	}
	public function __construct($database, $filename, $conn)	{
		if ($filename == AttendanceFile::$__IS_CLONE_MODE) return;
		$this->database = $database;
		$this->filename = $filename;
		$this->conn = $conn;
		$this->headerLine = array();
		$this->dataLines = array();
		//The Construct Just read an existing file and populate the Object
		if (! file_exists($filename)) Object::shootException("Could not find the Source File");
		$file1 = fopen($filename, "r") or Object::shootException("Could not Open a file for Reading");
		$linenumber = 0;
		while (($line = fgets($file1)) !== false)	{
			if (trim($line) == "") continue;
			$linenumber++;
			$lineArr = explode(",", $line);
			if ($linenumber == 1)	{
				//Prepare Headers 
				foreach ($lineArr as $lineData)	{
					$this->headerLine[sizeof($this->headerLine)] = trim($lineData);
				}
			} else {
				//DataLines 
				$this->dataLines[sizeof($this->dataLines)] = new AttendanceDataLine($line, $this->headerLine);
			}
		}
		fclose($file1);
		//Dealing with course, month and a year 
		//By Looking the filename $filename = "attendance_".$monthId."_".$year.".csv
		// Example attendance_12_2005.csv 
		$filename = basename($this->filename, ".csv"); //Output attendance_12_2015 
		$attributeArr = explode($filename, "_");
		$monthId = $attributeArr[1];
		$year = $attributeArr[2];
		$this->month = new MonthOfAYear($this->database, $monthId, $this->conn);
		$this->year = $year;
	}
	public function save()	{
		//This will Append On the Existing file ,
		//If file is not existing , create it and add Header to it 
		$file1 = null;
		if (! file_exists($this->filename))	{
			$file1 = fopen($this->filename, "w") or Object::shootException("Could not create a File for Writing");
			//Headers 
			$line = "";
			$count = 0;
			foreach ($this->headerLine as $index => $data)	{
				if ($count == 0) $line = $data;
				else $line .= ",".$data;
				$count++;
			}
			$line .= "\n";
			fwrite($file1, $line) or Object::shootException("Could not write a header line");
		} else {
			$file1 = fopen($this->filename, "a") or Object::shootException("Could not Open File for Appending");
		}
		//Now write other Lines 
		foreach ($this->dataLines as $dataLine1)	{
			$dataLine1->synchronize();
			$line = $dataLine1->getLine()."\n";
			fwrite($file1, $line) or Object::shootException("Could not write data line");
		}
		fclose($file1);
	}
	public function getMonthOfAYear()	{ return $this->month; }
	public function getYear()	{ return $this->year; }
}
class AttendanceDataLine	{
	private $dataArray;
	private $headerLine;
	private $line;
	static $__IS_CLONE_MODE = "is_clone_mode";
	public final static function getAttendanceDataLineFromTemplateDataLine($database, $conn, $template1, $templateDataLine1, $headerLine, $systemTime1)	{
		//Extracting Data
		$login1 = $template1->getStaffLogin();
		if (is_null($login1)) Object::shootException("Could not pull the Staff Details");
		$staffLoginId = $login1->getLoginId();
		$staffName = $login1->getFullname();
		$dataLine1 = new AttendanceDataLine(AttendanceDataLine::$__IS_CLONE_MODE, $headerLine);
		//Initialize dataArray 
		$dataArray = array();
		foreach ($headerLine as $controlIndex)	{
			$dataArray[$controlIndex] = "";
		}
		//Start Filling Value 
		if (isset($dataArray['timetableId'])) $dataArray['timetableId'] = $template1->getTimetable()->getTimetableId();
		if (isset($dataArray['activityName'])) $dataArray['activityName'] = $template1->getActivityName();
		if (isset($dataArray['startTime'])) $dataArray['startTime'] = $template1->getStartTime()->getDateAndTimeString(); 
		if (isset($dataArray['endTime'])) $dataArray['endTime'] = $template1->getEndTime()->getDateAndTimeString();
		if (isset($dataArray['date'])) $dataArray['date'] = $systemTime1->getDateAndTimeString();
		if (isset($dataArray['staffLoginId'])) $dataArray['staffLoginId'] = $staffLoginId; 
		if (isset($dataArray['staffName'])) $dataArray['staffName'] = $staffName;
		//Dealing With templateDataLine1
		$loginId = $templateDataLine1->getLoginId();
		$login1 = new Login($database, $loginId, $conn);
		if (isset($dataArray['loginId'])) $dataArray['loginId'] = $loginId;
		if (isset($dataArray['fullName'])) $dataArray['fullName'] = $login1->getFullname();
		$courseId = 0;
		if ($login1->isStudent())	{
			$registeredUser1 = Login::getUserWithThisLogin($database, $conn, $login1);
			if (! is_null($registeredUser1) && ! is_null($registeredUser1->getCourse()))	{
				$courseId = $registeredUser1->getCourse()->getCourseId();
			}
		}
		if (isset($dataArray['courseId'])) $dataArray['courseId'] = $courseId;
		if (isset($dataArray['groupId'])) $dataArray['groupId'] = $login1->getGroup()->getGroupId();
		$status = 0;
		if ($templateDataLine1->hasAttended())	$status = 1;
		$dataArray['attended'] = $status;
		//Filling to an Object 
		$dataLine1->assignData($dataArray, $headerLine, "Ndimangwa # Fadhili * Ngoya");
		$dataLine1->synchronize();
		return $dataLine1;
	}
	public function __construct($line, $headerLine)	{
		if ($line == AttendanceDataLine::$__IS_CLONE_MODE) return;
		$lineArr = explode(",", $line);
		if (sizeof($lineArr) < sizeof($headerLine)) Object::shootException("Some Arguments are Missing"); 
		$this->dataArray = array();
		foreach ($headerLine as $index => $key)	{
			$this->dataArray[$key] = $lineArr[$index];
		}
		$this->line = $line;
		$this->headerLine = $headerLine;
	}
	public function assignData($dataArray, $headerLine, $line)	{
		$this->dataArray = $dataArray;
		$this->headerLine = $headerLine;
		$this->line = $line;
	}
	public function synchronize()	{
		$line = "";
		foreach ($this->headerLine as $index => $key)	{
			$tline = $this->dataArray[$key];
			if ($index == 0)	$line = $tline;
			else $line .= ",".$tline;
		}
		$this->line = $line;
		return $this;
	}
	public function cloneMe()	{
		$data1 = new AttendanceDataLine(AttendanceDataLine::$__IS_CLONE_MODE, "Ndimangwa");
		$dataArray = array();
		foreach ($this->dataArray as $key => $value)	{
			$dataArray[$key] = $value;
		}
		$data1->assignData($dataArray, $this->headerLine, $this->line);
		return $data1;
	}
	public function getDataAt($key)	{
		if (! isset($this->dataArray[$key])) return null;
		return $this->dataArray[$key];
	}
	public function setDataAt($key, $value)	{
		if (! isset($this->dataArray[$key])) Object::shootException("You can not set Data in an Index not available in header");
		$this->dataArray[$key] = $value;
	}
	public function getDataArray()	{
		return $this->dataArray;
	}
	public function setDataArray($dataArray)	{
		$this->dataArray = $dataArray;
	}
	public function getHeaderLine()	{
		return $this->headerLine;
	}
	public function setHeaderLine($headerLine)	{
		$this->headerLine = $headerLine;
	}
	public function getLine()	{ return $this->line; }
}
class AttendanceTemplateFile {
	private $headers;
	private $dataLines;
	private $filename;
	private $controlIndexArray;
	private $database;
	private $conn;
	static $__IS_CLONE_MODE = "is_clone_mode";
	public final static function getAttendanceTemplate($database, $conn, $timetableId, $staffLoginId, $filename, $systemTime1)	{
		$numberOfColumns = 7;
		$defaultAttendanceMark = "X";
		$headerTailString = "";
		for ($i=2; $i < $numberOfColumns; $i++)	{
			$headerTailString .= ",";
		}
		$promise1 = new Promise();
		$promise1->setPromise(false);
		$promise1->setReason("Could not Complete to the End");
		$timetable1 = null;
		$staff1 = null;
		try	{
			$timetable1 = new Timetable($database, $timetableId, $conn);
			$staff1 = new Login($database, $staffLoginId, $conn);
		} catch (Exception $e)	{
			$promise1->setReason($e->getMessage());
			return $promise1;
		}
		$file1 = fopen($filename, "w") or Object::shootException("Could not Open file for Writing");
		$line = "@-header,timetableId_!_".$timetable1->getTimetableId()."$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "@-header,activityName_!_".$timetable1->getCaptionName()."$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "@-header,startTime_!_".$timetable1->getStartTime()->getDateAndTimeString()."$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "@-header,endTime_!_".$timetable1->getEndTime()->getDateAndTimeString()."$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "@-header,date_!_".$systemTime1->getDateAndTimeString()."$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "@-header,staffId_!_".$staff1->getLoginId()."$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "@-header,staffName_!_".$staff1->getFullname()."$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "@-header,fileType_!_Attendance$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "@-header,fileTypeCode_!_".md5("Attendance")."$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "@-header,columnCount_!_".$numberOfColumns."$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "@-business-header-begin,,$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "S/N,Res,Ref No,Group,Reg Number,Full Name,Attendance\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$line = "@-business-header-ends,,$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		$collection1 = Group::getLoginListFromListOfGroups($database, $conn, $timetable1->getGroupList());
		if (is_null($collection1)) Object::shootException("The System returned an Empty Collection");
		$list1 = $collection1->getCollection();
		if (is_null($list1)) Object::shootException("There were no user found in this timetable");
		$count = 0;
		$line = "@-business-data-begin,,$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		foreach ($list1 as $loginId)	{
			$login1 = new Login($database, $loginId, $conn);
			if (! $login1->isAdmitted()) continue; //Make sure is an Admitted Person
			if (! $login1->getUserStatus()->isAlive()) continue; //Make Sure is a Person who is Alive
			$count++;
			$fullname = $login1->getFullname();
			$registeredUser1 = Login::getUserWithThisLogin($database, $conn, $login1);
			if (is_null($registeredUser1)) Object::shootException("Could not pull this user type");
			$registrationNumber = "#";
			if ($login1->isStudent() && ! is_null($registeredUser1->getRegistrationNumber()))	{
				$registrationNumber = $registeredUser1->getRegistrationNumber();
			}
			$groupName = $login1->getGroup()->getGroupName();
			$line = "$count,#,$loginId,$groupName,$registrationNumber,$fullname,X\n"; //X means not present
			fwrite($file1, $line) or Object::shootException("Could not write line");
		}
		$line = "@-business-data-ends,,$headerTailString\n";
		fwrite($file1, $line) or Object::shootException("Could not write line");
		fclose($file1);
		$promise1->setPromise(true);
		$promise1->setResults($filename);
		return $promise1;
	}
	public function __construct($database, $filename, $conn)	{
		if ($filename == AttendanceTemplateFile::$__IS_CLONE_MODE) return;
		$this->database = $database;
		$this->conn = $conn;
		$this->filename = $filename;
		$this->headers = array();
		$this->dataLines = array();
		$this->controlIndexArray = array();
		$file1 = fopen($filename, "r") or Object::shootException("Could not open file for reading");
		$state = 0;
		$linenumber = 0;
		while (($line = fgets($file1)) !== false)	{
			$linenumber++;
			$lineArr = explode(",", $line);
			if (sizeof($lineArr) < 2) Object::shootException("Less Data Than Required");
			if (($state == 0) && (trim($lineArr[0]) == "@-header"))	{
				$keyValue = $lineArr[1];
				$keyValueArr = explode("_!_", $keyValue);
				if (sizeof($keyValueArr) != 2) Object::shootException("Mulformed Key Value Pairs");
				$key = trim($keyValueArr[0]);
				$value = trim($keyValueArr[1]);
				$this->headers[$key] = $value;
			} else if (($state == 0) && (trim($lineArr[0]) == "@-business-header-begin"))	{
				$state = 1; //Transition 
			} else if (($state == 1) && (trim($lineArr[0]) == "@-business-header-ends"))	{
				$state = 2; //Close.Out.Transition 
			} else if ($state == 1)	{
				//Hamna Cha kufanya hapa Just Header Captions
			} else if (($state == 2) && (trim($lineArr[0]) == "@-business-data-begin"))	{
				$state = 3; //Change to Data 
			} else if (($state == 3) && (trim($lineArr[0]) == "@-business-data-ends"))	{
				$state = 4; //We are almost Finishing 
			} else if ($state == 3)	{
				//Keep Collecting Data 
				$datasize = sizeof($this->dataLines);
				$dataLine1 = new AttendanceTemplateDataLine($line);
				$this->dataLines[$datasize] = $dataLine1;
				$this->controlIndexArray[$dataLine1->getLoginId()] = $datasize;
			}
		} //end While 
		fclose($file1);
		if ($state != 4) Object::shootException("The source file was not well formed");
	}
	public function getAttendedOnlyTemplateFile()	{
		$controlIndexArray = array();
		$dataLines = array();
		foreach ($this->dataLines as $dataLine1)	{
			if ($dataLine1->hasAttended())	{
				//Attended Only 
				$datasize = sizeof($dataLines);
				$newDataLine1 = $dataLine1->cloneMe();
				$dataLines[$datasize] = $newDataLine1;
				$controlIndexArray[$newDataLine1->getLoginId()] = $datasize;
			}
		}
		$this->controlIndexArray = $controlIndexArray;
		$this->dataLines = $dataLines;
		return $this;
	}	
	public function getDataLines()	{
		return $this->dataLines;
	}
	public function getHeader($key)	{
		if (! isset($this->headers[$key])) return null;
		return $this->headers[$key];
	}
	public function getTimetable()	{
		if (! isset($this->headers['timetableId'])) return null;
		return (new Timetable($this->database, $this->headers['timetableId'], $this->conn));
	}
	public function getActivityName()	{
		if (! isset($this->headers['activityName'])) return null;
		return $this->headers['activityName'];
	}
	public function getStartTime()	{
		if (! isset($this->headers['startTime'])) return null;
		return (new DateAndTime("Ndimangwa", $this->headers['startTime'], "Ngoya"));
	}
	public function getEndTime()	{
		if (! isset($this->headers['endTime'])) return null;
		return (new DateAndTime("Ndimangwa", $this->headers['endTime'], "Ngoya"));
	}
	public function getDate()	{
		if (! isset($this->headers['date'])) return null;
		return (new DateAndTime("Ndimangwa", $this->headers['date'], "Ngoya"));
	}
	public function getStaffLogin()	{
		if (! isset($this->headers['staffId'])) return null;
		return (new Login($this->database, $this->headers['staffId'], $this->conn));
	}
	public function getHeaders()	{
		return $this->headers;
	}
}
class AttendanceTemplateDataLine {
	private $loginId;
	private $attended;
	private $line;
	static $__IS_CLONE_MODE = "is_clone_mode";
	public function __construct($line)	{
		if ($line == AttendanceTemplateDataLine::$__IS_CLONE_MODE) return;
		//s/n,#,loginId,group,regNo,fullName,attendance[X]
		$lineArr = explode(",", $line);
		if (sizeof($lineArr) < 7) Object::shootException("Line Format is Invalid");
		$this->loginId = $lineArr[2];
		$this->attended = (trim(strtolower($lineArr[6])) != "x");
		$this->line = $line;
	}
	public function getLoginId()	{
		return $this->loginId;
	}
	public function hasAttended()	{ return $this->attended; }
	public function getLine()	{ return $this->line; }
	public function assignData($loginId, $attended, $line)	{
		$this->loginId = $loginId;
		$this->attended = $attended;
		$this->line = $line;
	}
	public function cloneMe()	{
		$data1 = new AttendanceTemplateDataLine(AttendanceTemplateDataLine::$__IS_CLONE_MODE);
		$data1->assignData($this->loginId, $this->attended, $this->line);
		return $data1;
	}
}
class Biometric	{
	private $headerLine;
	private $dataLines;
	private $filename;
	public final static function showBiometricAttendance($biometric1, $profile1)	{
		if (is_null($biometric1)) return null;
		$window1 = "<div class=\"ui-sys-search-results ui-sys-biometric-attendance\" style=\"overflow-x: scroll;\"><table style=\"font-size: 0.8em;\" class=\"pure-table pure-table-horizontal ui-sys-table-search-results-biometric-attendance-1\"><thead>";
		$window1 .= "<tr><th colspan=\"10\" style=\"text-align: center;\">Attendance for ".$profile1->getProfileName()."</th></tr>";
		$window1 .= "<tr><th></th><th>Date</th><th>Day</th><th>Time In</th><th>Time Out</th><th>Duration</th><th>Personnel<br/>Number</th><th>First Name</th><th>Last Name</th><th>Card Number</th></tr>";
		//Add Search Control Head 
		$window1 .= "</thead>";
		$sqlReturnedRowCount = 0;
		$perTbodyCounter = 0;
		$numberOfTBodies = 0;
		$maximumRowsPerPage = intval($profile1->getMaximumNumberOfDisplayedRowsPerPage());
		$tbodyClosed = true;
		foreach ($biometric1->getDataLines() as $dataLine1)	{
			if ($tbodyClosed && ($sqlReturnedRowCount % $maximumRowsPerPage) == 0)	{
				$window1 .= "<tbody tbody-index=\"$numberOfTBodies\">"; 
				$numberOfTBodies++;
				$tbodyClosed = false;
			} else if (! $tbodyClosed && ($sqlReturnedRowCount % $maximumRowsPerPage) == 0)	{
				$window1 .= "</tbody><tbody tbody-index=\"$numberOfTBodies\" class=\"ui-sys-hidden\">";
				$numberOfTBodies++;
				$perTbodyCounter = 0;
			}
			//In All Cases we need to display tr
			$pureTableOddClass = "";
			if (($perTbodyCounter % 2) != 0) $pureTableOddClass = "pure-table-odd";
			//Display Tr 
			$dateString = $dataLine1->getDateString();
			$dayOfAWeek = "##";
			$timeIn ="";
			if (! is_null($dataLine1->getStartTime())) $timeIn = $dataLine1->getStartTime()->getDateAndTimeString();
			$timeOut ="";
			if (! is_null($dataLine1->getEndTime())) $timeOut = $dataLine1->getEndTime()->getDateAndTimeString();
			$duration = "##";
			$durationTime1 = $dataLine1->getEndTime()->dateDifference($dataLine1->getStartTime());
			if (! is_null($durationTime1))	{
				$duration = $durationTime1->getHour().":".System::numberWidthCorrection($durationTime1->getMinute(), 2);
				if (! $durationTime1->isPositive())	$duration = "-".$duration;
			}
			$personnelNumber = $dataLine1->getData("Personnel Number");
			$firstname = $dataLine1->getData("First Name");
			$lastname = $dataLine1->getData("Last Name");
			$cardNumber = $dataLine1->getData("Card Number");
			$columnNumber = $sqlReturnedRowCount + 1;
			$window1 .= "<tr><td>$columnNumber</td><td>$dateString</td><td>$dayOfAWeek</td><td>$timeIn</td><td>$timeOut</td><td>$duration</td><td>$personnelNumber</td><td>$firstname</td><td>$lastname</td><td>$cardNumber</td></tr>";
			//End Displaying Tr
			$perTbodyCounter++;
			$sqlReturnedRowCount++;
		}
		if (! $tbodyClosed)	{
			$window1 .= "</tbody>";
			$tbodyClosed = true;
		}
		$window1 .= "</table><br/><ul class=\"ui-sys-pagination-biometric-attendance-1\"></ul>";
		$window1 .= "<script type=\"text/javascript\">
(function($)	{
	$(function()	{
		 $('ul.ui-sys-pagination-biometric-attendance-1').twbsPagination({
			totalPages: $numberOfTBodies,
			visiblePages: 5,
			onPageClick: function (event, page) {
				//page is page number 
				var \$tbodyList1 = $('table.ui-sys-table-search-results-biometric-attendance-1 tbody');
				if (! \$tbodyList1.length) return;
				//Hide All tbody 
				\$tbodyList1.addClass('ui-sys-hidden');
				//Now show only the one corresponding to this page
				\$tbodyList1.eq(page-1).removeClass('ui-sys-hidden');			
			}
		});
	});
})(jQuery);
</script>";
		$window1 .= "</div>";
		return $window1;
	}
	public function analyseBiometricFile()	{
		$headerArray1 = $this->headerLine->getHeaderArray();
		if (! (isset($headerArray1["Time"]) && isset($headerArray1["Personnel Number"]))) Object::shootException("Time or Personnel Column were not defined");
		$controlIndexArray = array(); //[date][personnelNumber] ==>index of controlIndexArray
		$linenumber = 1;
		$dataLines = array();
		foreach ($this->dataLines as $dataLine1)	{
			$linenumber++;
			$time1 = $dataLine1->getCurrentTime();
			$dateOnly = trim($time1->getDateOnly());
			if (! isset($controlIndexArray[$dateOnly])) $controlIndexArray[$dateOnly] = array();
			//Next Step now 
			$personnelNumber = trim($dataLine1->getData("Personnel Number"));
			if (is_null($personnelNumber)) Object::shootException("Personnel Number were not found, $linenumber");
			if (! isset($controlIndexArray[$dateOnly][$personnelNumber])) {
				//This is the first record for this day
				$bioDataLine1 = $dataLine1->cloneMe();
				$bioDataLine1->setStartTime($time1->getDateAndTimeString());
				$bioDataLine1->setEndTime($time1->getDateAndTimeString());
				$bioDataLine1->setDateString($dateOnly);
				//Update ControlIndexArray 
				$datasize = sizeof($dataLines);
				$dataLines[$datasize] = $bioDataLine1;
				$controlIndexArray[$dateOnly][$personnelNumber] = $datasize;
			} else {
				//This is not the first record to find in this day
				$datasize = $controlIndexArray[$dateOnly][$personnelNumber];
				//Fetch the store dataLine 
				$storedDataLine1 = $dataLines[$datasize]; //Has a start and End Time 
				//No need to clone the cu	rrent.dataLine1. has only currentTime 
				$startTime1 = $storedDataLine1->getStartTime();
				$endTime1 = $storedDataLine1->getEndTime();
				//
				$ststr1 = $startTime1->getDateAndTimeString();
				$etstr1 = $endTime1->getDateAndTimeString();
				$ctstr1 = $time1->getDateAndTimeString();
				//Comparison , you need to update only storedDataLine1 if necessary 
				if ($time1->compareDateAndTime($startTime1) < 0)	{
					//$storedDataLine1->setStartTime($currentTime1->getDateAndTimeString());
					$dataLines[$datasize]->setStartTime($time1->getDateAndTimeString()); 
				} else if ($time1->compareDateAndTime($endTime1) > 0)	{
					//$storedDataLine1->setEndTime($currentTime1->getDateAndTimeString());
					$dataLines[$datasize]->setEndTime($time1->getDateAndTimeString()); 
				} else {
					//It is Equal Do Nothing
				}
			}
		}
		//Finalizing Algorithm . Not the original Object will be changed 
		$this->dataLines = $dataLines;
		return $this;
	}
	public function __construct($filename)	{
		if (! file_exists($filename)) Object::shootException("The file was not found");
		$this->filename = $filename;
		$file1 = fopen($filename, "r") or Object::shootException("Could not open the file for Reading");
		$this->dataLines = array();
		$linenumber = 0;
		while (($line = fgets($file1)) !== false)	{
			$linenumber++;
			if ($linenumber == 1)	{
				$this->headerLine = new BiometricHeader($line);
				continue;
			}
			//The rest of the lines
			$this->dataLines[sizeof($this->dataLines)] = new BiometricDataLine($line, $this->headerLine);
		}
		fclose($file1);
	}
	public function __destruct()	{
		/* @Ndimangwa Fadhili */
	}
	public function getHeaderLine()	{
		return $this->headerLine;
	}
	public function setHeaderLine($headerLine)	{
		$this->headerLine = $headerLine;
	}
	public function setDataLines($dataLines)	{
		$this->dataLines = $dataLines;
	}
	public function getDataLines()	{ return $this->dataLines; }
}
class BiometricHeader	{
	private $line;
	private $headers;
	static $__IS_CLONE_MODE = "__is_clone_mode";
	public function __construct($line)	{
		if ($line == BiometricHeader::$__IS_CLONE_MODE) return;
		$lineArr = explode(",", $line); 
		$this->headers = array();
		$column = 0;
		foreach ($lineArr as $data)	{
			$this->headers[$data] = $column;
			$column++;
		}
		$this->line = $line;
	}
	public function __destruct()	{
		/* @ Ndimangwa Fadhili Ngoya */
	}
	public function getHeaderArray()	{
		return $this->headers;
	}
	public function setHeaderArray($headers)	{
		$this->headers = $headers;
	}
	public function getColumnCount()	{
		return sizeof($this->headers);
	}
	public function getLine()	{
		return $this->line;
	}
	/*public function synchronize()	{
		//
	}*/
}
class BiometricDataLine	{
	private $headerLine;
	private $line;
	private $currentTime;
	private $startTime;
	private $endTime;
	private $dataArray;
	private $dateString;
	static $__IS_CLONE_MODE = "__is_clone_mode";
	public function cloneMe()	{
		$dataLine1 = new BiometricDataLine($this->line, $this->headerLine);
		if (! is_null($this->startTime)) $dataLine1->setStartTime($this->startTime->getDateAndTimeString());
		if (! is_null($this->endTime)) $dataLine1->setEndTime($this->endTime->getDateAndTimeString());
		return $dataLine1;
	}
	public function __construct($line, $headerLine1)	{
		if ($line == BiometricDataLine::$__IS_CLONE_MODE);
		if (is_null($headerLine1)) return;
		$this->headerLine = $headerLine1;
		$this->line = $line;
		$lineArr = explode(",", $line);
		//Test 
		$columnCount = $this->headerLine->getColumnCount();
		$datasize = sizeof($lineArr);
		if ($columnCount != $datasize) Object::shootException("Number of Header Columns [$columnCount] Does not match the Data Columns [$datasize]");
		$column =0;
		foreach ($lineArr as $data)	{
			$this->dataArray[$column] = $data;
			$column++;
		}
		//Extra Duties 
		$time = $this->getData("Time");
		if (is_null($time)) Object::shootException("Time was not set in one of the log entries");
		$defaultTime = "0000:00:00:00:00:00";
		$date1 = new DateAndTime("Ndimangwa", $defaultTime, "Ngoya");
		$date1 = $date1->updateDateAndTimeFromBiometric($time);
		$this->currentTime = $date1;
	} 
	public function __destruct()	{
		/* @ Ndimangwa Fadhili Ngoya */
	}
	public function getHeaderLine()	{ return $this->headerLine; }
	public function setHeaderLine($headerLine)	{ $this->headerLine = $headerLine; }
	public function getLine()	{ return $this->line; }
	public function setLine($line)	{ $this->line = $line; }
	public function getDataArray()	{ return $this->dataArray; }
	public function setDataArray($dataArray) { $this->dataArray = $dataArray; }
	public function getData($datafield)	{
		$datafield = str_replace(",", "", $datafield);
		$headerArray1 = $this->headerLine->getHeaderArray();
		if (! isset($headerArray1[$datafield])) return null;
		if (! isset($this->dataArray[$headerArray1[$datafield]])) return null;
		return $this->dataArray[$headerArray1[$datafield]];
	}
	public function setData($datafield, $data)	{
		$datafield = str_replace(",", "", $datafield);
		$headerArray1 = $this->headerLine->getHeaderArray();
		if (! isset($headerArray1[$datafield])) return null;
		if (! isset($this->dataArray[$headerArray1[$datafield]])) return null;
		$this->dataArray[$headerArray1[$datafield]] = $data;
	}
	public function getCurrentTime()	{
		return $this->currentTime;
	}
	public function setStartTime($timeString)	{
		$date1 = new DateAndTime("Ndimangwa", $timeString, "Ngoya");
		$this->startTime = $date1;
	}
	public function getStartTime()	{
		return $this->startTime;
	}
	public function setEndTime($timeString)	{
		$date1 = new DateAndTime("Ndimangwa", $timeString, "Ngoya");
		$this->EndTime = $date1;
	}
	public function getEndTime()	{
		return $this->EndTime;
	}
	public function setDateString($dateString)	{
		$this->dateString = $dateString;
	}
	public function getDateString()	{
		return $this->dateString;
	}
}
class Profile extends Object {
	private $profileId;
	private $profileName;
	private $systemName;
	private $logo;
	private $telephoneList;
	private $emailList;
	private $otherCommunication;
	private $postalAddress;
	private $website;
	private $faxList;
	private $city;
	private $country;
	private $PHPTimezone;
	private $DOB;
	private $currentAccademicYear;
	private $beginOfTheYearDate;
	private $nextGraduationYear;
	private $nextSemester;
	private $numberOfSemestersPerYear;
	private $GPSCoordinate;
	private $theme;
	private $firstDayOfAWeek;
	private $XMLFile;
	private $XMLFileChecksum;
	private $serverIPAddress;
	private $localAreaNetworkMask;
	private $maximumNumberOfReturnedSearchRecords;
	private $maximumNumberOfDisplayedRowsPerPage;
	private $minimumAgeCriteriaForStudents;
	private $minimumAgeCriteriaForUsers;
	private $nextRegistrationNumber;
	private $registrationNumberWidth;
	private $nextExaminationNumber;
	private $examinationNumberWidth;
	private $applicationCounter;
	private $revisionNumber;
	private $revisionTime;
	private $serverMACAddress;
	private $systemHash;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $SYSTEM_IS_INSTALLED = 0;
	static $__MODULE_ADMISSION = 5;
	static $__SECURE_CONNECTION_REQUIRED = 6;
	static $__STRICT_SECURE_CONNECTION_REQUIRED = 7;
	static $__ALL_SEMESTERS = 0;
	public function setSecureConnectionRequired($status)	{
		if (intval($status) == 1)	{
			$this->setFlagAt(Profile::$__SECURE_CONNECTION_REQUIRED);
		} else {
			$this->resetFlagAt(Profile::$__SECURE_CONNECTION_REQUIRED);
		}
	}
	public function isSecureConnectionRequired()	{
		return $this->isFlagSetAt(Profile::$__SECURE_CONNECTION_REQUIRED);
	}
	public function setStrictSecureConnectionRequired($status)	{
		if (intval($status) == 1)	{
			$this->setFlagAt(Profile::$__STRICT_SECURE_CONNECTION_REQUIRED);
		} else {
			$this->resetFlagAt(Profile::$__STRICT_SECURE_CONNECTION_REQUIRED);
		}
	}
	public function isStrictSecureConnectionRequired()	{
		return $this->isFlagSetAt(Profile::$__STRICT_SECURE_CONNECTION_REQUIRED);
	}
	public function setInstallationComplete($status)	{
		if (intval($status) == 1)	{
			$this->setFlagAt(Profile::$SYSTEM_IS_INSTALLED);
		} else {
			$this->resetFlagAt(Profile::$SYSTEM_IS_INSTALLED);
		}
	}
	public function isInstallationComplete()	{
		return $this->isFlagSetAt(Profile::$SYSTEM_IS_INSTALLED);
	}
	public function setAdmissionClosed($status)	{
		if (intval($status) == 1)	{
			$this->setFlagAt(Profile::$__MODULE_ADMISSION);
		} else {
			$this->resetFlagAt(Profile::$__MODULE_ADMISSION);
		}
	}
	public function isAdmissionClosed()	{
		return $this->isFlagSetAt(Profile::$__MODULE_ADMISSION);
	}
	public function getCurrentSemester() {
		return $this->nextSemester;
	}
	public function setCurrentSemester($nextSemester) {
		if (! is_null($nextSemester))	{
			$this->addToUpdateList("nextSemester", $nextSemester);
			$this->nextSemester = $nextSemester;
		}
	}
	public function loadXMLFolder($folderPath)	{
		$this->absoluteFilePath = $folderPath."/".$this->XMLFile;
		$this->domDocument = FileFactory::readFile($this->absoluteFilePath);
	}
	public function getAbsoluteFilePath()	{ return $this->absoluteFilePath; }
	public function getDOMDocument()	{ return $this->domDocument; }
	/*------------------------------BEGIN MISSION & VISSION-----------------------------------*/
	public function addMissionAndVision($bankAccountArray)	{
		/*
		arr['bankName'] = "CRDB PLC"; ...
		*/
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (! is_null($doc))	{
			$bankNode1 = FileFactory::addDOMListToTree($doc, "missionAndVision", $bankAccountArray);;
			$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:missionAndVisions");
			$promise1 = FileFactory::appendNode($this->getAbsoluteFilePath(), $doc, $nodeCollection1, $bankNode1);
		}
		return $promise1;
	}
	public function getMissionAndVisionList()	{
		$doc = $this->getDOMDocument();
		if (is_null($doc)) return null;
		return FileFactory::findCustomNodes($doc, "0:missionAndVisions;*:missionAndVision");
	}
	public function clearMissionAndVisions()	{
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:missionAndVisions;*:missionAndVision");
		$promise1 = FileFactory::deleteNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		return $promise1;
	}
	/*------------------------------END MISSION & VISSION-----------------------------------*/
	/*------------------------------BEGIN SMS ACCOUNT-----------------------------------*/
	public function addSMSAccount($bankAccountArray)	{
		/*
		arr['bankName'] = "CRDB PLC"; ...
		*/
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (! is_null($doc))	{
			$bankNode1 = FileFactory::addDOMListToTree($doc, "smsAccount", $bankAccountArray);;
			$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:smsAccounts");
			$promise1 = FileFactory::appendNode($this->getAbsoluteFilePath(), $doc, $nodeCollection1, $bankNode1);
		}
		return $promise1;
	}
	public function getSMSAccountList()	{
		$doc = $this->getDOMDocument();
		if (is_null($doc)) return null;
		return FileFactory::findCustomNodes($doc, "0:smsAccounts;*:smsAccount");
	}
	public function clearSMSAccounts()	{
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:smsAccounts;*:smsAccount");
		$promise1 = FileFactory::deleteNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		return $promise1;
	}
	/*------------------------------END SMS ACCOUNT-----------------------------------*/
	/*------------------------------BEGIN BANK ACCOUNT-----------------------------------*/
	public function addBankAccount($bankAccountArray)	{
		/*
		arr['bankName'] = "CRDB PLC"; ...
		*/
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (! is_null($doc))	{
			$bankNode1 = FileFactory::addDOMListToTree($doc, "bank", $bankAccountArray);;
			$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:banks");
			$promise1 = FileFactory::appendNode($this->getAbsoluteFilePath(), $doc, $nodeCollection1, $bankNode1);
		}
		return $promise1;
	}
	public function getBankAccountList()	{
		$doc = $this->getDOMDocument();
		if (is_null($doc)) return null;
		return FileFactory::findCustomNodes($doc, "0:banks;*:bank");
	}
	public function clearBankAccounts()	{
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:banks;*:bank");
		$promise1 = FileFactory::deleteNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		return $promise1;
	}
	/*------------------------------END BANK ACCOUNT-----------------------------------*/
	/*------------------------------BEGIN PHYSICAL ADDRESS-----------------------------------*/
	public function addPhysicalAddress($addressText)	{
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (! is_null($doc))	{
			$address1 = $doc->createElement('physicalAddress');
			$address1->appendChild($doc->createTextNode($addressText));
			$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:physicalAddresses");
			$promise1 = FileFactory::appendNode($this->getAbsoluteFilePath(), $doc, $nodeCollection1, $address1);
		}
		return $promise1;
	}
	public function getPhysicalAddressList()	{
		$doc = $this->getDOMDocument();
		if (is_null($doc)) return null;
		return FileFactory::findCustomNodes($doc, "0:physicalAddresses;*:physicalAddress");
	}
	public function clearPhysicalAddresses()	{
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:physicalAddresses;*:physicalAddress");
		$promise1 = FileFactory::deleteNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		return $promise1;
	}
	/*------------------------------END PHYSICAL ADDRESS-----------------------------------*/
	public function backupXMLFile()	{
		return FileFactory::createBackupFile($this->absoluteFilePath);
	}
	public final static function getProfileReference($database, $conn) {
		$query = "SELECT profileId FROM profile";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Profile [static], could not extra Profile Reference");
		if (mysql_num_rows($result) != 1) Object::shootException("Profile [static], Duplicate or nor Profile found");
		list ($profileId) = mysql_fetch_row($result);
		return $profileId;
	}
	public final static function getRegistrationNumber($database, $conn, $profile1, $dateTimeObj1)	{
		/*
		For Global scope use ONLY 
		Format for Mineral Institute Dodoma 1978MID16
		*/
		$promise1 = new Promise();
		$localProfile1 = null;
		try {
			$localProfile1 = new Profile($database, $profile1->getProfileId(), $conn);
			$promise1->setPromise(true);
		} catch (Exception $e)	{
			$promise1->setReason($e->getReason());
			$promise1->setPromise(false);
		}
		if (! $promise1->isPromising()) return $promise1;
		$registrationNumber = "".$localProfile1->getNextRegistrationNumber();
		$width = intval($localProfile1->getRegistrationNumberWidth());
		for ($i = strlen($registrationNumber); $i < $width; $i++) $registrationNumber = "0".$registrationNumber;
		$registrationNumber = $registrationNumber."MID".$dateTimeObj1->getYearInTwoDigitsOnly(); 
		$promise1->setResults($registrationNumber);
		try {
			$localProfile1->setNextRegistrationNumber(intval($localProfile1->getNextRegistrationNumber()) + 1);
			$localProfile1->commitUpdate();
			$promise1->setPromise(true);
		} catch (Exception $e)	{
			$promise1->setReason($e->getMessage());
			$promise1->setPromise(false);
		}
		return $promise1;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Profile/profileName,text,1007;systemName,text,1007;logo,text,1007;telephoneList,list,1007;emailList,list,1007;otherCommunication,list,1007;postalAddress,text,1007;website,text,1007;faxList,list,1007;city,text,1007;nextGraduationYear,text,1007;nextSemester,text,1007;numberOfSemestersPerYear,text,1007;GPSCoordinate,text,1007;XMLFile,text,1007;XMLFileChecksum,text,1007;serverIPAddress,text,1007;localAreaNetworkMask,text,1007;maximumNumberOfReturnedSearchRecords,text,1007;maximumNumberOfDisplayedRowsPerPage,text,1007;minimumAgeCriteriaForStudents,text,1007;minimumAgeCriteriaForUsers,text,1007;nextRegistrationNumber,text,1007;registrationNumberWidth,text,1007;nextExaminationNumber,text,1007;examinationNumberWidth,text,1007;applicationCounter,text,1007;revisionNumber,text,1007;serverMACAddress,text,1007;systemHash,text,1007;extraFilter,text,1007;extraInformation,text,1007;flags,text,1007";
		$lineToView .= Country::getAvailableViewableColumns();
		$lineToView .= PHPTimezone::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= AccademicYear::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= Theme::getAvailableViewableColumns();
		$lineToView .= DaysOfAWeek::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "profile";
	}
	public final static function getClassContextName()	{
		return "manageprofile";
	}
	public final static function getUniqueProfileId($database, $conn)	{
		$query="SELECT profileId FROM profile";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Profile, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Profile, None or Duplicate Row/Multiple Rows Found');
		list($profileId)=mysql_fetch_row($result);
		return $profileId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT profileId, profileName FROM profile";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Profile, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $profileName, $systemName, $logo, $telephoneList, $emailList, $otherCommunication, $postalAddress, $website, $faxList, $city, $countryId, $pHPTimezoneId, $dob, $currentAccademicYearId, $beginOfTheYearDate, $nextGraduationYear, $nextSemester, $numberOfSemestersPerYear, $gpsCoordinate, $themeId, $firstDayOfAWeekId, $xmlFile, $xmlFileChecksum, $serverIpAddress, $localAreaNetworkMask, $maxNumberOfReturnedSearchRecords, $maxNumberOfDisplayedRowsPerPage, $minAgeCriteriaForStudents, $minAgeCriteriaForUsers, $nextRegistrationNumber, $registrationNumberWidth, $nextExaminationNumber, $examinationNumberWidth, $applicationCounter, $revisionNumber, $revisionTime, $serverMACAddress, $systemHash, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO profile (profileName, systemName, logo, telephoneList, emailList, otherCommunication, postalAddress, website, faxList, city, countryId, pHPTimezoneId, dob, currentAccademicYearId, beginOfTheYearDate, nextGraduationYear, nextSemester, numberOfSemestersPerYear, gpsCoordinate, themeId, firstDayOfAWeekId, xmlFile, xmlFileChecksum, serverIpAddress, localAreaNetworkMask, maxNumberOfReturnedSearchRecords, maxNumberOfDisplayedRowsPerPage, minAgeCriteriaForStudents, minAgeCriteriaForUsers, nextRegistrationNumber, registrationNumberWidth, nextExaminationNumber, examinationNumberWidth, applicationCounter, revisionNumber, revisionTime, serverMACAddress, systemHash, extraFilter, extraInformation, flags) VALUES('$profileName', '$systemName', '$logo', '$telephoneList', '$emailList', '$otherCommunication', '$postalAddress', '$website', '$faxList', '$city', '$countryId', '$pHPTimezoneId', '$dob', '$currentAccademicYearId', '$beginOfTheYearDate', '$nextGraduationYear', '$nextSemester', '$numberOfSemestersPerYear', '$gpsCoordinate', '$themeId', '$firstDayOfAWeekId', '$xmlFile', '$xmlFileChecksum', '$serverIpAddress', '$localAreaNetworkMask', '$maxNumberOfReturnedSearchRecords', '$maxNumberOfDisplayedRowsPerPage', '$minAgeCriteriaForStudents', '$minAgeCriteriaForUsers', '$nextRegistrationNumber', '$registrationNumberWidth', '$nextExaminationNumber', '$examinationNumberWidth', '$applicationCounter', '$revisionNumber', '$revisionTime', '$serverMACAddress', '$systemHash', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Profile, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Profile, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Profile, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->profileId;
	}
	public function getProfileId() {
		return $this->profileId;
	}
	public function getProfileName() {
		return $this->profileName;
	}
	public function setProfileName($profileName) {
		if (! is_null($profileName))	{
			$this->addToUpdateList("profileName", $profileName);
			$this->profileName = $profileName;
		}
	}
	public function getSystemName() {
		return $this->systemName;
	}
	public function setSystemName($systemName) {
		if (! is_null($systemName))	{
			$this->addToUpdateList("systemName", $systemName);
			$this->systemName = $systemName;
		}
	}
	public function getLogo() {
		return $this->logo;
	}
	public function setLogo($logo) {
		if (! is_null($logo))	{
			$this->addToUpdateList("logo", $logo);
			$this->logo = $logo;
		}
	}
	public function getTelephoneList() {
		return $this->telephoneList;
	}
	public function setTelephoneList($telephoneList) {
		if (! is_null($telephoneList))	{
			$this->addToUpdateList("telephoneList", $telephoneList);
			$this->telephoneList = explode(",", $telephoneList);
		}
	}
	public function getEmailList() {
		return $this->emailList;
	}
	public function setEmailList($emailList) {
		if (! is_null($emailList))	{
			$this->addToUpdateList("emailList", $emailList);
			$this->emailList = explode(",", $emailList);
		}
	}
	public function getOtherCommunication() {
		return $this->otherCommunication;
	}
	public function setOtherCommunication($otherCommunication) {
		if (! is_null($otherCommunication))	{
			$this->addToUpdateList("otherCommunication", $otherCommunication);
			$this->otherCommunication = explode(",", $otherCommunication);
		}
	}
	public function getPostalAddress() {
		return $this->postalAddress;
	}
	public function setPostalAddress($postalAddress) {
		if (! is_null($postalAddress))	{
			$this->addToUpdateList("postalAddress", $postalAddress);
			$this->postalAddress = $postalAddress;
		}
	}
	public function getWebsite() {
		return $this->website;
	}
	public function setWebsite($website) {
		if (! is_null($website))	{
			$this->addToUpdateList("website", $website);
			$this->website = $website;
		}
	}
	public function getFaxList() {
		return $this->faxList;
	}
	public function setFaxList($faxList) {
		if (! is_null($faxList))	{
			$this->addToUpdateList("faxList", $faxList);
			$this->faxList = explode(",", $faxList);
		}
	}
	public function getCity() {
		return $this->city;
	}
	public function setCity($city) {
		if (! is_null($city))	{
			$this->addToUpdateList("city", $city);
			$this->city = $city;
		}
	}
	public function getCountry() {
		return $this->country;
	}
	public function setCountry($countryId) {
		if (! is_null($countryId))	{
			$this->addToUpdateList("countryId", $countryId);
			$this->country = null;
			try	{
				$this->country = new Country($this->database, $countryId, $this->conn);
			} catch (Exception $e)	{
				$this->country = null;
			}
		}
	}
	public function getPHPTimezone() {
		return $this->PHPTimezone;
	}
	public function setPHPTimezone($pHPTimezoneId) {
		if (! is_null($pHPTimezoneId))	{
			$this->addToUpdateList("pHPTimezoneId", $pHPTimezoneId);
			$this->PHPTimezone = null;
			try	{
				$this->PHPTimezone = new PHPTimezone($this->database, $pHPTimezoneId, $this->conn);
			} catch (Exception $e)	{
				$this->PHPTimezone = null;
			}
		}
	}
	public function getDOB() {
		return $this->DOB;
	}
	public function setDOB($dob) {
		if (! is_null($dob))	{
			$this->addToUpdateList("dob", $dob);
			$this->DOB = null;
			try	{
				$this->DOB = new DateAndTime($this->database, $dob, $this->conn);
			} catch (Exception $e)	{
				$this->DOB = null;
			}
		}
	}
	public function getCurrentAccademicYear() {
		return $this->currentAccademicYear;
	}
	public function setCurrentAccademicYear($currentAccademicYearId) {
		if (! is_null($currentAccademicYearId))	{
			$this->addToUpdateList("currentAccademicYearId", $currentAccademicYearId);
			$this->currentAccademicYear = null;
			try	{
				$this->currentAccademicYear = new AccademicYear($this->database, $currentAccademicYearId, $this->conn);
			} catch (Exception $e)	{
				$this->currentAccademicYear = null;
			}
		}
	}
	public function getBeginOfTheYearDate() {
		return $this->beginOfTheYearDate;
	}
	public function setBeginOfTheYearDate($beginOfTheYearDate) {
		if (! is_null($beginOfTheYearDate))	{
			$this->addToUpdateList("beginOfTheYearDate", $beginOfTheYearDate);
			$this->beginOfTheYearDate = null;
			try	{
				$this->beginOfTheYearDate = new DateAndTime($this->database, $beginOfTheYearDate, $this->conn);
			} catch (Exception $e)	{
				$this->beginOfTheYearDate = null;
			}
		}
	}
	public function getNextGraduationYear() {
		return $this->nextGraduationYear;
	}
	public function setNextGraduationYear($nextGraduationYear) {
		if (! is_null($nextGraduationYear))	{
			$this->addToUpdateList("nextGraduationYear", $nextGraduationYear);
			$this->nextGraduationYear = $nextGraduationYear;
		}
	}
	public function getNextSemester() {
		return $this->nextSemester;
	}
	public function setNextSemester($nextSemester) {
		if (! is_null($nextSemester))	{
			$this->addToUpdateList("nextSemester", $nextSemester);
			$this->nextSemester = $nextSemester;
		}
	}
	public function getNumberOfSemestersPerYear() {
		return $this->numberOfSemestersPerYear;
	}
	public function setNumberOfSemestersPerYear($numberOfSemestersPerYear) {
		if (! is_null($numberOfSemestersPerYear))	{
			$this->addToUpdateList("numberOfSemestersPerYear", $numberOfSemestersPerYear);
			$this->numberOfSemestersPerYear = $numberOfSemestersPerYear;
		}
	}
	public function getGPSCoordinate() {
		return $this->GPSCoordinate;
	}
	public function setGPSCoordinate($gpsCoordinate) {
		if (! is_null($gpsCoordinate))	{
			$this->addToUpdateList("gpsCoordinate", $gpsCoordinate);
			$this->GPSCoordinate = $gpsCoordinate;
		}
	}
	public function getTheme() {
		return $this->theme;
	}
	public function setTheme($themeId) {
		if (! is_null($themeId))	{
			$this->addToUpdateList("themeId", $themeId);
			$this->theme = null;
			try	{
				$this->theme = new Theme($this->database, $themeId, $this->conn);
			} catch (Exception $e)	{
				$this->theme = null;
			}
		}
	}
	public function getFirstDayOfAWeek() {
		return $this->firstDayOfAWeek;
	}
	public function setFirstDayOfAWeek($firstDayOfAWeekId) {
		if (! is_null($firstDayOfAWeekId))	{
			$this->addToUpdateList("firstDayOfAWeekId", $firstDayOfAWeekId);
			$this->firstDayOfAWeek = null;
			try	{
				$this->firstDayOfAWeek = new DaysOfAWeek($this->database, $firstDayOfAWeekId, $this->conn);
			} catch (Exception $e)	{
				$this->firstDayOfAWeek = null;
			}
		}
	}
	public function getXMLFile() {
		return $this->XMLFile;
	}
	public function setXMLFile($xmlFile) {
		if (! is_null($xmlFile))	{
			$this->addToUpdateList("xmlFile", $xmlFile);
			$this->XMLFile = $xmlFile;
		}
	}
	public function getXMLFileChecksum() {
		return $this->XMLFileChecksum;
	}
	public function setXMLFileChecksum($xmlFileChecksum) {
		if (! is_null($xmlFileChecksum))	{
			$this->addToUpdateList("xmlFileChecksum", $xmlFileChecksum);
			$this->XMLFileChecksum = $xmlFileChecksum;
		}
	}
	public function getServerIPAddress() {
		return $this->serverIPAddress;
	}
	public function setServerIPAddress($serverIpAddress) {
		if (! is_null($serverIpAddress))	{
			$this->addToUpdateList("serverIpAddress", $serverIpAddress);
			$this->serverIPAddress = $serverIpAddress;
		}
	}
	public function getLocalAreaNetworkMask() {
		return $this->localAreaNetworkMask;
	}
	public function setLocalAreaNetworkMask($localAreaNetworkMask) {
		if (! is_null($localAreaNetworkMask))	{
			$this->addToUpdateList("localAreaNetworkMask", $localAreaNetworkMask);
			$this->localAreaNetworkMask = $localAreaNetworkMask;
		}
	}
	public function getMaximumNumberOfReturnedSearchRecords() {
		return $this->maximumNumberOfReturnedSearchRecords;
	}
	public function setMaximumNumberOfReturnedSearchRecords($maxNumberOfReturnedSearchRecords) {
		if (! is_null($maxNumberOfReturnedSearchRecords))	{
			$this->addToUpdateList("maxNumberOfReturnedSearchRecords", $maxNumberOfReturnedSearchRecords);
			$this->maximumNumberOfReturnedSearchRecords = $maxNumberOfReturnedSearchRecords;
		}
	}
	public function getMaximumNumberOfDisplayedRowsPerPage() {
		return $this->maximumNumberOfDisplayedRowsPerPage;
	}
	public function setMaximumNumberOfDisplayedRowsPerPage($maxNumberOfDisplayedRowsPerPage) {
		if (! is_null($maxNumberOfDisplayedRowsPerPage))	{
			$this->addToUpdateList("maxNumberOfDisplayedRowsPerPage", $maxNumberOfDisplayedRowsPerPage);
			$this->maximumNumberOfDisplayedRowsPerPage = $maxNumberOfDisplayedRowsPerPage;
		}
	}
	public function getMinimumAgeCriteriaForStudents() {
		return $this->minimumAgeCriteriaForStudents;
	}
	public function setMinimumAgeCriteriaForStudents($minAgeCriteriaForStudents) {
		if (! is_null($minAgeCriteriaForStudents))	{
			$this->addToUpdateList("minAgeCriteriaForStudents", $minAgeCriteriaForStudents);
			$this->minimumAgeCriteriaForStudents = $minAgeCriteriaForStudents;
		}
	}
	public function getMinimumAgeCriteriaForUsers() {
		return $this->minimumAgeCriteriaForUsers;
	}
	public function setMinimumAgeCriteriaForUsers($minAgeCriteriaForUsers) {
		if (! is_null($minAgeCriteriaForUsers))	{
			$this->addToUpdateList("minAgeCriteriaForUsers", $minAgeCriteriaForUsers);
			$this->minimumAgeCriteriaForUsers = $minAgeCriteriaForUsers;
		}
	}
	public function getNextRegistrationNumber() {
		return $this->nextRegistrationNumber;
	}
	public function setNextRegistrationNumber($nextRegistrationNumber) {
		if (! is_null($nextRegistrationNumber))	{
			$this->addToUpdateList("nextRegistrationNumber", $nextRegistrationNumber);
			$this->nextRegistrationNumber = $nextRegistrationNumber;
		}
	}
	public function getRegistrationNumberWidth() {
		return $this->registrationNumberWidth;
	}
	public function setRegistrationNumberWidth($registrationNumberWidth) {
		if (! is_null($registrationNumberWidth))	{
			$this->addToUpdateList("registrationNumberWidth", $registrationNumberWidth);
			$this->registrationNumberWidth = $registrationNumberWidth;
		}
	}
	public function getNextExaminationNumber() {
		return $this->nextExaminationNumber;
	}
	public function setNextExaminationNumber($nextExaminationNumber) {
		if (! is_null($nextExaminationNumber))	{
			$this->addToUpdateList("nextExaminationNumber", $nextExaminationNumber);
			$this->nextExaminationNumber = $nextExaminationNumber;
		}
	}
	public function getExaminationNumberWidth() {
		return $this->examinationNumberWidth;
	}
	public function setExaminationNumberWidth($examinationNumberWidth) {
		if (! is_null($examinationNumberWidth))	{
			$this->addToUpdateList("examinationNumberWidth", $examinationNumberWidth);
			$this->examinationNumberWidth = $examinationNumberWidth;
		}
	}
	public function getApplicationCounter() {
		return $this->applicationCounter;
	}
	public function setApplicationCounter($applicationCounter) {
		if (! is_null($applicationCounter))	{
			$this->addToUpdateList("applicationCounter", $applicationCounter);
			$this->applicationCounter = $applicationCounter;
		}
	}
	public function getRevisionNumber() {
		return $this->revisionNumber;
	}
	public function setRevisionNumber($revisionNumber) {
		if (! is_null($revisionNumber))	{
			$this->addToUpdateList("revisionNumber", $revisionNumber);
			$this->revisionNumber = $revisionNumber;
		}
	}
	public function getRevisionTime() {
		return $this->revisionTime;
	}
	public function setRevisionTime($revisionTime) {
		if (! is_null($revisionTime))	{
			$this->addToUpdateList("revisionTime", $revisionTime);
			$this->revisionTime = null;
			try	{
				$this->revisionTime = new DateAndTime($this->database, $revisionTime, $this->conn);
			} catch (Exception $e)	{
				$this->revisionTime = null;
			}
		}
	}
	public function getServerMACAddress() {
		return $this->serverMACAddress;
	}
	public function setServerMACAddress($serverMACAddress) {
		if (! is_null($serverMACAddress))	{
			$this->addToUpdateList("serverMACAddress", $serverMACAddress);
			$this->serverMACAddress = $serverMACAddress;
		}
	}
	public function getSystemHash() {
		return $this->systemHash;
	}
	public function setSystemHash($systemHash) {
		if (! is_null($systemHash))	{
			$this->addToUpdateList("systemHash", $systemHash);
			$this->systemHash = $systemHash;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT profileId FROM profile";
		return $query;
	}
	public function __construct($database, $profileId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Profile")) Object::shootException("Profile System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $profileId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->profileId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Profile")) Object::shootException("Profile System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE profile SET $setList WHERE profileId = '$this->profileId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Profile, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Profile")) Object::shootException("Profile System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM profile WHERE profileId = '$this->profileId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Profile, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Profile";
	}
	protected function getProperties()	{
		return "profileId=$this->profileId"."@profileName=$this->profileName"."@systemName=$this->systemName"."@logo=$this->logo"."@postalAddress=$this->postalAddress"."@website=$this->website"."@city=$this->city"."@nextGraduationYear=$this->nextGraduationYear"."@nextSemester=$this->nextSemester"."@numberOfSemestersPerYear=$this->numberOfSemestersPerYear"."@GPSCoordinate=$this->GPSCoordinate"."@XMLFile=$this->XMLFile"."@XMLFileChecksum=$this->XMLFileChecksum"."@serverIPAddress=$this->serverIPAddress"."@localAreaNetworkMask=$this->localAreaNetworkMask"."@maximumNumberOfReturnedSearchRecords=$this->maximumNumberOfReturnedSearchRecords"."@maximumNumberOfDisplayedRowsPerPage=$this->maximumNumberOfDisplayedRowsPerPage"."@minimumAgeCriteriaForStudents=$this->minimumAgeCriteriaForStudents"."@minimumAgeCriteriaForUsers=$this->minimumAgeCriteriaForUsers"."@nextRegistrationNumber=$this->nextRegistrationNumber"."@registrationNumberWidth=$this->registrationNumberWidth"."@nextExaminationNumber=$this->nextExaminationNumber"."@examinationNumberWidth=$this->examinationNumberWidth"."@applicationCounter=$this->applicationCounter"."@revisionNumber=$this->revisionNumber"."@serverMACAddress=$this->serverMACAddress"."@systemHash=$this->systemHash"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags"."@".Object::getPropertiesFromArray("telephoneList", $this->telephoneList)."@".Object::getPropertiesFromArray("emailList", $this->emailList)."@".Object::getPropertiesFromArray("otherCommunication", $this->otherCommunication)."@".Object::getPropertiesFromArray("faxList", $this->faxList);
	}
	protected function getAdvancedProperties()	{
		return "1007.profileId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->profileId))."@1007.profileName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->profileName))."@1007.systemName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->systemName))."@1007.logo=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->logo))."@1007.postalAddress=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->postalAddress))."@1007.website=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->website))."@1007.city=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->city))."@1007.nextGraduationYear=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->nextGraduationYear))."@1007.nextSemester=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->nextSemester))."@1007.numberOfSemestersPerYear=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->numberOfSemestersPerYear))."@1007.GPSCoordinate=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->GPSCoordinate))."@1007.XMLFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->XMLFile))."@1007.XMLFileChecksum=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->XMLFileChecksum))."@1007.serverIPAddress=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->serverIPAddress))."@1007.localAreaNetworkMask=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->localAreaNetworkMask))."@1007.maximumNumberOfReturnedSearchRecords=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->maximumNumberOfReturnedSearchRecords))."@1007.maximumNumberOfDisplayedRowsPerPage=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->maximumNumberOfDisplayedRowsPerPage))."@1007.minimumAgeCriteriaForStudents=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->minimumAgeCriteriaForStudents))."@1007.minimumAgeCriteriaForUsers=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->minimumAgeCriteriaForUsers))."@1007.nextRegistrationNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->nextRegistrationNumber))."@1007.registrationNumberWidth=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->registrationNumberWidth))."@1007.nextExaminationNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->nextExaminationNumber))."@1007.examinationNumberWidth=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->examinationNumberWidth))."@1007.applicationCounter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->applicationCounter))."@1007.revisionNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->revisionNumber))."@1007.serverMACAddress=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->serverMACAddress))."@1007.systemHash=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->systemHash))."@1007.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1007.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1007.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags))."@".Object::getAdvancedPropertiesFromArray("telephoneList", $this->telephoneList, 1007)."@".Object::getAdvancedPropertiesFromArray("emailList", $this->emailList, 1007)."@".Object::getAdvancedPropertiesFromArray("otherCommunication", $this->otherCommunication, 1007)."@".Object::getAdvancedPropertiesFromArray("faxList", $this->faxList, 1007);
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Profile (NAMESPACETAG = 1007) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->country))	{
			$this->country->debug();
		}
		if (! is_null($this->PHPTimezone))	{
			$this->PHPTimezone->debug();
		}
		if (! is_null($this->DOB))	{
			$this->DOB->debug();
		}
		if (! is_null($this->currentAccademicYear))	{
			$this->currentAccademicYear->debug();
		}
		if (! is_null($this->beginOfTheYearDate))	{
			$this->beginOfTheYearDate->debug();
		}
		if (! is_null($this->theme))	{
			$this->theme->debug();
		}
		if (! is_null($this->firstDayOfAWeek))	{
			$this->firstDayOfAWeek->debug();
		}
		if (! is_null($this->revisionTime))	{
			$this->revisionTime->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->country))	{
			$matrix1=$this->country->searchMatrix($matrix1);
		}
		if (! is_null($this->PHPTimezone))	{
			$matrix1=$this->PHPTimezone->searchMatrix($matrix1);
		}
		if (! is_null($this->DOB))	{
			$matrix1=$this->DOB->searchMatrix($matrix1);
		}
		if (! is_null($this->currentAccademicYear))	{
			$matrix1=$this->currentAccademicYear->searchMatrix($matrix1);
		}
		if (! is_null($this->beginOfTheYearDate))	{
			$matrix1=$this->beginOfTheYearDate->searchMatrix($matrix1);
		}
		if (! is_null($this->theme))	{
			$matrix1=$this->theme->searchMatrix($matrix1);
		}
		if (! is_null($this->firstDayOfAWeek))	{
			$matrix1=$this->firstDayOfAWeek->searchMatrix($matrix1);
		}
		if (! is_null($this->revisionTime))	{
			$matrix1=$this->revisionTime->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->country))	{
			$csvProcessor1=$this->country->processCSV($csvProcessor1);
		}
		if (! is_null($this->PHPTimezone))	{
			$csvProcessor1=$this->PHPTimezone->processCSV($csvProcessor1);
		}
		if (! is_null($this->DOB))	{
			$csvProcessor1=$this->DOB->processCSV($csvProcessor1);
		}
		if (! is_null($this->currentAccademicYear))	{
			$csvProcessor1=$this->currentAccademicYear->processCSV($csvProcessor1);
		}
		if (! is_null($this->beginOfTheYearDate))	{
			$csvProcessor1=$this->beginOfTheYearDate->processCSV($csvProcessor1);
		}
		if (! is_null($this->theme))	{
			$csvProcessor1=$this->theme->processCSV($csvProcessor1);
		}
		if (! is_null($this->firstDayOfAWeek))	{
			$csvProcessor1=$this->firstDayOfAWeek->processCSV($csvProcessor1);
		}
		if (! is_null($this->revisionTime))	{
			$csvProcessor1=$this->revisionTime->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $profileId, $conn) {
		$query="SELECT profileId, profileName, systemName, logo, telephoneList, emailList, otherCommunication, postalAddress, website, faxList, city, countryId, pHPTimezoneId, dob, currentAccademicYearId, beginOfTheYearDate, nextGraduationYear, nextSemester, numberOfSemestersPerYear, gpsCoordinate, themeId, firstDayOfAWeekId, xmlFile, xmlFileChecksum, serverIpAddress, localAreaNetworkMask, maxNumberOfReturnedSearchRecords, maxNumberOfDisplayedRowsPerPage, minAgeCriteriaForStudents, minAgeCriteriaForUsers, nextRegistrationNumber, registrationNumberWidth, nextExaminationNumber, examinationNumberWidth, applicationCounter, revisionNumber, revisionTime, serverMACAddress, systemHash, extraFilter, extraInformation, flags FROM profile WHERE profileId = '$profileId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Profile, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Profile, Duplicate or No Record');
		list($profileId, $profileName, $systemName, $logo, $telephoneList, $emailList, $otherCommunication, $postalAddress, $website, $faxList, $city, $countryId, $pHPTimezoneId, $dob, $currentAccademicYearId, $beginOfTheYearDate, $nextGraduationYear, $nextSemester, $numberOfSemestersPerYear, $gpsCoordinate, $themeId, $firstDayOfAWeekId, $xmlFile, $xmlFileChecksum, $serverIpAddress, $localAreaNetworkMask, $maxNumberOfReturnedSearchRecords, $maxNumberOfDisplayedRowsPerPage, $minAgeCriteriaForStudents, $minAgeCriteriaForUsers, $nextRegistrationNumber, $registrationNumberWidth, $nextExaminationNumber, $examinationNumberWidth, $applicationCounter, $revisionNumber, $revisionTime, $serverMACAddress, $systemHash, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->profileId = $profileId;
		if (! is_null($profileName))	{
			$this->profileName = $profileName;
		}
		if (! is_null($systemName))	{
			$this->systemName = $systemName;
		}
		if (! is_null($logo))	{
			$this->logo = $logo;
		}
		if (! is_null($telephoneList))	{
			$this->telephoneList = explode(",", $telephoneList);
		}
		if (! is_null($emailList))	{
			$this->emailList = explode(",", $emailList);
		}
		if (! is_null($otherCommunication))	{
			$this->otherCommunication = explode(",", $otherCommunication);
		}
		if (! is_null($postalAddress))	{
			$this->postalAddress = $postalAddress;
		}
		if (! is_null($website))	{
			$this->website = $website;
		}
		if (! is_null($faxList))	{
			$this->faxList = explode(",", $faxList);
		}
		if (! is_null($city))	{
			$this->city = $city;
		}
		if (! is_null($countryId))	{
			$this->country = null;
			try	{
				$this->country = new Country($this->database, $countryId, $this->conn);
			} catch (Exception $e)	{
				$this->country = null;
			}
		}
		if (! is_null($pHPTimezoneId))	{
			$this->PHPTimezone = null;
			try	{
				$this->PHPTimezone = new PHPTimezone($this->database, $pHPTimezoneId, $this->conn);
			} catch (Exception $e)	{
				$this->PHPTimezone = null;
			}
		}
		if (! is_null($dob))	{
			$this->DOB = null;
			try	{
				$this->DOB = new DateAndTime($this->database, $dob, $this->conn);
			} catch (Exception $e)	{
				$this->DOB = null;
			}
		}
		if (! is_null($currentAccademicYearId))	{
			$this->currentAccademicYear = null;
			try	{
				$this->currentAccademicYear = new AccademicYear($this->database, $currentAccademicYearId, $this->conn);
			} catch (Exception $e)	{
				$this->currentAccademicYear = null;
			}
		}
		if (! is_null($beginOfTheYearDate))	{
			$this->beginOfTheYearDate = null;
			try	{
				$this->beginOfTheYearDate = new DateAndTime($this->database, $beginOfTheYearDate, $this->conn);
			} catch (Exception $e)	{
				$this->beginOfTheYearDate = null;
			}
		}
		if (! is_null($nextGraduationYear))	{
			$this->nextGraduationYear = $nextGraduationYear;
		}
		if (! is_null($nextSemester))	{
			$this->nextSemester = $nextSemester;
		}
		if (! is_null($numberOfSemestersPerYear))	{
			$this->numberOfSemestersPerYear = $numberOfSemestersPerYear;
		}
		if (! is_null($gpsCoordinate))	{
			$this->GPSCoordinate = $gpsCoordinate;
		}
		if (! is_null($themeId))	{
			$this->theme = null;
			try	{
				$this->theme = new Theme($this->database, $themeId, $this->conn);
			} catch (Exception $e)	{
				$this->theme = null;
			}
		}
		if (! is_null($firstDayOfAWeekId))	{
			$this->firstDayOfAWeek = null;
			try	{
				$this->firstDayOfAWeek = new DaysOfAWeek($this->database, $firstDayOfAWeekId, $this->conn);
			} catch (Exception $e)	{
				$this->firstDayOfAWeek = null;
			}
		}
		if (! is_null($xmlFile))	{
			$this->XMLFile = $xmlFile;
		}
		if (! is_null($xmlFileChecksum))	{
			$this->XMLFileChecksum = $xmlFileChecksum;
		}
		if (! is_null($serverIpAddress))	{
			$this->serverIPAddress = $serverIpAddress;
		}
		if (! is_null($localAreaNetworkMask))	{
			$this->localAreaNetworkMask = $localAreaNetworkMask;
		}
		if (! is_null($maxNumberOfReturnedSearchRecords))	{
			$this->maximumNumberOfReturnedSearchRecords = $maxNumberOfReturnedSearchRecords;
		}
		if (! is_null($maxNumberOfDisplayedRowsPerPage))	{
			$this->maximumNumberOfDisplayedRowsPerPage = $maxNumberOfDisplayedRowsPerPage;
		}
		if (! is_null($minAgeCriteriaForStudents))	{
			$this->minimumAgeCriteriaForStudents = $minAgeCriteriaForStudents;
		}
		if (! is_null($minAgeCriteriaForUsers))	{
			$this->minimumAgeCriteriaForUsers = $minAgeCriteriaForUsers;
		}
		if (! is_null($nextRegistrationNumber))	{
			$this->nextRegistrationNumber = $nextRegistrationNumber;
		}
		if (! is_null($registrationNumberWidth))	{
			$this->registrationNumberWidth = $registrationNumberWidth;
		}
		if (! is_null($nextExaminationNumber))	{
			$this->nextExaminationNumber = $nextExaminationNumber;
		}
		if (! is_null($examinationNumberWidth))	{
			$this->examinationNumberWidth = $examinationNumberWidth;
		}
		if (! is_null($applicationCounter))	{
			$this->applicationCounter = $applicationCounter;
		}
		if (! is_null($revisionNumber))	{
			$this->revisionNumber = $revisionNumber;
		}
		if (! is_null($revisionTime))	{
			$this->revisionTime = null;
			try	{
				$this->revisionTime = new DateAndTime($this->database, $revisionTime, $this->conn);
			} catch (Exception $e)	{
				$this->revisionTime = null;
			}
		}
		if (! is_null($serverMACAddress))	{
			$this->serverMACAddress = $serverMACAddress;
		}
		if (! is_null($systemHash))	{
			$this->systemHash = $systemHash;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT profileName, systemName, logo, telephoneList, emailList, otherCommunication, postalAddress, website, faxList, city, countryId, pHPTimezoneId, dob, currentAccademicYearId, beginOfTheYearDate, nextGraduationYear, nextSemester, numberOfSemestersPerYear, gpsCoordinate, themeId, firstDayOfAWeekId, xmlFile, xmlFileChecksum, serverIpAddress, localAreaNetworkMask, maxNumberOfReturnedSearchRecords, maxNumberOfDisplayedRowsPerPage, minAgeCriteriaForStudents, minAgeCriteriaForUsers, nextRegistrationNumber, registrationNumberWidth, nextExaminationNumber, examinationNumberWidth, applicationCounter, revisionNumber, revisionTime, serverMACAddress, systemHash, extraFilter, extraInformation, flags FROM profile WHERE profileId = '$this->profileId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Profile, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Profile, [Clone] Duplicate or No Record');
		list($profileName, $systemName, $logo, $telephoneList, $emailList, $otherCommunication, $postalAddress, $website, $faxList, $city, $countryId, $pHPTimezoneId, $dob, $currentAccademicYearId, $beginOfTheYearDate, $nextGraduationYear, $nextSemester, $numberOfSemestersPerYear, $gpsCoordinate, $themeId, $firstDayOfAWeekId, $xmlFile, $xmlFileChecksum, $serverIpAddress, $localAreaNetworkMask, $maxNumberOfReturnedSearchRecords, $maxNumberOfDisplayedRowsPerPage, $minAgeCriteriaForStudents, $minAgeCriteriaForUsers, $nextRegistrationNumber, $registrationNumberWidth, $nextExaminationNumber, $examinationNumberWidth, $applicationCounter, $revisionNumber, $revisionTime, $serverMACAddress, $systemHash, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['profileName'] = $profileName;
		$masterDataArray['systemName'] = $systemName;
		$masterDataArray['logo'] = $logo;
		$masterDataArray['telephoneList'] = $telephoneList;
		$masterDataArray['emailList'] = $emailList;
		$masterDataArray['otherCommunication'] = $otherCommunication;
		$masterDataArray['postalAddress'] = $postalAddress;
		$masterDataArray['website'] = $website;
		$masterDataArray['faxList'] = $faxList;
		$masterDataArray['city'] = $city;
		$masterDataArray['countryId'] = $countryId;
		$masterDataArray['pHPTimezoneId'] = $pHPTimezoneId;
		$masterDataArray['dob'] = $dob;
		$masterDataArray['currentAccademicYearId'] = $currentAccademicYearId;
		$masterDataArray['beginOfTheYearDate'] = $beginOfTheYearDate;
		$masterDataArray['nextGraduationYear'] = $nextGraduationYear;
		$masterDataArray['nextSemester'] = $nextSemester;
		$masterDataArray['numberOfSemestersPerYear'] = $numberOfSemestersPerYear;
		$masterDataArray['gpsCoordinate'] = $gpsCoordinate;
		$masterDataArray['themeId'] = $themeId;
		$masterDataArray['firstDayOfAWeekId'] = $firstDayOfAWeekId;
		$masterDataArray['xmlFile'] = $xmlFile;
		$masterDataArray['xmlFileChecksum'] = $xmlFileChecksum;
		$masterDataArray['serverIpAddress'] = $serverIpAddress;
		$masterDataArray['localAreaNetworkMask'] = $localAreaNetworkMask;
		$masterDataArray['maxNumberOfReturnedSearchRecords'] = $maxNumberOfReturnedSearchRecords;
		$masterDataArray['maxNumberOfDisplayedRowsPerPage'] = $maxNumberOfDisplayedRowsPerPage;
		$masterDataArray['minAgeCriteriaForStudents'] = $minAgeCriteriaForStudents;
		$masterDataArray['minAgeCriteriaForUsers'] = $minAgeCriteriaForUsers;
		$masterDataArray['nextRegistrationNumber'] = $nextRegistrationNumber;
		$masterDataArray['registrationNumberWidth'] = $registrationNumberWidth;
		$masterDataArray['nextExaminationNumber'] = $nextExaminationNumber;
		$masterDataArray['examinationNumberWidth'] = $examinationNumberWidth;
		$masterDataArray['applicationCounter'] = $applicationCounter;
		$masterDataArray['revisionNumber'] = $revisionNumber;
		$masterDataArray['revisionTime'] = $revisionTime;
		$masterDataArray['serverMACAddress'] = $serverMACAddress;
		$masterDataArray['systemHash'] = $systemHash;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO profile ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Profile [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Profile [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Profile [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class EducationLevel extends Object {
	private $levelId;
	private $levelName;
	private $levelCode;
	private $indexNumberExpression;
	private $indexNumberMessage;
	private $gradeEarnedExpression;
	private $gradeEarnedMessage;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public function getName()	{
		return $this->levelName;
	}
	public function getMyEquivalent()	{
		$list = array();
		$query = "SELECT levelId FROM educationLevel WHERE levelCode='$this->levelCode' AND levelId <> '$this->levelId'";
		$result = mysql_db_query($this->database, $query, $this->conn) or Object::shootException("Education Level [static], Equivalent Could not be fetched");
		while (list($levelId) = mysql_fetch_row($result))	{
			$list[sizeof($list)] = $levelId;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@EducationLevel/levelName,text,1008;levelCode,text,1008;indexNumberExpression,text,1008;indexNumberMessage,text,1008;gradeEarnedExpression,text,1008;gradeEarnedMessage,text,1008;extraFilter,text,1008;extraInformation,text,1008;flags,text,1008";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "educationlevel";
	}
	public final static function getClassContextName()	{
		return "manageeducationlevel";
	}
	public final static function getUniqueLevelId($database, $conn)	{
		$query="SELECT levelId FROM educationLevel";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('EducationLevel, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('EducationLevel, None or Duplicate Row/Multiple Rows Found');
		list($levelId)=mysql_fetch_row($result);
		return $levelId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT levelId, levelName FROM educationLevel";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('EducationLevel, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $levelName, $levelCode, $indexNumberExpression, $indexNumberMessage, $gradeEarnedExpression, $gradeEarnedMessage, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO educationLevel (levelName, levelCode, indexNumberExpression, indexNumberMessage, gradeEarnedExpression, gradeEarnedMessage, extraFilter, extraInformation, flags) VALUES('$levelName', '$levelCode', '$indexNumberExpression', '$indexNumberMessage', '$gradeEarnedExpression', '$gradeEarnedMessage', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('EducationLevel, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('EducationLevel, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('EducationLevel, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->levelId;
	}
	public function getLevelId() {
		return $this->levelId;
	}
	public function getLevelName() {
		return $this->levelName;
	}
	public function setLevelName($levelName) {
		if (! is_null($levelName))	{
			$this->addToUpdateList("levelName", $levelName);
			$this->levelName = $levelName;
		}
	}
	public function getLevelCode() {
		return $this->levelCode;
	}
	public function setLevelCode($levelCode) {
		if (! is_null($levelCode))	{
			$this->addToUpdateList("levelCode", $levelCode);
			$this->levelCode = $levelCode;
		}
	}
	public function getIndexNumberExpression() {
		return $this->indexNumberExpression;
	}
	public function setIndexNumberExpression($indexNumberExpression) {
		if (! is_null($indexNumberExpression))	{
			$this->addToUpdateList("indexNumberExpression", $indexNumberExpression);
			$this->indexNumberExpression = $indexNumberExpression;
		}
	}
	public function getIndexNumberMessage() {
		return $this->indexNumberMessage;
	}
	public function setIndexNumberMessage($indexNumberMessage) {
		if (! is_null($indexNumberMessage))	{
			$this->addToUpdateList("indexNumberMessage", $indexNumberMessage);
			$this->indexNumberMessage = $indexNumberMessage;
		}
	}
	public function getGradeEarnedExpression() {
		return $this->gradeEarnedExpression;
	}
	public function setGradeEarnedExpression($gradeEarnedExpression) {
		if (! is_null($gradeEarnedExpression))	{
			$this->addToUpdateList("gradeEarnedExpression", $gradeEarnedExpression);
			$this->gradeEarnedExpression = $gradeEarnedExpression;
		}
	}
	public function getGradeEarnedMessage() {
		return $this->gradeEarnedMessage;
	}
	public function setGradeEarnedMessage($gradeEarnedMessage) {
		if (! is_null($gradeEarnedMessage))	{
			$this->addToUpdateList("gradeEarnedMessage", $gradeEarnedMessage);
			$this->gradeEarnedMessage = $gradeEarnedMessage;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT levelId FROM educationLevel";
		return $query;
	}
	public function __construct($database, $levelId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "EducationLevel")) Object::shootException("EducationLevel System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $levelId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->levelId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "EducationLevel")) Object::shootException("EducationLevel System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE educationLevel SET $setList WHERE levelId = '$this->levelId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('EducationLevel, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "EducationLevel")) Object::shootException("EducationLevel System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM educationLevel WHERE levelId = '$this->levelId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('EducationLevel, Row Deletion Failed');
	}
	public function getClassName()	{
		return "EducationLevel";
	}
	protected function getProperties()	{
		return "levelId=$this->levelId"."@levelName=$this->levelName"."@levelCode=$this->levelCode"."@indexNumberExpression=$this->indexNumberExpression"."@indexNumberMessage=$this->indexNumberMessage"."@gradeEarnedExpression=$this->gradeEarnedExpression"."@gradeEarnedMessage=$this->gradeEarnedMessage"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1008.levelId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->levelId))."@1008.levelName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->levelName))."@1008.levelCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->levelCode))."@1008.indexNumberExpression=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->indexNumberExpression))."@1008.indexNumberMessage=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->indexNumberMessage))."@1008.gradeEarnedExpression=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradeEarnedExpression))."@1008.gradeEarnedMessage=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradeEarnedMessage))."@1008.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1008.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1008.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: EducationLevel (NAMESPACETAG = 1008) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $levelId, $conn) {
		$query="SELECT levelId, levelName, levelCode, indexNumberExpression, indexNumberMessage, gradeEarnedExpression, gradeEarnedMessage, extraFilter, extraInformation, flags FROM educationLevel WHERE levelId = '$levelId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('EducationLevel, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('EducationLevel, Duplicate or No Record');
		list($levelId, $levelName, $levelCode, $indexNumberExpression, $indexNumberMessage, $gradeEarnedExpression, $gradeEarnedMessage, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->levelId = $levelId;
		if (! is_null($levelName))	{
			$this->levelName = $levelName;
		}
		if (! is_null($levelCode))	{
			$this->levelCode = $levelCode;
		}
		if (! is_null($indexNumberExpression))	{
			$this->indexNumberExpression = $indexNumberExpression;
		}
		if (! is_null($indexNumberMessage))	{
			$this->indexNumberMessage = $indexNumberMessage;
		}
		if (! is_null($gradeEarnedExpression))	{
			$this->gradeEarnedExpression = $gradeEarnedExpression;
		}
		if (! is_null($gradeEarnedMessage))	{
			$this->gradeEarnedMessage = $gradeEarnedMessage;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT levelName, levelCode, indexNumberExpression, indexNumberMessage, gradeEarnedExpression, gradeEarnedMessage, extraFilter, extraInformation, flags FROM educationLevel WHERE levelId = '$this->levelId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('EducationLevel, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('EducationLevel, [Clone] Duplicate or No Record');
		list($levelName, $levelCode, $indexNumberExpression, $indexNumberMessage, $gradeEarnedExpression, $gradeEarnedMessage, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['levelName'] = $levelName;
		$masterDataArray['levelCode'] = $levelCode;
		$masterDataArray['indexNumberExpression'] = $indexNumberExpression;
		$masterDataArray['indexNumberMessage'] = $indexNumberMessage;
		$masterDataArray['gradeEarnedExpression'] = $gradeEarnedExpression;
		$masterDataArray['gradeEarnedMessage'] = $gradeEarnedMessage;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO educationLevel ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("EducationLevel [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("EducationLevel [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("EducationLevel [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Department extends Object {
	private $departmentId;
	private $departmentName;
	private $departmentCode;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Department/departmentName,text,1008;departmentCode,text,1008;extraFilter,text,1008;extraInformation,text,1008;flags,text,1008";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "department";
	}
	public final static function getClassContextName()	{
		return "managedepartment";
	}
	public final static function getUniqueDepartmentId($database, $conn)	{
		$query="SELECT departmentId FROM departments";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Department, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Department, None or Duplicate Row/Multiple Rows Found');
		list($departmentId)=mysql_fetch_row($result);
		return $departmentId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT departmentId, departmentName FROM departments";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Department, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $departmentName, $departmentCode, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO departments (departmentName, departmentCode, extraFilter, extraInformation, flags) VALUES('$departmentName', '$departmentCode', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Department, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Department, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Department, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->departmentId;
	}
	public function getDepartmentId() {
		return $this->departmentId;
	}
	public function getDepartmentName() {
		return $this->departmentName;
	}
	public function setDepartmentName($departmentName) {
		if (! is_null($departmentName))	{
			$this->addToUpdateList("departmentName", $departmentName);
			$this->departmentName = $departmentName;
		}
	}
	public function getDepartmentCode() {
		return $this->departmentCode;
	}
	public function setDepartmentCode($departmentCode) {
		if (! is_null($departmentCode))	{
			$this->addToUpdateList("departmentCode", $departmentCode);
			$this->departmentCode = $departmentCode;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT departmentId FROM departments";
		return $query;
	}
	public function __construct($database, $departmentId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Department")) Object::shootException("Department System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $departmentId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->departmentId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Department")) Object::shootException("Department System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE departments SET $setList WHERE departmentId = '$this->departmentId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Department, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Department")) Object::shootException("Department System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM departments WHERE departmentId = '$this->departmentId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Department, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Department";
	}
	protected function getProperties()	{
		return "departmentId=$this->departmentId"."@departmentName=$this->departmentName"."@departmentCode=$this->departmentCode"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1008.departmentId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->departmentId))."@1008.departmentName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->departmentName))."@1008.departmentCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->departmentCode))."@1008.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1008.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1008.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Department (NAMESPACETAG = 1008) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $departmentId, $conn) {
		$query="SELECT departmentId, departmentName, departmentCode, extraFilter, extraInformation, flags FROM departments WHERE departmentId = '$departmentId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Department, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Department, Duplicate or No Record');
		list($departmentId, $departmentName, $departmentCode, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->departmentId = $departmentId;
		if (! is_null($departmentName))	{
			$this->departmentName = $departmentName;
		}
		if (! is_null($departmentCode))	{
			$this->departmentCode = $departmentCode;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT departmentName, departmentCode, extraFilter, extraInformation, flags FROM departments WHERE departmentId = '$this->departmentId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Department, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Department, [Clone] Duplicate or No Record');
		list($departmentName, $departmentCode, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['departmentName'] = $departmentName;
		$masterDataArray['departmentCode'] = $departmentCode;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO departments ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Department [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Department [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Department [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Course extends Object {
	private $courseId;
	private $courseName;
	private $duration;
	private $courseCode;
	private $department;
	private $nextRegistrationNumber;
	private $registrationNumberWidth;
	private $nextExaminationNumber;
	private $examinationNumberWidth;
	private $educationLevel;
	private $minimumPoints;
	private $maximumPoints;
	private $minimumGPABeforeSupplimentary;
	private $minimumGPAAfterSupplimentary;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getCourseIdFromCourseCode($database, $conn, $courseCode)	{
		$query = "SELECT courseId FROM course WHERE courseCode='$courseCode'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Course [static], query problem");
		if (mysql_num_rows($result) != 1) Object::shootException("Course [static], Not found or multiple");
		list($courseId) = mysql_fetch_row($result);
		return $courseId;
	}
	public final static function getCourseIdFromCourseName($database, $conn, $courseName)	{
		$query = "SELECT courseId FROM course WHERE courseName='$courseName'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Course [static], query problem");
		if (mysql_num_rows($result) != 1) Object::shootException("Course [static], Not found or multiple");
		list($courseId) = mysql_fetch_row($result);
		return $courseId;
	}
	public final static function getListOfCoursesBelongingToEducationLevel($database, $conn, $levelId)	{
		$query = "SELECT courseId FROM course WHERE levelId='$levelId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Course [static], Could not execute query");
		$list = array();
		while (list($id) = mysql_fetch_row($result))	{
			$list[sizeof($list)] = $id;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public function getDbCourseName()	{
		$query = "SELECT courseName FROM course WHERE courseId='$this->courseId'";
		$result = mysql_db_query($this->database, $query, $this->conn) or Object::shootException("Could not pull Course Information");
		if (mysql_num_rows($result) != 1) Object::shootException("Multiple or No record returned");
		list($courseName) = mysql_fetch_row($result);
		return $courseName;
	}
	public function getDbCourseCode()	{
		$query = "SELECT courseCode FROM course WHERE courseId='$this->courseId'";
		$result = mysql_db_query($this->database, $query, $this->conn) or Object::shootException("Could not pull Course Information");
		if (mysql_num_rows($result) != 1) Object::shootException("Multiple or No record returned");
		list($courseCode) = mysql_fetch_row($result);
		return $courseCode;
	}
	public final static function getCourseGroupName($database, $conn, $format, $course1, $groupId)	{
		/*
		format [courseName, year, semester]
		*/
		$courseName = $course1->getCourseName();
		$courseCode = $course1->getCourseCode();
		//
		$group1 = new Group($database, $groupId, $conn);
		//--
		//Return String 
		$groupNameString = "";
		if (trim($format) == "courseName")	{
			$groupNameString = $courseName;
		} else if (trim($format) == "courseYear")	{
			$groupNameString = $courseCode."_YEAR_".$group1->getYear();
		} else if (trim($format) == "courseSemester")	{
			$groupNameString = $courseCode."_".$group1->getYear()."_SEM_".$group1->getSemester();
		} else {
			$groupNameString = null;
		}
		return $groupNameString;
	}
	public function updateMyCourseGroup()	{
		$list = $this->getCourseGroup();
		if (is_null($list)) return;
		if (isset($list['courseNameGroupId']))	{
			$groupId = $list['courseNameGroupId'][0];
			$group1 = new Group($this->database, $groupId, $this->conn);
			$groupName = Course::getCourseGroupName($this->database, $this->conn, "courseName", $this, $groupId);
			if (! is_null($groupName))	{
				$group1->setGroupName($groupName);
				$group1->commitUpdate();
			}
		}
		if (isset($list['courseYearGroupId']))	{
			foreach ($list['courseYearGroupId'] as $groupId)	{
				$group1 = new Group($this->database, $groupId, $this->conn);
				$groupName = Course::getCourseGroupName($this->database, $this->conn, "courseYear", $this, $groupId);
				if (! is_null($groupName))	{
					$group1->setGroupName($groupName);
					$group1->commitUpdate();
				}
			}
		}
		if (isset($list['courseSemesterGroupId']))	{
			foreach ($list['courseSemesterGroupId'] as $groupId)	{
				$group1 = new Group($this->database, $groupId, $this->conn);
				$groupName = Course::getCourseGroupName($this->database, $this->conn, "courseSemester", $this, $groupId);
				if (! is_null($groupName))	{
					$group1->setGroupName($groupName);
					$group1->commitUpdate();
				}
			}
		}
	}
	public function getCourseGroup()	{
		/*
		Return list['courseNameGroupId'][0]
			list['courseYearGroupId'][i]
			list['courseSemesterGroupId'][i]
			We need to take the name of the course as it is now in the database 
		*/
		$courseName = $this->getDbCourseName();
		$query = "SELECT groupId FROM groups WHERE courseId='$this->courseId' AND groupName='$courseName'";
		$result = mysql_db_query($this->database, $query, $this->conn) or Object::shootException("Could not pull Course Group Information");
		if (mysql_num_rows($result) != 1) return null;
		list($groupId) = mysql_fetch_row($result);
		$list = array();
		$list['courseNameGroupId'] = array();
		$list['courseNameGroupId'][0] = $groupId;
		//Now find the year Groups 
		$query = "SELECT groupId FROM groups WHERE pId='$groupId'";
		$yearResult = mysql_db_query($this->database, $query, $this->conn) or Object::shootException("Could not pull Year Group Information");
		$list['courseYearGroupId']  = array();
		$list['courseSemesterGroupId'] = array();
		while (list($groupId) = mysql_fetch_row($yearResult))	{
			$list['courseYearGroupId'][sizeof($list['courseYearGroupId'])] = $groupId;
			//Now Dealing with Semester Group 
			$query = "SELECT groupId FROM groups WHERE pId='$groupId'";
			$semesterResult = mysql_db_query($this->database, $query, $this->conn) or Object::shootException("Could not pull Semester Group Information");
			while (list($groupId) = mysql_fetch_row($semesterResult))	{
				$list['courseSemesterGroupId'][sizeof($list['courseSemesterGroupId'])] = $groupId;
			}
		}
		return $list;
	}
	public final static function synchronize($database, $conn, $profile1)	{
		//Any synchronization need to be done here i.e course groups here is a place 
		//Make sure every course has a group 
		$promise1 = new Promise();
		$query = "SELECT courseId FROM course";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not fetch course list");
		$pId = Group::getStudentGroupId($database, $conn);
		$graduationGroupId = Group::getGroupIdFromGroupName($database, $conn, "Graduation");
		while (list($courseId)=mysql_fetch_row($result))	{
			$course1 = new Course($database, $courseId, $conn);
			$groupName = $course1->getCourseName();
			$groupId = Group::addGroupIfNotExists($database, $conn, $groupName, $pId, 0, 0, $courseId, 1);
			$duration = $course1->getDuration();
			//You need to add also graduation 
			$graduationGroupName = Group::getGraduationGroupName($groupName);
			$graduationId = Group::addGroupIfNotExists($database, $conn, $graduationGroupName, $graduationGroupId, 0, 0, $courseId, 1);
			for ($i=1; $i <= intval($duration); $i++)	{
				//Year 
				$groupName = $course1->getCourseCode()."_YEAR_".$i;
				$yearGroupId = Group::addGroupIfNotExists($database, $conn, $groupName, $groupId, $i, 0, $courseId, 1);
				$noOfSemesters = intval($profile1->getNumberOfSemestersPerYear());
				for ($j=1; $j <= $noOfSemesters; $j++)	{
					$groupName = $course1->getCourseCode()."_".$i."_SEM_".$j;
					$semesterGroupId = Group::addGroupIfNotExists($database, $conn, $groupName, $yearGroupId, $i, $j, $courseId, 1);
				}
			}
		} //end-while
		$promise1->setPromise(true);
		return $promise1;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Course/courseName,text,1010;duration,text,1010;courseCode,text,1010;nextRegistrationNumber,text,1010;registrationNumberWidth,text,1010;nextExaminationNumber,text,1010;examinationNumberWidth,text,1010;minimumPoints,text,1010;maximumPoints,text,1010;minimumGPABeforeSupplimentary,text,1010;minimumGPAAfterSupplimentary,text,1010;extraFilter,text,1010;extraInformation,text,1010;flags,text,1010";
		$lineToView .= Department::getAvailableViewableColumns();
		$lineToView .= EducationLevel::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "course";
	}
	public final static function getClassContextName()	{
		return "managecourse";
	}
	public final static function getUniqueCourseId($database, $conn)	{
		$query="SELECT courseId FROM course";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Course, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Course, None or Duplicate Row/Multiple Rows Found');
		list($courseId)=mysql_fetch_row($result);
		return $courseId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT courseId, courseName FROM course";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Course, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $courseName, $duration, $courseCode, $departmentId, $nextRegistrationNumber, $registrationNumberWidth, $nextExaminationNumber, $examinationNumberWidth, $levelId, $minimumPoints, $maximumPoints, $minimumGPABeforeSupplimentary, $minimumGPAAfterSupplimentary, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO course (courseName, duration, courseCode, departmentId, nextRegistrationNumber, registrationNumberWidth, nextExaminationNumber, examinationNumberWidth, levelId, minimumPoints, maximumPoints, minimumGPABeforeSupplimentary, minimumGPAAfterSupplimentary, extraFilter, extraInformation, flags) VALUES('$courseName', '$duration', '$courseCode', '$departmentId', '$nextRegistrationNumber', '$registrationNumberWidth', '$nextExaminationNumber', '$examinationNumberWidth', '$levelId', '$minimumPoints', '$maximumPoints', '$minimumGPABeforeSupplimentary', '$minimumGPAAfterSupplimentary', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Course, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Course, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Course, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->courseId;
	}
	public function getCourseId() {
		return $this->courseId;
	}
	public function getCourseName() {
		return $this->courseName;
	}
	public function setCourseName($courseName) {
		if (! is_null($courseName))	{
			$this->addToUpdateList("courseName", $courseName);
			$this->courseName = $courseName;
		}
	}
	public function getDuration() {
		return $this->duration;
	}
	public function setDuration($duration) {
		if (! is_null($duration))	{
			$this->addToUpdateList("duration", $duration);
			$this->duration = $duration;
		}
	}
	public function getCourseCode() {
		return $this->courseCode;
	}
	public function setCourseCode($courseCode) {
		if (! is_null($courseCode))	{
			$this->addToUpdateList("courseCode", $courseCode);
			$this->courseCode = $courseCode;
		}
	}
	public function getDepartment() {
		return $this->department;
	}
	public function setDepartment($departmentId) {
		if (! is_null($departmentId))	{
			$this->addToUpdateList("departmentId", $departmentId);
			$this->department = null;
			try	{
				$this->department = new Department($this->database, $departmentId, $this->conn);
			} catch (Exception $e)	{
				$this->department = null;
			}
		}
	}
	public function getNextRegistrationNumber() {
		return $this->nextRegistrationNumber;
	}
	public function setNextRegistrationNumber($nextRegistrationNumber) {
		if (! is_null($nextRegistrationNumber))	{
			$this->addToUpdateList("nextRegistrationNumber", $nextRegistrationNumber);
			$this->nextRegistrationNumber = $nextRegistrationNumber;
		}
	}
	public function getRegistrationNumberWidth() {
		return $this->registrationNumberWidth;
	}
	public function setRegistrationNumberWidth($registrationNumberWidth) {
		if (! is_null($registrationNumberWidth))	{
			$this->addToUpdateList("registrationNumberWidth", $registrationNumberWidth);
			$this->registrationNumberWidth = $registrationNumberWidth;
		}
	}
	public function getNextExaminationNumber() {
		return $this->nextExaminationNumber;
	}
	public function setNextExaminationNumber($nextExaminationNumber) {
		if (! is_null($nextExaminationNumber))	{
			$this->addToUpdateList("nextExaminationNumber", $nextExaminationNumber);
			$this->nextExaminationNumber = $nextExaminationNumber;
		}
	}
	public function getExaminationNumberWidth() {
		return $this->examinationNumberWidth;
	}
	public function setExaminationNumberWidth($examinationNumberWidth) {
		if (! is_null($examinationNumberWidth))	{
			$this->addToUpdateList("examinationNumberWidth", $examinationNumberWidth);
			$this->examinationNumberWidth = $examinationNumberWidth;
		}
	}
	public function getEducationLevel() {
		return $this->educationLevel;
	}
	public function setEducationLevel($levelId) {
		if (! is_null($levelId))	{
			$this->addToUpdateList("levelId", $levelId);
			$this->educationLevel = null;
			try	{
				$this->educationLevel = new EducationLevel($this->database, $levelId, $this->conn);
			} catch (Exception $e)	{
				$this->educationLevel = null;
			}
		}
	}
	public function getMinimumPoints() {
		return $this->minimumPoints;
	}
	public function setMinimumPoints($minimumPoints) {
		if (! is_null($minimumPoints))	{
			$this->addToUpdateList("minimumPoints", $minimumPoints);
			$this->minimumPoints = $minimumPoints;
		}
	}
	public function getMaximumPoints() {
		return $this->maximumPoints;
	}
	public function setMaximumPoints($maximumPoints) {
		if (! is_null($maximumPoints))	{
			$this->addToUpdateList("maximumPoints", $maximumPoints);
			$this->maximumPoints = $maximumPoints;
		}
	}
	public function getMinimumGPABeforeSupplimentary() {
		return $this->minimumGPABeforeSupplimentary;
	}
	public function setMinimumGPABeforeSupplimentary($minimumGPABeforeSupplimentary) {
		if (! is_null($minimumGPABeforeSupplimentary))	{
			$this->addToUpdateList("minimumGPABeforeSupplimentary", $minimumGPABeforeSupplimentary);
			$this->minimumGPABeforeSupplimentary = $minimumGPABeforeSupplimentary;
		}
	}
	public function getMinimumGPAAfterSupplimentary() {
		return $this->minimumGPAAfterSupplimentary;
	}
	public function setMinimumGPAAfterSupplimentary($minimumGPAAfterSupplimentary) {
		if (! is_null($minimumGPAAfterSupplimentary))	{
			$this->addToUpdateList("minimumGPAAfterSupplimentary", $minimumGPAAfterSupplimentary);
			$this->minimumGPAAfterSupplimentary = $minimumGPAAfterSupplimentary;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT courseId FROM course";
		return $query;
	}
	public function __construct($database, $courseId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Course")) Object::shootException("Course System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $courseId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->courseId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Course")) Object::shootException("Course System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE course SET $setList WHERE courseId = '$this->courseId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Course, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Course")) Object::shootException("Course System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM course WHERE courseId = '$this->courseId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Course, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Course";
	}
	protected function getProperties()	{
		return "courseId=$this->courseId"."@courseName=$this->courseName"."@duration=$this->duration"."@courseCode=$this->courseCode"."@nextRegistrationNumber=$this->nextRegistrationNumber"."@registrationNumberWidth=$this->registrationNumberWidth"."@nextExaminationNumber=$this->nextExaminationNumber"."@examinationNumberWidth=$this->examinationNumberWidth"."@minimumPoints=$this->minimumPoints"."@maximumPoints=$this->maximumPoints"."@minimumGPABeforeSupplimentary=$this->minimumGPABeforeSupplimentary"."@minimumGPAAfterSupplimentary=$this->minimumGPAAfterSupplimentary"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1010.courseId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->courseId))."@1010.courseName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->courseName))."@1010.duration=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->duration))."@1010.courseCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->courseCode))."@1010.nextRegistrationNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->nextRegistrationNumber))."@1010.registrationNumberWidth=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->registrationNumberWidth))."@1010.nextExaminationNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->nextExaminationNumber))."@1010.examinationNumberWidth=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->examinationNumberWidth))."@1010.minimumPoints=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->minimumPoints))."@1010.maximumPoints=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->maximumPoints))."@1010.minimumGPABeforeSupplimentary=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->minimumGPABeforeSupplimentary))."@1010.minimumGPAAfterSupplimentary=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->minimumGPAAfterSupplimentary))."@1010.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1010.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1010.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Course (NAMESPACETAG = 1010) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->department))	{
			$this->department->debug();
		}
		if (! is_null($this->educationLevel))	{
			$this->educationLevel->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->department))	{
			$matrix1=$this->department->searchMatrix($matrix1);
		}
		if (! is_null($this->educationLevel))	{
			$matrix1=$this->educationLevel->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->department))	{
			$csvProcessor1=$this->department->processCSV($csvProcessor1);
		}
		if (! is_null($this->educationLevel))	{
			$csvProcessor1=$this->educationLevel->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $courseId, $conn) {
		$query="SELECT courseId, courseName, duration, courseCode, departmentId, nextRegistrationNumber, registrationNumberWidth, nextExaminationNumber, examinationNumberWidth, levelId, minimumPoints, maximumPoints, minimumGPABeforeSupplimentary, minimumGPAAfterSupplimentary, extraFilter, extraInformation, flags FROM course WHERE courseId = '$courseId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Course, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Course, Duplicate or No Record');
		list($courseId, $courseName, $duration, $courseCode, $departmentId, $nextRegistrationNumber, $registrationNumberWidth, $nextExaminationNumber, $examinationNumberWidth, $levelId, $minimumPoints, $maximumPoints, $minimumGPABeforeSupplimentary, $minimumGPAAfterSupplimentary, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->courseId = $courseId;
		if (! is_null($courseName))	{
			$this->courseName = $courseName;
		}
		if (! is_null($duration))	{
			$this->duration = $duration;
		}
		if (! is_null($courseCode))	{
			$this->courseCode = $courseCode;
		}
		if (! is_null($departmentId))	{
			$this->department = null;
			try	{
				$this->department = new Department($this->database, $departmentId, $this->conn);
			} catch (Exception $e)	{
				$this->department = null;
			}
		}
		if (! is_null($nextRegistrationNumber))	{
			$this->nextRegistrationNumber = $nextRegistrationNumber;
		}
		if (! is_null($registrationNumberWidth))	{
			$this->registrationNumberWidth = $registrationNumberWidth;
		}
		if (! is_null($nextExaminationNumber))	{
			$this->nextExaminationNumber = $nextExaminationNumber;
		}
		if (! is_null($examinationNumberWidth))	{
			$this->examinationNumberWidth = $examinationNumberWidth;
		}
		if (! is_null($levelId))	{
			$this->educationLevel = null;
			try	{
				$this->educationLevel = new EducationLevel($this->database, $levelId, $this->conn);
			} catch (Exception $e)	{
				$this->educationLevel = null;
			}
		}
		if (! is_null($minimumPoints))	{
			$this->minimumPoints = $minimumPoints;
		}
		if (! is_null($maximumPoints))	{
			$this->maximumPoints = $maximumPoints;
		}
		if (! is_null($minimumGPABeforeSupplimentary))	{
			$this->minimumGPABeforeSupplimentary = $minimumGPABeforeSupplimentary;
		}
		if (! is_null($minimumGPAAfterSupplimentary))	{
			$this->minimumGPAAfterSupplimentary = $minimumGPAAfterSupplimentary;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT courseName, duration, courseCode, departmentId, nextRegistrationNumber, registrationNumberWidth, nextExaminationNumber, examinationNumberWidth, levelId, minimumPoints, maximumPoints, minimumGPABeforeSupplimentary, minimumGPAAfterSupplimentary, extraFilter, extraInformation, flags FROM course WHERE courseId = '$this->courseId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Course, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Course, [Clone] Duplicate or No Record');
		list($courseName, $duration, $courseCode, $departmentId, $nextRegistrationNumber, $registrationNumberWidth, $nextExaminationNumber, $examinationNumberWidth, $levelId, $minimumPoints, $maximumPoints, $minimumGPABeforeSupplimentary, $minimumGPAAfterSupplimentary, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['courseName'] = $courseName;
		$masterDataArray['duration'] = $duration;
		$masterDataArray['courseCode'] = $courseCode;
		$masterDataArray['departmentId'] = $departmentId;
		$masterDataArray['nextRegistrationNumber'] = $nextRegistrationNumber;
		$masterDataArray['registrationNumberWidth'] = $registrationNumberWidth;
		$masterDataArray['nextExaminationNumber'] = $nextExaminationNumber;
		$masterDataArray['examinationNumberWidth'] = $examinationNumberWidth;
		$masterDataArray['levelId'] = $levelId;
		$masterDataArray['minimumPoints'] = $minimumPoints;
		$masterDataArray['maximumPoints'] = $maximumPoints;
		$masterDataArray['minimumGPABeforeSupplimentary'] = $minimumGPABeforeSupplimentary;
		$masterDataArray['minimumGPAAfterSupplimentary'] = $minimumGPAAfterSupplimentary;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO course ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Course [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Course [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Course [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Subject extends Object {
	private $subjectId;
	private $subjectName;
	private $subjectCode;
	private $lectureHours;
	private $lectureUnits;
	private $practicalHours;
	private $practicalUnits;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public function getTotalUnits()	{
		return (intval($this->lectureUnits) + intval($this->practicalUnits));
	}
	public function getTotalHours()	{
		return (intval($this->lectureHours) + intval($this->practicalHours));
	}
	public final static function getSubjectIdFromSubjectCode($database, $conn, $subjectCode)	{
		$query = "SELECT subjectId FROM subject WHERE subjectCode='$subjectCode'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Subject [static], query problem");
		if (mysql_num_rows($result) != 1) Object::shootException("Subject [static], Not found or multiple");
		list($courseId) = mysql_fetch_row($result);
		return $courseId;
	}
	public final static function getSubjectIdFromSubjectName($database, $conn, $subjectName)	{
		$query = "SELECT courseId FROM subject WHERE subjectName='$subjectName'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Subject [static], query problem");
		if (mysql_num_rows($result) != 1) Object::shootException("Subject [static], Not found or multiple");
		list($courseId) = mysql_fetch_row($result);
		return $courseId;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Subject/subjectName,text,1010;subjectCode,text,1010;lectureHours,text,1010;lectureUnits,text,1010;practicalHours,text,1010;practicalUnits,text,1010;extraFilter,text,1010;extraInformation,text,1010;flags,text,1010";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "subject";
	}
	public final static function getClassContextName()	{
		return "managesubject";
	}
	public final static function getUniqueSubjectId($database, $conn)	{
		$query="SELECT subjectId FROM subject";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Subject, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Subject, None or Duplicate Row/Multiple Rows Found');
		list($subjectId)=mysql_fetch_row($result);
		return $subjectId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT subjectId, subjectName, subjectCode FROM subject";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Subject, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val, $__code)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']="$__val ($__code)";
		}
		return $list;
	}
	public final static function add($database, $conn, $subjectName, $subjectCode, $lectureHours, $lectureUnits, $practicalHours, $practicalUnits, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO subject (subjectName, subjectCode, lectureHours, lectureUnits, practicalHours, practicalUnits, extraFilter, extraInformation, flags) VALUES('$subjectName', '$subjectCode', '$lectureHours', '$lectureUnits', '$practicalHours', '$practicalUnits', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Subject, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Subject, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Subject, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->subjectId;
	}
	public function getSubjectId() {
		return $this->subjectId;
	}
	public function getSubjectName() {
		return $this->subjectName;
	}
	public function setSubjectName($subjectName) {
		if (! is_null($subjectName))	{
			$this->addToUpdateList("subjectName", $subjectName);
			$this->subjectName = $subjectName;
		}
	}
	public function getSubjectCode() {
		return $this->subjectCode;
	}
	public function setSubjectCode($subjectCode) {
		if (! is_null($subjectCode))	{
			$this->addToUpdateList("subjectCode", $subjectCode);
			$this->subjectCode = $subjectCode;
		}
	}
	public function getLectureHours() {
		return $this->lectureHours;
	}
	public function setLectureHours($lectureHours) {
		if (! is_null($lectureHours))	{
			$this->addToUpdateList("lectureHours", $lectureHours);
			$this->lectureHours = $lectureHours;
		}
	}
	public function getLectureUnits() {
		return $this->lectureUnits;
	}
	public function setLectureUnits($lectureUnits) {
		if (! is_null($lectureUnits))	{
			$this->addToUpdateList("lectureUnits", $lectureUnits);
			$this->lectureUnits = $lectureUnits;
		}
	}
	public function getPracticalHours() {
		return $this->practicalHours;
	}
	public function setPracticalHours($practicalHours) {
		if (! is_null($practicalHours))	{
			$this->addToUpdateList("practicalHours", $practicalHours);
			$this->practicalHours = $practicalHours;
		}
	}
	public function getPracticalUnits() {
		return $this->practicalUnits;
	}
	public function setPracticalUnits($practicalUnits) {
		if (! is_null($practicalUnits))	{
			$this->addToUpdateList("practicalUnits", $practicalUnits);
			$this->practicalUnits = $practicalUnits;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT subjectId FROM subject";
		return $query;
	}
	public function __construct($database, $subjectId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Subject")) Object::shootException("Subject System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $subjectId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->subjectId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Subject")) Object::shootException("Subject System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE subject SET $setList WHERE subjectId = '$this->subjectId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Subject, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Subject")) Object::shootException("Subject System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM subject WHERE subjectId = '$this->subjectId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Subject, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Subject";
	}
	protected function getProperties()	{
		return "subjectId=$this->subjectId"."@subjectName=$this->subjectName"."@subjectCode=$this->subjectCode"."@lectureHours=$this->lectureHours"."@lectureUnits=$this->lectureUnits"."@practicalHours=$this->practicalHours"."@practicalUnits=$this->practicalUnits"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1010.subjectId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->subjectId))."@1010.subjectName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->subjectName))."@1010.subjectCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->subjectCode))."@1010.lectureHours=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->lectureHours))."@1010.lectureUnits=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->lectureUnits))."@1010.practicalHours=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->practicalHours))."@1010.practicalUnits=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->practicalUnits))."@1010.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1010.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1010.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Subject (NAMESPACETAG = 1010) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $subjectId, $conn) {
		$query="SELECT subjectId, subjectName, subjectCode, lectureHours, lectureUnits, practicalHours, practicalUnits, extraFilter, extraInformation, flags FROM subject WHERE subjectId = '$subjectId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Subject, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Subject, Duplicate or No Record');
		list($subjectId, $subjectName, $subjectCode, $lectureHours, $lectureUnits, $practicalHours, $practicalUnits, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->subjectId = $subjectId;
		if (! is_null($subjectName))	{
			$this->subjectName = $subjectName;
		}
		if (! is_null($subjectCode))	{
			$this->subjectCode = $subjectCode;
		}
		if (! is_null($lectureHours))	{
			$this->lectureHours = $lectureHours;
		}
		if (! is_null($lectureUnits))	{
			$this->lectureUnits = $lectureUnits;
		}
		if (! is_null($practicalHours))	{
			$this->practicalHours = $practicalHours;
		}
		if (! is_null($practicalUnits))	{
			$this->practicalUnits = $practicalUnits;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT subjectName, subjectCode, lectureHours, lectureUnits, practicalHours, practicalUnits, extraFilter, extraInformation, flags FROM subject WHERE subjectId = '$this->subjectId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Subject, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Subject, [Clone] Duplicate or No Record');
		list($subjectName, $subjectCode, $lectureHours, $lectureUnits, $practicalHours, $practicalUnits, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['subjectName'] = $subjectName;
		$masterDataArray['subjectCode'] = $subjectCode;
		$masterDataArray['lectureHours'] = $lectureHours;
		$masterDataArray['lectureUnits'] = $lectureUnits;
		$masterDataArray['practicalHours'] = $practicalHours;
		$masterDataArray['practicalUnits'] = $practicalUnits;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO subject ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Subject [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Subject [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Subject [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class CourseAndSubjectTransaction extends Object {
	private $transactionId;
	private $course;
	private $subject;
	private $lectureHours;
	private $seminarAndTutorialHours;
	private $assignmentHours;
	private $independentStudiesAndResearchHours;
	private $practicalTrainingHours;
	private $extraHours;
	private $creditHours;
	private $year;
	private $semester;
	private $compulsory;
	private $minimumPassMarks;
	private $minimumCourseWork;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__IS_CORE_MODULE = 4; 
	public final static function getCreditHoursFromTransaction($database, $conn, $transactionId)	{
		$query = "SELECT creditHours FROM courseAndSubjectTransaction WHERE transactionId = '$transactionId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("CourseAndSubjectTransaction [static], There were problem in fetching credit hours");
		if (mysql_num_rows($result) == 0) Object::shootException("CourseAndSubjectTransaction [static], Duplicate or no record");
		list($creditHours) = mysql_fetch_row($result);
		return $creditHours; 
	}
	public function getTotalHours()	{
		return round((floatval($this->lectureHours) + floatval($this->seminarAndTutorialHours) + floatval($this->assignmentHours) + floatval($this->independentStudiesAndResearchHours) + floatval($this->practicalTrainingHours) + floatval($this->extraHours)),1);
	}
	public function isCoreModule()	{
		return $this->isFlagSetAt(CourseAndSubjectTransaction::$__IS_CORE_MODULE);
	}
	public function setCoreModule($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(CourseAndSubjectTransaction::$__IS_CORE_MODULE);
		} else {
			$this->resetFlagAt(CourseAndSubjectTransaction::$__IS_CORE_MODULE);
		}
	}
	public final static function getTransactionForCourseSubjectYearAndSemester($database, $conn, $courseId, $subjectId, $year, $semester)	{
		$query = "SELECT transactionId FROM courseAndSubjectTransaction WHERE courseId='$courseId' AND subjectId='$subjectId' AND year='$year' AND semester='$semester'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Course And Subject Transaction [static], Problem in query");
		//Unique at courseId,subjectId,year,semester 
		if (mysql_num_rows($result) != 1) Object::shootException("Course and Subject Transaction [static], No existing transaction or multiple matches");
		list($transactionId)=mysql_fetch_row($result);
		return $transactionId;
	}
	public final static function getTransactionListFromCourseYearAndSemester($database, $conn, $courseId, $year, $semester)	{
		$list1 = array();
		$query = "SELECT transactionId FROM courseAndSubjectTransaction WHERE courseId='$courseId' AND year='$year' AND semester='$semester'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not connect to a database services");
		while (list($transactionId) = mysql_fetch_row($result))	{
			$list1[sizeof($list1)] = $transactionId;
		}
		if (sizeof($list1) == 0) $list1 = null;
		return $list1;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@CourseAndSubjectTransaction/lectureHours,text,1012;seminarAndTutorialHours,text,1012;assignmentHours,text,1012;independentStudiesAndResearchHours,text,1012;practicalTrainingHours,text,1012;extraHours,text,1012;creditHours,text,1012;year,text,1012;semester,text,1012;compulsory,boolean,1012;minimumPassMarks,text,1012;minimumCourseWork,text,1012;extraFilter,text,1012;extraInformation,text,1012;flags,text,1012";
		$lineToView .= Course::getAvailableViewableColumns();
		$lineToView .= Subject::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "courseandsubjecttransaction";
	}
	public final static function getClassContextName()	{
		return "managecourseandsubjecttransaction";
	}
	public final static function getUniqueTransactionId($database, $conn)	{
		$query="SELECT transactionId FROM courseAndSubjectTransaction";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('CourseAndSubjectTransaction, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('CourseAndSubjectTransaction, None or Duplicate Row/Multiple Rows Found');
		list($transactionId)=mysql_fetch_row($result);
		return $transactionId;
	}
	public final static function add($database, $conn, $courseId, $subjectId, $lectureHours, $seminarAndTutorialHours, $assignmentHours, $independentStudiesAndResearchHours, $practicalTrainingHours, $extraHours, $creditHours, $year, $semester, $compulsory, $minimumPassMarks, $minimumCourseWork, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO courseAndSubjectTransaction (courseId, subjectId, lectureHours, seminarAndTutorialHours, assignmentHours, independentStudiesAndResearchHours, practicalTrainingHours, extraHours, creditHours, year, semester, compulsory, minimumPassMarks, minimumCourseWork, extraFilter, extraInformation, flags) VALUES('$courseId', '$subjectId', '$lectureHours', '$seminarAndTutorialHours', '$assignmentHours', '$independentStudiesAndResearchHours', '$practicalTrainingHours', '$extraHours', '$creditHours', '$year', '$semester', '$compulsory', '$minimumPassMarks', '$minimumCourseWork', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('CourseAndSubjectTransaction, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('CourseAndSubjectTransaction, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('CourseAndSubjectTransaction, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->transactionId;
	}
	public function getTransactionId() {
		return $this->transactionId;
	}
	public function getCourse() {
		return $this->course;
	}
	public function setCourse($courseId) {
		if (! is_null($courseId))	{
			$this->addToUpdateList("courseId", $courseId);
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
	}
	public function getSubject() {
		return $this->subject;
	}
	public function setSubject($subjectId) {
		if (! is_null($subjectId))	{
			$this->addToUpdateList("subjectId", $subjectId);
			$this->subject = null;
			try	{
				$this->subject = new Subject($this->database, $subjectId, $this->conn);
			} catch (Exception $e)	{
				$this->subject = null;
			}
		}
	}
	public function getLectureHours() {
		return $this->lectureHours;
	}
	public function setLectureHours($lectureHours) {
		if (! is_null($lectureHours))	{
			$this->addToUpdateList("lectureHours", $lectureHours);
			$this->lectureHours = $lectureHours;
		}
	}
	public function getSeminarAndTutorialHours() {
		return $this->seminarAndTutorialHours;
	}
	public function setSeminarAndTutorialHours($seminarAndTutorialHours) {
		if (! is_null($seminarAndTutorialHours))	{
			$this->addToUpdateList("seminarAndTutorialHours", $seminarAndTutorialHours);
			$this->seminarAndTutorialHours = $seminarAndTutorialHours;
		}
	}
	public function getAssignmentHours() {
		return $this->assignmentHours;
	}
	public function setAssignmentHours($assignmentHours) {
		if (! is_null($assignmentHours))	{
			$this->addToUpdateList("assignmentHours", $assignmentHours);
			$this->assignmentHours = $assignmentHours;
		}
	}
	public function getIndependentStudiesAndResearchHours() {
		return $this->independentStudiesAndResearchHours;
	}
	public function setIndependentStudiesAndResearchHours($independentStudiesAndResearchHours) {
		if (! is_null($independentStudiesAndResearchHours))	{
			$this->addToUpdateList("independentStudiesAndResearchHours", $independentStudiesAndResearchHours);
			$this->independentStudiesAndResearchHours = $independentStudiesAndResearchHours;
		}
	}
	public function getPracticalTrainingHours() {
		return $this->practicalTrainingHours;
	}
	public function setPracticalTrainingHours($practicalTrainingHours) {
		if (! is_null($practicalTrainingHours))	{
			$this->addToUpdateList("practicalTrainingHours", $practicalTrainingHours);
			$this->practicalTrainingHours = $practicalTrainingHours;
		}
	}
	public function getExtraHours() {
		return $this->extraHours;
	}
	public function setExtraHours($extraHours) {
		if (! is_null($extraHours))	{
			$this->addToUpdateList("extraHours", $extraHours);
			$this->extraHours = $extraHours;
		}
	}
	public function getCreditHours() {
		return $this->creditHours;
	}
	public function setCreditHours($creditHours) {
		if (! is_null($creditHours))	{
			$this->addToUpdateList("creditHours", $creditHours);
			$this->creditHours = $creditHours;
		}
	}
	public function getYear() {
		return $this->year;
	}
	public function setYear($year) {
		if (! is_null($year))	{
			$this->addToUpdateList("year", $year);
			$this->year = $year;
		}
	}
	public function getSemester() {
		return $this->semester;
	}
	public function setSemester($semester) {
		if (! is_null($semester))	{
			$this->addToUpdateList("semester", $semester);
			$this->semester = $semester;
		}
	}
	public function isCompulsory() {
		return $this->compulsory;
	}
	public function setCompulsory($compulsory) {
		if (! is_null($compulsory))	{
			$this->addToUpdateList("compulsory", $compulsory);
			$this->compulsory = ($compulsory == "1");
		}
	}
	public function getMinimumPassMarks() {
		return $this->minimumPassMarks;
	}
	public function setMinimumPassMarks($minimumPassMarks) {
		if (! is_null($minimumPassMarks))	{
			$this->addToUpdateList("minimumPassMarks", $minimumPassMarks);
			$this->minimumPassMarks = $minimumPassMarks;
		}
	}
	public function getMinimumCourseWork() {
		return $this->minimumCourseWork;
	}
	public function setMinimumCourseWork($minimumCourseWork) {
		if (! is_null($minimumCourseWork))	{
			$this->addToUpdateList("minimumCourseWork", $minimumCourseWork);
			$this->minimumCourseWork = $minimumCourseWork;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT transactionId FROM courseAndSubjectTransaction";
		return $query;
	}
	public function __construct($database, $transactionId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "CourseAndSubjectTransaction")) Object::shootException("CourseAndSubjectTransaction System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $transactionId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->transactionId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "CourseAndSubjectTransaction")) Object::shootException("CourseAndSubjectTransaction System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE courseAndSubjectTransaction SET $setList WHERE transactionId = '$this->transactionId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('CourseAndSubjectTransaction, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "CourseAndSubjectTransaction")) Object::shootException("CourseAndSubjectTransaction System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM courseAndSubjectTransaction WHERE transactionId = '$this->transactionId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('CourseAndSubjectTransaction, Row Deletion Failed');
	}
	public function getClassName()	{
		return "CourseAndSubjectTransaction";
	}
	protected function getProperties()	{
		return "transactionId=$this->transactionId"."@lectureHours=$this->lectureHours"."@seminarAndTutorialHours=$this->seminarAndTutorialHours"."@assignmentHours=$this->assignmentHours"."@independentStudiesAndResearchHours=$this->independentStudiesAndResearchHours"."@practicalTrainingHours=$this->practicalTrainingHours"."@extraHours=$this->extraHours"."@creditHours=$this->creditHours"."@year=$this->year"."@semester=$this->semester"."@minimumPassMarks=$this->minimumPassMarks"."@minimumCourseWork=$this->minimumCourseWork"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags"."@compulsory=$this->compulsory";
	}
	protected function getAdvancedProperties()	{
		return "1012.transactionId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->transactionId))."@1012.lectureHours=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->lectureHours))."@1012.seminarAndTutorialHours=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->seminarAndTutorialHours))."@1012.assignmentHours=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->assignmentHours))."@1012.independentStudiesAndResearchHours=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->independentStudiesAndResearchHours))."@1012.practicalTrainingHours=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->practicalTrainingHours))."@1012.extraHours=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraHours))."@1012.creditHours=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->creditHours))."@1012.year=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->year))."@1012.semester=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->semester))."@1012.minimumPassMarks=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->minimumPassMarks))."@1012.minimumCourseWork=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->minimumCourseWork))."@1012.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1012.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1012.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags))."@1012.compulsory=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->compulsory));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: CourseAndSubjectTransaction (NAMESPACETAG = 1012) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->course))	{
			$this->course->debug();
		}
		if (! is_null($this->subject))	{
			$this->subject->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->course))	{
			$matrix1=$this->course->searchMatrix($matrix1);
		}
		if (! is_null($this->subject))	{
			$matrix1=$this->subject->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->course))	{
			$csvProcessor1=$this->course->processCSV($csvProcessor1);
		}
		if (! is_null($this->subject))	{
			$csvProcessor1=$this->subject->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $transactionId, $conn) {
		$query="SELECT transactionId, courseId, subjectId, lectureHours, seminarAndTutorialHours, assignmentHours, independentStudiesAndResearchHours, practicalTrainingHours, extraHours, creditHours, year, semester, compulsory, minimumPassMarks, minimumCourseWork, extraFilter, extraInformation, flags FROM courseAndSubjectTransaction WHERE transactionId = '$transactionId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('CourseAndSubjectTransaction, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('CourseAndSubjectTransaction, Duplicate or No Record');
		list($transactionId, $courseId, $subjectId, $lectureHours, $seminarAndTutorialHours, $assignmentHours, $independentStudiesAndResearchHours, $practicalTrainingHours, $extraHours, $creditHours, $year, $semester, $compulsory, $minimumPassMarks, $minimumCourseWork, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->transactionId = $transactionId;
		if (! is_null($courseId))	{
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
		if (! is_null($subjectId))	{
			$this->subject = null;
			try	{
				$this->subject = new Subject($this->database, $subjectId, $this->conn);
			} catch (Exception $e)	{
				$this->subject = null;
			}
		}
		if (! is_null($lectureHours))	{
			$this->lectureHours = $lectureHours;
		}
		if (! is_null($seminarAndTutorialHours))	{
			$this->seminarAndTutorialHours = $seminarAndTutorialHours;
		}
		if (! is_null($assignmentHours))	{
			$this->assignmentHours = $assignmentHours;
		}
		if (! is_null($independentStudiesAndResearchHours))	{
			$this->independentStudiesAndResearchHours = $independentStudiesAndResearchHours;
		}
		if (! is_null($practicalTrainingHours))	{
			$this->practicalTrainingHours = $practicalTrainingHours;
		}
		if (! is_null($extraHours))	{
			$this->extraHours = $extraHours;
		}
		if (! is_null($creditHours))	{
			$this->creditHours = $creditHours;
		}
		if (! is_null($year))	{
			$this->year = $year;
		}
		if (! is_null($semester))	{
			$this->semester = $semester;
		}
		if (! is_null($compulsory))	{
			$this->compulsory = ($compulsory == "1");
		}
		if (! is_null($minimumPassMarks))	{
			$this->minimumPassMarks = $minimumPassMarks;
		}
		if (! is_null($minimumCourseWork))	{
			$this->minimumCourseWork = $minimumCourseWork;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT courseId, subjectId, lectureHours, seminarAndTutorialHours, assignmentHours, independentStudiesAndResearchHours, practicalTrainingHours, extraHours, creditHours, year, semester, compulsory, minimumPassMarks, minimumCourseWork, extraFilter, extraInformation, flags FROM courseAndSubjectTransaction WHERE transactionId = '$this->transactionId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('CourseAndSubjectTransaction, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('CourseAndSubjectTransaction, [Clone] Duplicate or No Record');
		list($courseId, $subjectId, $lectureHours, $seminarAndTutorialHours, $assignmentHours, $independentStudiesAndResearchHours, $practicalTrainingHours, $extraHours, $creditHours, $year, $semester, $compulsory, $minimumPassMarks, $minimumCourseWork, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['courseId'] = $courseId;
		$masterDataArray['subjectId'] = $subjectId;
		$masterDataArray['lectureHours'] = $lectureHours;
		$masterDataArray['seminarAndTutorialHours'] = $seminarAndTutorialHours;
		$masterDataArray['assignmentHours'] = $assignmentHours;
		$masterDataArray['independentStudiesAndResearchHours'] = $independentStudiesAndResearchHours;
		$masterDataArray['practicalTrainingHours'] = $practicalTrainingHours;
		$masterDataArray['extraHours'] = $extraHours;
		$masterDataArray['creditHours'] = $creditHours;
		$masterDataArray['year'] = $year;
		$masterDataArray['semester'] = $semester;
		$masterDataArray['compulsory'] = $compulsory;
		$masterDataArray['minimumPassMarks'] = $minimumPassMarks;
		$masterDataArray['minimumCourseWork'] = $minimumCourseWork;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO courseAndSubjectTransaction ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("CourseAndSubjectTransaction [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("CourseAndSubjectTransaction [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("CourseAndSubjectTransaction [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class SecurityQuestion extends Object {
	private $questionId;
	private $questionName;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@SecurityQuestion/questionName,text,1012;extraFilter,text,1012;extraInformation,text,1012;flags,text,1012";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "securityquestion";
	}
	public final static function getClassContextName()	{
		return "managesecurityquestion";
	}
	public final static function getUniqueQuestionId($database, $conn)	{
		$query="SELECT questionId FROM securityQuestion";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SecurityQuestion, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('SecurityQuestion, None or Duplicate Row/Multiple Rows Found');
		list($questionId)=mysql_fetch_row($result);
		return $questionId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT questionId, questionName FROM securityQuestion";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SecurityQuestion, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $questionName, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO securityQuestion (questionName, extraFilter, extraInformation, flags) VALUES('$questionName', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SecurityQuestion, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('SecurityQuestion, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('SecurityQuestion, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->questionId;
	}
	public function getQuestionId() {
		return $this->questionId;
	}
	public function getQuestionName() {
		return $this->questionName;
	}
	public function setQuestionName($questionName) {
		if (! is_null($questionName))	{
			$this->addToUpdateList("questionName", $questionName);
			$this->questionName = $questionName;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT questionId FROM securityQuestion";
		return $query;
	}
	public function __construct($database, $questionId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "SecurityQuestion")) Object::shootException("SecurityQuestion System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $questionId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->questionId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "SecurityQuestion")) Object::shootException("SecurityQuestion System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE securityQuestion SET $setList WHERE questionId = '$this->questionId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('SecurityQuestion, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "SecurityQuestion")) Object::shootException("SecurityQuestion System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM securityQuestion WHERE questionId = '$this->questionId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('SecurityQuestion, Row Deletion Failed');
	}
	public function getClassName()	{
		return "SecurityQuestion";
	}
	protected function getProperties()	{
		return "questionId=$this->questionId"."@questionName=$this->questionName"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1012.questionId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->questionId))."@1012.questionName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->questionName))."@1012.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1012.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1012.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: SecurityQuestion (NAMESPACETAG = 1012) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $questionId, $conn) {
		$query="SELECT questionId, questionName, extraFilter, extraInformation, flags FROM securityQuestion WHERE questionId = '$questionId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('SecurityQuestion, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('SecurityQuestion, Duplicate or No Record');
		list($questionId, $questionName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->questionId = $questionId;
		if (! is_null($questionName))	{
			$this->questionName = $questionName;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT questionName, extraFilter, extraInformation, flags FROM securityQuestion WHERE questionId = '$this->questionId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('SecurityQuestion, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('SecurityQuestion, [Clone] Duplicate or No Record');
		list($questionName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['questionName'] = $questionName;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO securityQuestion ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("SecurityQuestion [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("SecurityQuestion [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("SecurityQuestion [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class UserType extends Object {
	private $typeId;
	private $typeName;
	private $typeCode;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	static $__USER = 1;
	static $__COURSEINSTRUCTOR = 2;
	static $__STUDENT = 3;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getUserTypeIdFromCode($database, $conn, $code)	{
		$query = "SELECT typeId FROM userType WHERE typeCode='$code'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("User Type [static], Could not get Type reference for User");
		if (mysql_num_rows($result) != 1) Object::shootException("User Type [static], Duplicate or No reference for Type of the User");
		list ($id) = mysql_fetch_row($result);
		return $id;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@UserType/typeName,text,1013;typeCode,text,1013;extraFilter,text,1013;extraInformation,text,1013;flags,text,1013";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "usertype";
	}
	public final static function getClassContextName()	{
		return "manageusertype";
	}
	public final static function getUniqueTypeId($database, $conn)	{
		$query="SELECT typeId FROM userType";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('UserType, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('UserType, None or Duplicate Row/Multiple Rows Found');
		list($typeId)=mysql_fetch_row($result);
		return $typeId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT typeId, typeName FROM userType";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('UserType, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $typeName, $typeCode, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO userType (typeName, typeCode, extraFilter, extraInformation, flags) VALUES('$typeName', '$typeCode', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('UserType, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('UserType, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('UserType, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->typeId;
	}
	public function getTypeId() {
		return $this->typeId;
	}
	public function getTypeName() {
		return $this->typeName;
	}
	public function setTypeName($typeName) {
		if (! is_null($typeName))	{
			$this->addToUpdateList("typeName", $typeName);
			$this->typeName = $typeName;
		}
	}
	public function getTypeCode() {
		return $this->typeCode;
	}
	public function setTypeCode($typeCode) {
		if (! is_null($typeCode))	{
			$this->addToUpdateList("typeCode", $typeCode);
			$this->typeCode = $typeCode;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT typeId FROM userType";
		return $query;
	}
	public function __construct($database, $typeId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "UserType")) Object::shootException("UserType System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $typeId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->typeId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "UserType")) Object::shootException("UserType System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE userType SET $setList WHERE typeId = '$this->typeId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('UserType, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "UserType")) Object::shootException("UserType System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM userType WHERE typeId = '$this->typeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('UserType, Row Deletion Failed');
	}
	public function getClassName()	{
		return "UserType";
	}
	protected function getProperties()	{
		return "typeId=$this->typeId"."@typeName=$this->typeName"."@typeCode=$this->typeCode"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1013.typeId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->typeId))."@1013.typeName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->typeName))."@1013.typeCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->typeCode))."@1013.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1013.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1013.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: UserType (NAMESPACETAG = 1013) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $typeId, $conn) {
		$query="SELECT typeId, typeName, typeCode, extraFilter, extraInformation, flags FROM userType WHERE typeId = '$typeId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('UserType, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('UserType, Duplicate or No Record');
		list($typeId, $typeName, $typeCode, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->typeId = $typeId;
		if (! is_null($typeName))	{
			$this->typeName = $typeName;
		}
		if (! is_null($typeCode))	{
			$this->typeCode = $typeCode;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT typeName, typeCode, extraFilter, extraInformation, flags FROM userType WHERE typeId = '$this->typeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('UserType, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('UserType, [Clone] Duplicate or No Record');
		list($typeName, $typeCode, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['typeName'] = $typeName;
		$masterDataArray['typeCode'] = $typeCode;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO userType ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("UserType [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("UserType [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("UserType [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class UserStatus extends Object {
	private $statusId;
	private $statusName;
	private $statusCode;
	private $alive;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	static $__ALIVE = 1;
	static $__DEAD = 2;
	static $__DISQUALIFIED = 3;
	static $__LEAVE = 4;
	static $__MARTENITY = 5;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getUserStatusIdFromCode($database, $conn, $code)	{
		$query = "SELECT statusId FROM userStatus WHERE statusCode='$code'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("User Status [static], Could not get Status reference for User");
		if (mysql_num_rows($result) != 1) Object::shootException("User Status [static], Duplicate or No reference for Status of the User");
		list ($id) = mysql_fetch_row($result);
		return $id;
	}	
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@UserStatus/statusName,text,1014;statusCode,text,1014;alive,boolean,1014;extraFilter,text,1014;extraInformation,text,1014;flags,text,1014";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "userstatus";
	}
	public final static function getClassContextName()	{
		return "manageuserstatus";
	}
	public final static function getUniqueStatusId($database, $conn)	{
		$query="SELECT statusId FROM userStatus";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('UserStatus, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('UserStatus, None or Duplicate Row/Multiple Rows Found');
		list($statusId)=mysql_fetch_row($result);
		return $statusId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT statusId, statusName FROM userStatus";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('UserStatus, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $statusName, $statusCode, $alive, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO userStatus (statusName, statusCode, alive, extraFilter, extraInformation, flags) VALUES('$statusName', '$statusCode', '$alive', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('UserStatus, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('UserStatus, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('UserStatus, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->statusId;
	}
	public function getStatusId() {
		return $this->statusId;
	}
	public function getStatusName() {
		return $this->statusName;
	}
	public function setStatusName($statusName) {
		if (! is_null($statusName))	{
			$this->addToUpdateList("statusName", $statusName);
			$this->statusName = $statusName;
		}
	}
	public function getStatusCode() {
		return $this->statusCode;
	}
	public function setStatusCode($statusCode) {
		if (! is_null($statusCode))	{
			$this->addToUpdateList("statusCode", $statusCode);
			$this->statusCode = $statusCode;
		}
	}
	public function isAlive() {
		return $this->alive;
	}
	public function setAlive($alive) {
		if (! is_null($alive))	{
			$this->addToUpdateList("alive", $alive);
			$this->alive = ($alive == "1");
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT statusId FROM userStatus";
		return $query;
	}
	public function __construct($database, $statusId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "UserStatus")) Object::shootException("UserStatus System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $statusId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->statusId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "UserStatus")) Object::shootException("UserStatus System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE userStatus SET $setList WHERE statusId = '$this->statusId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('UserStatus, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "UserStatus")) Object::shootException("UserStatus System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM userStatus WHERE statusId = '$this->statusId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('UserStatus, Row Deletion Failed');
	}
	public function getClassName()	{
		return "UserStatus";
	}
	protected function getProperties()	{
		return "statusId=$this->statusId"."@statusName=$this->statusName"."@statusCode=$this->statusCode"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags"."@alive=$this->alive";
	}
	protected function getAdvancedProperties()	{
		return "1014.statusId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->statusId))."@1014.statusName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->statusName))."@1014.statusCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->statusCode))."@1014.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1014.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1014.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags))."@1014.alive=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->alive));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: UserStatus (NAMESPACETAG = 1014) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $statusId, $conn) {
		$query="SELECT statusId, statusName, statusCode, alive, extraFilter, extraInformation, flags FROM userStatus WHERE statusId = '$statusId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('UserStatus, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('UserStatus, Duplicate or No Record');
		list($statusId, $statusName, $statusCode, $alive, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->statusId = $statusId;
		if (! is_null($statusName))	{
			$this->statusName = $statusName;
		}
		if (! is_null($statusCode))	{
			$this->statusCode = $statusCode;
		}
		if (! is_null($alive))	{
			$this->alive = ($alive == "1");
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT statusName, statusCode, alive, extraFilter, extraInformation, flags FROM userStatus WHERE statusId = '$this->statusId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('UserStatus, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('UserStatus, [Clone] Duplicate or No Record');
		list($statusName, $statusCode, $alive, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['statusName'] = $statusName;
		$masterDataArray['statusCode'] = $statusCode;
		$masterDataArray['alive'] = $alive;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO userStatus ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("UserStatus [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("UserStatus [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("UserStatus [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Sex extends Object {
	private $sexId;
	private $sexName;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public function getPronoun($pron)	{
		$pronoun = array();
		$pronoun[0] = array();
		$pronoun[0]["his"] = "his";
		$pronoun[0]["him"] = "him";
		$pronoun[0]["he"] = "he";
		$pronoun[1] = array();
		$pronoun[1]["his"] = "her";
		$pronoun[1]["him"] = "her";
		$pronoun[1]["he"] = "she";
		$controlIndex = 0;
		if (strtolower($this->sexName) == "male")	$controlIndex = 0;
		else if (strtolower($this->sexName) == "female") $controlIndex = 1;
		$pron = strtolower($pron);
		return $pronoun[$controlIndex][$pron];
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Sex/sexName,text,1015;extraFilter,text,1015;extraInformation,text,1015;flags,text,1015";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "sex";
	}
	public final static function getClassContextName()	{
		return "managesex";
	}
	public final static function getUniqueSexId($database, $conn)	{
		$query="SELECT sexId FROM sex";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Sex, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Sex, None or Duplicate Row/Multiple Rows Found');
		list($sexId)=mysql_fetch_row($result);
		return $sexId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT sexId, sexName FROM sex";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Sex, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $sexName, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO sex (sexName, extraFilter, extraInformation, flags) VALUES('$sexName', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Sex, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Sex, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Sex, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->sexId;
	}
	public function getSexId() {
		return $this->sexId;
	}
	public function getSexName() {
		return $this->sexName;
	}
	public function setSexName($sexName) {
		if (! is_null($sexName))	{
			$this->addToUpdateList("sexName", $sexName);
			$this->sexName = $sexName;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT sexId FROM sex";
		return $query;
	}
	public function __construct($database, $sexId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Sex")) Object::shootException("Sex System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $sexId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->sexId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Sex")) Object::shootException("Sex System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE sex SET $setList WHERE sexId = '$this->sexId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Sex, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Sex")) Object::shootException("Sex System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM sex WHERE sexId = '$this->sexId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Sex, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Sex";
	}
	protected function getProperties()	{
		return "sexId=$this->sexId"."@sexName=$this->sexName"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1015.sexId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->sexId))."@1015.sexName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->sexName))."@1015.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1015.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1015.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Sex (NAMESPACETAG = 1015) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $sexId, $conn) {
		$query="SELECT sexId, sexName, extraFilter, extraInformation, flags FROM sex WHERE sexId = '$sexId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Sex, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Sex, Duplicate or No Record');
		list($sexId, $sexName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->sexId = $sexId;
		if (! is_null($sexName))	{
			$this->sexName = $sexName;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT sexName, extraFilter, extraInformation, flags FROM sex WHERE sexId = '$this->sexId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Sex, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Sex, [Clone] Duplicate or No Record');
		list($sexName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['sexName'] = $sexName;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO sex ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Sex [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Sex [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Sex [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Marital extends Object {
	private $maritalId;
	private $maritalName;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Marital/maritalName,text,1016;extraFilter,text,1016;extraInformation,text,1016;flags,text,1016";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "marital";
	}
	public final static function getClassContextName()	{
		return "managemarital";
	}
	public final static function getUniqueMaritalId($database, $conn)	{
		$query="SELECT maritalId FROM marital";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Marital, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Marital, None or Duplicate Row/Multiple Rows Found');
		list($maritalId)=mysql_fetch_row($result);
		return $maritalId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT maritalId, maritalName FROM marital";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Marital, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $maritalName, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO marital (maritalName, extraFilter, extraInformation, flags) VALUES('$maritalName', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Marital, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Marital, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Marital, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->maritalId;
	}
	public function getMaritalId() {
		return $this->maritalId;
	}
	public function getMaritalName() {
		return $this->maritalName;
	}
	public function setMaritalName($maritalName) {
		if (! is_null($maritalName))	{
			$this->addToUpdateList("maritalName", $maritalName);
			$this->maritalName = $maritalName;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT maritalId FROM marital";
		return $query;
	}
	public function __construct($database, $maritalId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Marital")) Object::shootException("Marital System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $maritalId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->maritalId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Marital")) Object::shootException("Marital System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE marital SET $setList WHERE maritalId = '$this->maritalId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Marital, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Marital")) Object::shootException("Marital System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM marital WHERE maritalId = '$this->maritalId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Marital, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Marital";
	}
	protected function getProperties()	{
		return "maritalId=$this->maritalId"."@maritalName=$this->maritalName"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1016.maritalId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->maritalId))."@1016.maritalName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->maritalName))."@1016.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1016.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1016.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Marital (NAMESPACETAG = 1016) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $maritalId, $conn) {
		$query="SELECT maritalId, maritalName, extraFilter, extraInformation, flags FROM marital WHERE maritalId = '$maritalId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Marital, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Marital, Duplicate or No Record');
		list($maritalId, $maritalName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->maritalId = $maritalId;
		if (! is_null($maritalName))	{
			$this->maritalName = $maritalName;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT maritalName, extraFilter, extraInformation, flags FROM marital WHERE maritalId = '$this->maritalId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Marital, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Marital, [Clone] Duplicate or No Record');
		list($maritalName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['maritalName'] = $maritalName;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO marital ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Marital [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Marital [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Marital [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Group extends Object {
	private $groupId;
	private $staticGroupId;
	private $groupName;
	private $parentGroup;
	private $year;
	private $semester;
	private $minimumPoints;
	private $course;
	private $context;
	private $rootGroup;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getGraduationGroupName($groupName)	{
		return "Graduation ".$groupName;
	}
	public final static function getLoginListFromListOfGroups($database, $conn, $groupList1)	{
		//groupList1 is a list of Group Objects 
		if (is_null($groupList1)) return null;
		$collection1 = new Collection();
		foreach ($groupList1 as $group1)	{
			$groupId = $group1->getGroupId();
			$query = "SELECT loginId FROM login WHERE groupId='$groupId'";
			$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not fetch login accounts for Group");
			while (list($loginId)=mysql_fetch_row($result))	{
				$collection1->addItem($loginId);
			}
		}
		return ($collection1->makeUnique());
	}
	public final static function getPhonesForMembers($database, $conn, $groupId, $list1, $profile1)	{
		/*Initially */
		if (is_null($list1)) $list1 = array();
		/*Select all emails for this group */
		$query = "SELECT phone FROM login WHERE groupId='$groupId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not load Members Phones");
		while (list($email)=mysql_fetch_row($result))	{
			$temp = System::getAStandardMobileFormat($email, $profile1);
			if (! is_null($temp)) $list1[sizeof($list1)] = trim($temp);
		}
		/*
		Check if there exists subgroup, terminate if no further subgroup 
		*/
		$query = "SELECT groupId FROM groups WHERE pId='$groupId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not load Members Phones");
		while (list($groupId) = mysql_fetch_row($result))	{
			$list1 = self::getPhonesForMembers($database, $conn, $groupId, $list1, $profile1);
		}
		return $list1;
	}
	public final static function getEmailsForMembers($database, $conn, $groupId, $list1)	{
		/*Initially */
		if (is_null($list1)) $list1 = array();
		/*Select all emails for this group */
		$query = "SELECT email FROM login WHERE groupId='$groupId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not load Members Emails");
		while (list($email)=mysql_fetch_row($result))	{
			if (! is_null($email)) $list1[sizeof($list1)] = trim($email);
		}
		/*
		Check if there exists subgroup, terminate if no further subgroup 
		*/
		$query = "SELECT groupId FROM groups WHERE pId='$groupId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not load Members Emails");
		while (list($groupId) = mysql_fetch_row($result))	{
			$list1 = self::getEmailsForMembers($database, $conn, $groupId, $list1);
		}
		return $list1;
	}
	public final static function getMyGroupHierarchy($database, $conn, $groupId, $groupArray1)	{
		if (is_null($groupId)) return $groupArray1;
		if (is_null($groupArray1)) {
			$groupArray1 = array();
		} 
		$groupArray1[sizeof($groupArray1)] = $groupId;
		$query="SELECT pId FROM groups WHERE groupId='$groupId'";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException("Hierarchy(HRY): Could not execute query");
		if (mysql_num_rows($result) != 1) Object::shootException("Hierarchy(HRY): Duplicate/No record found");
		list($pId) = mysql_fetch_row($result);
		return self::getMyGroupHierarchy($database, $conn, $pId, $groupArray1);
	}
	public final static function isLoopDetected($database, $conn, $pId, $ppId)	{
		/* If anywhere in the ladder pId is a parent of ppId scream */
		if (is_null($ppId)) return false;
		if ($ppId==$pId) return true;
		$query="SELECT pId FROM groups WHERE groupId='$ppId'";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException("Loop(STP): Could not execute query");
		if (mysql_num_rows($result) != 1) Object::shootException("Loop(STP): Duplicate/No record found");
		list($ppId)=mysql_fetch_row($result);
		return self::isLoopDetected($database, $conn, $pId, $ppId);
	}
	public final static function getStudentGroupId($database, $conn)	{
		$query = "SELECT groupId FROM groups WHERE groupName='Student'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Group [static], Could not get Group reference for Student");
		if (mysql_num_rows($result) != 1) Object::shootException("Group [static], Duplicate or No reference for Student Group");
		list ($id) = mysql_fetch_row($result);
		return $id;
	}	
	public final static function addGroupIfNotExists($database, $conn, $groupName, $pId, $year, $semester, $courseId, $rootGroup)	{
		//Check if exists 
		$query = "SELECT groupId FROM groups WHERE groupName='$groupName'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not fetch an existing group record");
		$groupId = "";
		if (mysql_num_rows($result) == 1)	{
			//Found existing record 
			list($groupId) = mysql_fetch_row($result);
		} else {
			//Now insert a new record
			$context = Object::$defaultContextValue;
			$query = "INSERT INTO groups (groupName, pId, year, semester, courseId, context, rootGroup) VALUES ('$groupName', '$pId', '$year', '$semester', '$courseId', '$context', '$rootGroup')";
			$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not insert a new group record ".mysql_error());
			$query="SELECT LAST_INSERT_ID()";
			$result=mysql_db_query($database, $query, $conn) or Object::shootException('Group, Could not Extract Last Inserted ID');
			if (mysql_num_rows($result) != 1) Object::shootException('Group, Last Inserted ID is Not Unique');
			list($groupId)=mysql_fetch_row($result);
		}
		return $groupId;
	}
	public final static function getGroupIdFromGroupName($database, $conn, $groupName)	{
		$query="SELECT groupId FROM groups WHERE groupName='$groupName'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Group [static], Could not pull a reference Group from a name");
		if (mysql_num_rows($result) != 1) Object::shootException("Group [static], None or Multiple Groups Found with the same name, GrouName is $groupName");
		list($groupId)=mysql_fetch_row($result);
		return $groupId;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Group/staticGroupId,text,1018;groupName,text,1018;year,text,1018;semester,text,1018;minimumPoints,text,1018;context,text,1018;rootGroup,boolean,1018;extraFilter,text,1018;extraInformation,text,1018;flags,text,1018";
		$lineToView .= Course::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "group";
	}
	public final static function getClassContextName()	{
		return "managegroup";
	}
	public final static function getUniqueGroupId($database, $conn)	{
		$query="SELECT groupId FROM groups";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Group, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Group, None or Duplicate Row/Multiple Rows Found');
		list($groupId)=mysql_fetch_row($result);
		return $groupId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT groupId, groupName FROM groups";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Group, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $staticGroupId, $groupName, $pId, $year, $semester, $minimumPoints, $courseId, $context, $rootGroup, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO groups (staticGroupId, groupName, pId, year, semester, minimumPoints, courseId, context, rootGroup, extraFilter, extraInformation, flags) VALUES('$staticGroupId', '$groupName', '$pId', '$year', '$semester', '$minimumPoints', '$courseId', '$context', '$rootGroup', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Group, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Group, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Group, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->groupId;
	}
	public function getGroupId() {
		return $this->groupId;
	}
	public function getStaticGroupId() {
		return $this->staticGroupId;
	}
	public function setStaticGroupId($staticGroupId) {
		if (! is_null($staticGroupId))	{
			$this->addToUpdateList("staticGroupId", $staticGroupId);
			$this->staticGroupId = $staticGroupId;
		}
	}
	public function getGroupName() {
		return $this->groupName;
	}
	public function setGroupName($groupName) {
		if (! is_null($groupName))	{
			$this->addToUpdateList("groupName", $groupName);
			$this->groupName = $groupName;
		}
	}
	public function getParentGroup() {
		return $this->parentGroup;
	}
	public function setParentGroup($pId) {
		if (! is_null($pId))	{
			$this->addToUpdateList("pId", $pId);
			$this->parentGroup = null;
			try	{
				$this->parentGroup = new Group($this->database, $pId, $this->conn);
			} catch (Exception $e)	{
				$this->parentGroup = null;
			}
		}
	}
	public function getYear() {
		return $this->year;
	}
	public function setYear($year) {
		if (! is_null($year))	{
			$this->addToUpdateList("year", $year);
			$this->year = $year;
		}
	}
	public function getSemester() {
		return $this->semester;
	}
	public function setSemester($semester) {
		if (! is_null($semester))	{
			$this->addToUpdateList("semester", $semester);
			$this->semester = $semester;
		}
	}
	public function getMinimumPoints() {
		return $this->minimumPoints;
	}
	public function setMinimumPoints($minimumPoints) {
		if (! is_null($minimumPoints))	{
			$this->addToUpdateList("minimumPoints", $minimumPoints);
			$this->minimumPoints = $minimumPoints;
		}
	}
	public function getCourse() {
		return $this->course;
	}
	public function setCourse($courseId) {
		if (! is_null($courseId))	{
			$this->addToUpdateList("courseId", $courseId);
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
	}
	public function getContext() {
		return $this->context;
	}
	public function setContext($context) {
		if (! is_null($context))	{
			$this->addToUpdateList("context", $context);
			$this->context = $context;
		}
	}
	public function isRootGroup() {
		return $this->rootGroup;
	}
	public function setRootGroup($rootGroup) {
		if (! is_null($rootGroup))	{
			$this->addToUpdateList("rootGroup", $rootGroup);
			$this->rootGroup = ($rootGroup == "1");
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT groupId FROM groups";
		return $query;
	}
	public function __construct($database, $groupId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Group")) Object::shootException("Group System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $groupId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->groupId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Group")) Object::shootException("Group System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE groups SET $setList WHERE groupId = '$this->groupId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Group, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Group")) Object::shootException("Group System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM groups WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Group, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Group";
	}
	protected function getProperties()	{
		return "groupId=$this->groupId"."@staticGroupId=$this->staticGroupId"."@groupName=$this->groupName"."@year=$this->year"."@semester=$this->semester"."@minimumPoints=$this->minimumPoints"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags"."@rootGroup=$this->rootGroup";
	}
	protected function getAdvancedProperties()	{
		return "1018.groupId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->groupId))."@1018.staticGroupId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->staticGroupId))."@1018.groupName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->groupName))."@1018.year=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->year))."@1018.semester=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->semester))."@1018.minimumPoints=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->minimumPoints))."@1018.context=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->context))."@1018.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1018.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1018.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags))."@1018.rootGroup=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->rootGroup));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Group (NAMESPACETAG = 1018) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->parentGroup))	{
			$this->parentGroup->debug();
		}
		if (! is_null($this->course))	{
			$this->course->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->parentGroup))	{
			$matrix1=$this->parentGroup->searchMatrix($matrix1);
		}
		if (! is_null($this->course))	{
			$matrix1=$this->course->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->parentGroup))	{
			$csvProcessor1=$this->parentGroup->processCSV($csvProcessor1);
		}
		if (! is_null($this->course))	{
			$csvProcessor1=$this->course->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $groupId, $conn) {
		$query="SELECT groupId, staticGroupId, groupName, pId, year, semester, minimumPoints, courseId, context, rootGroup, extraFilter, extraInformation, flags FROM groups WHERE groupId = '$groupId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Group, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Group, Duplicate or No Record');
		list($groupId, $staticGroupId, $groupName, $pId, $year, $semester, $minimumPoints, $courseId, $context, $rootGroup, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->groupId = $groupId;
		if (! is_null($staticGroupId))	{
			$this->staticGroupId = $staticGroupId;
		}
		if (! is_null($groupName))	{
			$this->groupName = $groupName;
		}
		if (! is_null($pId))	{
			$this->parentGroup = null;
			try	{
				$this->parentGroup = new Group($this->database, $pId, $this->conn);
			} catch (Exception $e)	{
				$this->parentGroup = null;
			}
		}
		if (! is_null($year))	{
			$this->year = $year;
		}
		if (! is_null($semester))	{
			$this->semester = $semester;
		}
		if (! is_null($minimumPoints))	{
			$this->minimumPoints = $minimumPoints;
		}
		if (! is_null($courseId))	{
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
		if (! is_null($context))	{
			$this->context = $context;
		}
		if (! is_null($rootGroup))	{
			$this->rootGroup = ($rootGroup == "1");
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT staticGroupId, groupName, pId, year, semester, minimumPoints, courseId, context, rootGroup, extraFilter, extraInformation, flags FROM groups WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Group, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Group, [Clone] Duplicate or No Record');
		list($staticGroupId, $groupName, $pId, $year, $semester, $minimumPoints, $courseId, $context, $rootGroup, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['staticGroupId'] = $staticGroupId;
		$masterDataArray['groupName'] = $groupName;
		$masterDataArray['pId'] = $pId;
		$masterDataArray['year'] = $year;
		$masterDataArray['semester'] = $semester;
		$masterDataArray['minimumPoints'] = $minimumPoints;
		$masterDataArray['courseId'] = $courseId;
		$masterDataArray['context'] = $context;
		$masterDataArray['rootGroup'] = $rootGroup;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO groups ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Group [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Group [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Group [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class JobTitle extends Object {
	private $jobId;
	private $jobName;
	private $context;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	static $__ROOT_JOB = 5;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getPhonesForMembers($database, $conn, $jobId, $profile1)	{
		$list1 = array();
		/*Select all emails for this group */
		$query = "SELECT phone FROM login WHERE jobId='$jobId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not load Members Phones");
		while (list($phone)=mysql_fetch_row($result))	{
			$temp = System::getAStandardMobileFormat($phone, $profile1);
			if (! is_null($temp)) $list1[sizeof($list1)] = trim($temp);
		}
		return $list1;
	}
	public final static function getEmailsForMembers($database, $conn, $jobId)	{
		/*Initially */
		$list1 = array();
		/*Select all emails for this group */
		$query = "SELECT email FROM login WHERE jobId='$jobId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not load Members Emails");
		while (list($email)=mysql_fetch_row($result))	{
			if (! is_null($email)) $list1[sizeof($list1)] = trim($email);
		}
		return $list1;
	}
	public final static function getStudentJobTitleId($database, $conn)	{
		$query = "SELECT jobId FROM jobTitle WHERE jobName='Student'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("JobTitle [static], Could not get Job reference for Student");
		if (mysql_num_rows($result) != 1) Object::shootException("JobTitle [static], Duplicate or No reference for Student Job Title");
		list ($id) = mysql_fetch_row($result);
		return $id;
	}	
	public function isRootJob()	{
		return $this->isFlagSetAt(JobTitle::$__ROOT_JOB);
	}
	public function setRootJob($val)	{
		if (intval($val) == 1)	{
			$this->setFlagAt(JobTitle::$__ROOT_JOB);
		} else {
			$this->resetFlagAt(JobTitle::$__ROOT_JOB);
		}
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@JobTitle/jobName,text,1018;context,text,1018;extraFilter,text,1018;extraInformation,text,1018;flags,text,1018";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "jobtitle";
	}
	public final static function getClassContextName()	{
		return "managejobtitle";
	}
	public final static function getUniqueJobId($database, $conn)	{
		$query="SELECT jobId FROM jobTitle";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('JobTitle, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('JobTitle, None or Duplicate Row/Multiple Rows Found');
		list($jobId)=mysql_fetch_row($result);
		return $jobId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT jobId, jobName FROM jobTitle";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('JobTitle, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $jobName, $context, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO jobTitle (jobName, context, extraFilter, extraInformation, flags) VALUES('$jobName', '$context', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('JobTitle, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('JobTitle, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('JobTitle, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->jobId;
	}
	public function getJobId() {
		return $this->jobId;
	}
	public function getJobName() {
		return $this->jobName;
	}
	public function setJobName($jobName) {
		if (! is_null($jobName))	{
			$this->addToUpdateList("jobName", $jobName);
			$this->jobName = $jobName;
		}
	}
	public function getContext() {
		return $this->context;
	}
	public function setContext($context) {
		if (! is_null($context))	{
			$this->addToUpdateList("context", $context);
			$this->context = $context;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT jobId FROM jobTitle";
		return $query;
	}
	public function __construct($database, $jobId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "JobTitle")) Object::shootException("JobTitle System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $jobId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->jobId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "JobTitle")) Object::shootException("JobTitle System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE jobTitle SET $setList WHERE jobId = '$this->jobId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('JobTitle, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "JobTitle")) Object::shootException("JobTitle System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM jobTitle WHERE jobId = '$this->jobId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('JobTitle, Row Deletion Failed');
	}
	public function getClassName()	{
		return "JobTitle";
	}
	protected function getProperties()	{
		return "jobId=$this->jobId"."@jobName=$this->jobName"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1018.jobId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->jobId))."@1018.jobName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->jobName))."@1018.context=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->context))."@1018.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1018.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1018.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: JobTitle (NAMESPACETAG = 1018) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $jobId, $conn) {
		$query="SELECT jobId, jobName, context, extraFilter, extraInformation, flags FROM jobTitle WHERE jobId = '$jobId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('JobTitle, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('JobTitle, Duplicate or No Record');
		list($jobId, $jobName, $context, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->jobId = $jobId;
		if (! is_null($jobName))	{
			$this->jobName = $jobName;
		}
		if (! is_null($context))	{
			$this->context = $context;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT jobName, context, extraFilter, extraInformation, flags FROM jobTitle WHERE jobId = '$this->jobId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('JobTitle, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('JobTitle, [Clone] Duplicate or No Record');
		list($jobName, $context, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['jobName'] = $jobName;
		$masterDataArray['context'] = $context;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO jobTitle ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("JobTitle [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("JobTitle [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("JobTitle [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Religion extends Object {
	private $religionId;
	private $religionName;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Religion/religionName,text,1019;extraFilter,text,1019;extraInformation,text,1019;flags,text,1019";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "religion";
	}
	public final static function getClassContextName()	{
		return "managereligion";
	}
	public final static function getUniqueReligionId($database, $conn)	{
		$query="SELECT religionId FROM religion";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Religion, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Religion, None or Duplicate Row/Multiple Rows Found');
		list($religionId)=mysql_fetch_row($result);
		return $religionId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT religionId, religionName FROM religion";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Religion, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $religionName, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO religion (religionName, extraFilter, extraInformation, flags) VALUES('$religionName', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Religion, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Religion, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Religion, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->religionId;
	}
	public function getReligionId() {
		return $this->religionId;
	}
	public function getReligionName() {
		return $this->religionName;
	}
	public function setReligionName($religionName) {
		if (! is_null($religionName))	{
			$this->addToUpdateList("religionName", $religionName);
			$this->religionName = $religionName;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT religionId FROM religion";
		return $query;
	}
	public function __construct($database, $religionId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Religion")) Object::shootException("Religion System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $religionId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->religionId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Religion")) Object::shootException("Religion System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE religion SET $setList WHERE religionId = '$this->religionId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Religion, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Religion")) Object::shootException("Religion System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM religion WHERE religionId = '$this->religionId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Religion, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Religion";
	}
	protected function getProperties()	{
		return "religionId=$this->religionId"."@religionName=$this->religionName"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1019.religionId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->religionId))."@1019.religionName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->religionName))."@1019.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1019.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1019.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Religion (NAMESPACETAG = 1019) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $religionId, $conn) {
		$query="SELECT religionId, religionName, extraFilter, extraInformation, flags FROM religion WHERE religionId = '$religionId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Religion, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Religion, Duplicate or No Record');
		list($religionId, $religionName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->religionId = $religionId;
		if (! is_null($religionName))	{
			$this->religionName = $religionName;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT religionName, extraFilter, extraInformation, flags FROM religion WHERE religionId = '$this->religionId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Religion, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Religion, [Clone] Duplicate or No Record');
		list($religionName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['religionName'] = $religionName;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO religion ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Religion [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Religion [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Religion [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Denomination extends Object {
	private $denominationId;
	private $denominationName;
	private $religion;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Denomination/denominationName,text,1020;extraFilter,text,1020;extraInformation,text,1020;flags,text,1020";
		$lineToView .= Religion::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "denomination";
	}
	public final static function getClassContextName()	{
		return "managedenomination";
	}
	public final static function getUniqueDenominationId($database, $conn)	{
		$query="SELECT denominationId FROM denomination";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Denomination, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Denomination, None or Duplicate Row/Multiple Rows Found');
		list($denominationId)=mysql_fetch_row($result);
		return $denominationId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT denominationId, denominationName FROM denomination";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Denomination, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $denominationName, $religionId, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO denomination (denominationName, religionId, extraFilter, extraInformation, flags) VALUES('$denominationName', '$religionId', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Denomination, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Denomination, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Denomination, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->denominationId;
	}
	public function getDenominationId() {
		return $this->denominationId;
	}
	public function getDenominationName() {
		return $this->denominationName;
	}
	public function setDenominationName($denominationName) {
		if (! is_null($denominationName))	{
			$this->addToUpdateList("denominationName", $denominationName);
			$this->denominationName = $denominationName;
		}
	}
	public function getReligion() {
		return $this->religion;
	}
	public function setReligion($religionId) {
		if (! is_null($religionId))	{
			$this->addToUpdateList("religionId", $religionId);
			$this->religion = null;
			try	{
				$this->religion = new Religion($this->database, $religionId, $this->conn);
			} catch (Exception $e)	{
				$this->religion = null;
			}
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT denominationId FROM denomination";
		return $query;
	}
	public function __construct($database, $denominationId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Denomination")) Object::shootException("Denomination System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $denominationId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->denominationId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Denomination")) Object::shootException("Denomination System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE denomination SET $setList WHERE denominationId = '$this->denominationId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Denomination, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Denomination")) Object::shootException("Denomination System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM denomination WHERE denominationId = '$this->denominationId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Denomination, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Denomination";
	}
	protected function getProperties()	{
		return "denominationId=$this->denominationId"."@denominationName=$this->denominationName"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1020.denominationId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->denominationId))."@1020.denominationName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->denominationName))."@1020.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1020.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1020.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Denomination (NAMESPACETAG = 1020) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->religion))	{
			$this->religion->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->religion))	{
			$matrix1=$this->religion->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->religion))	{
			$csvProcessor1=$this->religion->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $denominationId, $conn) {
		$query="SELECT denominationId, denominationName, religionId, extraFilter, extraInformation, flags FROM denomination WHERE denominationId = '$denominationId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Denomination, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Denomination, Duplicate or No Record');
		list($denominationId, $denominationName, $religionId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->denominationId = $denominationId;
		if (! is_null($denominationName))	{
			$this->denominationName = $denominationName;
		}
		if (! is_null($religionId))	{
			$this->religion = null;
			try	{
				$this->religion = new Religion($this->database, $religionId, $this->conn);
			} catch (Exception $e)	{
				$this->religion = null;
			}
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT denominationName, religionId, extraFilter, extraInformation, flags FROM denomination WHERE denominationId = '$this->denominationId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Denomination, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Denomination, [Clone] Duplicate or No Record');
		list($denominationName, $religionId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['denominationName'] = $denominationName;
		$masterDataArray['religionId'] = $religionId;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO denomination ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Denomination [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Denomination [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Denomination [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Login extends Object {
	private $loginId;
	private $loginName;
	private $firstname;
	private $middlename;
	private $lastname;
	private $fullname;
	private $userStatus;
	private $DOB;
	private $sex;
	private $marital;
	private $jobTitle;
	private $group;
	private $context;
	private $userType;
	private $email;
	private $phone;
	private $photo;
	private $password;
	private $root;
	private $lastLoginTime;
	private $admissionTime;
	private $firstSecurityQuestion;
	private $firstSecurityAnswer;
	private $secondSecurityQuestion;
	private $secondSecurityAnswer;
	private $theme;
	private $firstDayOfAWeek;
	private $revisionNumber;
	private $revisionTime;
	private $admittedBy;
	private $randomNumber;
	private $virtualizationList;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/*
	Custom Search key IS_ADMITTED
	*/
	static $__IS_ADMITTED = 4;
	static $__IS_USING_DEFAULT_PASSWORD = 5;
	static $__IS_ROOT_GUARD = 6; //Take care of the 1st record
	public function loadMyProfileModule()	{
		$login1 = $this;
		$registeredUser1 = Login::getUserWithThisLogin($this->database, $this->conn, $login1);
		if (is_null($registeredUser1)) Object::shootException("Reference User were not found");
		$window1 = "<div class=\"ui-widget module\"><div class=\"ui-widget-content\"><div class=\"ui-widget-header\">Basic Profile Data</div><div class=\"ui-sys-data-capture\"><table class=\"pure-table pure-table-bordered\" style=\"font-size: 0.8em;\"><thead><tr><th></th><th></th></tr></thead><tbody>";
		$window1 .= "<tr><td>First Name</td><td><b>".$login1->getFirstname()."</b></td></tr><tr><td>Middle Name</td><td><b>".$login1->getMiddlename()."</b></td></tr><tr><td>Last Name</td><td><b>".$login1->getLastname()."</b></td></tr><tr><td>Full Name</td><td><b>".$login1->getFullname()."</b></td></tr>";
		if (! is_null($login1->getSex())) $window1 .= "<tr><td>Sex</td><td><b>".$login1->getSex()->getSexName()."</b></td></tr>";
		if (! is_null($login1->getMarital())) $window1 .= "<tr><td>Marital Status</td><td><b>".$login1->getMarital()->getMaritalName()."</b></td></tr>";
		$window1 .= "<tr><td>Email</td><td><b>".$login1->getEmail()."</b></td></tr>";
		$window1 .= "<tr><td>Phone</td><td><b>".$login1->getPhone()."</b></td></tr>";
		if (! is_null($login1->getJobTitle())) $window1 .= "<tr><td>Job Title</td><td><b>".$login1->getJobTitle()->getJobName()."</b></td></tr>";
		if (! is_null($login1->getGroup())) $window1 .= "<tr><td>Group</td><td><b>".$login1->getGroup()->getGroupName()."</b></td></tr>";
		if ($login1->isStudent() && ! is_null($registeredUser1->getCourse())) $window1 .= "<tr><td>Course</td><td><b>".$registeredUser1->getCourse()->getCourseName()."</b></td></tr>";
		if ($login1->isStudent() && ! is_null($registeredUser1->getRegistrationNumber())) $window1 .= "<tr><td>Registration Number</td><td><b>".$registeredUser1->getRegistrationNumber()."</b></td></tr>";
		if ($login1->isStudent())	{
			//We need to deal with examinationNumber 
			$examinationNumber = $registeredUser1->getExaminationNumber();
			if (is_null($examinationNumber)) {
				$promise1 = Student::generateExaminationNumber($this->database, $this->conn, $login1->getData('profileObject'), $registeredUser1);
				if (! $promise1->isPromising()) Object::shootException("There were errors in generating examination number");
				$examinationNumber = $promise1->getResults();
				$registeredUser1->setExaminationNumber($examinationNumber);
				$registeredUser1->commitUpdate();
			}
			$window1 .= "<tr><td>Examination Number</td><td><b>$examinationNumber</b></td></tr>";
		}	
		if ($login1->isStudent()) $window1 .= "<tr><td>Current Year</td><td><b>".$registeredUser1->getCurrentYear()."</b></td></tr>";
		if ($login1->isStudent()) $window1 .= "<tr><td>Current Semester</td><td><b>".$registeredUser1->getCurrentSemester()."</b></td></tr>";
		if ($login1->isStudent() && $registeredUser1->isAlreadyGraduated())	{
			$window1 .= "<tr><td colspan=\"2\"><b>IS ALREADY GRADUATED</b></td></tr>";
		} else if ($login1->isStudent() && $registeredUser1->isDiscontinued())	{
			$window1 .= "<tr style=\"background-color: red; color: white;\"><td colspan=\"2\"><b>IS DISCONTINUED</b></td></tr>";
		} else if ($login1->isStudent() && $registeredUser1->isFinalYear())	{
			$window1 .= "<tr><td colspan=\"2\"><b>IS IN A FINAL YEAR</b></td></tr>";
		}
		if ($login1->isStudent() && ! is_null($registeredUser1->getCitizenship())) $window1 .= "<tr><td>Citizenship</td><td><b>".$registeredUser1->getCitizenship()->getCountryName()."</b></td></tr>";
		if ($login1->isStudent() && ! is_null($registeredUser1->getDenomination()) && ! is_null($registeredUser1->getDenomination()->getReligion())) $window1 .= "<tr><td>Denomination</td><td><b>".$registeredUser1->getDenomination()->getDenominationName().", ".$registeredUser1->getDenomination()->getReligion()->getReligionName()."</b></td></tr>";
		$window1 .= "</tbody></table>";
		if ($login1->isCourseInstructor() && ! is_null($registeredUser1->getCourseAndSubjectTransactionList()))	{
			$window1 .= "<br/><table class=\"pure-table pure-table-bordered\" style=\"font-size: 0.8em;\"><thead><tr><th colspan=\"7\" style=\"text-align: center;\">My Subjects which I am Teaching</th></tr><tr><th></th><th>Course</th><th>Subject</th><th>Year</th><th>Semester</th><th>Compulsory</th><th>Core<br/>Module</th></tr></thead><tbody>";
			$mapCount = 0;
			foreach ($registeredUser1->getCourseAndSubjectTransactionList() as $transaction1)	{
				$mapCount++;
				$courseName = $transaction1->getCourse()->getCourseName()."(".$transaction1->getCourse()->getCourseCode().")";
				$subjectName = $transaction1->getSubject()->getSubjectName()."(".$transaction1->getSubject()->getSubjectCode().")";
				$year = $transaction1->getYear();
				$semester = $transaction1->getSemester();
				$compulsoryText = "Optional";
				if ($transaction1->isCompulsory()) $compulsoryText = "Compulsory";
				$coreText = "General";
				if ($transaction1->isCoreModule()) $coreText = "Core";
				$window1 .= "<tr><td>$mapCount</td><td>$courseName</td><td>$subjectName</td><td>$year</td><td>$semester</td><td>$compulsoryText</td><td>$coreText</td></tr>";
			}
			$window1 .= "</tbody></table>";
		}
		$window1 .= "</div></div></div>";
		return $window1;
	}
	public final static function getStartUpLoginId($database, $conn)	{
		$query="SELECT loginId, flags FROM login WHERE loginId='1'";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Login, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Login, None or Duplicate Row/Multiple Rows Found');
		list($loginId, $flags)=mysql_fetch_row($result);
		if ((intval($flags) & 64) != 64) Object::shootException('Login, The Login Account is Not Certified to be part of Installation procedure [Root Guard Failed]');
		return $loginId;
	}
	public final static function getLoginIdFromUsernameOrEmail($database, $conn, $username)	{
		$query = "SELECT loginId FROM login WHERE loginName='$username' OR email='$username'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Login [static], Could not fetch reference Login from username or email");
		if (mysql_num_rows($result) != 1) Object::shootException("Login [static], No or multiples for user $username");
		list($loginId)=mysql_fetch_row($result);
		return $loginId;
	}
	public final static function getPhoneForMember($database, $conn, $username, $profile1)	{
		$query = "SELECT phone FROM login WHERE loginName='$username' OR email='$username'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not extract user $username");
		if (mysql_num_rows($result) != 1) Object::shootException("No or multiples found for user $username");
		list($phone)=mysql_fetch_row($result);
		return System::getAStandardMobileFormat($phone, $profile1);
	}
	public final static function getEmailForMember($database, $conn, $username)	{
		$query = "SELECT email FROM login WHERE loginName='$username' OR email='$username'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not extract user $username");
		if (mysql_num_rows($result) != 1) Object::shootException("No or multiples found for user $username");
		list($email)=mysql_fetch_row($result);
		return $email;
	}
	public final static function getLoginIdFromUsername($database, $conn, $loginName)	{
		$query = "SELECT loginId FROM login WHERE loginName='$loginName'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not query");
		if (mysql_num_rows($result) != 1) Object::shootException("No username were found for $loginName");
		list($loginId)=mysql_fetch_row($result);
		return $loginId;
	}
	public final static function logInThisUser($database, $conn, $username, $password)	{
		/*
		username can be loginName or email 
		password digested  one sha1
		return login1 [Object] or null 
			password must match, username must match loginName OR email, the login1 should have a isAdmitted enabled 
		*/
		$query = "SELECT loginId, loginName, email FROM login WHERE (loginName='$username' XOR email='$username') AND password='$password'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Login[Login Helper], Could not execute query");
		if (mysql_num_rows($result) != 1) Object::shootException("Login[Login Helper], Record Not Found");
		list($loginId, $sloginName, $semail) = mysql_fetch_row($result);
		//further verification
		if (! ( (strtolower(trim($sloginName)) == strtolower(trim($username))) XOR (strtolower(trim($semail)) == strtolower(trim($username))))) Object::shootException("Logn[Login Helper], Record was not Found");
		$login1 = null;
		try {
			$login1 = new Login($database, $loginId, $conn);
		} catch (Exception $e)	{
			Object::shootException("Login[Login Helper], ".$e->getMessage());
		}
		//Check if isAdmitted 
		if (! $login1->isAdmitted()) Object::shootException("Login [Login Helper], You are still not Admitted"); //reset Non Admitted 
		return $login1;
	}
	public final static function getUserWithThisLogin($database, $conn, $login1)	{
		$user1 = null;
		if (is_null($login1)) return null;
		if (is_null($login1->getUserType())) return null;
		$loginId = $login1->getLoginId();
		if ($login1->isCourseInstructor())	{
			$query = "SELECT instructorId FROM courseInstructors WHERE loginId='$loginId'";
			$result = mysql_db_query($database, $query, $conn) or Object::shootException("Login[Course Instructor] could not execute query");
			if (mysql_num_rows($result) != 1) Object::shootException("Login[Course Instructor], none or duplicate records");
			list($id) = mysql_fetch_row($result);
			try {
				$user1 = new CourseInstructor($database, $id, $conn);
			} catch (Exception $e)	{
				Object::shootException("Login[Course Instructor], ".$e->getMessage());
			}
		} else if ($login1->isStudent())	{
			$query = "SELECT studentId FROM students WHERE loginId='$loginId'";
			$result = mysql_db_query($database, $query, $conn) or Object::shootException("Login[Student] could not execute query");
			if (mysql_num_rows($result) != 1) Object::shootException("Login[Student], none or duplicate records");
			list($id) = mysql_fetch_row($result);
			try {
				$user1 = new Student($database, $id, $conn);
			} catch (Exception $e)	{
				Object::shootException("Login[Student], ".$e->getMessage());
			}
		} else if ($login1->isNormalUser())	{
			$query = "SELECT userId FROM users WHERE loginId='$loginId'";
			$result = mysql_db_query($database, $query, $conn) or Object::shootException("Login[User] could not execute query");
			if (mysql_num_rows($result) != 1) Object::shootException("Login[User], none or duplicate records");
			list($id) = mysql_fetch_row($result);
			try {
				$user1 = new User($database, $id, $conn);
			} catch (Exception $e)	{
				Object::shootException("Login[User], ".$e->getMessage());
			}
		}
		return $user1;
	}
	public final static function getLoginIdForAccount($database, $conn, $firstname, $middlename, $lastname, $dob, $extraFilter)	{
		$loginId = null;
		$query = "SELECT loginId FROM login WHERE firstname='$firstname' AND middlename='$middlename' AND lastname='$lastname' AND dob='$dob' AND extraFilter='$extraFilter'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Problem with pulling record");
		if (mysql_num_rows($result) == 1)	{
			list($loginId) = mysql_fetch_row($result);
		}
		return $loginId;
	}
	public final static function getLoginIdsForAnyOfTheAccounts($database, $conn, $firstname, $middlename, $lastname, $dob, $extraFilter)	{
		$list = array();
		$criteriaArray1 = array();
		if (! is_null($firstname))	$criteriaArray1[sizeof($criteriaArray1)] = "firstname='$firstname'";
		if (! is_null($middlename))	$criteriaArray1[sizeof($criteriaArray1)] = "middlename='$middlename'";
		if (! is_null($lastname))	$criteriaArray1[sizeof($criteriaArray1)] = "lastname='$lastname'";
		if (! is_null($dob))	$criteriaArray1[sizeof($criteriaArray1)] = "dob='$dob'";
		if (! is_null($extraFilter))	$criteriaArray1[sizeof($criteriaArray1)] = "extraFilter='$extraFilter'";
		if (sizeof($criteriaArray1) > 0)	{
			$conditionList = "";
			for ($i = 0; $i < sizeof($criteriaArray1); $i++)	{
				$term = $criteriaArray1[$i];
				if ($i == 0)	{
					$conditionList = $term;
				} else {
					$conditionList .= " OR ".$term;
				}
			}
			$query = "SELECT loginId FROM login WHERE $conditionList";
			$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not pull record");
			while (list($id)=mysql_fetch_row($result))	{
				$list[sizeof($list)] = $id;
			}
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function initializeLoginRecordForCourseInstructor($database, $conn, $loginName)	{
		$statusId = UserStatus::getUserStatusIdFromCode($database, $conn, UserStatus::$__ALIVE);
		$context = Object::$defaultContextValue;
		$typeId = UserType::getUserTypeIdFromCode($database, $conn, UserType::$__COURSEINSTRUCTOR);
		$randomNumber = Object::getRandomMD5Key();
		$query="INSERT INTO login (loginName, statusId, context, typeId, photo, randomNumber) VALUES('$loginName', '$statusId', '$context', '$typeId', 'default.png', '$randomNumber')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Login, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Login, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Login, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public final static function initializeLoginRecordForUser($database, $conn, $loginName)	{
		$statusId = UserStatus::getUserStatusIdFromCode($database, $conn, UserStatus::$__ALIVE);
		$context = Object::$defaultContextValue;
		$typeId = UserType::getUserTypeIdFromCode($database, $conn, UserType::$__USER);
		$randomNumber = Object::getRandomMD5Key();
		$query="INSERT INTO login (loginName, statusId, context, typeId, photo, randomNumber) VALUES('$loginName', '$statusId', '$context', '$typeId', 'default.png', '$randomNumber')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Login, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Login, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Login, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public final static function initializeLoginRecordForStudent($database, $conn, $loginName)	{
		$statusId = UserStatus::getUserStatusIdFromCode($database, $conn, UserStatus::$__ALIVE);
		$jobId = JobTitle::getStudentJobTitleId($database, $conn);
		$groupId = Group::getStudentGroupId($database, $conn);
		$context = Object::$defaultContextValue;
		$typeId = UserType::getUserTypeIdFromCode($database, $conn, UserType::$__STUDENT);
		$randomNumber = Object::getRandomMD5Key();
		$query="INSERT INTO login (loginName, statusId, jobId, groupId, context, typeId, photo, randomNumber) VALUES('$loginName', '$statusId', '$jobId', '$groupId', '$context', '$typeId', 'default.png', '$randomNumber')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Login, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Login, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Login, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public final static function generateUsernameFor($database, $conn, $login1, $counter)	{
		$username = $login1->getFirstname().".".$login1->getLastname();
		$username = mysql_real_escape_string($username);
		if ($counter != 0) $username = $username.$counter;
		//Check Existence
		$query = "SELECT loginId FROM login WHERE loginName='$username'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Generate Username[$counter]: Failed to execute Query ".$username);
		if (mysql_num_rows($result) > 0)	{
			//We have found an existing username, we need to adjust now 
			$username = self::generateUsernameFor($database, $conn, $login1, $counter + 1);
		}
		return strtolower($username);
	}
	public function generateMyUsername()	{
		//firstname.lastname[option number]
		return Login::generateUsernameFor($this->database, $this->conn, $this, 0);
	}
	public function isAdmitted()	{
		return $this->isFlagSetAt(Login::$__IS_ADMITTED);
	}
	public function setAdmitted($val)	{
		if (intval($val) == 1)	{
			$this->setFlagAt(Login::$__IS_ADMITTED);
		} else {
			$this->resetFlagAt(Login::$__IS_ADMITTED);
		}
	}
	public function isUsingDefaultPassword()	{
		return $this->isFlagSetAt(Login::$__IS_USING_DEFAULT_PASSWORD);
	}
	public function setUsingDefaultPassword($val)	{
		if (intval($val) == 1)	{
			$this->setFlagAt(Login::$__IS_USING_DEFAULT_PASSWORD);
		} else {
			$this->resetFlagAt(Login::$__IS_USING_DEFAULT_PASSWORD);
		}
	}
	public function isRootGuard()	{
		return $this->isFlagSetAt(Login::$__IS_ROOT_GUARD);
	}
	public function setRootGuard($val)	{
		if (intval($val) == 1)	{
			$this->setFlagAt(Login::$__IS_ROOT_GUARD);
		} else {
			$this->resetFlagAt(Login::$__IS_ROOT_GUARD);
		}
	}
	public final static function shouldAllowUpdateControls($loginInLoginObject1, $targetedLoginObject1)	{
		/*
		They are just for calculation purpose, we do not need their conn reference 
		*/
		if (is_null($loginInLoginObject1) || is_null($targetedLoginObject1)) return false;
		$logicA = ($loginInLoginObject1->getLoginId() == $targetedLoginObject1->getLoginId());
		$logicB = $loginInLoginObject1->isRoot();
		$logicC = $targetedLoginObject1->isRoot();
		return ! $logicA && ($logicB || ! $logicC);
	}
	public function isStudent()	{
		return ($this->getUserType()->getTypeCode() == UserType::$__STUDENT);
	}
	public function isCourseInstructor()	{
		return ($this->getUserType()->getTypeCode() == UserType::$__COURSEINSTRUCTOR);
	}
	public function isNormalUser()	{
		return ($this->getUserType()->getTypeCode() == UserType::$__USER);
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Login/loginName,text,1022;firstname,text,1022;middlename,text,1022;lastname,text,1022;fullname,text,1022;context,text,1022;email,text,1022;phone,text,1022;photo,text,1022;password,text,1022;root,boolean,1022;firstSecurityAnswer,text,1022;secondSecurityAnswer,text,1022;revisionNumber,text,1022;admittedBy,text,1022;randomNumber,text,1022;extraFilter,text,1022;extraInformation,text,1022;flags,text,1022";
		$lineToView .= UserStatus::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= Sex::getAvailableViewableColumns();
		$lineToView .= Marital::getAvailableViewableColumns();
		$lineToView .= JobTitle::getAvailableViewableColumns();
		$lineToView .= Group::getAvailableViewableColumns();
		$lineToView .= UserType::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= SecurityQuestion::getAvailableViewableColumns();
		$lineToView .= SecurityQuestion::getAvailableViewableColumns();
		$lineToView .= Theme::getAvailableViewableColumns();
		$lineToView .= DaysOfAWeek::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "login";
	}
	public final static function getClassContextName()	{
		return "managelogin";
	}
	public final static function getUniqueLoginId($database, $conn)	{
		$query="SELECT loginId FROM login";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Login, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Login, None or Duplicate Row/Multiple Rows Found');
		list($loginId)=mysql_fetch_row($result);
		return $loginId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT loginId, loginName FROM login";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Login, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $loginName, $firstname, $middlename, $lastname, $fullname, $statusId, $dob, $sexId, $maritalId, $jobId, $groupId, $context, $typeId, $email, $phone, $photo, $password, $root, $lastLoginTime, $admissionTime, $qnSecurity1, $ansSecurity1, $qnSecurity2, $ansSecurity2, $themeId, $firstDayOfAWeekId, $revisionNumber, $revisionTime, $admittedBy, $randomNumber, $virtualizationList, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO login (loginName, firstname, middlename, lastname, fullname, statusId, dob, sexId, maritalId, jobId, groupId, context, typeId, email, phone, photo, password, root, lastLoginTime, admissionTime, qnSecurity1, ansSecurity1, qnSecurity2, ansSecurity2, themeId, firstDayOfAWeekId, revisionNumber, revisionTime, admittedBy, randomNumber, virtualizationList, extraFilter, extraInformation, flags) VALUES('$loginName', '$firstname', '$middlename', '$lastname', '$fullname', '$statusId', '$dob', '$sexId', '$maritalId', '$jobId', '$groupId', '$context', '$typeId', '$email', '$phone', '$photo', '$password', '$root', '$lastLoginTime', '$admissionTime', '$qnSecurity1', '$ansSecurity1', '$qnSecurity2', '$ansSecurity2', '$themeId', '$firstDayOfAWeekId', '$revisionNumber', '$revisionTime', '$admittedBy', '$randomNumber', '$virtualizationList', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Login, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Login, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Login, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->loginId;
	}
	public function getLoginId() {
		return $this->loginId;
	}
	public function getLoginName() {
		return $this->loginName;
	}
	public function setLoginName($loginName) {
		if (! is_null($loginName))	{
			$this->addToUpdateList("loginName", $loginName);
			$this->loginName = $loginName;
		}
	}
	public function getFirstname() {
		return $this->firstname;
	}
	public function setFirstname($firstname) {
		if (! is_null($firstname))	{
			$this->addToUpdateList("firstname", $firstname);
			$this->firstname = $firstname;
		}
	}
	public function getMiddlename() {
		return $this->middlename;
	}
	public function setMiddlename($middlename) {
		if (! is_null($middlename))	{
			$this->addToUpdateList("middlename", $middlename);
			$this->middlename = $middlename;
		}
	}
	public function getLastname() {
		return $this->lastname;
	}
	public function setLastname($lastname) {
		if (! is_null($lastname))	{
			$this->addToUpdateList("lastname", $lastname);
			$this->lastname = $lastname;
		}
	}
	public function getFullname() {
		return $this->fullname;
	}
	public function setFullname($fullname) {
		if (! is_null($fullname))	{
			$this->addToUpdateList("fullname", $fullname);
			$this->fullname = $fullname;
		}
	}
	public function getUserStatus() {
		return $this->userStatus;
	}
	public function setUserStatus($statusId) {
		if (! is_null($statusId))	{
			$this->addToUpdateList("statusId", $statusId);
			$this->userStatus = null;
			try	{
				$this->userStatus = new UserStatus($this->database, $statusId, $this->conn);
			} catch (Exception $e)	{
				$this->userStatus = null;
			}
		}
	}
	public function getDOB() {
		return $this->DOB;
	}
	public function setDOB($dob) {
		if (! is_null($dob))	{
			$this->addToUpdateList("dob", $dob);
			$this->DOB = null;
			try	{
				$this->DOB = new DateAndTime($this->database, $dob, $this->conn);
			} catch (Exception $e)	{
				$this->DOB = null;
			}
		}
	}
	public function getSex() {
		return $this->sex;
	}
	public function setSex($sexId) {
		if (! is_null($sexId))	{
			$this->addToUpdateList("sexId", $sexId);
			$this->sex = null;
			try	{
				$this->sex = new Sex($this->database, $sexId, $this->conn);
			} catch (Exception $e)	{
				$this->sex = null;
			}
		}
	}
	public function getMarital() {
		return $this->marital;
	}
	public function setMarital($maritalId) {
		if (! is_null($maritalId))	{
			$this->addToUpdateList("maritalId", $maritalId);
			$this->marital = null;
			try	{
				$this->marital = new Marital($this->database, $maritalId, $this->conn);
			} catch (Exception $e)	{
				$this->marital = null;
			}
		}
	}
	public function getJobTitle() {
		return $this->jobTitle;
	}
	public function setJobTitle($jobId) {
		if (! is_null($jobId))	{
			$this->addToUpdateList("jobId", $jobId);
			$this->jobTitle = null;
			try	{
				$this->jobTitle = new JobTitle($this->database, $jobId, $this->conn);
			} catch (Exception $e)	{
				$this->jobTitle = null;
			}
		}
	}
	public function getGroup() {
		return $this->group;
	}
	public function setGroup($groupId) {
		if (! is_null($groupId))	{
			$this->addToUpdateList("groupId", $groupId);
			$this->group = null;
			try	{
				$this->group = new Group($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->group = null;
			}
		}
	}
	public function getContext() {
		return $this->context;
	}
	public function setContext($context) {
		if (! is_null($context))	{
			$this->addToUpdateList("context", $context);
			$this->context = $context;
		}
	}
	public function getUserType() {
		return $this->userType;
	}
	public function setUserType($typeId) {
		if (! is_null($typeId))	{
			$this->addToUpdateList("typeId", $typeId);
			$this->userType = null;
			try	{
				$this->userType = new UserType($this->database, $typeId, $this->conn);
			} catch (Exception $e)	{
				$this->userType = null;
			}
		}
	}
	public function getEmail() {
		return $this->email;
	}
	public function setEmail($email) {
		if (! is_null($email))	{
			$this->addToUpdateList("email", $email);
			$this->email = $email;
		}
	}
	public function getPhone() {
		return $this->phone;
	}
	public function setPhone($phone) {
		if (! is_null($phone))	{
			$this->addToUpdateList("phone", $phone);
			$this->phone = $phone;
		}
	}
	public function getPhoto() {
		return $this->photo;
	}
	public function setPhoto($photo) {
		if (! is_null($photo))	{
			$this->addToUpdateList("photo", $photo);
			$this->photo = $photo;
		}
	}
	public function getPassword() {
		return $this->password;
	}
	public function setPassword($password) {
		if (! is_null($password))	{
			$this->addToUpdateList("password", $password);
			$this->password = $password;
		}
	}
	public function isRoot() {
		return $this->root;
	}
	public function setRoot($root) {
		if (! is_null($root))	{
			$this->addToUpdateList("root", $root);
			$this->root = ($root == "1");
		}
	}
	public function getLastLoginTime() {
		return $this->lastLoginTime;
	}
	public function setLastLoginTime($lastLoginTime) {
		if (! is_null($lastLoginTime))	{
			$this->addToUpdateList("lastLoginTime", $lastLoginTime);
			$this->lastLoginTime = null;
			try	{
				$this->lastLoginTime = new DateAndTime($this->database, $lastLoginTime, $this->conn);
			} catch (Exception $e)	{
				$this->lastLoginTime = null;
			}
		}
	}
	public function getAdmissionTime() {
		return $this->admissionTime;
	}
	public function setAdmissionTime($admissionTime) {
		if (! is_null($admissionTime))	{
			$this->addToUpdateList("admissionTime", $admissionTime);
			$this->admissionTime = null;
			try	{
				$this->admissionTime = new DateAndTime($this->database, $admissionTime, $this->conn);
			} catch (Exception $e)	{
				$this->admissionTime = null;
			}
		}
	}
	public function getFirstSecurityQuestion() {
		return $this->firstSecurityQuestion;
	}
	public function setFirstSecurityQuestion($qnSecurity1) {
		if (! is_null($qnSecurity1))	{
			$this->addToUpdateList("qnSecurity1", $qnSecurity1);
			$this->firstSecurityQuestion = null;
			try	{
				$this->firstSecurityQuestion = new SecurityQuestion($this->database, $qnSecurity1, $this->conn);
			} catch (Exception $e)	{
				$this->firstSecurityQuestion = null;
			}
		}
	}
	public function getFirstSecurityAnswer() {
		return $this->firstSecurityAnswer;
	}
	public function setFirstSecurityAnswer($ansSecurity1) {
		if (! is_null($ansSecurity1))	{
			$this->addToUpdateList("ansSecurity1", $ansSecurity1);
			$this->firstSecurityAnswer = $ansSecurity1;
		}
	}
	public function getSecondSecurityQuestion() {
		return $this->secondSecurityQuestion;
	}
	public function setSecondSecurityQuestion($qnSecurity2) {
		if (! is_null($qnSecurity2))	{
			$this->addToUpdateList("qnSecurity2", $qnSecurity2);
			$this->secondSecurityQuestion = null;
			try	{
				$this->secondSecurityQuestion = new SecurityQuestion($this->database, $qnSecurity2, $this->conn);
			} catch (Exception $e)	{
				$this->secondSecurityQuestion = null;
			}
		}
	}
	public function getSecondSecurityAnswer() {
		return $this->secondSecurityAnswer;
	}
	public function setSecondSecurityAnswer($ansSecurity2) {
		if (! is_null($ansSecurity2))	{
			$this->addToUpdateList("ansSecurity2", $ansSecurity2);
			$this->secondSecurityAnswer = $ansSecurity2;
		}
	}
	public function getTheme() {
		return $this->theme;
	}
	public function setTheme($themeId) {
		if (! is_null($themeId))	{
			$this->addToUpdateList("themeId", $themeId);
			$this->theme = null;
			try	{
				$this->theme = new Theme($this->database, $themeId, $this->conn);
			} catch (Exception $e)	{
				$this->theme = null;
			}
		}
	}
	public function getFirstDayOfAWeek() {
		return $this->firstDayOfAWeek;
	}
	public function setFirstDayOfAWeek($firstDayOfAWeekId) {
		if (! is_null($firstDayOfAWeekId))	{
			$this->addToUpdateList("firstDayOfAWeekId", $firstDayOfAWeekId);
			$this->firstDayOfAWeek = null;
			try	{
				$this->firstDayOfAWeek = new DaysOfAWeek($this->database, $firstDayOfAWeekId, $this->conn);
			} catch (Exception $e)	{
				$this->firstDayOfAWeek = null;
			}
		}
	}
	public function getRevisionNumber() {
		return $this->revisionNumber;
	}
	public function setRevisionNumber($revisionNumber) {
		if (! is_null($revisionNumber))	{
			$this->addToUpdateList("revisionNumber", $revisionNumber);
			$this->revisionNumber = $revisionNumber;
		}
	}
	public function getRevisionTime() {
		return $this->revisionTime;
	}
	public function setRevisionTime($revisionTime) {
		if (! is_null($revisionTime))	{
			$this->addToUpdateList("revisionTime", $revisionTime);
			$this->revisionTime = null;
			try	{
				$this->revisionTime = new DateAndTime($this->database, $revisionTime, $this->conn);
			} catch (Exception $e)	{
				$this->revisionTime = null;
			}
		}
	}
	public function getAdmittedBy() {
		return $this->admittedBy;
	}
	public function setAdmittedBy($admittedBy) {
		if (! is_null($admittedBy))	{
			$this->addToUpdateList("admittedBy", $admittedBy);
			$this->admittedBy = $admittedBy;
		}
	}
	public function getRandomNumber() {
		return $this->randomNumber;
	}
	public function setRandomNumber($randomNumber) {
		if (! is_null($randomNumber))	{
			$this->addToUpdateList("randomNumber", $randomNumber);
			$this->randomNumber = $randomNumber;
		}
	}
	public function getVirtualizationList() {
		return $this->virtualizationList;
	}
	public function setVirtualizationList($virtualizationList) {
		if (! is_null($virtualizationList))	{
			$this->addToUpdateList("virtualizationList", $virtualizationList);
			$this->virtualizationList = array();
			$idListArr = explode(",", $virtualizationList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Login($this->database, $id, $this->conn);
					$this->virtualizationList[sizeof($this->virtualizationList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT loginId FROM login";
		return $query;
	}
	public function __construct($database, $loginId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Login")) Object::shootException("Login System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $loginId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->loginId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Login")) Object::shootException("Login System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE login SET $setList WHERE loginId = '$this->loginId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Login, Row Updation Failed '.mysql_error());
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Login")) Object::shootException("Login System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM login WHERE loginId = '$this->loginId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Login, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Login";
	}
	protected function getProperties()	{
		$string1 = "loginId=$this->loginId"."@loginName=$this->loginName"."@firstname=$this->firstname"."@middlename=$this->middlename"."@lastname=$this->lastname"."@fullname=$this->fullname"."@context=$this->context"."@email=$this->email"."@phone=$this->phone"."@photo=$this->photo"."@password=$this->password"."@firstSecurityAnswer=$this->firstSecurityAnswer"."@secondSecurityAnswer=$this->secondSecurityAnswer"."@revisionNumber=$this->revisionNumber"."@admittedBy=$this->admittedBy"."@randomNumber=$this->randomNumber"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags"."@root=$this->root";
		if ($this->isAdmitted()) $string1 .= "@IS_ADMITTED";
		return $string1;
	}
	protected function getAdvancedProperties()	{
		return "1022.loginId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->loginId))."@1022.loginName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->loginName))."@1022.firstname=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->firstname))."@1022.middlename=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->middlename))."@1022.lastname=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->lastname))."@1022.fullname=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->fullname))."@1022.context=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->context))."@1022.email=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->email))."@1022.phone=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->phone))."@1022.photo=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->photo))."@1022.password=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->password))."@1022.firstSecurityAnswer=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->firstSecurityAnswer))."@1022.secondSecurityAnswer=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->secondSecurityAnswer))."@1022.revisionNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->revisionNumber))."@1022.admittedBy=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->admittedBy))."@1022.randomNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->randomNumber))."@1022.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1022.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1022.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags))."@1022.root=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->root));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Login (NAMESPACETAG = 1022) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->userStatus))	{
			$this->userStatus->debug();
		}
		if (! is_null($this->DOB))	{
			$this->DOB->debug();
		}
		if (! is_null($this->sex))	{
			$this->sex->debug();
		}
		if (! is_null($this->marital))	{
			$this->marital->debug();
		}
		if (! is_null($this->jobTitle))	{
			$this->jobTitle->debug();
		}
		if (! is_null($this->group))	{
			$this->group->debug();
		}
		if (! is_null($this->userType))	{
			$this->userType->debug();
		}
		if (! is_null($this->lastLoginTime))	{
			$this->lastLoginTime->debug();
		}
		if (! is_null($this->admissionTime))	{
			$this->admissionTime->debug();
		}
		if (! is_null($this->firstSecurityQuestion))	{
			$this->firstSecurityQuestion->debug();
		}
		if (! is_null($this->secondSecurityQuestion))	{
			$this->secondSecurityQuestion->debug();
		}
		if (! is_null($this->theme))	{
			$this->theme->debug();
		}
		if (! is_null($this->firstDayOfAWeek))	{
			$this->firstDayOfAWeek->debug();
		}
		if (! is_null($this->revisionTime))	{
			$this->revisionTime->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->userStatus))	{
			$matrix1=$this->userStatus->searchMatrix($matrix1);
		}
		if (! is_null($this->DOB))	{
			$matrix1=$this->DOB->searchMatrix($matrix1);
		}
		if (! is_null($this->sex))	{
			$matrix1=$this->sex->searchMatrix($matrix1);
		}
		if (! is_null($this->marital))	{
			$matrix1=$this->marital->searchMatrix($matrix1);
		}
		if (! is_null($this->jobTitle))	{
			$matrix1=$this->jobTitle->searchMatrix($matrix1);
		}
		if (! is_null($this->group))	{
			$matrix1=$this->group->searchMatrix($matrix1);
		}
		if (! is_null($this->userType))	{
			$matrix1=$this->userType->searchMatrix($matrix1);
		}
		if (! is_null($this->lastLoginTime))	{
			$matrix1=$this->lastLoginTime->searchMatrix($matrix1);
		}
		if (! is_null($this->admissionTime))	{
			$matrix1=$this->admissionTime->searchMatrix($matrix1);
		}
		if (! is_null($this->firstSecurityQuestion))	{
			$matrix1=$this->firstSecurityQuestion->searchMatrix($matrix1);
		}
		if (! is_null($this->secondSecurityQuestion))	{
			$matrix1=$this->secondSecurityQuestion->searchMatrix($matrix1);
		}
		if (! is_null($this->theme))	{
			$matrix1=$this->theme->searchMatrix($matrix1);
		}
		if (! is_null($this->firstDayOfAWeek))	{
			$matrix1=$this->firstDayOfAWeek->searchMatrix($matrix1);
		}
		if (! is_null($this->revisionTime))	{
			$matrix1=$this->revisionTime->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->userStatus))	{
			$csvProcessor1=$this->userStatus->processCSV($csvProcessor1);
		}
		if (! is_null($this->DOB))	{
			$csvProcessor1=$this->DOB->processCSV($csvProcessor1);
		}
		if (! is_null($this->sex))	{
			$csvProcessor1=$this->sex->processCSV($csvProcessor1);
		}
		if (! is_null($this->marital))	{
			$csvProcessor1=$this->marital->processCSV($csvProcessor1);
		}
		if (! is_null($this->jobTitle))	{
			$csvProcessor1=$this->jobTitle->processCSV($csvProcessor1);
		}
		if (! is_null($this->group))	{
			$csvProcessor1=$this->group->processCSV($csvProcessor1);
		}
		if (! is_null($this->userType))	{
			$csvProcessor1=$this->userType->processCSV($csvProcessor1);
		}
		if (! is_null($this->lastLoginTime))	{
			$csvProcessor1=$this->lastLoginTime->processCSV($csvProcessor1);
		}
		if (! is_null($this->admissionTime))	{
			$csvProcessor1=$this->admissionTime->processCSV($csvProcessor1);
		}
		if (! is_null($this->firstSecurityQuestion))	{
			$csvProcessor1=$this->firstSecurityQuestion->processCSV($csvProcessor1);
		}
		if (! is_null($this->secondSecurityQuestion))	{
			$csvProcessor1=$this->secondSecurityQuestion->processCSV($csvProcessor1);
		}
		if (! is_null($this->theme))	{
			$csvProcessor1=$this->theme->processCSV($csvProcessor1);
		}
		if (! is_null($this->firstDayOfAWeek))	{
			$csvProcessor1=$this->firstDayOfAWeek->processCSV($csvProcessor1);
		}
		if (! is_null($this->revisionTime))	{
			$csvProcessor1=$this->revisionTime->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $loginId, $conn) {
		$query="SELECT loginId, loginName, firstname, middlename, lastname, fullname, statusId, dob, sexId, maritalId, jobId, groupId, context, typeId, email, phone, photo, password, root, lastLoginTime, admissionTime, qnSecurity1, ansSecurity1, qnSecurity2, ansSecurity2, themeId, firstDayOfAWeekId, revisionNumber, revisionTime, admittedBy, randomNumber, virtualizationList, extraFilter, extraInformation, flags FROM login WHERE loginId = '$loginId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Login, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Login, Duplicate or No Record');
		list($loginId, $loginName, $firstname, $middlename, $lastname, $fullname, $statusId, $dob, $sexId, $maritalId, $jobId, $groupId, $context, $typeId, $email, $phone, $photo, $password, $root, $lastLoginTime, $admissionTime, $qnSecurity1, $ansSecurity1, $qnSecurity2, $ansSecurity2, $themeId, $firstDayOfAWeekId, $revisionNumber, $revisionTime, $admittedBy, $randomNumber, $virtualizationList, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->loginId = $loginId;
		if (! is_null($loginName))	{
			$this->loginName = $loginName;
		}
		if (! is_null($firstname))	{
			$this->firstname = $firstname;
		}
		if (! is_null($middlename))	{
			$this->middlename = $middlename;
		}
		if (! is_null($lastname))	{
			$this->lastname = $lastname;
		}
		if (! is_null($fullname))	{
			$this->fullname = $fullname;
		}
		if (! is_null($statusId))	{
			$this->userStatus = null;
			try	{
				$this->userStatus = new UserStatus($this->database, $statusId, $this->conn);
			} catch (Exception $e)	{
				$this->userStatus = null;
			}
		}
		if (! is_null($dob))	{
			$this->DOB = null;
			try	{
				$this->DOB = new DateAndTime($this->database, $dob, $this->conn);
			} catch (Exception $e)	{
				$this->DOB = null;
			}
		}
		if (! is_null($sexId))	{
			$this->sex = null;
			try	{
				$this->sex = new Sex($this->database, $sexId, $this->conn);
			} catch (Exception $e)	{
				$this->sex = null;
			}
		}
		if (! is_null($maritalId))	{
			$this->marital = null;
			try	{
				$this->marital = new Marital($this->database, $maritalId, $this->conn);
			} catch (Exception $e)	{
				$this->marital = null;
			}
		}
		if (! is_null($jobId))	{
			$this->jobTitle = null;
			try	{
				$this->jobTitle = new JobTitle($this->database, $jobId, $this->conn);
			} catch (Exception $e)	{
				$this->jobTitle = null;
			}
		}
		if (! is_null($groupId))	{
			$this->group = null;
			try	{
				$this->group = new Group($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->group = null;
			}
		}
		if (! is_null($context))	{
			$this->context = $context;
		}
		if (! is_null($typeId))	{
			$this->userType = null;
			try	{
				$this->userType = new UserType($this->database, $typeId, $this->conn);
			} catch (Exception $e)	{
				$this->userType = null;
			}
		}
		if (! is_null($email))	{
			$this->email = $email;
		}
		if (! is_null($phone))	{
			$this->phone = $phone;
		}
		if (! is_null($photo))	{
			$this->photo = $photo;
		}
		if (! is_null($password))	{
			$this->password = $password;
		}
		if (! is_null($root))	{
			$this->root = ($root == "1");
		}
		if (! is_null($lastLoginTime))	{
			$this->lastLoginTime = null;
			try	{
				$this->lastLoginTime = new DateAndTime($this->database, $lastLoginTime, $this->conn);
			} catch (Exception $e)	{
				$this->lastLoginTime = null;
			}
		}
		if (! is_null($admissionTime))	{
			$this->admissionTime = null;
			try	{
				$this->admissionTime = new DateAndTime($this->database, $admissionTime, $this->conn);
			} catch (Exception $e)	{
				$this->admissionTime = null;
			}
		}
		if (! is_null($qnSecurity1))	{
			$this->firstSecurityQuestion = null;
			try	{
				$this->firstSecurityQuestion = new SecurityQuestion($this->database, $qnSecurity1, $this->conn);
			} catch (Exception $e)	{
				$this->firstSecurityQuestion = null;
			}
		}
		if (! is_null($ansSecurity1))	{
			$this->firstSecurityAnswer = $ansSecurity1;
		}
		if (! is_null($qnSecurity2))	{
			$this->secondSecurityQuestion = null;
			try	{
				$this->secondSecurityQuestion = new SecurityQuestion($this->database, $qnSecurity2, $this->conn);
			} catch (Exception $e)	{
				$this->secondSecurityQuestion = null;
			}
		}
		if (! is_null($ansSecurity2))	{
			$this->secondSecurityAnswer = $ansSecurity2;
		}
		if (! is_null($themeId))	{
			$this->theme = null;
			try	{
				$this->theme = new Theme($this->database, $themeId, $this->conn);
			} catch (Exception $e)	{
				$this->theme = null;
			}
		}
		if (! is_null($firstDayOfAWeekId))	{
			$this->firstDayOfAWeek = null;
			try	{
				$this->firstDayOfAWeek = new DaysOfAWeek($this->database, $firstDayOfAWeekId, $this->conn);
			} catch (Exception $e)	{
				$this->firstDayOfAWeek = null;
			}
		}
		if (! is_null($revisionNumber))	{
			$this->revisionNumber = $revisionNumber;
		}
		if (! is_null($revisionTime))	{
			$this->revisionTime = null;
			try	{
				$this->revisionTime = new DateAndTime($this->database, $revisionTime, $this->conn);
			} catch (Exception $e)	{
				$this->revisionTime = null;
			}
		}
		if (! is_null($admittedBy))	{
			$this->admittedBy = $admittedBy;
		}
		if (! is_null($randomNumber))	{
			$this->randomNumber = $randomNumber;
		}
		if (! is_null($virtualizationList))	{
			$this->virtualizationList = array();
			$idListArr = explode(",", $virtualizationList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Login($this->database, $id, $this->conn);
					$this->virtualizationList[sizeof($this->virtualizationList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT loginName, firstname, middlename, lastname, fullname, statusId, dob, sexId, maritalId, jobId, groupId, context, typeId, email, phone, photo, password, root, lastLoginTime, admissionTime, qnSecurity1, ansSecurity1, qnSecurity2, ansSecurity2, themeId, firstDayOfAWeekId, revisionNumber, revisionTime, admittedBy, randomNumber, virtualizationList, extraFilter, extraInformation, flags FROM login WHERE loginId = '$this->loginId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Login, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Login, [Clone] Duplicate or No Record');
		list($loginName, $firstname, $middlename, $lastname, $fullname, $statusId, $dob, $sexId, $maritalId, $jobId, $groupId, $context, $typeId, $email, $phone, $photo, $password, $root, $lastLoginTime, $admissionTime, $qnSecurity1, $ansSecurity1, $qnSecurity2, $ansSecurity2, $themeId, $firstDayOfAWeekId, $revisionNumber, $revisionTime, $admittedBy, $randomNumber, $virtualizationList, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['loginName'] = $loginName;
		$masterDataArray['firstname'] = $firstname;
		$masterDataArray['middlename'] = $middlename;
		$masterDataArray['lastname'] = $lastname;
		$masterDataArray['fullname'] = $fullname;
		$masterDataArray['statusId'] = $statusId;
		$masterDataArray['dob'] = $dob;
		$masterDataArray['sexId'] = $sexId;
		$masterDataArray['maritalId'] = $maritalId;
		$masterDataArray['jobId'] = $jobId;
		$masterDataArray['groupId'] = $groupId;
		$masterDataArray['context'] = $context;
		$masterDataArray['typeId'] = $typeId;
		$masterDataArray['email'] = $email;
		$masterDataArray['phone'] = $phone;
		$masterDataArray['photo'] = $photo;
		$masterDataArray['password'] = $password;
		$masterDataArray['root'] = $root;
		$masterDataArray['lastLoginTime'] = $lastLoginTime;
		$masterDataArray['admissionTime'] = $admissionTime;
		$masterDataArray['qnSecurity1'] = $qnSecurity1;
		$masterDataArray['ansSecurity1'] = $ansSecurity1;
		$masterDataArray['qnSecurity2'] = $qnSecurity2;
		$masterDataArray['ansSecurity2'] = $ansSecurity2;
		$masterDataArray['themeId'] = $themeId;
		$masterDataArray['firstDayOfAWeekId'] = $firstDayOfAWeekId;
		$masterDataArray['revisionNumber'] = $revisionNumber;
		$masterDataArray['revisionTime'] = $revisionTime;
		$masterDataArray['admittedBy'] = $admittedBy;
		$masterDataArray['randomNumber'] = $randomNumber;
		$masterDataArray['virtualizationList'] = $virtualizationList;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO login ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Login [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Login [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Login [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class User extends Object {
	private $userId;
	private $login;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@User/extraFilter,text,1022;extraInformation,text,1022;flags,text,1022";
		$lineToView .= Login::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "user";
	}
	public final static function getClassContextName()	{
		return "manageuser";
	}
	public final static function getUniqueUserId($database, $conn)	{
		$query="SELECT userId FROM users";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('User, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('User, None or Duplicate Row/Multiple Rows Found');
		list($userId)=mysql_fetch_row($result);
		return $userId;
	}
	public final static function add($database, $conn, $loginId, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO users (loginId, extraFilter, extraInformation, flags) VALUES('$loginId', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('User, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('User, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('User, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->userId;
	}
	public function getUserId() {
		return $this->userId;
	}
	public function getLogin() {
		return $this->login;
	}
	public function setLogin($loginId) {
		if (! is_null($loginId))	{
			$this->addToUpdateList("loginId", $loginId);
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT userId FROM users";
		return $query;
	}
	public function __construct($database, $userId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "User")) Object::shootException("User System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $userId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->userId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "User")) Object::shootException("User System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE users SET $setList WHERE userId = '$this->userId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('User, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "User")) Object::shootException("User System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM users WHERE userId = '$this->userId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('User, Row Deletion Failed');
	}
	public function getClassName()	{
		return "User";
	}
	protected function getProperties()	{
		return "userId=$this->userId"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1022.userId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->userId))."@1022.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1022.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1022.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: User (NAMESPACETAG = 1022) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->login))	{
			$this->login->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->login))	{
			$matrix1=$this->login->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->login))	{
			$csvProcessor1=$this->login->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $userId, $conn) {
		$query="SELECT userId, loginId, extraFilter, extraInformation, flags FROM users WHERE userId = '$userId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('User, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('User, Duplicate or No Record');
		list($userId, $loginId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->userId = $userId;
		if (! is_null($loginId))	{
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT loginId, extraFilter, extraInformation, flags FROM users WHERE userId = '$this->userId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('User, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('User, [Clone] Duplicate or No Record');
		list($loginId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['loginId'] = $loginId;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO users ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("User [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("User [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("User [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class CourseInstructor extends Object {
	private $instructorId;
	private $login;
	private $courseAndSubjectTransactionIdList;
	private $department;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@CourseInstructor/extraFilter,text,1023;extraInformation,text,1023;flags,text,1023";
		$lineToView .= Login::getAvailableViewableColumns();
		$lineToView .= CourseAndSubjectTransaction::getAvailableViewableColumns();
		$lineToView .= Department::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "courseinstructor";
	}
	public final static function getClassContextName()	{
		return "managecourseinstructor";
	}
	public final static function getUniqueInstructorId($database, $conn)	{
		$query="SELECT instructorId FROM courseInstructors";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('CourseInstructor, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('CourseInstructor, None or Duplicate Row/Multiple Rows Found');
		list($instructorId)=mysql_fetch_row($result);
		return $instructorId;
	}
	public final static function add($database, $conn, $loginId, $courseAndSubjectTransactionIdList, $departmentId, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO courseInstructors (loginId, courseAndSubjectTransactionIdList, departmentId, extraFilter, extraInformation, flags) VALUES('$loginId', '$courseAndSubjectTransactionIdList', '$departmentId', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('CourseInstructor, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('CourseInstructor, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('CourseInstructor, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->instructorId;
	}
	public function getInstructorId() {
		return $this->instructorId;
	}
	public function getLogin() {
		return $this->login;
	}
	public function setLogin($loginId) {
		if (! is_null($loginId))	{
			$this->addToUpdateList("loginId", $loginId);
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
	}
	public function getCourseAndSubjectTransactionList() {
		return $this->courseAndSubjectTransactionIdList;
	}
	public function setCourseAndSubjectTransactionList($courseAndSubjectTransactionIdList) {
		if (! is_null($courseAndSubjectTransactionIdList))	{
			$this->addToUpdateList("courseAndSubjectTransactionIdList", $courseAndSubjectTransactionIdList);
			$this->courseAndSubjectTransactionIdList = array();
			$idListArr = explode(",", $courseAndSubjectTransactionIdList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new CourseAndSubjectTransaction($this->database, $id, $this->conn);
					$this->courseAndSubjectTransactionIdList[sizeof($this->courseAndSubjectTransactionIdList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getDepartment() {
		return $this->department;
	}
	public function setDepartment($departmentId) {
		if (! is_null($departmentId))	{
			$this->addToUpdateList("departmentId", $departmentId);
			$this->department = null;
			try	{
				$this->department = new Department($this->database, $departmentId, $this->conn);
			} catch (Exception $e)	{
				$this->department = null;
			}
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT instructorId FROM courseInstructors";
		return $query;
	}
	public function __construct($database, $instructorId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "CourseInstructor")) Object::shootException("CourseInstructor System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $instructorId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->instructorId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "CourseInstructor")) Object::shootException("CourseInstructor System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE courseInstructors SET $setList WHERE instructorId = '$this->instructorId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('CourseInstructor, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "CourseInstructor")) Object::shootException("CourseInstructor System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM courseInstructors WHERE instructorId = '$this->instructorId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('CourseInstructor, Row Deletion Failed');
	}
	public function getClassName()	{
		return "CourseInstructor";
	}
	protected function getProperties()	{
		return "instructorId=$this->instructorId"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1023.instructorId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->instructorId))."@1023.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1023.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1023.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: CourseInstructor (NAMESPACETAG = 1023) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->login))	{
			$this->login->debug();
		}
		if (! is_null($this->department))	{
			$this->department->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->login))	{
			$matrix1=$this->login->searchMatrix($matrix1);
		}
		if (! is_null($this->department))	{
			$matrix1=$this->department->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->login))	{
			$csvProcessor1=$this->login->processCSV($csvProcessor1);
		}
		if (! is_null($this->department))	{
			$csvProcessor1=$this->department->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $instructorId, $conn) {
		$query="SELECT instructorId, loginId, courseAndSubjectTransactionIdList, departmentId, extraFilter, extraInformation, flags FROM courseInstructors WHERE instructorId = '$instructorId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('CourseInstructor, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('CourseInstructor, Duplicate or No Record');
		list($instructorId, $loginId, $courseAndSubjectTransactionIdList, $departmentId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->instructorId = $instructorId;
		if (! is_null($loginId))	{
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
		if (! is_null($courseAndSubjectTransactionIdList))	{
			$this->courseAndSubjectTransactionIdList = array();
			$idListArr = explode(",", $courseAndSubjectTransactionIdList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new CourseAndSubjectTransaction($this->database, $id, $this->conn);
					$this->courseAndSubjectTransactionIdList[sizeof($this->courseAndSubjectTransactionIdList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($departmentId))	{
			$this->department = null;
			try	{
				$this->department = new Department($this->database, $departmentId, $this->conn);
			} catch (Exception $e)	{
				$this->department = null;
			}
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT loginId, courseAndSubjectTransactionIdList, departmentId, extraFilter, extraInformation, flags FROM courseInstructors WHERE instructorId = '$this->instructorId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('CourseInstructor, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('CourseInstructor, [Clone] Duplicate or No Record');
		list($loginId, $courseAndSubjectTransactionIdList, $departmentId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['loginId'] = $loginId;
		$masterDataArray['courseAndSubjectTransactionIdList'] = $courseAndSubjectTransactionIdList;
		$masterDataArray['departmentId'] = $departmentId;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO courseInstructors ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("CourseInstructor [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("CourseInstructor [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("CourseInstructor [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Student extends Object {
	private $studentId;
	private $login;
	private $occupation;
	private $registrationNumber;
	private $examinationNumber;
	private $citizenship;
	private $nativeplace;
	private $disability;
	private $denomination;
	private $postalAddress;
	private $physicalAddress;
	private $employed;
	private $course;
	private $referenceNumber;
	private $registrationTime;
	private $currentYear;
	private $currentSemester;
	private $applicationCounter;
	private $XMLFile;
	private $XMLFileChecksum;
	private $listOfBatches;
	private $admissionBatch;
	private $listOfAdmissionBatches;
	private $currentAccademicYear;
	private $currentBatch;
	private $formFourYear;
	private $formFourIndex;
	private $optionalTransactionList;
	private $transcriptHash;
	private $transcriptFile;
	private $graduationYear;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	private $absoluteFilePath;
	private $domDocument;
	static $__IS_COMPLITED = 0;
	static $__IS_CONTINUING_STUDENT = 4;
	static $__IS_FINAL_YEAR = 5;
	static $__IS_ALREADY_GRADUATED = 6;
	static $__HAS_POSPONDED_STUDIES = 7;
	static $__IS_DISCONTINUED = 8;
	static $__IS_REGISTERED = 9; /*This need to be set manually during xml download, should be set to flag in the object but not in the database */ 
	static $__CAN_GRADUATE = 1;
	static $__HAS_FAILED = 2;
	static $__CAN_ADVANCE_SEMESTER = 3;
	static $__CAN_ADVANCE_YEAR = 4;
	static $__HAS_DISQUALIFIED = 5;
	static $__NOTHING_TO_DO = 0;
	static $__IS_CLEARED = 1;
	static $__IS_FAILED = 2;
	static $__IS_DISQUALIFIED = 3;
	public function getListOfCourseAndSubjectTransactionsForYearAndSemester($year, $semester, $profile1)	{
		/*
		return list[transactionId] = creditHours
		*/
		$student1 = $this;
		//Fetch all transactions -- per defined in a transaction 
		$course1 = $student1->getCourse();
		if (is_null($course1)) Object::shootException("List of Units in a Semester, could not find student Course");
		//Find all Transaction belonging to the course
		$collection1 = new Collection();
		if ($semester == Profile::$__ALL_SEMESTERS)	{
			//Collect all
			for ($i = 1; $i <= $profile1->getNumberOfSemestersPerYear(); $i++)	{
				$collection1->addList(CourseAndSubjectTransaction::getTransactionListFromCourseYearAndSemester($this->database, $this->conn, $course1->getCourseId(), $year, $i));
			}
		} else {
			//For specific semester only
			$collection1->addList(CourseAndSubjectTransaction::getTransactionListFromCourseYearAndSemester($this->database, $this->conn, $course1->getCourseId(), $year, $semester));
		}
		//Get Back the Array 
		$collection1->makeUnique();
		$listOfTransactions = $collection1->getCollection();
		/*
		Look for Option Maps getOptionalTransactionList , implement on the future
		*/
		if (sizeof($listOfTransactions) == 0) $listOfTransactions = null;
		return $listOfTransactions;
	}
	public function getListOfUnitsForYearAndSemester($year, $semester, $profile1)	{
		/*
		return list[transactionId] = creditHours
		*/
		$student1 = $this;
		//Fetch all transactions -- per defined in a transaction 
		$listOfTransactions = $student1->getListOfCourseAndSubjectTransactionsForYearAndSemester($year, $semester, $profile1);
		if (is_null($listOfTransactions)) Object::shootException("List of Units in a Semester, could not find ");
		$list = array();
		foreach ($listOfTransactions as $transactionId)	{
			$list[$transactionId] = CourseAndSubjectTransaction::getCreditHoursFromTransaction($this->database, $this->conn, $transactionId);
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public function getTotalUnitsForYearAndSemester($year, $semester, $profile1)	{
		/*
		total Credit Hours, without caring semester 
 		*/
		$list = $this->getListOfUnitsForYearAndSemester($year, $semester, $profile1);
		$totalUnits = 0.0;
		if (! is_null($list))	{
			foreach ($list as $creditHours)	{
				$totalUnits += floatval($creditHours);
			}
			$totalUnits = round($totalUnits, 1);
		}
		return $totalUnits;
	}
	public function isInTheCorrectGroup()	{
		$course1 = $this->course;
		$login1 = $this->login;
		if (is_null($login1)) Object::shootException("Student is not having a Login Account");
		$group1 = $login1->getGroup();
		if (is_null($group1)) Object::shootException("Group for Student is not set");
		if (is_null($course1)) Object::shootException("Course for Student is not set");
		$groupCourse1 = $group1->getCourse();
		if (is_null($groupCourse1)) Object::shootException("Group is not attached to any Course");
		return (($course1->getCourseId() == $groupCourse1->getCourseId()) && (intval($this->currentYear) == intval($group1->getYear())) && (intval($this->currentSemester) == intval($group1->getSemester())));
	}
	public final static function getListOfStudentsBelongingToCourseYearAndSemester($database, $conn, $courseId, $year, $semester, $controlFlags)	{
		$query = "SELECT studentId FROM students WHERE courseId='$courseId' AND cyear='$year' AND csemester='$semester'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Student [static], Could not pull student list ");
		$list = array();
		while (list($studentId)=mysql_fetch_row($result))	{
			$list[sizeof($list)] = $studentId;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}	
	public final static function getCustomCSVHeaders()	{
		/*format of data @XMLEnvelopTag#tagEnvelopList#datasource[xml]/propertyname,propertytype,namespaceTag,propertyclass;propertyname,propertytype,namespaceTag,propertyclass*/
		//@Student/occupation,text,1025;registrationNumber,text,1025;nativeplace,text,1025
		$string = "@accademicHistory#institution#xml/institutionName,text,201;specialization,text,201;levelId,class,201,EducationLevel;indexNumber,text,201;award,text,201;grade,text,201;startYear,text,201;endYear,text,201";
		$string .= "@banks#bank#xml/accountName,text,202;bankAccount,text,202;bankName,text,202;branchName,text,202";
		return $string;
	}
	public function isInCurrentAccademicYear($profile1)	{
		if (is_null($this->getCurrentAccademicYear())) return false;
		if (is_null($profile1->getCurrentAccademicYear())) return false;
		return ($this->getCurrentAccademicYear()->getAccademicYearId() == $profile1->getCurrentAccademicYear()->getAccademicYearId());
	}	
	public final static function generateExaminationNumber($database, $conn, $profile1, $student1)	{
		$promise1 = new Promise();
		$promise1->setPromise(false);
		$examinationNumber = "TUMA/KCMUCo/";
		$course1 = $student1->getCourse();
		if (is_null($course1)) Object::shootException("Course were not set");
		$examinationNumber .= $course1->getCourseCode()."/";
		$currentAccademicYear1 = $profile1->getCurrentAccademicYear();
		if (is_null($currentAccademicYear1)) Object::shootException("The system is not set to a valid Current Academic Year");
		$examinationNumber .= $currentAccademicYear1->getAccademicYear()."/";
		//Now get Specific Number 
		$temp = System::numberWidthCorrection($course1->getNextExaminationNumber(), $course1->getExaminationNumberWidth());
		$examinationNumber .= $temp;
		$course1->setNextExaminationNumber($course1->getNextExaminationNumber() + 1);
		$course1->commitUpdate();
		$promise1->setResults($examinationNumber);
		$promise1->setPromise(true);
		return $promise1;
	}
	public final static function generateRegistrationNumber($database, $conn, $profile1, $student1)	{
		$promise1 = new promise();
		$promise1->setPromise(false);
		$registrationNumber = "TUMA/KCMUCo/";
		$course1 = $student1->getCourse();
		if (is_null($course1)) Object::shootException("Course were not set");
		$registrationNumber .= $course1->getCourseCode();
		$currentAccademicYear1 = $profile1->getCurrentAccademicYear();
		if (is_null($currentAccademicYear1)) Object::shootException("The System is not set to a valid Current Academic Year");
		$registrationNumber .= ".".$currentAccademicYear1->getAccademicYear()."/";
		$country1 = $student1->getCitizenship();
		if (is_null($country1)) Object::shootException("Student Citizenship were not found");
		$registrationNumber .= $country1->getAbbreviation()."/";
		//Now get Specific Number
		$temp = System::numberWidthCorrection($course1->getNextRegistrationNumber(), $course1->getRegistrationNumberWidth());
		$registrationNumber .= $temp;
		$course1->setNextRegistrationNumber($course1->getNextRegistrationNumber() + 1);
		$course1->commitUpdate();
		$promise1->setResults($registrationNumber);
		$promise1->setPromise(true);
		return $promise1;
	}
	public final static function addApprovalData($database, $conn, $schemaId, $requestedBy, $nextJobToApprove, $timeOfRegistration, $extraInformation)	{
		$query = "INSERT INTO approvalSequenceData(schemaId, requestedBy, timeOfRegistration, extraInformation) VALUES ('$schemaId', '$requestedBy', '$timeOfRegistration', '$extraInformation')";
		if (! is_null($nextJobToApprove))	{
			$query = "INSERT INTO approvalSequenceData(schemaId, requestedBy, nextJobToApprove, timeOfRegistration, extraInformation) VALUES ('$schemaId', '$requestedBy', '$nextJobToApprove', '$timeOfRegistration', '$extraInformation')";
		}
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Approval Sequence Data Writing Problem");
	}
	public function addApprovalSequenceDataEntryForAdmission($systemTime1)	{
		$promise1 = new Promise();
		$promise1->setPromise(true);
		$login1 = $this->login;
		if (is_null($login1)) Object::shootException("Could not find student login Account");
		$schemaId = ApprovalSequenceSchema::getApprovedSchemaFromCodeAndLogin($this->database, $this->conn, $login1->getLoginId(), ApprovalSequenceSchema::$__ADMIT_STUDENTS);
		if (is_null($schemaId)) Object::shootException("There is no Approving Schema Defined for Student Admission");
		$schema1 = new ApprovalSequenceSchema($this->database, $schemaId, $this->conn);
		$dataId = ApprovalSequenceData::getDataIdForRequesterInASchema($this->database, $this->conn, $login1->getLoginId(), $schema1->getSchemaId(), null);
		if (is_null($dataId))	{
			//Data Not Found 
			Student::addApprovalData($this->database, $this->conn, $schema1->getSchemaId(), $login1->getLoginId(), $schema1->getFirstApprovingJob(), $systemTime1->getDateAndTimeString(), "Admit me Please");
			//Now Data Should not be null 
			$dataId = ApprovalSequenceData::getDataIdForRequesterInASchema($this->database, $this->conn, $login1->getLoginId(), $schema1->getSchemaId(), null);
		}
		if (is_null($dataId)) Object::shootException("The System Could not Update student Approval Data");
		$data1 = new ApprovalSequenceData($this->database, $dataId, $this->conn);
		if (! $data1->isStillValid())	{
			//Data Already Expired remove and add new Data 
			$data1->commitDelete();
			//Add New Data Now 
			Student::addApprovalData($this->database, $this->conn, $schema1->getSchemaId(), $login1->getLoginId(), $schema1->getFirstApprovingJob(), $systemTime1->getDateAndTimeString(), "Admit me Please");
			//Again Data Should not be null
			$dataId = ApprovalSequenceData::getDataIdForRequesterInASchema($this->database, $this->conn, $login1->getLoginId(), $schema1->getSchemaId(), null);
			if (is_null($dataId)) Object::shootException("The System Could not Update student Approval Data");
		}
		return $promise1;
	}
	public final static function graduateStudent($database, $conn, $studentId, $profile1, $systemTime1, $resultsFolder, $transcriptFolder)	{
		$promise1 = new Promise();
		$promise1->setPromise(true);
		$student1 = new Student($database, $studentId, $conn);
		if (is_null($student1)) Object::shootException("Student reference Could not be created");
		$course1 = $student1->getCourse();
		if (is_null($course1)) Object::shootException("Reference Course for Student was not found");
		//1. Change Graduate Status to Graduated
		$student1->setGraduationYear($systemTime1->getYear());
		$student1->setAlreadyGraduated("1");
		$student1->commitUpdate(); //You need to save before calling the transcript generation
		//2. generate Transcript now 
		$transcriptFile1 = TranscriptFile::getTranscriptFileForStudent($database, $conn, $profile1, $student1->getStudentId(), $systemTime1, $resultsFolder, $transcriptFolder);
		if (is_null($transcriptFile1)) Object::shootException("Transcript File returned an empty response");
		//3. Save transcript now 
		$promise1 = $transcriptFile1->save();
		if (! $promise1->isPromising())	Object::shootException($promise1->getReason());
		//4. Reallocate this Student to graduation group,
		/*
			Graduation 
				Doctor of Medicine [Course Name]
					MD_2016
						---
						---
						---
						---
		*/
		$graduationGroupId = Group::getGroupIdFromGroupName($database, $conn, "Graduation");
		$courseNameGroupId = Group::addGroupIfNotExists($database, $conn, $course1->getCourseName(), $graduationGroupId, $student1->getCurrentYear(), 0, $course1->getCourseId(), "1"); 
		$graduationYearGroupName = $course1->getCourseCode()."_".$systemTime1->getYear(); //ie MD_2016 
		$graduationYearGroupId = Group::addGroupIfNotExists($database, $conn, $graduationYearGroupName, $courseNameGroupId, $student1->getCurrentYear(), $student1->getCurrentSemester(), $course1->getCourseId(), "1");
		$student1->setGroup($graduationYearGroupId);
		$student1->commitUpdate(); // 2nd commitupdate
		return $promise1;
	}
	public function getMyOveralGPADataStructure($ds1)	{
		//INPUT GPA Data Structure 
		/*
			ds1[cummulativeSemester]['gpa'], ['cleared'], ['awardId']
		OUTPUT 
			list['gpa'], ['cleared'], ['awardId'], ['disqualified']
		*/
		$course1 = $this->course;
		if (is_null($course1)) return null;
		$level1 = $course1->getEducationLevel();
		if (is_null($level1)) return null;
		$totalGPA = 0.0;
		$totalSemesters = 0;
		$list1 = array();
		$list1['gpa'] = 0.0;
		$list1['cleared'] = false;
		$list1['disqualified'] = false;
		$list1['awardId'] = null;
		$isCleared = true;
		$isDisqualified = false;
		foreach ($ds1 as $cummulativeSemester => $gpaData1)	{
			$totalGPA += floatval($gpaData1['gpa']);
			$totalSemesters++;
			$isCleared = $isCleared && $gpaData1['cleared'];
			$awardId = $gpaData1['awardId'];
			if (! is_null($awardId))	{
				$award1 = new ClassOfAward($this->database, $awardId, $this->conn);
				if (! $isDisqualified && $award1->isFailed()) {
					$isDisqualified = true;
				}
			}
		}
		if ($totalSemesters != 0)	{
			$totalGPA = ($totalGPA / $totalSemesters);
		}
		$totalGPA = Number::truncateFloatDecimal($totalGPA, Object::$__GPA_PRECISION);
		//Need to find its equivalent ClassOfAward 
		$awardId = ClassOfAward::getClassOfAwardFromGPAAndEducationLevel($this->database, $this->conn, $totalGPA, $level1->getLevelId());
		$totalGPA = Number::displayFloatDecimal($totalGPA, Object::$__GPA_PRECISION);
		//Assigning data 
		$list1['gpa'] = $totalGPA;
		$list1['cleared'] = $isCleared;
		$list1['disqualified'] = $isDisqualified;
		$list1['awardId'] = $awardId;
		if (sizeof($list1) == 0) $list1 = null;
		return $list1;
	}
	public function didIClearedEverything($profile1)	{
		return Student::$__IS_CLEARED;
	}
	public function didIClearedAllTheSubjects($profile1, $resultsFolder)	{
		/*
		Must return either $__IS_CLEARED or $__IS_FAILED or $__IS_DISQUALIFIED or $__NOTHING_TO_DO
		*/
		$continuousResultsDataStructure1 = $this->getMyContinuousResultsDataStructure($profile1, $resultsFolder);
		if (! is_null($continuousResultsDataStructure1)) return Student::$__NOTHING_TO_DO; //There is unclosed results group
		$subjectDataStructure1 = $this->getMySubjectListDataStructure($profile1);
		$resultsDataStructure1 = $this->getMyCompiledResultsDataStructure($profile1, $resultsFolder);
		$ds1 = $this->getMyGPADataStructure($subjectDataStructure1, $resultsDataStructure1);
		//Use this dataStructure to get the status
		$isCleared = true;
		$isDisqualified = false;
		if (is_null($ds1)) return Student::$__NOTHING_TO_DO;
		foreach ($ds1 as $cummulativeSemester => $gpaData1)	{
			$gpa = $gpaData1['gpa'];
			$awardId = $gpaData1['awardId'];
			$isCleared = $isCleared && $gpaData1['cleared'];
			if (! is_null($awardId))	{
				$award1 = new ClassOfAward($this->database, $awardId, $this->conn);
				if ($award1->isFailed()) {
					$isDisqualified = true;
					break; //If is disqualified, do not waste much of time
				}
			}
		}
		$returnCode = Student::$__IS_FAILED;
		if ($isDisqualified)	{
			$returnCode = Student::$__IS_DISQUALIFIED;
		} else if ($isCleared)	{
			$returnCode = Student::$__IS_CLEARED;
		}
		return $returnCode;
	}
	public function shouldIAdvanceSemester($profile1)	{
		$student1 = $this;
		$login1 = $student1->getLogin();
		if (is_null($login1)) return false;
		if (is_null($login1->getUserStatus())) return false;
		if (! $login1->getUserStatus()->isAlive()) return false;
		if ($student1->isAlreadyGraduated()) return false;
		if ($student1->hasPospondedStudies()) return false;
		$currentSemester = $student1->getCurrentSemester();
		$systemSemester = $profile1->getCurrentSemester();
		//Comparison Data 
		$returnCode = false;
		if ($currentSemester < $systemSemester)	{
			$returnCode = true;
		}
		return $returnCode;
	}
	public function shouldIAdvanceYear($profile1)	{
		$student1 = $this;
		$login1 = $student1->getLogin();
		if (is_null($login1)) return false;
		if (is_null($login1->getUserStatus())) return false;
		if (! $login1->getUserStatus()->isAlive()) return false;
		if ($student1->isAlreadyGraduated()) return false;
		if ($student1->hasPospondedStudies()) return false;
		if (is_null($student1->getCurrentAccademicYear())) return false;
		$currentYearNumber = $student1->getCurrentAccademicYear()->getAccademicYearNumber();
		if (is_null($profile1->getCurrentAccademicYear())) return false;
		$systemYearNumber = $profile1->getCurrentAccademicYear()->getAccademicYearNumber();
		//Comparison Data 
		$returnCode = false;
		if ($currentYearNumber < $systemYearNumber)	{
			$returnCode = true;
		}
		return $returnCode;
	}
	public function reallocateMeAccordingToDataStructure($ds1)	{
		$promise1 = new Promise();
		$promise1->setPromise(true);
		$student1 = $this;
		$login1 = $student1->getLogin();
		$student1->setCurrentYear($ds1['nextYearOfStudy']);
		$student1->setCurrentSemester($ds1['nextSemesterOfStudy']);
		$student1->setCurrentAccademicYear($ds1['nextAccademicYear']);
		switch ($ds1['actionCode'])	{
			case Student::$__CAN_GRADUATE:
				//Do Nothing Here, this has been cleared prior calling this function
				break;
			case Student::$__HAS_FAILED:
				$promise1 = Student::reallocateStudent($this->database, $this->conn, $student1);
				$student1->allocateToFinalYearIfFinalYear();
				$student1->commitUpdate();
				$login1->commitUpdate();
				break;
			case Student::$__HAS_DISQUALIFIED:
				$student1->setDiscontinued("1");
				$statusId = UserStatus::getUserStatusIdFromCode($this->database, $this->conn, UserStatus::$__DISQUALIFIED);
				$login1->setUserStatus($statusId);
				$student1->commitUpdate();
				$login1->commitUpdate();
				break;
			case Student::$__CAN_ADVANCE_SEMESTER:
				$promise1 = Student::reallocateStudent($this->database, $this->conn, $student1);
				$student1->commitUpdate();
				$login1->commitUpdate();
				break;
			case Student::$__CAN_ADVANCE_YEAR:
				$promise1 = Student::reallocateStudent($this->database, $this->conn, $student1);
				$student1->allocateToFinalYearIfFinalYear();
				$student1->commitUpdate();
				$login1->commitUpdate();
				break;
			case Student::$__NOTHING_TO_DO:
				break;
			default: Object::shootException("Invalid Choice were supplied");
		}
		return $promise1;
	}
	public function advanceYearOrSemesterDataStructure($profile1, $resultsFolder)	{
		/* 
		Data Structure to return
		list actionCode, nextAccademicYear, nextYearOfStudy, nextSemester
		*/
		$student1 = $this;
		//Initializing Data Structure 
		$ds1 = array();
		$ds1['actionCode'] = Student::$__NOTHING_TO_DO;
		$ds1['nextAccademicYear'] = $profile1->getCurrentAccademicYear()->getAccademicYearId();
		$ds1['nextYearOfStudy'] = $student1->getCurrentYear();
		$ds1['nextSemesterOfStudy'] = $student1->getCurrentSemester();
		if ($student1->isFinalYear())	{
			if ($student1->shouldIAdvanceYear($profile1))	{
				//Means Graduate Now
				switch ($student1->didIClearedEverything($profile1)/*$student1->didIClearedAllTheSubjects($profile1, $resultsFolder)*/)	{
					case Student::$__IS_CLEARED:
						$ds1['actionCode'] = Student::$__CAN_GRADUATE;
						break;
					case Student::$__IS_FAILED:
						$ds1['actionCode'] = Student::$__HAS_FAILED;
						$ds1['nextAccademicYear'] = $profile1->getCurrentAccademicYear()->getAccademicYearId();
						break;
					case Student::$__IS_DISQUALIFIED:
						$ds1['actionCode'] = Student::$__HAS_DISQUALIFIED; //Need to mark is Disqualified
						break;
					case Student::$__NOTHING_TO_DO:
						$ds1['actionCode'] = Student::$__NOTHING_TO_DO;
						$ds1['nextAccademicYear'] = $student1->getCurrentAccademicYear()->getAccademicYearId();
						break;
					default: Object::shootException("The System returned an Invalid Clearence Option");
				}
			} else if ($student1->shouldIAdvanceSemester($profile1))	{
				//Update Data Structure Properly 
				$ds1['actionCode'] = Student::$__CAN_ADVANCE_SEMESTER;
				$ds1['nextSemesterOfStudy'] = $profile1->getCurrentSemester();
			}
		} else {
			//A Normal Student. not a finalist
			if ($student1->shouldIAdvanceYear($profile1))	{
				//Means Advance Year Now
				switch ($student1->didIClearedEverything($profile1)/*$student1->didIClearedAllTheSubjects($profile1, $resultsFolder)*/)	{
					case Student::$__IS_CLEARED:
						$ds1['actionCode'] = Student::$__CAN_ADVANCE_YEAR;
						$ds1['nextAccademicYear'] = $profile1->getCurrentAccademicYear()->getAccademicYearId();
						$ds1['nextYearOfStudy'] = intval($student1->getCurrentYear()) + 1;
						$ds1['nextSemesterOfStudy'] = $profile1->getCurrentSemester();
						break;
					case Student::$__IS_FAILED:
						$ds1['actionCode'] = Student::$__HAS_FAILED;
						$ds1['nextAccademicYear'] = $profile1->getCurrentAccademicYear()->getAccademicYearId();
						$ds1['nextYearOfStudy'] = intval($student1->getCurrentYear()) + 1;
						$ds1['nextSemesterOfStudy'] = $profile1->getCurrentSemester();
						break;
					case Student::$__IS_DISQUALIFIED:
						$ds1['actionCode'] = Student::$__HAS_DISQUALIFIED; //Need to mark is Disqualified
						break;
					case Student::$__NOTHING_TO_DO:
						$ds1['actionCode'] = Student::$__NOTHING_TO_DO;
						$ds1['nextAccademicYear'] = $student1->getCurrentAccademicYear()->getAccademicYearId();
						break;
					default: Object::shootException("The System returned an Invalid Clearence Option");
				}
			} else if ($student1->shouldIAdvanceSemester($profile1))	{
				//Update Data Structure Properly 
				$ds1['actionCode'] = Student::$__CAN_ADVANCE_SEMESTER;
				$ds1['nextSemesterOfStudy'] = $profile1->getCurrentSemester();
			}
		}
		return $ds1;
	}
	public function shouldIAdvanceYearOrSemester($profile1)	{
		$student1 = $this;
		$login1 = $student1->getLogin();
		if (is_null($login1)) return false;
		if (is_null($login1->getUserStatus())) return false;
		if (! $login1->getUserStatus()->isAlive()) return false;
		if ($student1->isAlreadyGraduated()) return false;
		if ($student1->hasPospondedStudies()) return false;
		$currentSemester = $student1->getCurrentSemester();
		if (is_null($student1->getCurrentAccademicYear())) return false;
		$currentYearNumber = $student1->getCurrentAccademicYear()->getAccademicYearNumber();
		$systemSemester = $profile1->getCurrentSemester();
		if (is_null($profile1->getCurrentAccademicYear())) return false;
		$systemYearNumber = $profile1->getCurrentAccademicYear()->getAccademicYearNumber();
		//Comparison Data 
		$myCalculatedCummulativeSemester = System::getCummulativeSemester($currentYearNumber, $currentSemester, $profile1);
		$systemCalculatedCummulativeSemester = System::getCummulativeSemester($systemYearNumber, $systemSemester, $profile1);
		$returnCode = false;
		if ($myCalculatedCummulativeSemester < $systemCalculatedCummulativeSemester)	{
			$returnCode = true;
		}
		return $returnCode;
	}
	public function hasPospondedStudies()	{
		return $this->isFlagSetAt(Student::$__HAS_POSPONDED_STUDIES);
	}
	public function setPospondedStudies($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(Student::$__HAS_POSPONDED_STUDIES);
		} else {
			$this->resetFlagAt(Student::$__HAS_POSPONDED_STUDIES);
		}
	}
	public function isAlreadyGraduated()	{
		return $this->isFlagSetAt(Student::$__IS_ALREADY_GRADUATED);
	}
	public function setAlreadyGraduated($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(Student::$__IS_ALREADY_GRADUATED);
		} else {
			$this->resetFlagAt(Student::$__IS_ALREADY_GRADUATED);
		}
	}
	public function isDiscontinued()	{
		return $this->isFlagSetAt(Student::$__IS_DISCONTINUED);
	}
	public function setDiscontinued($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(Student::$__IS_DISCONTINUED);
		} else {
			$this->resetFlagAt(Student::$__IS_DISCONTINUED);
		}
	}
	public function isRegistered()	{
		return $this->isFlagSetAt(Student::$__IS_REGISTERED);
	}
	public function setRegistered($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(Student::$__IS_REGISTERED);
		} else {
			$this->resetFlagAt(Student::$__IS_REGISTERED);
		}
	}
	public function isFinalYear()	{
		return $this->isFlagSetAt(Student::$__IS_FINAL_YEAR);
	}
	public function setFinalYear($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(Student::$__IS_FINAL_YEAR);
		} else {
			$this->resetFlagAt(Student::$__IS_FINAL_YEAR);
		}
	}
	public function graduateIfGraduated()	{
		if (is_null($this->course)) return;
		if (! $this->isAlreadyGraduated() && (intval($this->currentYear) > intval($this->course->getDuration())))	{
			//This student is supposed to be in final Year and is not
			$this->setAlreadyGraduated("1");
			$this->commitUpdate();
		}
	}
	public function allocateToFinalYearIfFinalYear()	{
		if (is_null($this->course)) return;
		if (! $this->isFinalYear() && (intval($this->currentYear) == intval($this->course->getDuration())))	{
			//This student is supposed to be in final Year and is not
			$this->setFinalYear("1");
			$this->commitUpdate();
		}
	}
	public function isContinuingStudent()	{
		return $this->isFlagSetAt(Student::$__IS_CONTINUING_STUDENT);
	}
	public function setContinuingStudent($status)	{
		if (intval($status) == 1)	{
			$this->setFlagAt(Student::$__IS_CONTINUING_STUDENT);
		} else {
			$this->resetFlagAt(Student::$__IS_CONTINUING_STUDENT);
		}
	}
	public function isCompleted()	{
		return $this->isFlagSetAt(Student::$__IS_COMPLITED);
	}
	public function setCompleted($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(Student::$__IS_COMPLITED);
		} else {
			$this->resetFlagAt(Student::$__IS_COMPLITED);
		}
	}
	public function isCitizen($profile1)	{
		//You need a profile Object to make a comparison 
		return ($this->citizenship->getCountryId() == $profile1->getCountry()->getCountryId());
	}
	public function loadXMLFolder($folderPath)	{
		$this->absoluteFilePath = $folderPath."/".$this->XMLFile;
		if (is_null($this->XMLFile)) {
			$this->absoluteFilePath = null;
			return;
		}
		$this->domDocument = FileFactory::readFile($this->absoluteFilePath);
	}
	public function getAbsoluteFilePath()	{ return $this->absoluteFilePath; }
	public function getDOMDocument()	{ return $this->domDocument; }
	/***********************************************************************************/
	/*------------------------------BEGIN of Next Of Kins-----------------------------------*/
	public function updateListOfNextOfKins($dataArray)	{
		/*
		dataArray[i]['bankName'] = val 
		*/
		$doc = $this->getDOMDocument();
		$promise1 = null;
		//We need to wipe the previous data 
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:nextOfKins;*:nextOfKin");
		$promise1 = FileFactory::deleteWithoutSavingNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		//Now the doc is having deleted subnodes
		foreach ($dataArray as $dataBlock)	{
			$node1 = FileFactory::addDOMListToTree($doc, "nextOfKin", $dataBlock);
			$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:nextOfKins");
			$promise1 = FileFactory::appendNode($this->getAbsoluteFilePath(), $doc, $nodeCollection1, $node1);
		}
		return $promise1;
	}
	public function getListOfNextOfKins()	{
		$doc = $this->getDOMDocument();
		if (is_null($doc)) return null;
		return FileFactory::findCustomNodes($doc, "0:nextOfKins;*:nextOfKin");
	}
	public function clearListOfNextOfKins()	{
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:nextOfKins;*:nextOfKin");
		$promise1 = FileFactory::deleteNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		return $promise1;
	}
	/*------------------------------END of Next Of Kins-----------------------------------*/

	/*------------------------------BEGIN of Financial Sponsors-----------------------------------*/
	public function updateListOfSponsors($dataArray)	{
		/*
		dataArray[i]['bankName'] = val 
		*/
		$doc = $this->getDOMDocument();
		$promise1 = null;
		//We need to wipe the previous data 
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:financialSponsor;*:sponsor");
		$promise1 = FileFactory::deleteWithoutSavingNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		//Now the doc is having deleted subnodes
		foreach ($dataArray as $dataBlock)	{
			$node1 = FileFactory::addDOMListToTree($doc, "sponsor", $dataBlock);
			$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:financialSponsor");
			$promise1 = FileFactory::appendNode($this->getAbsoluteFilePath(), $doc, $nodeCollection1, $node1);
		}
		return $promise1;
	}
	public function getListOfSponsors()	{
		$doc = $this->getDOMDocument();
		if (is_null($doc)) return null;
		return FileFactory::findCustomNodes($doc, "0:financialSponsor;*:sponsor");
	}
	public function clearListOfSponsors()	{
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:financialSponsor;*:sponsor");
		$promise1 = FileFactory::deleteNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		return $promise1;
	}
	/*------------------------------END of Financial Sponsors-----------------------------------*/

	/*------------------------------BEGIN of Employment History-----------------------------------*/
	public function updateListOfEmployers($dataArray)	{
		/*
		dataArray[i]['bankName'] = val 
		*/
		$doc = $this->getDOMDocument();
		$promise1 = null;
		//We need to wipe the previous data 
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:employmentHistory;*:employer");
		$promise1 = FileFactory::deleteWithoutSavingNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		//Now the doc is having deleted subnodes
		foreach ($dataArray as $dataBlock)	{
			$node1 = FileFactory::addDOMListToTree($doc, "employer", $dataBlock);
			$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:employmentHistory");
			$promise1 = FileFactory::appendNode($this->getAbsoluteFilePath(), $doc, $nodeCollection1, $node1);
		}
		return $promise1;
	}
	public function getListOfEmployers()	{
		$doc = $this->getDOMDocument();
		if (is_null($doc)) return null;
		return FileFactory::findCustomNodes($doc, "0:employmentHistory;*:employer");
	}
	public function clearListOfEmployers()	{
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:employmentHistory;*:employer");
		$promise1 = FileFactory::deleteNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		return $promise1;
	}
	/*------------------------------END of Employment History-----------------------------------*/

	/*------------------------------BEGIN of Accademic History-----------------------------------*/
	public function updateListOfAccademicInstitutions($dataArray)	{
		/*
		dataArray[i]['bankName'] = val 
		*/
		$doc = $this->getDOMDocument();
		$promise1 = null;
		//We need to wipe the previous data 
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:accademicHistory;*:institution");
		$promise1 = FileFactory::deleteWithoutSavingNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		//Now the doc is having deleted subnodes
		foreach ($dataArray as $dataBlock)	{
			$node1 = FileFactory::addDOMListToTree($doc, "institution", $dataBlock);
			$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:accademicHistory");
			$promise1 = FileFactory::appendNode($this->getAbsoluteFilePath(), $doc, $nodeCollection1, $node1);
		}
		return $promise1;
	}
	public function getListOfEducationLevels()	{
		$doc = $this->getDOMDocument();
		if (is_null($doc)) return null;
		$list = array();
		$educationLevelList1 = FileFactory::findCustomNodes($doc, "0:accademicHistory;*:levelId");
		if (is_null($educationLevelList1)) return null;
		foreach ($educationLevelList1 as $node1)	{
			$list[sizeof($list)] = $node1->nodeValue;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public function getListOfAccademicInstitutions()	{
		$doc = $this->getDOMDocument();
		if (is_null($doc)) return null;
		return FileFactory::findCustomNodes($doc, "0:accademicHistory;*:institution");
	}
	public function clearListOfAccademicInstitutions()	{
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:accademicHistory;*:institution");
		$promise1 = FileFactory::deleteNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		return $promise1;
	}
	/*------------------------------END of Accademic History-----------------------------------*/
	/*------------------------------BEGIN BANK ACCOUNT-----------------------------------*/
	public function addBankAccount($bankAccountArray)	{
		/*
		arr['bankName'] = "CRDB PLC"; ...
		*/
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (! is_null($doc))	{
			$bankNode1 = FileFactory::addDOMListToTree($doc, "bank", $bankAccountArray);;
			$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:banks");
			$promise1 = FileFactory::appendNode($this->getAbsoluteFilePath(), $doc, $nodeCollection1, $bankNode1);
		}
		return $promise1;
	}
	public function getBankAccountList()	{
		$doc = $this->getDOMDocument();
		if (is_null($doc)) return null;
		return FileFactory::findCustomNodes($doc, "0:banks;*:bank");
	}
	public function clearBankAccounts()	{
		$doc = $this->getDOMDocument();
		$promise1 = null;
		if (is_null($doc)) return null;
		$nodeCollection1 = FileFactory::findCustomNodes($doc, "0:banks;*:bank");
		$promise1 = FileFactory::deleteNodeCollections($this->getAbsoluteFilePath(), $doc, $nodeCollection1);
		return $promise1;
	}
	/*------------------------------END BANK ACCOUNT-----------------------------------*/

	public final static function getStudentIdFromLoginId($database, $conn, $loginId)	{
		$studentId = null;
		$query = "SELECT studentId FROM students WHERE loginId='$loginId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not Extract student Reference");
		if (mysql_num_rows($result) == 1)	{
			list($studentId) = mysql_fetch_row($result);
		}
		return $studentId;
	}
	public final static function initializeStudentRecord($database, $conn, $studentName)	{
		//Note The Name Can be random 
		$loginId = Login::initializeLoginRecordForStudent($database, $conn, $studentName);
		$query = "INSERT INTO students (loginId) VALUES ('$loginId')";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Student [Static], Could not Initialize Student Record");
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Student, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Student, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function backupXMLFile()	{
		return FileFactory::createBackupFile($this->absoluteFilePath);
	}
	public final static function reallocateStudent($database, $conn, $student1)	{
		/*We need to reallocate this student to a correct course group */
		$promise1 = new Promise();
		$promise1->setPromise(true);
		$login1 = $student1->getLogin();
		try {
			if (is_null($student1->getCourse())) Object::shootException("No Course has been assigned to the student");
			$courseCode = $student1->getCourse()->getCourseCode();
			$year = $student1->getCurrentYear();
			$semester= $student1->getCurrentSemester();
			$groupName = $courseCode."_".$year."_SEM_".$semester;
			$groupId = Group::getGroupIdFromGroupName($database, $conn, $groupName); 
			$login1->setGroup($groupId);
			$promise1->setResults($groupId);
		} catch (Exception $e)	{
			$promise1->setReason($e->getMessage());
			$promise1->setPromise(false);
		}
		return $promise1;
	}
	public final static function admitStudent($database, $conn, $student1, $profile1, $systemTime1, $admittedBy)	{
		$promise1 = new Promise();
		$promise1->setPromise(true);
		$login1 = $student1->getLogin();
		$promise1 = self::reallocateStudent($database, $conn, $student1);
		if (! $promise1->isPromising()) return $promise1;
		if (! $student1->isContinuingStudent())	{
			//A New Student , we need to write reg number
			//    ------ For KCMUCo no need to generate a new Number 
			$promise1 = Student::generateRegistrationNumber($database, $conn, $profile1, $student1);
			if (! $promise1->isPromising()) return $promise1; //Something went wrong 
			$student1->setRegistrationNumber($promise1->getResults()); //Results is carrying the Generated Number 
			$student1->setContinuingStudent("1");
		}
		/* Update the admission status, as a continuing student */
		$login1->setAdmissionTime($systemTime1->getDateAndTimeString());
		$login1->setAdmitted("1");
		$login1->setAdmittedBy($admittedBy);
		try {
			//Up to this point , the promise is true
			//We need to write examination number  
			//No--Need ExaminationNumber::attachSystemExaminationNumberToStudent($database, $conn, $student1, $student1->getRegistrationNumber());
			$login1->commitUpdate();
			$student1->commitUpdate(); //There is an extraFilter carried with this Object need to be updated too 
		} catch (Exception $e)	{
			$promise1->setReason("Could not complete admission process for this student ".$e->getMessage());
			$promise1->setPromise(false);
		}
		return $promise1;
	}
	public function getMyGPADataStructure($subjectDataStructure1, $resultsDataStructure1)	{
		/*
		INPUT: 	subjectDataStructure1[cummulativeSemester][index] = transactionId 
				resultsDataStructure1[cummulativeSemester][index]['transactionId'] = transactionId 
																['rawMarks'] = 80 
																['gradeId'] = gradeId 
																[transactionId] = gradeId 
		OUTPUT: ds1[cummulativeSemester]['gpa'] = GPA
										['cleared'] = true //1 means cleared 0 failed 
										['awardId'] = null; reference to ClassOfAward
										['totalUnits'] = 0.0 
										['totalModulePoints'] = 0.0 
		*/
		if (is_null($subjectDataStructure1) || is_null($resultsDataStructure1)) return null;
		$course1 = $this->course;
		if (is_null($course1)) Object::shootException("The student is not linked to any course");
		if (is_null($course1->getEducationLevel())) Object::shootException("The Course is not linked to any level");
		$level1 = $course1->getEducationLevel();
		$ds1 = array();
		foreach ($subjectDataStructure1 as $cummulativeSemester => $subjectDataArray1)	{
			$ds1[$cummulativeSemester] = array();
			$ds1[$cummulativeSemester]['gpa'] = 0.0;
			$ds1[$cummulativeSemester]['cleared'] = true; //Default 1
			$ds1[$cummulativeSemester]['awardId'] = null;
			$ds1[$cummulativeSemester]['totalUnits'] = 0.0;
			$ds1[$cummulativeSemester]['totalModulePoints'] = 0.0;
			if (! isset($resultsDataStructure1[$cummulativeSemester])) continue; //No results for this semester
			$totalModulePoints = 0;
			$totalUnits = 0;
			$clearedSemester = true;
			foreach ($subjectDataArray1 as $index => $transactionId)	{
				//Units has to be taken as denominator even if results are not found 
				$transaction1 = new CourseAndSubjectTransaction($this->database, $transactionId, $this->conn);
				if (is_null($transaction1->getSubject())) Object::shootException("No Subject Attached to this Student");
				$subject1 = $transaction1->getSubject();
				$totalUnits = $totalUnits + intval($subject1->getTotalUnits());
				if (! isset($resultsDataStructure1[$cummulativeSemester][$index])) continue; //No results for this subject 
				if (! isset($resultsDataStructure1[$cummulativeSemester][$index][$transactionId])) continue; //Transaction not found 
				$gradeId = $resultsDataStructure1[$cummulativeSemester][$index][$transactionId];
				$grade1 = new Grade($this->database, $gradeId, $this->conn);
				if (($grade1->isIncomplete() || $grade1->isFailed()) && $clearedSemester)	$clearedSemester = false;
				$gradePoint = intval($grade1->getGradePoint());
				$totalModulePoints = $totalModulePoints + ($gradePoint * ($subject1->getTotalUnits()));
			}
			//Adjust only if totalUnits is not equal to zero 
			if ($totalUnits != 0)	{
				$gpa = ($totalModulePoints / $totalUnits);
				$gpa = Number::truncateFloatDecimal($gpa, Object::$__GPA_PRECISION);
				//Need to find its equivalent ClassOfAward 
				$awardId = ClassOfAward::getClassOfAwardFromGPAAndEducationLevel($this->database, $this->conn, $gpa, $level1->getLevelId());
				$gpa = Number::displayFloatDecimal($gpa, Object::$__GPA_PRECISION);
				$ds1[$cummulativeSemester]['gpa'] =  $gpa;
				$ds1[$cummulativeSemester]['cleared'] = $clearedSemester;
				if (! is_null($awardId)) $ds1[$cummulativeSemester]['awardId'] = $awardId;
				$ds1[$cummulativeSemester]['totalUnits'] = $totalUnits;
				$ds1[$cummulativeSemester]['totalModulePoints'] = $totalModulePoints;
			}
		}
		if (sizeof($ds1) == 0) $ds1 = null;
		return $ds1;
	}
	public function showMySubjectListForSemester($year, $semester)	{
		$course1 = $this->course;
		if (is_null($course1)) Object::shootException("Course Information were not found");
		$transactionIdArr = CourseAndSubjectTransaction::getTransactionListFromCourseYearAndSemester($this->database, $this->conn, $course1->getCourseId(), $year, $semester);
		if (is_null($transactionIdArr)) Object::shootException("The System returned an Empty Subject List");
		$window1 = "<div><table class=\"pure-table\"><thead><tr><th colspan=\"6\">Year of Study: $year      <br/>Semester of Study: $semester</th></tr><tr><th></th><th>Subject</th><th>Subject Code</th><th>Credit Hours</th><th>Credit Points</th><th></th></tr></thead><tbody>";
		$count = 0;
		foreach ($transactionIdArr as $transactionId)	{
			$count++;
			$transaction1 = new CourseAndSubjectTransaction($this->database, $transactionId, $this->conn); 
			$subject1 = $transaction1->getSubject();
			$subjectName = $subject1->getSubjectName();
			$subjectCode = $subject1->getSubjectCode();
			$totalHours = $subject1->getTotalHours();
			$totalUnits = $subject1->getTotalUnits();
			$compulsoryText = "Optional Module";
			if ($transaction1->isCompulsory()) $compulsoryText = "Compulsory Module";
			$window1 .= "<tr><td>$count</td><td>$subjectName</td><td>$subjectCode</td><td>$totalHours</td><td>$totalUnits</td><td>$compulsoryText</td></tr>";
		}
		$window1 .= "</tbody></table></div>";
		return $window1;
	}
	public function showMySubjectList($profile1)	{
		$student1 = $this;
		$database = $this->database;
		$conn = $this->conn;
		$ds1 = $this->getMySubjectListDataStructure($profile1);
		if (is_null($ds1)) Object::shootException("You do not have any subject the system returned an Empty Set");
		$accordion1 = "<div style=\"z-index: 0;\" class=\"ui-sys-accordion\">";
		for ($i=1; $i <= sizeof($ds1); $i++)	{
			//Semesterwise blocks 
			$yearAndSemesterArr = System::getYearAndSemesterFromACummulativeSemester($i, $profile1);
			if (is_null($yearAndSemesterArr)) continue;
			$year = $yearAndSemesterArr['year'];
			$semester = $yearAndSemesterArr['semester'];
			$titleText = System::scriptNumberAdjustment($year)." year, ".System::scriptNumberAdjustment($semester)." semester"."  (Semester Count is $i)";
			$accordion1 .= "<h3 style=\"z-index: 1;\">$titleText</h3><div style=\"z-index: 1;\"><table class=\"pure-table pure-table-horizontal\"><thead><tr><th></th><th>Subject</th><th>Code</th><th title=\"Lecture Hours\">LH</th><th title=\"Seminar and Tutorial Hours\">STH</th><th title=\"Assignment Hours\">AH</th><th title=\"Independent Study and Research Hours\">ISRH</th><th title=\"Practical Training Hours\">PTH</th><th title=\"Extra Hours\">EH</th><th title=\"CREDIT HOURS\">CRH</th><th title=\"TOTAL HOURS\">Total</th><th></th></tr></thead><tbody>";
			$transactionIdArr = $ds1[$i];
			$finalTotalHours = 0;
			$finalTotalCredits = 0;
			for ($index = 0; $index < sizeof($transactionIdArr); $index++)	{
				$transaction1 = new CourseAndSubjectTransaction($database, $transactionIdArr[$index], $conn); //We will catch Externally
				$subject1 = $transaction1->getSubject();
				$lectureHours = $transaction1->getLectureHours();
				$seminarAndTutorialHours = $transaction1->getSeminarAndTutorialHours();
				$assignmentHours = $transaction1->getAssignmentHours();
				$independentStudiesAndResearchHours = $transaction1->getIndependentStudiesAndResearchHours();
				$practicalTrainingHours = $transaction1->getPracticalTrainingHours();
				$extraHours = $transaction1->getExtraHours();
				$creditHours = $transaction1->getCreditHours();
				$totalHours = $transaction1->getTotalHours();
				$compulsoryText = "Optional Module";
				if ($transaction1->isCompulsory()) $compulsoryText = "Compulsory Module";
				$accordion1 .= "<tr><td>".($index + 1)."</td><td>".$subject1->getSubjectName()."</td><td>".$subject1->getSubjectCode()."</td><td>$lectureHours</td><td>$seminarAndTutorialHours</td><td>$assignmentHours</td><td>$independentStudiesAndResearchHours</td><td>$practicalTrainingHours</td><td>$extraHours</td><td><b>$creditHours</b></td><td><b>$totalHours</b></td><td>$compulsoryText</td></tr>";
				$finalTotalCredits += floatval($creditHours);
				$finalTotalHours += floatval($totalHours);
			}
			$accordion1 .= "<tr style=\"font-size: 1.1em;\"><td style=\"text-align: center;\" colspan=\"9\"><b>TOTAL</b></td><td><b>$finalTotalCredits</b></td><td><b>$finalTotalHours</b></td><td></td></tr></tbody></table></div>";
		}//end-foreach 
		
		$accordion1 .= "</div>";
		return $accordion1;
	}
	public function getMySubjectListDataStructure($profile1)	{
		$list1 = array();
		/*Lattest Cummulative Semester
		return list[cummulativeSemester][index] = mapId
		*/
		$student1 = $this;
		$database = $this->database;
		$conn = $this->conn;
		$cummulativeSemester = System::getCummulativeSemester($student1->getCurrentYear(), $student1->getCurrentSemester(), $profile1);
		$courseId = $student1->getCourse()->getCourseId();
		for ($i = 1; $i <= $cummulativeSemester; $i++)	{
			$list1[$i] = array(); //Now pack All Map Ids Here which
			$yearAndSemesterArr = System::getYearAndSemesterFromACummulativeSemester($i, $profile1);
			if (is_null($yearAndSemesterArr)) continue;
			$year = $yearAndSemesterArr['year'];
			$semester = $yearAndSemesterArr['semester'];
			$transactionIdArr = CourseAndSubjectTransaction::getTransactionListFromCourseYearAndSemester($database, $conn, $courseId, $year, $semester);
			for ($index = 0; $index < sizeof($transactionIdArr); $index++)	{
				$list1[$i][$index] = $transactionIdArr[$index];
			}
		}
		if (sizeof($list1) == 0) $list1 = null;
		return $list1;
	}
	public function showMyBriefcaseGroupResults($profile1, $resultsFolder, $displayList1, $controlFlags)	{
		$ds1 = $this->getMyBriefcaseGroupResultsDataStructure($profile1, $resultsFolder, $displayList1, $controlFlags);
		if (is_null($ds1)) return null;
		/*
		Expect data structure, ds1 of the form 
			list[transactionId][groupId]['rawMarks'] = marks 
											['gradeId'] = gradeId 
											['maximumScore'] = maximumscore 
		*/
		$database = $this->database;
		$conn = $this->conn;
		$window1 = "<div style=\"font-size: 0.9em; text-align: center;\"><b>Compiled Results for Quiz, Test, Assignments, Practicals etc</b></div><div style=\"z-index: 0;\" class=\"ui-sys-tabs\">";
		$tabHeader = "<ul style=\"z-index: 1;\">";
		$tabBody = "";
		$tabPrefix = "__zoomtong_company_limited_by_written_by_ndimangwa_fadhili_ngoya_ide2_";
		foreach ($ds1 as $transactionId => $briefcaseArray1)	{
			//We are building tabHeader and tabBody 
			$myTabReference = $tabPrefix.$transactionId;
			$transaction1 = new CourseAndSubjectTransaction($database, $transactionId, $conn);
			$subject1 = $transaction1->getSubject();
			if (is_null($subject1)) continue;
			$titleText = $subject1->getSubjectCode();
			$titleDetails = $subject1->getSubjectName();
			$tabHeader .= "<li><a href=\"#$myTabReference\">$titleText</a></li>";
			$tabBody .= "<div id=\"$myTabReference\"><table class=\"pure-table\"><thead><tr><th></th><th>Name</th><th>Max Score</th><th>Marks</th><th>Grade</th><th>Comment</th></tr></thead><tbody>";
			$count = 0;
			foreach ($briefcaseArray1 as $groupId => $dataArray1)	{
				$rawMarks = $dataArray1['rawMarks'];
				$gradeId = $dataArray1['gradeId'];
				$grade1 = new Grade($database, $gradeId, $conn);
				$gradeName = $grade1->getGradeName();
				$maximumScore = $dataArray1['maximumScore'];
				$group1 = new BriefcaseGroup($database, $groupId, $conn);
				$groupName = $group1->getGroupName();
				$commentText = "";
				$count++;
				$tabBody .= "<tr><td>$count</td><td>$groupName</td><td>$maximumScore</td><td><b>$rawMarks</b></td><td><b>$gradeName</b></td><td>$commentText</td></tr>";
			}
			$tabBody .= "</tbody><tfoot><tr><td colspan=\"6\">$titleDetails</td></tr></tfoot></table></div>";
		}
		$tabHeader .= "</ul>";
		$window1 .= $tabHeader.$tabBody;
		$window1 .= "</div>";
		return $window1;
	}
	public function getMyBriefcaseGroupResultsDataStructure($profile1, $resultsFolder, $displayList1, $controlFlags)	{
		/*
		DataStructure to return 
			list[transactionId][groupId]['rawMarks'] = 80
											['gradeId'] = null
											['maximumScore'] = 0
		*/
		$student1 = $this;
		if ($student1->isAlreadyGraduated()) return null;
		$database = $this->database;
		$conn = $this->conn;
		$course1 = $this->course;
		$batch1 = $this->currentAccademicYear;
		if (is_null($course1)) Object::shootException("Student is not attached to any course of study");
		if (is_null($batch1)) Object::shootException("Student is not attached to any Current Academic Year");		
		//Step 1: Get All BriefcaseGroup for student
		$briefcaseGroupList = BriefcaseGroup::getBriefcaseGroupList($database, $conn, $batch1->getAccademicYearId(), $course1->getCourseId(), $student1->getCurrentYear(), $student1->getCurrentSemester(), true);
		if (is_null($briefcaseGroupList)) return null;
		//Step 2: Get Collections of All briefcases
		$briefcaseCollection1 = new Collection();
		foreach ($briefcaseGroupList as $groupId)	{
			//Only groups eligible for publication 
			$group1 = new BriefcaseGroup($database, $groupId, $conn);
			if ($group1->isEligibleForPublication())	{
				$briefcaseCollection1->addObjectToCollection($group1);
			}
		}
		$briefcaseCollection1 = $briefcaseCollection1->makeUnique();
		if ($briefcaseCollection1->getLength() == 0) return null;
		//Step 3: Merge Headers
		$combinedHeader1 = null;
		foreach ($briefcaseCollection1->getCollection() as $groupId)	{
			//Need to extract Headers only 
			$group1 = new BriefcaseGroup($database, $groupId, $conn);
			//Make sure we have a file 
			if (is_null($group1->getRawMarksCSVFile())) continue;
			//Check if file exists 
			$filename = $resultsFolder.$group1->getRawMarksCSVFile();
			if (! file_exists($filename)) continue;
			//Now initialize ResultsFile 
			$resultsFile1 = new ResultsFile($database, $filename, $conn);
			//Now extract HeaderLine 
			$combinedHeader1 = ResultsHeaderLine::mergeHeader($combinedHeader1, $resultsFile1->getHeaderLine());
		}
		if (is_null($combinedHeader1)) return null;
		//Now we have a combinedHeaderLine this is array of transactionId 
		$transactionList = $combinedHeader1->getHeaderArray();
		if (is_null($transactionList)) return null; //meaning no subject available 
		//Step 4: Initialize data Structure ds1 
		$ds1 = array();
		//Step 5: Build now the data structure 
		foreach ($transactionList as $transactionId)	{
			$ds1[$transactionId] = array();
			foreach ($briefcaseCollection1->getCollection() as $groupId)	{
				$group1 = new BriefcaseGroup($database, $groupId, $conn);
				if (is_null($group1->getRawMarksCSVFile()) || is_null($group1->getGradedMarksCSVFile())) continue;
				try {
					$rawFilename = $resultsFolder.$group1->getRawMarksCSVFile();
					$gradedFilename = $resultsFolder.$group1->getGradedMarksCSVFile();
					if (! file_exists($rawFilename)) continue;
					if (! file_exists($gradedFilename)) continue;
					if ((md5_file($rawFilename) != $group1->getRawMarksCSVFileChecksum()) || (md5_file($gradedFilename) != $group1->getGradedMarksCSVFileChecksum())) continue;
					$rawResultsFile1 = new ResultsFile($database, $rawFilename, $conn);
					$gradedResultsFile1 = new ResultsFile($database, $gradedFilename, $conn);
					//Make sure only the one allowed to view results 
					$studentDataLine1 = $rawResultsFile1->getStudentResultsDataLine($student1->getStudentId());
					if (! $studentDataLine1->isDisplayResultsEnable()) continue; // The student is allowed to display results
					//Fetch marks and grade 
					$rawMarks = $rawResultsFile1->getMarksAt($student1->getStudentId(), $transactionId);
					$gradeId = $gradedResultsFile1->getMarksAt($student1->getStudentId(), $transactionId);
					//Now update data structure 
					$ds1[$transactionId][$groupId] = array();
					$ds1[$transactionId][$groupId]['rawMarks'] = $rawMarks;
					$ds1[$transactionId][$groupId]['gradeId'] = $gradeId;
					$ds1[$transactionId][$groupId]['maximumScore'] = $rawResultsFile1->getMaximumScore();
				} catch (Exception $e)	{
					continue;
				}
			}
		}
		//Step 6: Cleaning the dataStructure 
		$tempDs1 = array();
		foreach ($ds1 as $transactionId => $briefcaseArray1)	{
			$tempBriefcaseArray1 = array();
			foreach ($briefcaseArray1 as $groupId => $dataArray1)	{
				if ((trim($dataArray1['rawMarks']) != "") && (trim($dataArray1['gradeId']) != ""))	{
					$tempBriefcaseArray1[$groupId] = array();
					$tempBriefcaseArray1[$groupId]['rawMarks'] = $dataArray1['rawMarks'];
					$tempBriefcaseArray1[$groupId]['gradeId'] = $dataArray1['gradeId'];
					$tempBriefcaseArray1[$groupId]['maximumScore'] = $dataArray1['maximumScore'];
				}
			}
			if (sizeof($tempBriefcaseArray1) > 0)	{
				$tempDs1[$transactionId] = $tempBriefcaseArray1;
			}
		}
		//Step 7: Assign Back everything to the original ds1 variable
		$ds1 = $tempDs1;
		if (sizeof($ds1) == 0) $ds1 = null;
		return $ds1;
	}
	public function showMyBriefcaseResults($profile1, $resultsFolder, $displayList1, $controlFlags)	{
		$ds1 = $this->getMyBriefcaseResultsDataStructure($profile1, $resultsFolder, $displayList1, $controlFlags);
		if (is_null($ds1)) return null;
		/*
		Expect data structure, ds1 of the form 
			list[transactionId][briefcaseId]['rawMarks'] = marks 
											['gradeId'] = gradeId 
											['maximumScore'] = maximumscore 
		*/
		$database = $this->database;
		$conn = $this->conn;
		$window1 = "<div style=\"font-size: 0.9em; text-align: center;\"><b>Quiz, Test, Assignments, Practicals etc</b></div><div style=\"z-index: 0;\" class=\"ui-sys-tabs\">";
		$tabHeader = "<ul style=\"z-index: 1;\">";
		$tabBody = "";
		$tabPrefix = "__zoomtong_company_limited_by_written_by_ndimangwa_fadhili_ngoya_ide1_";
		foreach ($ds1 as $transactionId => $briefcaseArray1)	{
			//We are building tabHeader and tabBody 
			$myTabReference = $tabPrefix.$transactionId;
			$transaction1 = new CourseAndSubjectTransaction($database, $transactionId, $conn);
			$subject1 = $transaction1->getSubject();
			if (is_null($subject1)) continue;
			$titleText = $subject1->getSubjectCode();
			$titleDetails = $subject1->getSubjectName();
			$tabHeader .= "<li><a href=\"#$myTabReference\">$titleText</a></li>";
			$tabBody .= "<div id=\"$myTabReference\"><table class=\"pure-table\"><thead><tr><th></th><th>Name</th><th>Max Score</th><th>Marks</th><th>Grade</th><th>Comment</th></tr></thead><tbody>";
			$count = 0;
			foreach ($briefcaseArray1 as $briefcaseId => $dataArray1)	{
				$rawMarks = $dataArray1['rawMarks'];
				$gradeId = $dataArray1['gradeId'];
				$grade1 = new Grade($database, $gradeId, $conn);
				$gradeName = $grade1->getGradeName();
				$maximumScore = $dataArray1['maximumScore'];
				$briefcase1 = new Briefcase($database, $briefcaseId, $conn);
				$briefcaseName = $briefcase1->getBriefcaseName();
				$commentText = "";
				$count++;
				$tabBody .= "<tr><td>$count</td><td>$briefcaseName</td><td>$maximumScore</td><td><b>$rawMarks</b></td><td><b>$gradeName</b></td><td>$commentText</td></tr>";
			}
			$tabBody .= "</tbody><tfoot><tr><td colspan=\"6\">$titleDetails</td></tr></tfoot></table></div>";
		}
		$tabHeader .= "</ul>";
		$window1 .= $tabHeader.$tabBody;
		$window1 .= "</div>";
		return $window1;
	}
	public function getMyBriefcaseResultsDataStructure($profile1, $resultsFolder, $displayList1, $controlFlags)	{
		/*
		DataStructure to return 
			list[transactionId][briefcaseId]['rawMarks'] = 80
											['gradeId'] = null
											['maximumScore'] = 0
		*/
		$student1 = $this;
		if ($student1->isAlreadyGraduated()) return null;
		$database = $this->database;
		$conn = $this->conn;
		$course1 = $this->course;
		$batch1 = $this->currentAccademicYear;
		if (is_null($course1)) Object::shootException("Student is not attached to any course of study");
		if (is_null($batch1)) Object::shootException("Student is not attached to any Current Academic Year");		
		//Step 1: Get All BriefcaseGroup for student
		$briefcaseGroupList = BriefcaseGroup::getBriefcaseGroupList($database, $conn, $batch1->getAccademicYearId(), $course1->getCourseId(), $student1->getCurrentYear(), $student1->getCurrentSemester(), false);
		if (is_null($briefcaseGroupList)) return null;
		//Step 2: Get Collections of All briefcases
		$briefcaseCollection1 = new Collection();
		foreach ($briefcaseGroupList as $groupId)	{
			$list = BriefcaseGroup::getBriefcaseListBelongingToAGroup($database, $conn, $groupId);
			if (is_null($list)) continue;
			foreach ($list as $briefcaseId)	{
				$briefcase1 = new Briefcase($database, $briefcaseId, $conn);
				if ($briefcase1->isEligibleForPublication())	{
					$briefcaseCollection1->addObjectToCollection($briefcase1);
				}
			}
		}
		$briefcaseCollection1 = $briefcaseCollection1->makeUnique();
		if ($briefcaseCollection1->getLength() == 0) return null;
		//Step 3: Merge Headers
		$combinedHeader1 = null;
		foreach ($briefcaseCollection1->getCollection() as $briefcaseId)	{
			//Need to extract Headers only 
			$briefcase1 = new Briefcase($database, $briefcaseId, $conn);
			//Make sure we have a file 
			if (is_null($briefcase1->getRawMarksCSVFile())) continue;
			//Check if file exists 
			$filename = $resultsFolder.$briefcase1->getRawMarksCSVFile();
			if (! file_exists($filename)) continue;
			//Now initialize ResultsFile 
			$resultsFile1 = new ResultsFile($database, $filename, $conn);
			//Now extract HeaderLine 
			$combinedHeader1 = ResultsHeaderLine::mergeHeader($combinedHeader1, $resultsFile1->getHeaderLine());
		}
		if (is_null($combinedHeader1)) return null;
		//Now we have a combinedHeaderLine this is array of transactionId 
		$transactionList = $combinedHeader1->getHeaderArray();
		if (is_null($transactionList)) return null; //meaning no subject available 
		//Step 4: Initialize data Structure ds1 
		$ds1 = array();
		//Step 5: Build now the data structure 
		foreach ($transactionList as $transactionId)	{
			$ds1[$transactionId] = array();
			foreach ($briefcaseCollection1->getCollection() as $briefcaseId)	{
				$briefcase1 = new Briefcase($database, $briefcaseId, $conn);
				if (is_null($briefcase1->getRawMarksCSVFile()) || is_null($briefcase1->getGradedMarksCSVFile())) continue;
				try {
					$rawFilename = $resultsFolder.$briefcase1->getRawMarksCSVFile();
					$gradedFilename = $resultsFolder.$briefcase1->getGradedMarksCSVFile();
					if (! file_exists($rawFilename)) continue;
					if (! file_exists($gradedFilename)) continue;
					if ((md5_file($rawFilename) != $briefcase1->getRawMarksCSVFileChecksum()) || (md5_file($gradedFilename) != $briefcase1->getGradedMarksCSVFileChecksum())) continue;
					$rawResultsFile1 = new ResultsFile($database, $rawFilename, $conn);
					$gradedResultsFile1 = new ResultsFile($database, $gradedFilename, $conn);
					$studentDataLine1 = $rawResultsFile1->getStudentResultsDataLine($student1->getStudentId());
					if (! $studentDataLine1->isDisplayResultsEnable()) continue; // The student is allowed to display results
					//Fetch marks and grade 
					$rawMarks = $rawResultsFile1->getMarksAt($student1->getStudentId(), $transactionId);
					$gradeId = $gradedResultsFile1->getMarksAt($student1->getStudentId(), $transactionId);
					//Now update data structure 
					$ds1[$transactionId][$briefcaseId] = array();
					$ds1[$transactionId][$briefcaseId]['rawMarks'] = $rawMarks;
					$ds1[$transactionId][$briefcaseId]['gradeId'] = $gradeId;
					$ds1[$transactionId][$briefcaseId]['maximumScore'] = $rawResultsFile1->getMaximumScore();
				} catch (Exception $e)	{
					continue;
				}
			}
		}
		//Step 6: Cleaning the dataStructure 
		$tempDs1 = array();
		foreach ($ds1 as $transactionId => $briefcaseArray1)	{
			$tempBriefcaseArray1 = array();
			foreach ($briefcaseArray1 as $briefcaseId => $dataArray1)	{
				if ((trim($dataArray1['rawMarks']) != "") && (trim($dataArray1['gradeId']) != ""))	{
					$tempBriefcaseArray1[$briefcaseId] = array();
					$tempBriefcaseArray1[$briefcaseId]['rawMarks'] = $dataArray1['rawMarks'];
					$tempBriefcaseArray1[$briefcaseId]['gradeId'] = $dataArray1['gradeId'];
					$tempBriefcaseArray1[$briefcaseId]['maximumScore'] = $dataArray1['maximumScore'];
				}
			}
			if (sizeof($tempBriefcaseArray1) > 0)	{
				$tempDs1[$transactionId] = $tempBriefcaseArray1;
			}
		}
		//Step 7: Assign Back everything to the original ds1 variable
		$ds1 = $tempDs1;
		if (sizeof($ds1) == 0) $ds1 = null;
		return $ds1;
	}
	public function showMyContinuousResults($profile1, $resultsFolder, $displayList1, $controlFlags)	{
		//Note profile1->extraFilter will be used
		$extraFilter = $profile1->getExtraFilter();
		$ds1 = $this->getMyContinuousResultsDataStructure($profile1, $resultsFolder);
		if (is_null($ds1)) return null;
		$student1 = $this;
		$technicalDataStructure1 = $profile1->getExtraFilter();
		$profile1->setExtraFilter($extraFilter); //Restore the original value
		
		/*
		DataStructure has the following format 
			list[cummulativeSemester][resultsId][transactionId]['rawMarks'] = marks [ie 80]
			list[cummulativeSemester][resultsId][transactionId]['gradeId'] = grades [ie A+]
			list[0][0][0]['rawMarks'] = 0 
			list[0][0][0]['gradeId'] = Technical Sup Info 
		*/
		$resultsUI = "<div style=\"z-index: 0;\" class=\"ui-sys-tabs\">";
		$tabHeader ="<ul style=\"z-index: 1;\">";
		$tabBody = "";
		$tabPrefix = "__zoomtong_company_limited_by_written_by_ndimangwa_fadhili_ngoya_";
		foreach ($ds1 as $cummulativeSemester => $resultsArray1)	{
			$yearAndSemesterArr = System::getYearAndSemesterFromACummulativeSemester($cummulativeSemester, $profile1);
			if (is_null($yearAndSemesterArr)) continue;
			$year = $yearAndSemesterArr['year'];
			$semester = $yearAndSemesterArr['semester'];
			$titleText = System::scriptNumberAdjustment($year)." year, ".System::scriptNumberAdjustment($semester)." semester"."  (Semester Count is $cummulativeSemester)";
			$myTabReference = $tabPrefix.$cummulativeSemester;
			$tabHeader .= "<li><a href=\"#$myTabReference\">$titleText</a></li>";
			$tabBody .= "<div id=\"$myTabReference\">";
			//We need to add our accordions inside the tabBody 
			$tabBody .= "<div style=\"z-index: 0;\" class=\"ui-sys-accordion\">";
			foreach ($resultsArray1 as $resultsId => $transactionArray1)	{
				$results1 = new Results($this->database, $resultsId, $this->conn);
				$titleText = "";
				if (! is_null($results1->getExamination())) $titleText = $results1->getExamination()->getExaminationName()." (".$results1->getExamination()->getExaminationCode().")";
				$tabBody .= "<h3 style=\"z-index: 1;\">$titleText</h3><div style=\"z-index: 1;\"><table class=\"pure-table pure-table-horizontal\"><thead><tr><th></th><th>Status</th><th>Module/Course Title</th><th>Marks</th><th>Grade</th><th>Grade Point</th><th>Credits</th><th>Module Points</th></tr></thead><tbody>";
				$transactionCount = 0;
				foreach ($transactionArray1 as $transactionId => $marksDataArray1)	{
					$transactionCount++;
					$rawMarks = $marksDataArray1['rawMarks'];
					$grade1 = null;
					$transaction1 = null;
					try {
						$grade1 = new Grade($this->database, $marksDataArray1['gradeId'], $this->conn);
						$transaction1 = new CourseAndSubjectTransaction($this->database, $transactionId, $this->conn);
					} catch (Exception $e)	{
						continue;
					}
					if (is_null($grade1)) continue;
					if (is_null($transaction1)) continue;
					$bgcolor = "blue";
					if ($grade1->isIncomplete())	{
						$bgcolor = "gold";
					} else if ($grade1->isFailed())	{
						$bgcolor = "red";
					}
					$subject1 = $transaction1->getSubject();
					if (is_null($subject1)) continue;
					$subjectName = $subject1->getSubjectName()."(".$subject1->getSubjectCode().")";
					$gradeName = $grade1->getGradeName();
					$gradePoint = $grade1->getGradePoint();
					/*$subjectCredits = $subject1->getTotalUnits();*/
					$subjectCredits = $transaction1->getCreditHours();
					$modulePoints = floatval($gradePoint) * floatval($subjectCredits);
					$modulePoints = round($modulePoints, 2);
					$tabBody .= "<tr><td>$transactionCount</td><td><span style=\"background-color: $bgcolor;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>$subjectName</td><td>$rawMarks</td><td>$gradeName</td><td>$gradePoint</td><td>$subjectCredits</td><td>$modulePoints</td></tr>";					
				}
				$tabBody .= "</tbody></table><br/><div class=\"ui-sys-inline-controls-center\">";
				$technicalInfoDataStructure1 = $this->getMyTechnicalResultsDataStructure($profile1, $resultsFolder, $resultsId);
				if (! is_null($technicalInfoDataStructure1))	{
					if (isset($technicalInfoDataStructure1[$cummulativeSemester][$resultsId]['technical']))	{
						$technicalData = $technicalInfoDataStructure1[$cummulativeSemester][$resultsId]['technical'];
						$commentText = "BEFORE SUPPLIMENTARY";
						if ($technicalInfoDataStructure1[$cummulativeSemester][$resultsId]['afterSupplimentary'] == ResultsGroup::$__IS_AFTER_SUPPLIMENTARY) $commentText="AFTER SUPPLIMENTARY";
						$technicalMessage = "";
						if ($technicalData == ResultsGroup::$__RESULTS_DISQUALIFIED)	{
							$technicalMessage = "<b>($commentText): FAILED</b>";
						} else if ($technicalData == ResultsGroup::$__RESULTS_FAILED)	{
							$technicalMessage = "<b>($commentText): DISQUALIFIED</b>";
						}
						$tabBody .= $technicalMessage; 
					}
				}
				$tabBody .= "</div><br/><div style=\"\">";
				if (! is_null($technicalDataStructure1) && isset($technicalDataStructure1[$cummulativeSemester][$resultsId]))	{
					$tabBody .= "<br/><table class=\"pure-table pure-table-horizontal\" style=\"font-size: 0.9em;\"><thead>";
					$tabBody .= "<tr><th colspan=\"4\" style=\"text-align: center;\">Technical Information</th></tr>";
					$tabBody .= "<tr><th></th><th></th><th>Module/Subject</th><th>Comment</th></tr>";
					$tabBody .= "</thead><tbody>";
					$rowCount = 0;
					$technicalDataStructureForSemesterAndResults1 = $technicalDataStructure1[$cummulativeSemester][$resultsId];
					foreach ($technicalDataStructureForSemesterAndResults1 as $transactionId => $cleared)	{
						$rowCount++;
						$commentText = "No Information";
						$bgcolor = "";
						if (intval($cleared) == ResultsGroup::$__RESULTS_DISQUALIFIED)	{
							$commentText = "Technically Disqualified (Core Module)";
							$bgcolor = "gold";
						} else if (intval($cleared) == ResultsGroup::$__RESULTS_FAILED)	{
							$commentText = "Technically Failed (General Module)";
							$bgcolor = "red";
						} else if (intval($cleared) == ResultsGroup::$__RESULTS_CLEARED)	{
							$commentText = "Technically Passed";
							$bgcolor = "blue";
						}
						$transaction1 = new CourseAndSubjectTransaction($this->database, $transactionId, $this->conn);
						$subjectName = $transaction1->getSubject()->getSubjectName()." (".$transaction1->getSubject()->getSubjectCode().")";
						$tabBody .= "<tr><td>$rowCount</td><td><span style=\"background-color: $bgcolor;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>$subjectName</td><td>$commentText</td></tr>";
					}
					$tabBody .= "</tbody></table>";
				}
				$tabBody .= "</div></div>";
			}
			$tabBody .= "</div></div>";
		}
		$tabHeader .= "</ul>";
		$resultsUI .= $tabHeader.$tabBody;
		$resultsUI .= "</div>";
		return $resultsUI;
	}
	public function getMyTechnicalResultsDataStructure($profile1, $resultsFolder, $resultsId)	{
		/*
		RETURN: ds[cummulativeSemester][resultsId]['technical'] = ResultsGroup::$__CLEARED/FAILED/DISQUALIFIED/0
				ds[cummulativeSemester][resultsId]['afterSupplimentary'] = ResultsGroup::$__IS_AFTER_SUPPLIMENTARY
		*/
		$student1 = $this;
		$results1 = new Results($this->database, $resultsId, $this->conn);
		$filename = $resultsFolder.$results1->getRawMarksCSVFile();
		if (! file_exists($filename)) Object::shootException("Results File Does Not Exists");
		$resultsFile1 = new ResultsFile($this->database, $filename, $this->conn);
		$dataLine1 = $resultsFile1->getStudentResultsDataLine($this->studentId);
		if (is_null($dataLine1)) return null;
		$group1 = $results1->getGroup();
		if (is_null($group1)) Object::shootException("The Group for the results were not found");
		$currentYear = 0;
		$currentYear = $group1->getYear();
		$currentSemester = 0;
		if (is_null($results1->getExamination())) Object::shootException("There is no examination for the results");
		$examination1 = $results1->getExamination();
		//If Primary/Supplimentary put it here 
		$currentSemester = $examination1->getSemester();
		$cummulativeSemester = System::getCummulativeSemester($currentYear, $currentSemester, $profile1);
		$ds1 = array();
		$ds1[$cummulativeSemester] = array();
		$ds1[$cummulativeSemester][$resultsId] = array();
		$ds1[$cummulativeSemester][$resultsId]['technical'] = 0;
		$ds1[$cummulativeSemester][$resultsId]['afterSupplimentary'] = 0;
		if ($group1->isAfterSupplimentary()) $ds[$cummulativeSemester][$resultsId]['afterSupplimentary'] = ResultsGroup::$__IS_AFTER_SUPPLIMENTARY;
		if ($dataLine1->isDisqualified())	{
			$ds1[$cummulativeSemester][$resultsId]['technical'] = ResultsGroup::$__RESULTS_DISQUALIFIED;
		} else if ($dataLine1->isFailed())	{
			$ds1[$cummulativeSemester][$resultsId]['technical'] = ResultsGroup::$__RESULTS_FAILED;
		} else if ($dataLine1->isCleared())	{
			$ds1[$cummulativeSemester][$resultsId]['technical'] = ResultsGroup::$__RESULTS_CLEARED;
		} else {
			$ds1 = null;
		}
		return $ds1;
	}
	public function getMyContinuousResultsDataStructure($profile1, $resultsFolder)	{
		/*
		Note for Non Graduated Students Only, a Graduated Student is offered a transcript only 
		for only ResultsGroup which are not locked only 
		return 	
				list[cummulativeSemester][resultsId][transactionId]['rawMarks'] = marks [ie 80]
				list[cummulativeSemester][resultsId][transactionId]['gradeId'] = grades [ie A+]
				or return null 
				
			The above dataStructure is achieved by two dataStructures 
			1. list[cummulativeSemester][index]['transactionId']
				...............................['rawMarks']
				...............................['gradeId']
				AND 
			2. list[cummulativeSemester][resultsId][index] = index  , called resultsDs1
			//You can pack some data on $profile1->setExtraFilter to return to the calling function 
			You can format technicalDs1[cummulativeSemester][resultsId][transactionId] = cleared
		*/ 
		//Collecting Extra Information 
		$student1 = $this;
		if ($student1->isAlreadyGraduated()) return null;
		//Step 1: Get Subject List for this Student
		$subjectListDs1 = $this->getMySubjectListDataStructure($profile1);
		//Pick All semester even if it is current one what matters is the group is locked or not 
		if (is_null($subjectListDs1)) return null;
		//Step 2: Preparing data Structures
		$resultsDs1 = array();
		foreach ($subjectListDs1 as $cummulativeSemester => $subjectDataArray1)	{
			$resultsDs1[$cummulativeSemester] = array();
			$technicalDs1[$cummulativeSemester] = array();
			foreach ($subjectDataArray1 as $transactionId)	{
				$index = sizeof($resultsDs1[$cummulativeSemester]);
				$resultsDs1[$cummulativeSemester][$index] = array();
				$resultsDs1[$cummulativeSemester][$index]['transactionId'] = $transactionId;
			}
		}
		if (sizeof($resultsDs1) == 0) return null;
		//Step 3: Get List Of Batches 
		$batchListArray1 = $student1->getListOfBatches();
		if (is_null($batchListArray1)) Object::shootException("Student does not belong to any Available Batches");
		//Step 4: Get Course 
		$course1 = $student1->getCourse();
		if (is_null($course1)) Object::shootException("There is no course attached to this Student");
		//Step 5: Initialize data Structure 
		$ds1 = array(); 
		$helperTechnicalDs1 = array(); //Carries Actual Output  resultsId
		$technicalDs1 = array(); //Track per Examination examinationId
		//Step 6: Now filling the data Structure 
		foreach ($resultsDs1 as $cummulativeSemester => $subjectDataArray1)	{
			$yearAndSemesterArr = System::getYearAndSemesterFromACummulativeSemester($cummulativeSemester, $profile1);
			$year = $yearAndSemesterArr['year'];
			$semester = $yearAndSemesterArr['semester'];
			$ds1[$cummulativeSemester] = array();
			$helperTechnicalDs1[$cummulativeSemester] = array();
			$technicalDs1[$cummulativeSemester] = array();
			//Traverse all batches for this student, the last one can overwrite the previous
			foreach ($batchListArray1 as $batch1)	{
				$resultsGroup1 = null;
				try {
					$batchId = AccademicYear::getResultsOfTheBatchForTheYearOfStudy($this->database, $this->conn, $batch1->getAccademicYearId(), $year);
					$resultsGroupId = ResultsGroup::getResultsGroupFromCourseBatchYearAndSemester($this->database, $this->conn, $course1->getCourseId(), $batchId, $year, $semester);
					$resultsGroup1 = new ResultsGroup($this->database, $resultsGroupId, $this->conn);
				} catch (Exception $e)	{
					continue;
				}
				if (is_null($resultsGroup1)) continue;
				if ($resultsGroup1->isResultsLocked()) continue; // We are dealing with Non Locked Results 
				$resultsList1 = ResultsGroup::getResultsBelongingToAGroup($this->database, $this->conn, $resultsGroup1->getGroupId(), false);
				if (is_null($resultsList1)) continue;
				foreach ($resultsList1 as $resultsId)	{
					$results1 = new Results($this->database, $resultsId, $this->conn);
					//You should deal with results eligible for publication only
					if (! $results1->isEligibleForPublication()) continue;
					$rawResultsFile1 = $results1->getRawMarksResultsFile($resultsFolder);
					if (is_null($rawResultsFile1)) continue;
					$gradedResultsFile1 = $results1->getGradedMarksResultsFile($resultsFolder);
					if (is_null($gradedResultsFile1)) continue;
					$ds1[$cummulativeSemester][$results1->getResultsId()] = array();
					$helperTechnicalDs1[$cummulativeSemester][$results1->getResultsId()] = array();
					$examinationId = $results1->getExamination()->getExaminationId();
					$technicalDs1[$cummulativeSemester][$examinationId] = array();
					//Load DataLine for this student, just use raw Marks, just for technical Info collection 
					$studentDataLine1 = $rawResultsFile1->getStudentResultsDataLine($student1->getStudentId());
					if (! $studentDataLine1->isDisplayResultsEnable()) continue; // The student is allowed to display results
					foreach ($subjectDataArray1 as $subjectData1)	{
						$transactionId = $subjectData1['transactionId'];
						if (! isset($technicalDs1[$cummulativeSemester][$examinationId][$transactionId]))	{
							$technicalDs1[$cummulativeSemester][$examinationId][$transactionId] = 0;
						}
						try {
							//Get Input Symbol 
							if (! is_null($studentDataLine1))	{
								$clearedDetailsDs1 = $studentDataLine1->getClearedDetails();
								if (! is_null($clearedDetailsDs1) && isset($clearedDetailsDs1[$transactionId]))	{
									if (($technicalDs1[$cummulativeSemester][$examinationId][$transactionId] == ResultsGroup::$__RESULTS_FAILED) && (intval($clearedDetailsDs1[$transactionId]) == ResultsGroup::$__RESULTS_FAILED))	{
										//Consecutive fails hold this student he/she has to clear without moving forward 
										$technicalDs1[$cummulativeSemester][$examinationId][$transactionId] = ResultsGroup::$__RESULTS_DISQUALIFIED;
									} else if ($technicalDs1[$cummulativeSemester][$examinationId][$transactionId] == ResultsGroup::$__RESULTS_CLEARED)	{
										//You were Already Cleared, Do Nothing Enjoy
									} else {
										$technicalDs1[$cummulativeSemester][$examinationId][$transactionId] = intval($clearedDetailsDs1[$transactionId]);
									}
									//Now store that in a real Array 
									$helperTechnicalDs1[$cummulativeSemester][$resultsId][$transactionId] = $technicalDs1[$cummulativeSemester][$examinationId][$transactionId];
								}
							}
							//End with transaction Loading
							$rawMarks = $rawResultsFile1->getMarksAt($student1->getStudentId(), $transactionId);
							$gradeId = $gradedResultsFile1->getMarksAt($student1->getStudentId(), $transactionId);
							//Now put data 
							$ds1[$cummulativeSemester][$results1->getResultsId()][$transactionId] = array();
							$ds1[$cummulativeSemester][$results1->getResultsId()][$transactionId]['rawMarks'] = $rawMarks;
							$ds1[$cummulativeSemester][$results1->getResultsId()][$transactionId]['gradeId'] = $gradeId; 
						} catch (Exception $e)	{
							continue;
						}
					}
				}
			}
		}
		//Step 7: Cleaning the Array 
		$tempDs1 = array();
		$tempTechnicalDs1 = array();
		foreach ($ds1 as $cummulativeSemester => $resultsArray1)	{
			$tempResultsArray1 = array();
			$tempTechnicalCummulativeSemester1 = array();
			foreach ($resultsArray1 as $resultsId => $transactionArray1)	{
				$tempTransactionArray1 = array();
				$tempTechnicalTransaction1 = array();
				foreach ($transactionArray1 as $transactionId => $transactionDataArray1)	{
					if ((trim($transactionDataArray1['rawMarks']) != "") && (trim($transactionDataArray1['gradeId']) != ""))	{
						$tempTransactionArray1[$transactionId] = array();
						$tempTransactionArray1[$transactionId]['rawMarks'] = $transactionDataArray1['rawMarks'];
						$tempTransactionArray1[$transactionId]['gradeId'] = $transactionDataArray1['gradeId'];
						//Only those whose grades are collected we can be sure, they grades 
						if (isset($helperTechnicalDs1[$cummulativeSemester]) && isset($helperTechnicalDs1[$cummulativeSemester][$resultsId]) && isset($helperTechnicalDs1[$cummulativeSemester][$resultsId][$transactionId]) && ($helperTechnicalDs1[$cummulativeSemester][$resultsId][$transactionId] != ResultsGroup::$__RESULTS_CLEARED))	{
							//Drop records which were not touched and those which are already cleared 
							$tempTechnicalTransaction1[$transactionId] = $helperTechnicalDs1[$cummulativeSemester][$resultsId][$transactionId];
						}
					}
				}
				if (sizeof($tempTransactionArray1) > 0)	{
					$tempResultsArray1[$resultsId] = $tempTransactionArray1;
				}
				if (sizeof($tempTechnicalTransaction1) > 0)	{
					$tempTechnicalCummulativeSemester1[$resultsId] = $tempTechnicalTransaction1;
				}
			}
			if (sizeof($tempResultsArray1) > 0)	{
				$tempDs1[$cummulativeSemester] = $tempResultsArray1;
			}
			if (sizeof($tempTechnicalCummulativeSemester1) > 0)	{
				$tempTechnicalDs1[$cummulativeSemester] = $tempTechnicalCummulativeSemester1;
			}
		}
		$ds1 = $tempDs1;
		//$technicalDs1 = $tempTechnicalDs1;
		$technicalDs1 = $tempTechnicalDs1;
		if (sizeof($technicalDs1) == 0) $technicalDs1 = null;
		$profile1->setExtraFilter($technicalDs1);
		if (sizeof($ds1) == 0) $ds1 = null;
		return $ds1;	
	}
	public function showMyCompiledResults($profile1, $resultsFolder, $displayList1, $controlFlags)	{
		//Display List is used to collect information back to the calling function 
		/*
		Since this function return string to be displayed an accordion ,
		an empty DisplayList object is passed and it is returned with data
		controlFlags ie showRawMarks etc
		*/
		$ds1 = $this->getMyCompiledResultsDataStructure($profile1, $resultsFolder);
		if (is_null($ds1)) return null;
		$subjectDs1 = $this->getMySubjectListDataStructure($profile1);
		if (is_null($subjectDs1)) return null;
		$gpaDs1 = $this->getMyGPADataStructure($subjectDs1, $ds1);
		if (is_null($gpaDs1)) return null;
		$overalGPADs1 = $this->getMyOveralGPADataStructure($gpaDs1);
		if (is_null($overalGPADs1)) return null;
		$newGPAStructure1 = $profile1->getExtraFilter();
		$student1 = $this;
		$course1 = $student1->getCourse();
		if (is_null($course1)) Object::shootException("Reference course for student were not found");
		$level1 = $course1->getEducationLevel();
		if (is_null($level1)) Object::shootException("Reference EducationLevel for student were not found");
		$accordion1 = "<div style=\"z-index: 0;\" class=\"ui-sys-accordion\">";
		//for ($i = 1; $i <= sizeof($ds1); $i++)	{
		foreach ($ds1 as $i => $transactionBlockArr1)	{
			$cummulativeSemester = $i;
			$yearAndSemesterArr = System::getYearAndSemesterFromACummulativeSemester($i, $profile1);
			if (is_null($yearAndSemesterArr)) continue;
			$year = $yearAndSemesterArr['year'];
			$semester = $yearAndSemesterArr['semester'];
			$titleText = System::scriptNumberAdjustment($year)." year, ".System::scriptNumberAdjustment($semester)." semester"."  (Semester Count is $i)";
			$accordion1 .= "<h3 style=\"z-index: 1;\">$titleText</h3><div style=\"z-index: 1;\"><table class=\"pure-table\"><thead><tr><th></th><th>Status</th><th>Module/Course Title</th><th>Units</th><th>Marks</th><th>Grade</th><th>Grade Point</th><th>Module Points</th></tr></thead><tbody>";
			//$transactionBlockArr1 = $ds1[$i];
			for ($index = 0; $index < sizeof($transactionBlockArr1); $index++)	{
				$transactionArr1 = $transactionBlockArr1[$index];
				$transactionId = $transactionArr1['transactionId'];
				$gradeId = $transactionArr1['gradeId'];
				if (is_null($gradeId)) continue;
				$rawMarks = $transactionArr1['rawMarks'];
				$transaction1 = new CourseAndSubjectTransaction($this->database, $transactionId, $this->conn);
				$grade1 = new Grade($this->database, $gradeId, $this->conn);
				$subjectName = "Unknown";
				$subjectCredits = 0;
				$subject1 = $transaction1->getSubject();
				if (! is_null($subject1))	{
					$subjectName = $subject1->getSubjectName()."(".$subject1->getSubjectCode().")";
				}
				$gradeName = $grade1->getGradeName();
				$gradePoint = $grade1->getGradePoint();
				$statusColor = "blue";
				if ($grade1->isIncomplete()) {
					$statusColor = "gold"; 
				} else if ($grade1->isFailed())	{
					$statusColor = "red";
				}
				$subjectUnits = $transaction1->getCreditHours();
				$modulePoints = floatval($gradePoint) * floatval($subjectUnits);
				$modulePoints = round($modulePoints, 2);
				$count = $index + 1;
				$accordion1 .= "<tr><td>$count</td><td><span style=\"background-color: $statusColor;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>$subjectName</td><td>$subjectUnits</td><td>$rawMarks</td><td>$gradeName</td><td>$gradePoint</td><td>$modulePoints</td></tr>";
			}
			$gpa = "##";
			$comment = "No Information";
			$accordion1 .= "</tbody><tfoot>";
			$footer = "<tr><td colspan=\"8\"></td></tr>";
		/*	if (isset($gpaDs1[$i]))	{
				$footer = "";
				$gpa = $gpaDs1[$i]['gpa'];
				$awardId = $gpaDs1[$i]['awardId'];
				$comment = "FAILED";
				if ($gpaDs1[$i]['cleared']) $comment = "PASSED";
				$awardName = "";
				if (! is_null($awardId))	{
					$award1 = new ClassOfAward($this->database, $awardId, $this->conn);
					if ($award1->isFailed())	$comment = "DISCONTINUED";
					$awardName = "(".$award1->getAwardName().")";
				}
				//Now Fetch gpa, totalUnits, totalModulePoints and classOfAward has to be calculated 
				$gpa = 0.0;
				$totalUnits = 0.0;
				$totalModulePoints = 0.0;
				$awardName = "No Award";
				$comment = "FAILED";
				try {
					
				} catch (Exception $e)	{
					
				}
				$totalUnits = $gpaDs1[$i]['totalUnits'];
				$totalModulePoints = $gpaDs1[$i]['totalModulePoints'];
				$footer .= "<tr style=\"font-size: 0.9em; font-weight: bold; text-align: center;\"><td colspan=\"3\">TOTAL</td><td>$totalUnits</td><td colspan=\"3\"></td><td>$totalModulePoints</td></tr>";
				$footer .= "<tr style=\"font-size: 0.9em; font-weight: bold; text-align: center;\"><td colspan=\"8\">$comment , GPA = $gpa &nbsp;&nbsp; $awardName</td></tr>";
			}*/
			//New GPA Style 
			if (! is_null($newGPAStructure1) && isset($newGPAStructure1[$cummulativeSemester]) && (sizeof($newGPAStructure1[$cummulativeSemester]) > 0))	{
				//We are sure we have data 
				$resultsGroupId = null;
				foreach ($newGPAStructure1[$cummulativeSemester] as $groupId)	{
					$resultsGroupId = $groupId; //For now let us take the last Group Id 
				}
				$gpa = 0.0;
				$totalUnits = 0.0;
				$totalModulePoints = 0.0;
				$awardName = "No Award";
				$comment = "No Information";
				try {
					if (is_null($resultsGroupId)) Object::shootException("Reference Group were not found");
					$group1 = new ResultsGroup($this->database, $resultsGroupId, $this->conn);
					$filename = $resultsFolder.$group1->getGradedMarksCSVFile();
					$gradedMarksCSVFile1 = new ResultsFile($this->database, $filename, $this->conn);
					//Extract Data 
					$studentDataLine1 = $gradedMarksCSVFile1->getStudentResultsDataLine($student1->getStudentId());
					$gpa = $studentDataLine1->getGPAForSemester($semester);
					$totalUnits = $studentDataLine1->getTotalUnitsForSemester($semester);
					$totalModulePoints = $studentDataLine1->getTotalModulePointsForSemester($semester);
					//Dealing with classOfAward 
					$awardId = ClassOfAward::getClassOfAwardFromGPAAndEducationLevel($this->database, $this->conn, $gpa, $level1->getLevelId());
					if (! is_null($awardId))	{
						$award1 = new ClassOfAward($this->database, $awardId, $this->conn);
						if ($award1->isFailed())	$comment = "DISCONTINUED";
						$awardName = "(".$award1->getAwardName().")";
					}
					$comment = "PASS";
					if ($studentDataLine1->isFailed()) $comment = "FAILED";
					$footer = "";
					$footer .= "<tr style=\"font-size: 0.9em; font-weight: bold; text-align: center;\"><td colspan=\"3\">TOTAL</td><td>$totalUnits</td><td colspan=\"3\"></td><td>$totalModulePoints</td></tr>";
					$footer .= "<tr style=\"font-size: 0.9em; font-weight: bold; text-align: center;\"><td colspan=\"8\">$comment , GPA = $gpa &nbsp;&nbsp; $awardName</td></tr>";
 				} catch (Exception $e)	{
					//Do Nothing
				}
			}
			$accordion1 .= $footer."</tfoot></table></div>";
		}
		//$accordion1 .= "</div><div style=\"margin-top: 2px; margin-bottom: 2px; border: 1px dotted black; padding: 1px; padding-left: 32px;\">";
		$accordion1 .= "</div>";
		/*$gpa = $overalGPADs1['gpa'];
		$isCleared = $overalGPADs1['cleared'];
		$isDisqualified = $overalGPADs1['disqualified'];
		$awardId = $overalGPADs1['awardId'];
		$awardName = "OVERALL GPA is <b>$gpa</b>";;
		if (! is_null($awardId))	{
			$award1 = new ClassOfAward($this->database, $awardId, $this->conn);
			$awardName = $awardName."  (<b><i>".$award1->getAwardName()."</i></b>)";			
		}
		$commentText = "COMMENT : <b>You have Passed and You have cleared all the Subjects</b>";
		if ($isDisqualified) {
			$commentText = "COMMENT : <b style=\"background-color: red; color: white;\">You have beed Disqualified (DISCO)</b>";
		} else if (! $isCleared)	{
			$commentText = "COMMENT : <b style=\"\">You have Passed, however you have some fails in some of your subjects/modules</b>";
		}
		$accordion1 .= "$awardName <br/> $commentText</div>";*/
		
		return $accordion1;
	}
	public function getMyCompiledResultsDataStructure($profile1, $resultsFolder)	{
		/*
		Note for Non Graduated Students Only, a Graduated Student is offered a transcript only 
		for only ResultsGroup which are locked only 
		return 	list[cummulativeSemester][index]['transactionId'] = transactionId
				list[cummulativeSemester][index]['rawMarks'] = marks [ie 80]
				list[cummulativeSemester][index]['gradeId'] = grades [ie A+]
				list[cummulativeSemester][index][transactionId] = gradeId 
				or return null 
				
				YOU need to return via profile1->extraFilter , ds[cummulativeSemester][batchId] = resultsGroupId
		*/
		$student1 = $this; 
		//if ($student1->isAlreadyGraduated()) return null; //We need Non Graduated Students --removed it is used for transcripts
		//Step 1: Get Subject List for this Student
		$subjectListDs1 = $this->getMySubjectListDataStructure($profile1);
		//Pick All semester even if it is current one what matters is the group is locked or not 
		if (is_null($subjectListDs1)) return null;
		//Step 2: Preparing data Structure 
		$ds1 = array();
		foreach ($subjectListDs1 as $cummulativeSemester => $subjectDataArray1)	{
			$ds1[$cummulativeSemester] = array();
			foreach ($subjectDataArray1 as $index => $transactionId)	{
				//Changed to match indices
				$ds1[$cummulativeSemester][$index] = array();
				$ds1[$cummulativeSemester][$index]['transactionId'] = $transactionId;
				$ds1[$cummulativeSemester][$index]['rawMarks'] = "";
				$ds1[$cummulativeSemester][$index]['gradeId'] = null;
				$ds1[$cummulativeSemester][$index][$transactionId] = null; //Used for GPA
			}
		}
		//Step 3: Get BatchList Array 
		$batchListArray1 = $student1->getListOfBatches();
		if (is_null($batchListArray1)) Object::shootException("Student does not belong to any Available Batches");
		//Step 4: Get Course 
		$course1 = $student1->getCourse();
		if (is_null($course1)) Object::shootException("There is not related course attached to this Student");
		//ResultsGroup data Holder 
		$groupReference1 = array();
		//Step 5: Use My Data Structure to proceed 
		foreach ($ds1 as $cummulativeSemester => $subjectDataArray1)	{
			$yearAndSemesterArr = System::getYearAndSemesterFromACummulativeSemester($cummulativeSemester, $profile1);
			if (is_null($yearAndSemesterArr)) continue;
			$year = $yearAndSemesterArr['year'];
			$semester = $yearAndSemesterArr['semester'];
			$groupReference1[$cummulativeSemester] = array();
			//Traverse all batches for this student, the last one can overwrite the previous 
			foreach ($batchListArray1 as $batch1)	{
				$resultsGroupId = null;
				$resultsGroup1 = null;
				$correctStudentBatchId = 0;
				$id = 0;
				try {
					$batchId = AccademicYear::getResultsOfTheBatchForTheYearOfStudy($this->database, $this->conn, $batch1->getAccademicYearId(), $year);
					$correctStudentBatchId = $batchId;
					$resultsGroupId = ResultsGroup::getResultsGroupFromCourseBatchYearAndSemester($this->database, $this->conn, $course1->getCourseId(), $batchId, $year, $semester);
					$resultsGroup1 = new ResultsGroup($this->database, $resultsGroupId, $this->conn);
					$id = $resultsGroupId;
				} catch (Exception $e)	{
					continue;
				}
				if (is_null($resultsGroup1)) continue; 
				if (! $resultsGroup1->isEligibleForPublication()) continue; //We are dealing with Only Enabled Results 
				$rawResultsFile1 = $resultsGroup1->getRawMarksResultsFile($resultsFolder);
				if (is_null($rawResultsFile1)) continue;
				$rawResultsFile1 = $rawResultsFile1->getSemesterResultsFile($semester);
				if (is_null($rawResultsFile1)) continue;
				$gradedResultsFile1 = $resultsGroup1->getGradedMarksResultsFile($resultsFolder);
				if (is_null($gradedResultsFile1)) continue;
				$gradedResultsFile1 = $gradedResultsFile1->getSemesterResultsFile($semester);
				if (is_null($gradedResultsFile1)) continue;
				//Get DataLine for this Student 
				$studentDataLine1 = $rawResultsFile1->getStudentResultsDataLine($student1->getStudentId());
				if (! $studentDataLine1->isDisplayResultsEnable()) continue; // The student is allowed to display results
				//Save this resultsGroup 
				$groupReference1[$cummulativeSemester][$correctStudentBatchId] = $resultsGroup1->getGroupId(); 
				foreach ($subjectDataArray1 as $index => $subjectData1)	{
					$transactionId = $subjectData1['transactionId'];
					try {
						$rawMarks = $rawResultsFile1->getMarksAt($student1->getStudentId(), $transactionId);
						$gradeId = $gradedResultsFile1->getMarksAt($student1->getStudentId(), $transactionId);
						$ds1[$cummulativeSemester][$index]['rawMarks'] = $rawMarks;
						$ds1[$cummulativeSemester][$index]['gradeId'] = $gradeId;
						$ds1[$cummulativeSemester][$index][$transactionId] = $gradeId;
					} catch (Exception $e)	{
						continue;
					}
				}
			}
		} 
		//Step 6, you need to only records whose grade is not null 
		$newDs1 = array();
		foreach ($ds1 as $cummulativeSemester => $subjectDataArray1)	{
			$tempSubjectArray1 = array();
			foreach ($subjectDataArray1 as $subjectData1)	{
				if (! is_null($subjectData1['gradeId']))	{
					$tempSubjectArray1[sizeof($tempSubjectArray1)] = $subjectData1;
				}
			}
			if (sizeof($tempSubjectArray1) > 0)	{
				//There is something 
				$newDs1[$cummulativeSemester] = $tempSubjectArray1;
			}
		}
		$ds1 = $newDs1;
		if (sizeof($ds1) == 0) $ds1 = null;
		$profile1->setExtraFilter($groupReference1);
		return $ds1;		
	}
	public function isActive($profile1)	{
		//We need to make sure this student match the following 
		//1. belongs to the same Accademic Year as the System 
		//2. belong to the same semester as the system 
		$student1 = $this;
		return ((intval($student1->getCurrentSemester()) == intval($profile1->getCurrentSemester())) && ! is_null($profile1->getCurrentAccademicYear()) && ! is_null($student1->getCurrentAccademicYear()) && (intval($student1->getCurrentAccademicYear()->getAccademicYearNumber()) == intval($profile1->getCurrentAccademicYear()->getAccademicYearNumber())));
	}
	public function isInABatch($batchId) {
		//Simply just check existence of batchId in a listOfBatches
		$systemAccademicYear1 = new AccademicYear($this->database, $batchId, $this->conn);
		$isInABatch = false;
		if (is_null($this->listOfBatches)) return false;
		foreach ($this->listOfBatches as $batch1)	{
			if (intval($systemAccademicYear1->getAccademicYearNumber()) == intval($batch1->getAccademicYearNumber()))	{
				$isInABatch = true;
				if ($isInABatch) break;
			}
		}
		return $isInABatch;
	}
	public function isRepeating($batchId)	{
		//Found in this batch and it is not a batch he/she was admitted 
		if (! $this->isInABatch($batchId)) return false;
		return ($this->admissionBatch->getAccademicYearId() != $batchId);
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Student/occupation,text,1025;registrationNumber,text,1025;examinationNumber,text,1025;nativeplace,text,1025;disability,text,1025;postalAddress,text,1025;physicalAddress,text,1025;employed,boolean,1025;referenceNumber,text,1025;currentYear,text,1025;currentSemester,text,1025;applicationCounter,text,1025;XMLFile,text,1025;XMLFileChecksum,text,1025;formFourYear,text,1025;formFourIndex,text,1025;transcriptHash,text,1025;transcriptFile,text,1025;graduationYear,text,1025;extraFilter,text,1025;extraInformation,text,1025;flags,text,1025";
		$lineToView .= Login::getAvailableViewableColumns();
		$lineToView .= Country::getAvailableViewableColumns();
		$lineToView .= Denomination::getAvailableViewableColumns();
		$lineToView .= Course::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= AccademicYear::getAvailableViewableColumns();
		$lineToView .= AccademicYear::getAvailableViewableColumns();
		$lineToView .= AccademicYear::getAvailableViewableColumns();
		$lineToView .= AccademicYear::getAvailableViewableColumns();
		$lineToView .= AccademicYear::getAvailableViewableColumns();
		$lineToView .= CourseAndSubjectTransaction::getAvailableViewableColumns();
		//Customized
		$lineToView .= self::getCustomCSVHeaders();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "student";
	}
	public final static function getClassContextName()	{
		return "managestudent";
	}
	public final static function getUniqueStudentId($database, $conn)	{
		$query="SELECT studentId FROM students";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Student, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Student, None or Duplicate Row/Multiple Rows Found');
		list($studentId)=mysql_fetch_row($result);
		return $studentId;
	}
	public final static function add($database, $conn, $loginId, $occupation, $registrationNumber, $examinationNumber, $citizenshipId, $nativeplace, $disability, $denominationId, $postalAddress, $physicalAddress, $employed, $courseId, $referenceNumber, $registrationTime, $cyear, $csemester, $applicationCounter, $xmlFile, $xmlFileChecksum, $batchList, $admissionBatch, $admissionBatchList, $currentAccademicYear, $currentBatch, $formFourYear, $formFourIndex, $optionalTransactionList, $transcriptHash, $transcriptFile, $graduationYear, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO students (loginId, occupation, registrationNumber, examinationNumber, citizenshipId, nativeplace, disability, denominationId, postalAddress, physicalAddress, employed, courseId, referenceNumber, registrationTime, cyear, csemester, applicationCounter, xmlFile, xmlFileChecksum, batchList, admissionBatch, admissionBatchList, currentAccademicYear, currentBatch, formFourYear, formFourIndex, optionalTransactionList, transcriptHash, transcriptFile, graduationYear, extraFilter, extraInformation, flags) VALUES('$loginId', '$occupation', '$registrationNumber', '$examinationNumber', '$citizenshipId', '$nativeplace', '$disability', '$denominationId', '$postalAddress', '$physicalAddress', '$employed', '$courseId', '$referenceNumber', '$registrationTime', '$cyear', '$csemester', '$applicationCounter', '$xmlFile', '$xmlFileChecksum', '$batchList', '$admissionBatch', '$admissionBatchList', '$currentAccademicYear', '$currentBatch', '$formFourYear', '$formFourIndex', '$optionalTransactionList', '$transcriptHash', '$transcriptFile', '$graduationYear', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Student, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Student, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Student, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->studentId;
	}
	public function getStudentId() {
		return $this->studentId;
	}
	public function getLogin() {
		return $this->login;
	}
	public function setLogin($loginId) {
		if (! is_null($loginId))	{
			$this->addToUpdateList("loginId", $loginId);
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
	}
	public function getOccupation() {
		return $this->occupation;
	}
	public function setOccupation($occupation) {
		if (! is_null($occupation))	{
			$this->addToUpdateList("occupation", $occupation);
			$this->occupation = $occupation;
		}
	}
	public function getRegistrationNumber() {
		return $this->registrationNumber;
	}
	public function setRegistrationNumber($registrationNumber) {
		if (! is_null($registrationNumber))	{
			$this->addToUpdateList("registrationNumber", $registrationNumber);
			$this->registrationNumber = $registrationNumber;
		}
	}
	public function getExaminationNumber() {
		return $this->examinationNumber;
	}
	public function setExaminationNumber($examinationNumber) {
		if (! is_null($examinationNumber))	{
			$this->addToUpdateList("examinationNumber", $examinationNumber);
			$this->examinationNumber = $examinationNumber;
		}
	}
	public function getCitizenship() {
		return $this->citizenship;
	}
	public function setCitizenship($citizenshipId) {
		if (! is_null($citizenshipId))	{
			$this->addToUpdateList("citizenshipId", $citizenshipId);
			$this->citizenship = null;
			try	{
				$this->citizenship = new Country($this->database, $citizenshipId, $this->conn);
			} catch (Exception $e)	{
				$this->citizenship = null;
			}
		}
	}
	public function getNativeplace() {
		return $this->nativeplace;
	}
	public function setNativeplace($nativeplace) {
		if (! is_null($nativeplace))	{
			$this->addToUpdateList("nativeplace", $nativeplace);
			$this->nativeplace = $nativeplace;
		}
	}
	public function getDisability() {
		return $this->disability;
	}
	public function setDisability($disability) {
		if (! is_null($disability))	{
			$this->addToUpdateList("disability", $disability);
			$this->disability = $disability;
		}
	}
	public function getDenomination() {
		return $this->denomination;
	}
	public function setDenomination($denominationId) {
		if (! is_null($denominationId))	{
			$this->addToUpdateList("denominationId", $denominationId);
			$this->denomination = null;
			try	{
				$this->denomination = new Denomination($this->database, $denominationId, $this->conn);
			} catch (Exception $e)	{
				$this->denomination = null;
			}
		}
	}
	public function getPostalAddress() {
		return $this->postalAddress;
	}
	public function setPostalAddress($postalAddress) {
		if (! is_null($postalAddress))	{
			$this->addToUpdateList("postalAddress", $postalAddress);
			$this->postalAddress = $postalAddress;
		}
	}
	public function getPhysicalAddress() {
		return $this->physicalAddress;
	}
	public function setPhysicalAddress($physicalAddress) {
		if (! is_null($physicalAddress))	{
			$this->addToUpdateList("physicalAddress", $physicalAddress);
			$this->physicalAddress = $physicalAddress;
		}
	}
	public function isEmployed() {
		return $this->employed;
	}
	public function setEmployed($employed) {
		if (! is_null($employed))	{
			$this->addToUpdateList("employed", $employed);
			$this->employed = ($employed == "1");
		}
	}
	public function getCourse() {
		return $this->course;
	}
	public function setCourse($courseId) {
		if (! is_null($courseId))	{
			$this->addToUpdateList("courseId", $courseId);
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
	}
	public function getReferenceNumber() {
		return $this->referenceNumber;
	}
	public function setReferenceNumber($referenceNumber) {
		if (! is_null($referenceNumber))	{
			$this->addToUpdateList("referenceNumber", $referenceNumber);
			$this->referenceNumber = $referenceNumber;
		}
	}
	public function getRegistrationTime() {
		return $this->registrationTime;
	}
	public function setRegistrationTime($registrationTime) {
		if (! is_null($registrationTime))	{
			$this->addToUpdateList("registrationTime", $registrationTime);
			$this->registrationTime = null;
			try	{
				$this->registrationTime = new DateAndTime($this->database, $registrationTime, $this->conn);
			} catch (Exception $e)	{
				$this->registrationTime = null;
			}
		}
	}
	public function getCurrentYear() {
		return $this->currentYear;
	}
	public function setCurrentYear($cyear) {
		if (! is_null($cyear))	{
			$this->addToUpdateList("cyear", $cyear);
			$this->currentYear = $cyear;
		}
	}
	public function getCurrentSemester() {
		return $this->currentSemester;
	}
	public function setCurrentSemester($csemester) {
		if (! is_null($csemester))	{
			$this->addToUpdateList("csemester", $csemester);
			$this->currentSemester = $csemester;
		}
	}
	public function getApplicationCounter() {
		return $this->applicationCounter;
	}
	public function setApplicationCounter($applicationCounter) {
		if (! is_null($applicationCounter))	{
			$this->addToUpdateList("applicationCounter", $applicationCounter);
			$this->applicationCounter = $applicationCounter;
		}
	}
	public function getXMLFile() {
		return $this->XMLFile;
	}
	public function setXMLFile($xmlFile) {
		if (! is_null($xmlFile))	{
			$this->addToUpdateList("xmlFile", $xmlFile);
			$this->XMLFile = $xmlFile;
		}
	}
	public function getXMLFileChecksum() {
		return $this->XMLFileChecksum;
	}
	public function setXMLFileChecksum($xmlFileChecksum) {
		if (! is_null($xmlFileChecksum))	{
			$this->addToUpdateList("xmlFileChecksum", $xmlFileChecksum);
			$this->XMLFileChecksum = $xmlFileChecksum;
		}
	}
	public function getListOfBatches() {
		return $this->listOfBatches;
	}
	public function setListOfBatches($batchList) {
		if (! is_null($batchList))	{
			$this->addToUpdateList("batchList", $batchList);
			$this->listOfBatches = array();
			$idListArr = explode(",", $batchList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new AccademicYear($this->database, $id, $this->conn);
					$this->listOfBatches[sizeof($this->listOfBatches)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getAdmissionBatch() {
		return $this->admissionBatch;
	}
	public function setAdmissionBatch($admissionBatch) {
		if (! is_null($admissionBatch))	{
			$this->addToUpdateList("admissionBatch", $admissionBatch);
			$this->admissionBatch = null;
			try	{
				$this->admissionBatch = new AccademicYear($this->database, $admissionBatch, $this->conn);
			} catch (Exception $e)	{
				$this->admissionBatch = null;
			}
		}
	}
	public function getListOfAdmissionBatches() {
		return $this->listOfAdmissionBatches;
	}
	public function setListOfAdmissionBatches($admissionBatchList) {
		if (! is_null($admissionBatchList))	{
			$this->addToUpdateList("admissionBatchList", $admissionBatchList);
			$this->listOfAdmissionBatches = array();
			$idListArr = explode(",", $admissionBatchList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new AccademicYear($this->database, $id, $this->conn);
					$this->listOfAdmissionBatches[sizeof($this->listOfAdmissionBatches)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getCurrentAccademicYear() {
		return $this->currentAccademicYear;
	}
	public function setCurrentAccademicYear($currentAccademicYear) {
		if (! is_null($currentAccademicYear))	{
			$this->addToUpdateList("currentAccademicYear", $currentAccademicYear);
			$this->currentAccademicYear = null;
			try	{
				$this->currentAccademicYear = new AccademicYear($this->database, $currentAccademicYear, $this->conn);
			} catch (Exception $e)	{
				$this->currentAccademicYear = null;
			}
		}
	}
	public function getCurrentBatch() {
		return $this->currentBatch;
	}
	public function setCurrentBatch($currentBatch) {
		if (! is_null($currentBatch))	{
			$this->addToUpdateList("currentBatch", $currentBatch);
			$this->currentBatch = null;
			try	{
				$this->currentBatch = new AccademicYear($this->database, $currentBatch, $this->conn);
			} catch (Exception $e)	{
				$this->currentBatch = null;
			}
		}
	}
	public function getFormFourYear() {
		return $this->formFourYear;
	}
	public function setFormFourYear($formFourYear) {
		if (! is_null($formFourYear))	{
			$this->addToUpdateList("formFourYear", $formFourYear);
			$this->formFourYear = $formFourYear;
		}
	}
	public function getFormFourIndex() {
		return $this->formFourIndex;
	}
	public function setFormFourIndex($formFourIndex) {
		if (! is_null($formFourIndex))	{
			$this->addToUpdateList("formFourIndex", $formFourIndex);
			$this->formFourIndex = $formFourIndex;
		}
	}
	public function getOptionalTransactionList() {
		return $this->optionalTransactionList;
	}
	public function setOptionalTransactionList($optionalTransactionList) {
		if (! is_null($optionalTransactionList))	{
			$this->addToUpdateList("optionalTransactionList", $optionalTransactionList);
			$this->optionalTransactionList = array();
			$idListArr = explode(",", $optionalTransactionList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new CourseAndSubjectTransaction($this->database, $id, $this->conn);
					$this->optionalTransactionList[sizeof($this->optionalTransactionList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getTranscriptHash() {
		return $this->transcriptHash;
	}
	public function setTranscriptHash($transcriptHash) {
		if (! is_null($transcriptHash))	{
			$this->addToUpdateList("transcriptHash", $transcriptHash);
			$this->transcriptHash = $transcriptHash;
		}
	}
	public function getTranscriptFile() {
		return $this->transcriptFile;
	}
	public function setTranscriptFile($transcriptFile) {
		if (! is_null($transcriptFile))	{
			$this->addToUpdateList("transcriptFile", $transcriptFile);
			$this->transcriptFile = $transcriptFile;
		}
	}
	public function getGraduationYear() {
		return $this->graduationYear;
	}
	public function setGraduationYear($graduationYear) {
		if (! is_null($graduationYear))	{
			$this->addToUpdateList("graduationYear", $graduationYear);
			$this->graduationYear = $graduationYear;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT studentId FROM students";
		return $query;
	}
	public function __construct($database, $studentId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Student")) Object::shootException("Student System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $studentId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->studentId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Student")) Object::shootException("Student System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE students SET $setList WHERE studentId = '$this->studentId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Student, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Student")) Object::shootException("Student System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM students WHERE studentId = '$this->studentId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Student, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Student";
	}
	protected function getProperties()	{
		return "studentId=$this->studentId"."@occupation=$this->occupation"."@registrationNumber=$this->registrationNumber"."@examinationNumber=$this->examinationNumber"."@nativeplace=$this->nativeplace"."@disability=$this->disability"."@postalAddress=$this->postalAddress"."@physicalAddress=$this->physicalAddress"."@referenceNumber=$this->referenceNumber"."@currentYear=$this->currentYear"."@currentSemester=$this->currentSemester"."@applicationCounter=$this->applicationCounter"."@XMLFile=$this->XMLFile"."@XMLFileChecksum=$this->XMLFileChecksum"."@formFourYear=$this->formFourYear"."@formFourIndex=$this->formFourIndex"."@transcriptHash=$this->transcriptHash"."@transcriptFile=$this->transcriptFile"."@graduationYear=$this->graduationYear"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags"."@employed=$this->employed";
	}
	protected function getAdvancedProperties()	{
		return "1025.studentId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->studentId))."@1025.occupation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->occupation))."@1025.registrationNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->registrationNumber))."@1025.examinationNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->examinationNumber))."@1025.nativeplace=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->nativeplace))."@1025.disability=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->disability))."@1025.postalAddress=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->postalAddress))."@1025.physicalAddress=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->physicalAddress))."@1025.referenceNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->referenceNumber))."@1025.currentYear=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->currentYear))."@1025.currentSemester=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->currentSemester))."@1025.applicationCounter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->applicationCounter))."@1025.XMLFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->XMLFile))."@1025.XMLFileChecksum=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->XMLFileChecksum))."@1025.formFourYear=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->formFourYear))."@1025.formFourIndex=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->formFourIndex))."@1025.transcriptHash=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->transcriptHash))."@1025.transcriptFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->transcriptFile))."@1025.graduationYear=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->graduationYear))."@1025.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1025.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1025.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags))."@1025.employed=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->employed));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Student (NAMESPACETAG = 1025) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->login))	{
			$this->login->debug();
		}
		if (! is_null($this->citizenship))	{
			$this->citizenship->debug();
		}
		if (! is_null($this->denomination))	{
			$this->denomination->debug();
		}
		if (! is_null($this->course))	{
			$this->course->debug();
		}
		if (! is_null($this->registrationTime))	{
			$this->registrationTime->debug();
		}
		if (! is_null($this->admissionBatch))	{
			$this->admissionBatch->debug();
		}
		if (! is_null($this->currentAccademicYear))	{
			$this->currentAccademicYear->debug();
		}
		if (! is_null($this->currentBatch))	{
			$this->currentBatch->debug();
		}
		if (! is_null($this->listOfBatches))	{
			foreach ($this->listOfBatches as $listOfBatchesSingleObject)	{
				$listOfBatchesSingleObject->debug();
			}
		}
		if (! is_null($this->listOfAdmissionBatches))	{
			foreach ($this->listOfAdmissionBatches as $listOfAdmissionBatchesSingleObject)	{
				$listOfAdmissionBatchesSingleObject->debug();
			}
		}
		if (! is_null($this->optionalTransactionList))	{
			foreach ($this->optionalTransactionList as $optionalTransactionListSingleObject)	{
				$optionalTransactionListSingleObject->debug();
			}
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->login))	{
			$matrix1=$this->login->searchMatrix($matrix1);
		}
		if (! is_null($this->citizenship))	{
			$matrix1=$this->citizenship->searchMatrix($matrix1);
		}
		if (! is_null($this->denomination))	{
			$matrix1=$this->denomination->searchMatrix($matrix1);
		}
		if (! is_null($this->course))	{
			$matrix1=$this->course->searchMatrix($matrix1);
		}
		if (! is_null($this->registrationTime))	{
			$matrix1=$this->registrationTime->searchMatrix($matrix1);
		}
		if (! is_null($this->admissionBatch))	{
			$matrix1=$this->admissionBatch->searchMatrix($matrix1);
		}
		if (! is_null($this->currentAccademicYear))	{
			$matrix1=$this->currentAccademicYear->searchMatrix($matrix1);
		}
		if (! is_null($this->currentBatch))	{
			$matrix1=$this->currentBatch->searchMatrix($matrix1);
		}
		if (! is_null($this->listOfBatches))	{
			foreach ($this->listOfBatches as $listOfBatchesSingleObject)	{
				$matrix1=$listOfBatchesSingleObject->searchMatrix($matrix1);
			}
		}
		if (! is_null($this->listOfAdmissionBatches))	{
			foreach ($this->listOfAdmissionBatches as $listOfAdmissionBatchesSingleObject)	{
				$matrix1=$listOfAdmissionBatchesSingleObject->searchMatrix($matrix1);
			}
		}
		if (! is_null($this->optionalTransactionList))	{
			foreach ($this->optionalTransactionList as $optionalTransactionListSingleObject)	{
				$matrix1=$optionalTransactionListSingleObject->searchMatrix($matrix1);
			}
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->login))	{
			$csvProcessor1=$this->login->processCSV($csvProcessor1);
		}
		if (! is_null($this->citizenship))	{
			$csvProcessor1=$this->citizenship->processCSV($csvProcessor1);
		}
		if (! is_null($this->denomination))	{
			$csvProcessor1=$this->denomination->processCSV($csvProcessor1);
		}
		if (! is_null($this->course))	{
			$csvProcessor1=$this->course->processCSV($csvProcessor1);
		}
		if (! is_null($this->registrationTime))	{
			$csvProcessor1=$this->registrationTime->processCSV($csvProcessor1);
		}
		if (! is_null($this->admissionBatch))	{
			$csvProcessor1=$this->admissionBatch->processCSV($csvProcessor1);
		}
		if (! is_null($this->currentAccademicYear))	{
			$csvProcessor1=$this->currentAccademicYear->processCSV($csvProcessor1);
		}
		if (! is_null($this->currentBatch))	{
			$csvProcessor1=$this->currentBatch->processCSV($csvProcessor1);
		}
		if (! is_null($this->listOfBatches))	{
			foreach ($this->listOfBatches as $listOfBatchesSingleObject)	{
				$csvProcessor1=$listOfBatchesSingleObject->processCSV($csvProcessor1);
			}
		}
		if (! is_null($this->listOfAdmissionBatches))	{
			foreach ($this->listOfAdmissionBatches as $listOfAdmissionBatchesSingleObject)	{
				$csvProcessor1=$listOfAdmissionBatchesSingleObject->processCSV($csvProcessor1);
			}
		}
		if (! is_null($this->optionalTransactionList))	{
			foreach ($this->optionalTransactionList as $optionalTransactionListSingleObject)	{
				$csvProcessor1=$optionalTransactionListSingleObject->processCSV($csvProcessor1);
			}
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $studentId, $conn) {
		$query="SELECT studentId, loginId, occupation, registrationNumber, examinationNumber, citizenshipId, nativeplace, disability, denominationId, postalAddress, physicalAddress, employed, courseId, referenceNumber, registrationTime, cyear, csemester, applicationCounter, xmlFile, xmlFileChecksum, batchList, admissionBatch, admissionBatchList, currentAccademicYear, currentBatch, formFourYear, formFourIndex, optionalTransactionList, transcriptHash, transcriptFile, graduationYear, extraFilter, extraInformation, flags FROM students WHERE studentId = '$studentId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Student, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Student, Duplicate or No Record');
		list($studentId, $loginId, $occupation, $registrationNumber, $examinationNumber, $citizenshipId, $nativeplace, $disability, $denominationId, $postalAddress, $physicalAddress, $employed, $courseId, $referenceNumber, $registrationTime, $cyear, $csemester, $applicationCounter, $xmlFile, $xmlFileChecksum, $batchList, $admissionBatch, $admissionBatchList, $currentAccademicYear, $currentBatch, $formFourYear, $formFourIndex, $optionalTransactionList, $transcriptHash, $transcriptFile, $graduationYear, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->studentId = $studentId;
		if (! is_null($loginId))	{
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
		if (! is_null($occupation))	{
			$this->occupation = $occupation;
		}
		if (! is_null($registrationNumber))	{
			$this->registrationNumber = $registrationNumber;
		}
		if (! is_null($examinationNumber))	{
			$this->examinationNumber = $examinationNumber;
		}
		if (! is_null($citizenshipId))	{
			$this->citizenship = null;
			try	{
				$this->citizenship = new Country($this->database, $citizenshipId, $this->conn);
			} catch (Exception $e)	{
				$this->citizenship = null;
			}
		}
		if (! is_null($nativeplace))	{
			$this->nativeplace = $nativeplace;
		}
		if (! is_null($disability))	{
			$this->disability = $disability;
		}
		if (! is_null($denominationId))	{
			$this->denomination = null;
			try	{
				$this->denomination = new Denomination($this->database, $denominationId, $this->conn);
			} catch (Exception $e)	{
				$this->denomination = null;
			}
		}
		if (! is_null($postalAddress))	{
			$this->postalAddress = $postalAddress;
		}
		if (! is_null($physicalAddress))	{
			$this->physicalAddress = $physicalAddress;
		}
		if (! is_null($employed))	{
			$this->employed = ($employed == "1");
		}
		if (! is_null($courseId))	{
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
		if (! is_null($referenceNumber))	{
			$this->referenceNumber = $referenceNumber;
		}
		if (! is_null($registrationTime))	{
			$this->registrationTime = null;
			try	{
				$this->registrationTime = new DateAndTime($this->database, $registrationTime, $this->conn);
			} catch (Exception $e)	{
				$this->registrationTime = null;
			}
		}
		if (! is_null($cyear))	{
			$this->currentYear = $cyear;
		}
		if (! is_null($csemester))	{
			$this->currentSemester = $csemester;
		}
		if (! is_null($applicationCounter))	{
			$this->applicationCounter = $applicationCounter;
		}
		if (! is_null($xmlFile))	{
			$this->XMLFile = $xmlFile;
		}
		if (! is_null($xmlFileChecksum))	{
			$this->XMLFileChecksum = $xmlFileChecksum;
		}
		if (! is_null($batchList))	{
			$this->listOfBatches = array();
			$idListArr = explode(",", $batchList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new AccademicYear($this->database, $id, $this->conn);
					$this->listOfBatches[sizeof($this->listOfBatches)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($admissionBatch))	{
			$this->admissionBatch = null;
			try	{
				$this->admissionBatch = new AccademicYear($this->database, $admissionBatch, $this->conn);
			} catch (Exception $e)	{
				$this->admissionBatch = null;
			}
		}
		if (! is_null($admissionBatchList))	{
			$this->listOfAdmissionBatches = array();
			$idListArr = explode(",", $admissionBatchList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new AccademicYear($this->database, $id, $this->conn);
					$this->listOfAdmissionBatches[sizeof($this->listOfAdmissionBatches)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($currentAccademicYear))	{
			$this->currentAccademicYear = null;
			try	{
				$this->currentAccademicYear = new AccademicYear($this->database, $currentAccademicYear, $this->conn);
			} catch (Exception $e)	{
				$this->currentAccademicYear = null;
			}
		}
		if (! is_null($currentBatch))	{
			$this->currentBatch = null;
			try	{
				$this->currentBatch = new AccademicYear($this->database, $currentBatch, $this->conn);
			} catch (Exception $e)	{
				$this->currentBatch = null;
			}
		}
		if (! is_null($formFourYear))	{
			$this->formFourYear = $formFourYear;
		}
		if (! is_null($formFourIndex))	{
			$this->formFourIndex = $formFourIndex;
		}
		if (! is_null($optionalTransactionList))	{
			$this->optionalTransactionList = array();
			$idListArr = explode(",", $optionalTransactionList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new CourseAndSubjectTransaction($this->database, $id, $this->conn);
					$this->optionalTransactionList[sizeof($this->optionalTransactionList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($transcriptHash))	{
			$this->transcriptHash = $transcriptHash;
		}
		if (! is_null($transcriptFile))	{
			$this->transcriptFile = $transcriptFile;
		}
		if (! is_null($graduationYear))	{
			$this->graduationYear = $graduationYear;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT loginId, occupation, registrationNumber, examinationNumber, citizenshipId, nativeplace, disability, denominationId, postalAddress, physicalAddress, employed, courseId, referenceNumber, registrationTime, cyear, csemester, applicationCounter, xmlFile, xmlFileChecksum, batchList, admissionBatch, admissionBatchList, currentAccademicYear, currentBatch, formFourYear, formFourIndex, optionalTransactionList, transcriptHash, transcriptFile, graduationYear, extraFilter, extraInformation, flags FROM students WHERE studentId = '$this->studentId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Student, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Student, [Clone] Duplicate or No Record');
		list($loginId, $occupation, $registrationNumber, $examinationNumber, $citizenshipId, $nativeplace, $disability, $denominationId, $postalAddress, $physicalAddress, $employed, $courseId, $referenceNumber, $registrationTime, $cyear, $csemester, $applicationCounter, $xmlFile, $xmlFileChecksum, $batchList, $admissionBatch, $admissionBatchList, $currentAccademicYear, $currentBatch, $formFourYear, $formFourIndex, $optionalTransactionList, $transcriptHash, $transcriptFile, $graduationYear, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['loginId'] = $loginId;
		$masterDataArray['occupation'] = $occupation;
		$masterDataArray['registrationNumber'] = $registrationNumber;
		$masterDataArray['examinationNumber'] = $examinationNumber;
		$masterDataArray['citizenshipId'] = $citizenshipId;
		$masterDataArray['nativeplace'] = $nativeplace;
		$masterDataArray['disability'] = $disability;
		$masterDataArray['denominationId'] = $denominationId;
		$masterDataArray['postalAddress'] = $postalAddress;
		$masterDataArray['physicalAddress'] = $physicalAddress;
		$masterDataArray['employed'] = $employed;
		$masterDataArray['courseId'] = $courseId;
		$masterDataArray['referenceNumber'] = $referenceNumber;
		$masterDataArray['registrationTime'] = $registrationTime;
		$masterDataArray['cyear'] = $cyear;
		$masterDataArray['csemester'] = $csemester;
		$masterDataArray['applicationCounter'] = $applicationCounter;
		$masterDataArray['xmlFile'] = $xmlFile;
		$masterDataArray['xmlFileChecksum'] = $xmlFileChecksum;
		$masterDataArray['batchList'] = $batchList;
		$masterDataArray['admissionBatch'] = $admissionBatch;
		$masterDataArray['admissionBatchList'] = $admissionBatchList;
		$masterDataArray['currentAccademicYear'] = $currentAccademicYear;
		$masterDataArray['currentBatch'] = $currentBatch;
		$masterDataArray['formFourYear'] = $formFourYear;
		$masterDataArray['formFourIndex'] = $formFourIndex;
		$masterDataArray['optionalTransactionList'] = $optionalTransactionList;
		$masterDataArray['transcriptHash'] = $transcriptHash;
		$masterDataArray['transcriptFile'] = $transcriptFile;
		$masterDataArray['graduationYear'] = $graduationYear;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO students ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Student [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Student [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Student [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class ExaminationGroup extends Object {
	private $groupId;
	private $groupName;
	private $educationLevel;
	private $semester;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__ALL_SEMESTERS = 0;
	public function isGroupInAValidState()	{
		//Evaluate Semester and Semesters of the inclosed examinations 
		$list = Examination::getExaminationsBelongingToExaminationGroup($this->database, $this->conn, $this->groupId);
		if (is_null($list)) return true;
		$groupSemester = intval($this->semester);
		$isValid = true;
		$logic_A = ($groupSemester == 0);
		foreach ($list as $examinationId)	{
			if ($logic_A) break; //Will not be affected by preceeding logics
			$examination1 = new Examination($this->database, $examinationId, $this->conn);
			$examinationSemester = intval($examination1->getSemester());
			$logic_B = ($examinationSemester == 0);
			$logic_C = ($groupSemester == $examinationSemester);
			$isValid = ($isValid && ($logic_A || $logic_B || $logic_C));
			if (! $isValid) break;
		}
		return $isValid;
	}
	public final static function isSemesterValidToAGroup($database, $conn, $groupId, $semester)	{
		$semester = intval("".$semester);
		$group1 = new ExaminationGroup($database, $groupId, $conn);
		$groupSemester = intval($group1->getSemester());
		$logic_A = ($groupSemester == 0);
		$logic_B = ($semester == 0);
		$logic_C = ($groupSemester == $semester);
		return ($logic_A || $logic_B || $logic_C);
	}
	public final static function getExaminationGroupBelongingToEducationLevel($database, $conn, $levelId)	{
		$query = "SELECT groupId FROM examinationGroup WHERE levelId='$levelId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Examination Group [static], Could not identify group for this level");
		$list = array();
		while (list($groupId) = mysql_fetch_row($result))	{
			$list[sizeof($list)] = $groupId;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}	
	public final static function isExaminationAndResultsGroupBelongToTheSameExaminationGroup($database, $conn, $examinationId, $resultsGroupId)	{
		$examination1 = null;
		$resultsGroup1 = null;
		try {
			$examination1 = new Examination($database, $examinationId, $conn);
			$resultsGroup1 = new ResultsGroup($database, $resultsGroupId, $conn);
		} catch (Exception $e)	{
			Object::shootException($e->getMessage());
		}	
		return ($examination1->getGroup()->getGroupId() == $resultsGroup1->getExaminationGroup()->getGroupId());
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@ExaminationGroup/groupName,text,1026;semester,text,1026;extraFilter,text,1026;extraInformation,text,1026;flags,text,1026";
		$lineToView .= EducationLevel::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "examinationgroup";
	}
	public final static function getClassContextName()	{
		return "manageexaminationgroup";
	}
	public final static function getUniqueGroupId($database, $conn)	{
		$query="SELECT groupId FROM examinationGroup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationGroup, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('ExaminationGroup, None or Duplicate Row/Multiple Rows Found');
		list($groupId)=mysql_fetch_row($result);
		return $groupId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT groupId, groupName FROM examinationGroup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationGroup, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $groupName, $levelId, $semester, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO examinationGroup (groupName, levelId, semester, extraFilter, extraInformation, flags) VALUES('$groupName', '$levelId', '$semester', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationGroup, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationGroup, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('ExaminationGroup, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->groupId;
	}
	public function getGroupId() {
		return $this->groupId;
	}
	public function getGroupName() {
		return $this->groupName;
	}
	public function setGroupName($groupName) {
		if (! is_null($groupName))	{
			$this->addToUpdateList("groupName", $groupName);
			$this->groupName = $groupName;
		}
	}
	public function getEducationLevel() {
		return $this->educationLevel;
	}
	public function setEducationLevel($levelId) {
		if (! is_null($levelId))	{
			$this->addToUpdateList("levelId", $levelId);
			$this->educationLevel = null;
			try	{
				$this->educationLevel = new EducationLevel($this->database, $levelId, $this->conn);
			} catch (Exception $e)	{
				$this->educationLevel = null;
			}
		}
	}
	public function getSemester() {
		return $this->semester;
	}
	public function setSemester($semester) {
		if (! is_null($semester))	{
			$this->addToUpdateList("semester", $semester);
			$this->semester = $semester;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT groupId FROM examinationGroup";
		return $query;
	}
	public function __construct($database, $groupId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "ExaminationGroup")) Object::shootException("ExaminationGroup System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $groupId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->groupId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "ExaminationGroup")) Object::shootException("ExaminationGroup System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE examinationGroup SET $setList WHERE groupId = '$this->groupId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ExaminationGroup, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "ExaminationGroup")) Object::shootException("ExaminationGroup System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM examinationGroup WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ExaminationGroup, Row Deletion Failed');
	}
	public function getClassName()	{
		return "ExaminationGroup";
	}
	protected function getProperties()	{
		return "groupId=$this->groupId"."@groupName=$this->groupName"."@semester=$this->semester"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1026.groupId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->groupId))."@1026.groupName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->groupName))."@1026.semester=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->semester))."@1026.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1026.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1026.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: ExaminationGroup (NAMESPACETAG = 1026) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->educationLevel))	{
			$this->educationLevel->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->educationLevel))	{
			$matrix1=$this->educationLevel->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->educationLevel))	{
			$csvProcessor1=$this->educationLevel->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $groupId, $conn) {
		$query="SELECT groupId, groupName, levelId, semester, extraFilter, extraInformation, flags FROM examinationGroup WHERE groupId = '$groupId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('ExaminationGroup, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ExaminationGroup, Duplicate or No Record');
		list($groupId, $groupName, $levelId, $semester, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->groupId = $groupId;
		if (! is_null($groupName))	{
			$this->groupName = $groupName;
		}
		if (! is_null($levelId))	{
			$this->educationLevel = null;
			try	{
				$this->educationLevel = new EducationLevel($this->database, $levelId, $this->conn);
			} catch (Exception $e)	{
				$this->educationLevel = null;
			}
		}
		if (! is_null($semester))	{
			$this->semester = $semester;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT groupName, levelId, semester, extraFilter, extraInformation, flags FROM examinationGroup WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ExaminationGroup, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ExaminationGroup, [Clone] Duplicate or No Record');
		list($groupName, $levelId, $semester, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['groupName'] = $groupName;
		$masterDataArray['levelId'] = $levelId;
		$masterDataArray['semester'] = $semester;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO examinationGroup ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ExaminationGroup [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ExaminationGroup [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("ExaminationGroup [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Examination extends Object {
	private $examinationId;
	private $examinationName;
	private $examinationCode;
	private $examinationWeight;
	private $group;
	private $semester;
	private $primary;
	private $supplimentary;
	private $minimumScorePercentage;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__INCLUDE_NAMES = 1;
	static $__INCLUDE_REGISTRATION_NUMBERS = 2;
	public final static function displayExaminationSigningSheet($database, $conn, $profile1, $courseId, $year, $semester, $paperId, $controlFlags)	{
		$listOfStudents = Student::getListOfStudentsBelongingToCourseYearAndSemester($database, $conn, $courseId, $year, $semester, $controlFlags);
		if (is_null($listOfStudents)) Object::shootException("There are no students matching your selection");
		$course1 = new Course($database, $courseId, $conn);
		$courseStringDetails = $course1->getCourseCode()." ".$year." - ".$profile1->getCurrentAccademicYear()->getAccademicYear();
		$paper1 = new Paper($database, $paperId, $conn);
		$paper1->putData('lineHeader1', $profile1->getProfileName());
		$paper1->putData('lineHeader2', Object::$generalProfileHeader);
		$paper1->putData('lineHeader3', "EXAMINATION RESULTS SUBMISSION SHEET FOR $courseStringDetails");
		$paper1->putData('lineHeader4', "(To be filled by Students, Invigilator, Subject Coordinator & The Dean)");
		$windowToDisplay = Examination::showExaminationSigningSheet($database, $conn, $profile1, $paper1, $listOfStudents, $controlFlags);
		return $windowToDisplay;
	}
	public final static function showExaminationSigningSheet($database, $conn, $profile1, $paper1, $listOfStudents, $controlFlags)	{
		/*Expects  .. should be carried by paper1 object
			lineHeader1 : Kilimanjaro Christian Medical University College
			lineHeader2: (A constituent of )
			lineHeader3: Examination Results for .. 
			lineHeader4:  To be filled by ...
		*/
		if (is_null($listOfStudents)) Object::shootException("The procedure has received an Empty list of students");
		if (is_null($paper1->getData('lineHeader1'))) Object::shootException("Header One is not set");
		if (is_null($paper1->getData('lineHeader2'))) Object::shootException("Header Two is not set");
		if (is_null($paper1->getData('lineHeader3'))) Object::shootException("Header Three is not set");
		if (is_null($paper1->getData('lineHeader4'))) Object::shootException("Header Four is not set");
		$lineHeader1 = $paper1->getData('lineHeader1');
		$lineHeader2 = $paper1->getData('lineHeader2');
		$lineHeader3 = $paper1->getData('lineHeader3');
		$lineHeader4 = $paper1->getData('lineHeader4');
		$width = $paper1->getWidth();
		$height = $paper1->getHeight();
		$twidth = $width."mm";
		$window1 = "<div id=\"__examination_signing_sheet\"  class=\"ui-results-container ui-sys-oi\" style=\"width: $twidth; font-size: 14px;\">";
		//Beginning with top header 
		$window1 .= "<div style=\"text-align: center; font-weight: bold;\">";
		$window1 .= "<div style=\"font-size: 1.4em;\">$lineHeader1</div>";
		$window1 .= "<div style=\"font-size: 1.2em;\">$lineHeader2</div>";
		$window1 .= "<div style=\"font-size: 1.2em;\">$lineHeader3</div>";
		$window1 .= "<br/><div style=\"\">$lineHeader4</div>";
		$window1 .= "</div>"; //End Header 1
		//Beginning with second Header 
		$window1 .= "<br/><div style=\"text-align: left;\">";
		$window1 .= "<div>BLOCK ..............................................................................................</div>";
		$window1 .= "<div>SUBJECT CODE & NAME .................................................................................</div>";
		$window1 .= "<div>DATE OF EXAMINATION .................................................................................</div>";
		$window1 .= "</div>"; // End Header 2
		$blnIncludeNames = Object::isControlFlagsSetAt($controlFlags, Examination::$__INCLUDE_NAMES);
		$blnIncludeRegistrationNumbers = Object::isControlFlagsSetAt($controlFlags, Examination::$__INCLUDE_REGISTRATION_NUMBERS);
		$namesColumn = "";
		$registrationNumbersColumn = "";
		$namesColumn2 = "";
		$registrationNumbersColumn2 = "";
		if ($blnIncludeNames) {
			$namesColumn = "<th>Names</th>";
			$namesColumn2 = "<th></th>";
		}
		if ($blnIncludeRegistrationNumbers) {
			$registrationNumbersColumn = "<th title=\"Registration Numbers\">Reg Numbers</th>";
			$registrationNumbersColumn2 = "<th></th>";
		}
		$window1 .= "<br/><div><table class=\"font-family-1 font-size-1-0-em table-grid\" style=\"border-collapse: collapse; width: 96%; margin-left: auto; margin-right: auto; font-family: Trebuchet MS, Tahoma, Verdana, Arial, Sans-serif; font-size: 1.0em;\"><thead style=\"font-size: 0.8em;\"><tr><th style=\"border: 1px solid black;\">S/No</th><th style=\"border: 1px solid black;\" title=\"Examination Number\">CAND.No</th>$namesColumn$registrationNumbersColumn<th style=\"border: 1px solid black;\">CAND SIGN</th><th style=\"border: 1px solid black;\">MCQs</th><th style=\"border: 1px solid black;\">TR/FLS</th><th style=\"border: 1px solid black;\">MATCH.</th><th style=\"border: 1px solid black;\">SH/A</th><th style=\"border: 1px solid black;\">LESSAY</th><th style=\"border: 1px solid black;\">TOT</th><th style=\"border: 1px solid black;\">&nbsp;&nbsp;%&nbsp;&nbsp;</th><th style=\"border: 1px solid black;\">GRD</th><th style=\"border: 1px solid black;\">REMARKS</th></tr>";
		$window1 .= "<tr class=\"font-size-0-8-em\" style=\"page-break-inside: avoid; font-weight: bold;\"><th style=\"border: 1px solid black;\"></th><th style=\"border: 1px solid black;\">TOTAL MARKS</th>$namesColumn2$registrationNumbersColumn2<th style=\"border: 1px solid black;\"></th><th style=\"border: 1px solid black;\"></th><th style=\"border: 1px solid black;\"></th><th style=\"border: 1px solid black;\"></th><th style=\"border: 1px solid black;\"></th><th style=\"border: 1px solid black;\"></th><th style=\"border: 1px solid black;\"></th><th style=\"border: 1px solid black;\"></th><th style=\"border: 1px solid black;\"></th><th style=\"border: 1px solid black;\"></th></tr></thead><tbody>";
		$studentCount = 0;
		foreach ($listOfStudents as $studentId)	{
			$student1 = new Student($database, $studentId, $conn);
			$login1 = $student1->getLogin();
			if (is_null($login1)) Object::shootException("Student missing logging Account");
			if ($login1->isAdmitted() && $student1->isInCurrentAccademicYear($profile1))	{
				//We need only Admitted and who are registered 
				$studentCount++;
				$examinationNumber = $student1->getExaminationNumber();
				if (is_null($examinationNumber))	{
					$promise1 = Student::generateExaminationNumber($database, $conn, $profile1, $student1);
					if (! $promise1->isPromising()) Object::shootException("There were errors in generating examination number");
					$examinationNumber = $promise1->getResults();
					$student1->setExaminationNumber($examinationNumber);
					$student1->commitUpdate(); 
				}
				//Now proceed 
				$namesColumn = "";
				$registrationNumbersColumn = "";
				if ($blnIncludeNames) $namesColumn = "<td>".$login1->getFullname()."</td>";
				if ($blnIncludeRegistrationNumbers) $registrationNumbersColumn = "<td>".$student1->getRegistrationNumber()."</td>";
				$window1 .= "<tr style=\"page-break-inside: avoid;\"><td style=\"border: 1px solid black;\">$studentCount</td><td style=\"border: 1px solid black;\">$examinationNumber</td>$namesColumn$registrationNumbersColumn<td style=\"border: 1px solid black;\"></td><td style=\"border: 1px solid black;\"></td><td style=\"border: 1px solid black;\"></td><td style=\"border: 1px solid black;\"></td><td style=\"border: 1px solid black;\"></td><td style=\"border: 1px solid black;\"></td><td style=\"border: 1px solid black;\"></td><td style=\"border: 1px solid black;\"></td><td style=\"border: 1px solid black;\"></td><td style=\"border: 1px solid black;\"></td></tr>";
			}				
		}
		$window1 .= "</tbody></table></div>"; //End- of Body
		$window1 .= "<br/><div><table style=\"width: 96%; margin-left: auto; margin-right: auto; font-size: 0.8em;\">";
		$window1 .= "<tr><td>&nbsp;</td></tr><tr><td><b>Invigilator's Name</b> ............................................................</td><td>Sign ...............</td><td>Date ..................</td></tr>";
		$window1 .= "<tr><td>&nbsp;</td></tr><tr><td><b>Examiners's Name</b> ..............................................................</td><td>Sign ...............</td><td>Date ..................</td></tr>";
		$window1 .= "<tr><td>&nbsp;</td></tr><tr><td><b>Dean's Comments</b> ...............................................................</td><td>Sign ...............</td><td>Date ..................</td></tr>";
		$window1 .= "</table></div><br/>";	//End - of Footer
		$window1 .= "</div>";
		return $window1;
	}
	/*Note the loadAll function need to be restored since it contains pEId field*/
	public final static function getExaminationsBelongingToExaminationGroup($database, $conn, $groupId)	{
		$list = array();
		$query = "SELECT examinationId FROM examination WHERE groupId='$groupId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Examination [static], Could not execute examination query");
		while (list($id)=mysql_fetch_row($result))	{
			$list[sizeof($list)] = $id;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function percentageWeightInAGroup($database, $conn, $examination1)	{
		/*Only for primary examination , automatically their sequenceNumber is 0*/
		$group1 = $examination1->getGroup();
		if (is_null($group1)) return 0;
		$groupId = $group1->getGroupId();
		$totalWeight = 0;
		$query = "SELECT examinationWeight FROM examination WHERE groupId = '$groupId' AND isprimary='1'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Examination[Static], Could not fetch Examination Group Information");
		while (list($examinationWeight)=mysql_fetch_row($result))	{
			$totalWeight = $totalWeight + intval($examinationWeight);
		}
		if ($totalWeight == 0) Object::shootException("Examination[Static], Total Weight Could not be calculated");
		$currentExaminationWeight = intval($examination1->getExaminationWeight());
		if ($examination1->isSupplimentary())	{
			$currentExaminationWeight = $totalWeight;
		}
		return round(($currentExaminationWeight * 100) / $totalWeight, 2);
	}
	public final static function percentageWeightInAGroupInASemester($database, $conn, $examination1)	{
		$group1 = $examination1->getGroup();
		if (is_null($group1)) return 0;
		$groupId = $group1->getGroupId();
		$semester = $examination1->getSemester();
		$totalWeight = 0;
		$query = "SELECT examinationWeight FROM examination WHERE groupId='$groupId' AND isprimary='1' AND semester='$semester'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Examination[Static], Could not fetch Examination Group Information");
		while (list($examinationWeight)=mysql_fetch_row($result))	{
			$totalWeight = $totalWeight + intval($examinationWeight);
		}
		if ($totalWeight == 0) Object::shootException("Examination[Static], Total Weight Could not be calculated");
		$currentExaminationWeight = intval($examination1->getExaminationWeight());
		if ($examination1->isSupplimentary())	{
			$currentExaminationWeight = $totalWeight;
		}
		return round(($currentExaminationWeight * 100) / $totalWeight, 2);
	}
	public final static function isStillOrWillBeValid($database, $conn, $examination1, $currentDateTime1)	{
		/*
		$currentDateTime1 < $examination1->getEndTime();
		$examination1->getStartTime() < $examination1->getEndTime()
		*/
		$startTime1 = $examination1->getStartTime();
		$endTime1 = $examination1->getEndTime();
		if (is_null($startTime1) || is_null($endTime1) || is_null($currentDateTime1)) return false;
		return (($currentDateTime1->compareDateAndTime($endTime1) < 0) && ($startTime1->compareDateAndTime($endTime1) < 0));
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Examination/examinationName,text,1027;examinationCode,text,1027;examinationWeight,text,1027;semester,text,1027;primary,boolean,1027;supplimentary,boolean,1027;minimumScorePercentage,text,1027;extraFilter,text,1027;extraInformation,text,1027;flags,text,1027";
		$lineToView .= ExaminationGroup::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "examination";
	}
	public final static function getClassContextName()	{
		return "manageexamination";
	}
	public final static function getUniqueExaminationId($database, $conn)	{
		$query="SELECT examinationId FROM examination";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Examination, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Examination, None or Duplicate Row/Multiple Rows Found');
		list($examinationId)=mysql_fetch_row($result);
		return $examinationId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT examinationId, examinationName, examinationCode, groupId FROM examination";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Examination, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val, $__code, $__gId)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val." (".$__code.")";
			$list[$listsize]['pEId']=$__gId;
		}
		return $list;
	}
	public final static function add($database, $conn, $examinationName, $examinationCode, $examinationWeight, $groupId, $semester, $isprimary, $supplimentary, $minimumScorePercentage, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO examination (examinationName, examinationCode, examinationWeight, groupId, semester, isprimary, supplimentary, minimumScorePercentage, extraFilter, extraInformation, flags) VALUES('$examinationName', '$examinationCode', '$examinationWeight', '$groupId', '$semester', '$isprimary', '$supplimentary', '$minimumScorePercentage', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Examination, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Examination, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Examination, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->examinationId;
	}
	public function getExaminationId() {
		return $this->examinationId;
	}
	public function getExaminationName() {
		return $this->examinationName;
	}
	public function setExaminationName($examinationName) {
		if (! is_null($examinationName))	{
			$this->addToUpdateList("examinationName", $examinationName);
			$this->examinationName = $examinationName;
		}
	}
	public function getExaminationCode() {
		return $this->examinationCode;
	}
	public function setExaminationCode($examinationCode) {
		if (! is_null($examinationCode))	{
			$this->addToUpdateList("examinationCode", $examinationCode);
			$this->examinationCode = $examinationCode;
		}
	}
	public function getExaminationWeight() {
		return $this->examinationWeight;
	}
	public function setExaminationWeight($examinationWeight) {
		if (! is_null($examinationWeight))	{
			$this->addToUpdateList("examinationWeight", $examinationWeight);
			$this->examinationWeight = $examinationWeight;
		}
	}
	public function getGroup() {
		return $this->group;
	}
	public function setGroup($groupId) {
		if (! is_null($groupId))	{
			$this->addToUpdateList("groupId", $groupId);
			$this->group = null;
			try	{
				$this->group = new ExaminationGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->group = null;
			}
		}
	}
	public function getSemester() {
		return $this->semester;
	}
	public function setSemester($semester) {
		if (! is_null($semester))	{
			$this->addToUpdateList("semester", $semester);
			$this->semester = $semester;
		}
	}
	public function isPrimary() {
		return $this->primary;
	}
	public function setPrimary($isprimary) {
		if (! is_null($isprimary))	{
			$this->addToUpdateList("isprimary", $isprimary);
			$this->primary = ($isprimary == "1");
		}
	}
	public function isSupplimentary() {
		return $this->supplimentary;
	}
	public function setSupplimentary($supplimentary) {
		if (! is_null($supplimentary))	{
			$this->addToUpdateList("supplimentary", $supplimentary);
			$this->supplimentary = ($supplimentary == "1");
		}
	}
	public function getMinimumScorePercentage() {
		return $this->minimumScorePercentage;
	}
	public function setMinimumScorePercentage($minimumScorePercentage) {
		if (! is_null($minimumScorePercentage))	{
			$this->addToUpdateList("minimumScorePercentage", $minimumScorePercentage);
			$this->minimumScorePercentage = $minimumScorePercentage;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT examinationId FROM examination";
		return $query;
	}
	public function __construct($database, $examinationId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Examination")) Object::shootException("Examination System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $examinationId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->examinationId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Examination")) Object::shootException("Examination System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE examination SET $setList WHERE examinationId = '$this->examinationId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Examination, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Examination")) Object::shootException("Examination System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM examination WHERE examinationId = '$this->examinationId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Examination, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Examination";
	}
	protected function getProperties()	{
		return "examinationId=$this->examinationId"."@examinationName=$this->examinationName"."@examinationCode=$this->examinationCode"."@examinationWeight=$this->examinationWeight"."@semester=$this->semester"."@minimumScorePercentage=$this->minimumScorePercentage"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags"."@primary=$this->primary"."@supplimentary=$this->supplimentary";
	}
	protected function getAdvancedProperties()	{
		return "1027.examinationId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->examinationId))."@1027.examinationName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->examinationName))."@1027.examinationCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->examinationCode))."@1027.examinationWeight=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->examinationWeight))."@1027.semester=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->semester))."@1027.minimumScorePercentage=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->minimumScorePercentage))."@1027.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1027.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1027.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags))."@1027.primary=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->primary))."@1027.supplimentary=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->supplimentary));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Examination (NAMESPACETAG = 1027) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->group))	{
			$this->group->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->group))	{
			$matrix1=$this->group->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->group))	{
			$csvProcessor1=$this->group->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $examinationId, $conn) {
		$query="SELECT examinationId, examinationName, examinationCode, examinationWeight, groupId, semester, isprimary, supplimentary, minimumScorePercentage, extraFilter, extraInformation, flags FROM examination WHERE examinationId = '$examinationId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Examination, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Examination, Duplicate or No Record');
		list($examinationId, $examinationName, $examinationCode, $examinationWeight, $groupId, $semester, $isprimary, $supplimentary, $minimumScorePercentage, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->examinationId = $examinationId;
		if (! is_null($examinationName))	{
			$this->examinationName = $examinationName;
		}
		if (! is_null($examinationCode))	{
			$this->examinationCode = $examinationCode;
		}
		if (! is_null($examinationWeight))	{
			$this->examinationWeight = $examinationWeight;
		}
		if (! is_null($groupId))	{
			$this->group = null;
			try	{
				$this->group = new ExaminationGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->group = null;
			}
		}
		if (! is_null($semester))	{
			$this->semester = $semester;
		}
		if (! is_null($isprimary))	{
			$this->primary = ($isprimary == "1");
		}
		if (! is_null($supplimentary))	{
			$this->supplimentary = ($supplimentary == "1");
		}
		if (! is_null($minimumScorePercentage))	{
			$this->minimumScorePercentage = $minimumScorePercentage;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT examinationName, examinationCode, examinationWeight, groupId, semester, isprimary, supplimentary, minimumScorePercentage, extraFilter, extraInformation, flags FROM examination WHERE examinationId = '$this->examinationId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Examination, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Examination, [Clone] Duplicate or No Record');
		list($examinationName, $examinationCode, $examinationWeight, $groupId, $semester, $isprimary, $supplimentary, $minimumScorePercentage, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['examinationName'] = $examinationName;
		$masterDataArray['examinationCode'] = $examinationCode;
		$masterDataArray['examinationWeight'] = $examinationWeight;
		$masterDataArray['groupId'] = $groupId;
		$masterDataArray['semester'] = $semester;
		$masterDataArray['isprimary'] = $isprimary;
		$masterDataArray['supplimentary'] = $supplimentary;
		$masterDataArray['minimumScorePercentage'] = $minimumScorePercentage;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO examination ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Examination [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Examination [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Examination [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class ExaminationNumberScope extends Object {
	private $scopeId;
	private $scopeName;
	private $scopeCode;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	static $__SCOPE_SYSTEM = 1;
	static $__SCOPE_GROUP = 2;
	static $__SCOPE_EXAMINATION = 3;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getExaminationNumberScopeReferenceFromCode($database, $conn, $code)	{
		$query = "SELECT scopeId FROM examinationNumberScope WHERE scopeCode='$code'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Examination Number Scope, Could not execute scope query");
		if (mysql_num_rows($result) != 1) Object::shootException("Examination Number Scope, None or duplicate records");
		list($scopeId)=mysql_fetch_row($result);
		return $scopeId;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@ExaminationNumberScope/scopeName,text,1028;scopeCode,text,1028;extraFilter,text,1028;extraInformation,text,1028;flags,text,1028";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "examinationnumberscope";
	}
	public final static function getClassContextName()	{
		return "manageexaminationnumberscope";
	}
	public final static function getUniqueScopeId($database, $conn)	{
		$query="SELECT scopeId FROM examinationNumberScope";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationNumberScope, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('ExaminationNumberScope, None or Duplicate Row/Multiple Rows Found');
		list($scopeId)=mysql_fetch_row($result);
		return $scopeId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT scopeId, scopeName FROM examinationNumberScope";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationNumberScope, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $scopeName, $scopeCode, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO examinationNumberScope (scopeName, scopeCode, extraFilter, extraInformation, flags) VALUES('$scopeName', '$scopeCode', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationNumberScope, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationNumberScope, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('ExaminationNumberScope, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->scopeId;
	}
	public function getScopeId() {
		return $this->scopeId;
	}
	public function getScopeName() {
		return $this->scopeName;
	}
	public function setScopeName($scopeName) {
		if (! is_null($scopeName))	{
			$this->addToUpdateList("scopeName", $scopeName);
			$this->scopeName = $scopeName;
		}
	}
	public function getScopeCode() {
		return $this->scopeCode;
	}
	public function setScopeCode($scopeCode) {
		if (! is_null($scopeCode))	{
			$this->addToUpdateList("scopeCode", $scopeCode);
			$this->scopeCode = $scopeCode;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT scopeId FROM examinationNumberScope";
		return $query;
	}
	public function __construct($database, $scopeId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "ExaminationNumberScope")) Object::shootException("ExaminationNumberScope System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $scopeId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->scopeId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "ExaminationNumberScope")) Object::shootException("ExaminationNumberScope System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE examinationNumberScope SET $setList WHERE scopeId = '$this->scopeId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ExaminationNumberScope, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "ExaminationNumberScope")) Object::shootException("ExaminationNumberScope System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM examinationNumberScope WHERE scopeId = '$this->scopeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ExaminationNumberScope, Row Deletion Failed');
	}
	public function getClassName()	{
		return "ExaminationNumberScope";
	}
	protected function getProperties()	{
		return "scopeId=$this->scopeId"."@scopeName=$this->scopeName"."@scopeCode=$this->scopeCode"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1028.scopeId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->scopeId))."@1028.scopeName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->scopeName))."@1028.scopeCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->scopeCode))."@1028.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1028.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1028.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: ExaminationNumberScope (NAMESPACETAG = 1028) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $scopeId, $conn) {
		$query="SELECT scopeId, scopeName, scopeCode, extraFilter, extraInformation, flags FROM examinationNumberScope WHERE scopeId = '$scopeId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('ExaminationNumberScope, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ExaminationNumberScope, Duplicate or No Record');
		list($scopeId, $scopeName, $scopeCode, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->scopeId = $scopeId;
		if (! is_null($scopeName))	{
			$this->scopeName = $scopeName;
		}
		if (! is_null($scopeCode))	{
			$this->scopeCode = $scopeCode;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT scopeName, scopeCode, extraFilter, extraInformation, flags FROM examinationNumberScope WHERE scopeId = '$this->scopeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ExaminationNumberScope, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ExaminationNumberScope, [Clone] Duplicate or No Record');
		list($scopeName, $scopeCode, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['scopeName'] = $scopeName;
		$masterDataArray['scopeCode'] = $scopeCode;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO examinationNumberScope ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ExaminationNumberScope [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ExaminationNumberScope [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("ExaminationNumberScope [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class ExaminationNumber extends Object {
	private $numberId;
	private $examination;
	private $examinationGroup;
	private $student;
	private $scope;
	private $examinationNumber;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function attachSystemExaminationNumberToStudent($database, $conn, $student1, $examinationNumber)	{
		$scopeId = ExaminationNumberScope::getExaminationNumberScopeReferenceFromCode($database, $conn, ExaminationNumberScope::$__SCOPE_SYSTEM);
		$studentId = $student1->getStudentId();
		$query = "INSERT INTO examinationNumber (studentId, scopeId, examinationNumber) VALUES('$studentId', '$scopeId', '$examinationNumber')";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Examination Number , Error in Adding examination number");
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@ExaminationNumber/examinationNumber,text,1029;extraFilter,text,1029;extraInformation,text,1029;flags,text,1029";
		$lineToView .= Examination::getAvailableViewableColumns();
		$lineToView .= ExaminationGroup::getAvailableViewableColumns();
		$lineToView .= Student::getAvailableViewableColumns();
		$lineToView .= ExaminationNumberScope::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "examinationnumber";
	}
	public final static function getClassContextName()	{
		return "manageexaminationnumber";
	}
	public final static function getUniqueNumberId($database, $conn)	{
		$query="SELECT numberId FROM examinationNumber";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationNumber, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('ExaminationNumber, None or Duplicate Row/Multiple Rows Found');
		list($numberId)=mysql_fetch_row($result);
		return $numberId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT numberId, examinationNumber FROM examinationNumber";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationNumber, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $examinationId, $examinationGroupId, $studentId, $scopeId, $examinationNumber, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO examinationNumber (examinationId, examinationGroupId, studentId, scopeId, examinationNumber, extraFilter, extraInformation, flags) VALUES('$examinationId', '$examinationGroupId', '$studentId', '$scopeId', '$examinationNumber', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationNumber, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ExaminationNumber, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('ExaminationNumber, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->numberId;
	}
	public function getNumberId() {
		return $this->numberId;
	}
	public function getExamination() {
		return $this->examination;
	}
	public function setExamination($examinationId) {
		if (! is_null($examinationId))	{
			$this->addToUpdateList("examinationId", $examinationId);
			$this->examination = null;
			try	{
				$this->examination = new Examination($this->database, $examinationId, $this->conn);
			} catch (Exception $e)	{
				$this->examination = null;
			}
		}
	}
	public function getExaminationGroup() {
		return $this->examinationGroup;
	}
	public function setExaminationGroup($examinationGroupId) {
		if (! is_null($examinationGroupId))	{
			$this->addToUpdateList("examinationGroupId", $examinationGroupId);
			$this->examinationGroup = null;
			try	{
				$this->examinationGroup = new ExaminationGroup($this->database, $examinationGroupId, $this->conn);
			} catch (Exception $e)	{
				$this->examinationGroup = null;
			}
		}
	}
	public function getStudent() {
		return $this->student;
	}
	public function setStudent($studentId) {
		if (! is_null($studentId))	{
			$this->addToUpdateList("studentId", $studentId);
			$this->student = null;
			try	{
				$this->student = new Student($this->database, $studentId, $this->conn);
			} catch (Exception $e)	{
				$this->student = null;
			}
		}
	}
	public function getScope() {
		return $this->scope;
	}
	public function setScope($scopeId) {
		if (! is_null($scopeId))	{
			$this->addToUpdateList("scopeId", $scopeId);
			$this->scope = null;
			try	{
				$this->scope = new ExaminationNumberScope($this->database, $scopeId, $this->conn);
			} catch (Exception $e)	{
				$this->scope = null;
			}
		}
	}
	public function getExaminationNumber() {
		return $this->examinationNumber;
	}
	public function setExaminationNumber($examinationNumber) {
		if (! is_null($examinationNumber))	{
			$this->addToUpdateList("examinationNumber", $examinationNumber);
			$this->examinationNumber = $examinationNumber;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT numberId FROM examinationNumber";
		return $query;
	}
	public function __construct($database, $numberId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "ExaminationNumber")) Object::shootException("ExaminationNumber System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $numberId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->numberId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "ExaminationNumber")) Object::shootException("ExaminationNumber System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE examinationNumber SET $setList WHERE numberId = '$this->numberId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ExaminationNumber, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "ExaminationNumber")) Object::shootException("ExaminationNumber System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM examinationNumber WHERE numberId = '$this->numberId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ExaminationNumber, Row Deletion Failed');
	}
	public function getClassName()	{
		return "ExaminationNumber";
	}
	protected function getProperties()	{
		return "numberId=$this->numberId"."@examinationNumber=$this->examinationNumber"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1029.numberId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->numberId))."@1029.examinationNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->examinationNumber))."@1029.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1029.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1029.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: ExaminationNumber (NAMESPACETAG = 1029) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->examination))	{
			$this->examination->debug();
		}
		if (! is_null($this->examinationGroup))	{
			$this->examinationGroup->debug();
		}
		if (! is_null($this->student))	{
			$this->student->debug();
		}
		if (! is_null($this->scope))	{
			$this->scope->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->examination))	{
			$matrix1=$this->examination->searchMatrix($matrix1);
		}
		if (! is_null($this->examinationGroup))	{
			$matrix1=$this->examinationGroup->searchMatrix($matrix1);
		}
		if (! is_null($this->student))	{
			$matrix1=$this->student->searchMatrix($matrix1);
		}
		if (! is_null($this->scope))	{
			$matrix1=$this->scope->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->examination))	{
			$csvProcessor1=$this->examination->processCSV($csvProcessor1);
		}
		if (! is_null($this->examinationGroup))	{
			$csvProcessor1=$this->examinationGroup->processCSV($csvProcessor1);
		}
		if (! is_null($this->student))	{
			$csvProcessor1=$this->student->processCSV($csvProcessor1);
		}
		if (! is_null($this->scope))	{
			$csvProcessor1=$this->scope->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $numberId, $conn) {
		$query="SELECT numberId, examinationId, examinationGroupId, studentId, scopeId, examinationNumber, extraFilter, extraInformation, flags FROM examinationNumber WHERE numberId = '$numberId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('ExaminationNumber, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ExaminationNumber, Duplicate or No Record');
		list($numberId, $examinationId, $examinationGroupId, $studentId, $scopeId, $examinationNumber, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->numberId = $numberId;
		if (! is_null($examinationId))	{
			$this->examination = null;
			try	{
				$this->examination = new Examination($this->database, $examinationId, $this->conn);
			} catch (Exception $e)	{
				$this->examination = null;
			}
		}
		if (! is_null($examinationGroupId))	{
			$this->examinationGroup = null;
			try	{
				$this->examinationGroup = new ExaminationGroup($this->database, $examinationGroupId, $this->conn);
			} catch (Exception $e)	{
				$this->examinationGroup = null;
			}
		}
		if (! is_null($studentId))	{
			$this->student = null;
			try	{
				$this->student = new Student($this->database, $studentId, $this->conn);
			} catch (Exception $e)	{
				$this->student = null;
			}
		}
		if (! is_null($scopeId))	{
			$this->scope = null;
			try	{
				$this->scope = new ExaminationNumberScope($this->database, $scopeId, $this->conn);
			} catch (Exception $e)	{
				$this->scope = null;
			}
		}
		if (! is_null($examinationNumber))	{
			$this->examinationNumber = $examinationNumber;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT examinationId, examinationGroupId, studentId, scopeId, examinationNumber, extraFilter, extraInformation, flags FROM examinationNumber WHERE numberId = '$this->numberId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ExaminationNumber, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ExaminationNumber, [Clone] Duplicate or No Record');
		list($examinationId, $examinationGroupId, $studentId, $scopeId, $examinationNumber, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['examinationId'] = $examinationId;
		$masterDataArray['examinationGroupId'] = $examinationGroupId;
		$masterDataArray['studentId'] = $studentId;
		$masterDataArray['scopeId'] = $scopeId;
		$masterDataArray['examinationNumber'] = $examinationNumber;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO examinationNumber ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ExaminationNumber [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ExaminationNumber [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("ExaminationNumber [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
} 
class Grade extends Object {
	private $gradeId;
	private $gradeName;
	private $gradePoint;
	private $educationLevel;
	private $lowestMarks;
	private $highestMarks;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__IS_FAILED = 4; //Allow for Supplimentary
	static $__IS_INCOMPLETE = 5; // Did not Attended the Exam at All
	static $__IS_COMPLETE_FAILED = 6; //Do not Allow for Supplimentary
	public function isCompleteFailed()	{
		return $this->isFlagSetAt(Grade::$__IS_COMPLETE_FAILED);
	}
	public function setCompleteFailed($failed)	{
		if (intval($failed) == 1)	{
			$this->setFlagAt(Grade::$__IS_COMPLETE_FAILED);
		} else {
			$this->resetFlagAt(Grade::$__IS_COMPLETE_FAILED);
		}
	}
	public function isFailed()	{
		return $this->isFlagSetAt(Grade::$__IS_FAILED);
	}
	public function setFailed($failed)	{
		if (intval($failed) == 1)	{
			$this->setFlagAt(Grade::$__IS_FAILED);
		} else {
			$this->resetFlagAt(Grade::$__IS_FAILED);
		}
	}
	public function isIncomplete()	{
		return $this->isFlagSetAt(Grade::$__IS_INCOMPLETE);
	}
	public function setIncomplete($failed)	{
		if (intval($failed) == 1)	{
			$this->setFlagAt(Grade::$__IS_INCOMPLETE);
		} else {
			$this->resetFlagAt(Grade::$__IS_INCOMPLETE);
		}
	}
	public final static function getGradePolicyForEducationLevel($database, $conn, $levelId)	{
		$list = array();
		$query="SELECT gradeId, lowestMarks, highestMarks FROM grades WHERE levelId='$levelId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Grade [static] could not execute query");
		while (list($gradeId, $lowestMarks, $highestMarks)=mysql_fetch_row($result))	{
			$listsize = sizeof($list);
			$list[$listsize] = array();
			$list[$listsize]['low'] = $lowestMarks;
			$list[$listsize]['high'] = $highestMarks;
			$list[$listsize]['gradeId'] = $gradeId;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function getGradeFromMarks($marks, $gradePolicyArray1)	{
		/*
		gradeArray comes form getGradePolicyForEducationLevel
		*/
		$grade = "1001"; //1001 means the grades were not found 
		$marks = trim($marks);
		/*if ($marks == "") $marks="1001"; *///Incomplete  Already Handled
		if (! is_null($gradePolicyArray1))	{
			$marks = floatval($marks);
			foreach ($gradePolicyArray1 as $policy1)	{
				$low = floatval($policy1['low']);
				$high = floatval($policy1['high']);
				$logic_A = ($marks >= $low) && ($marks < $high);
				$logic_B = ($marks == $low) && ($low == $high); //To handle incomplete 1001 
				if ($logic_A xor $logic_B)	{
					$grade = trim($policy1['gradeId']);
					break;
				}
			}
		}
		return $grade;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Grade/gradeId,text,1029;gradeName,text,1029;gradePoint,text,1029;lowestMarks,text,1029;highestMarks,text,1029;extraFilter,text,1029;extraInformation,text,1029;flags,text,1029";
		$lineToView .= EducationLevel::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "grade";
	}
	public final static function getClassContextName()	{
		return "managegrade";
	}
	public final static function getUniqueGradeId($database, $conn)	{
		$query="SELECT gradeId FROM grades";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Grade, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Grade, None or Duplicate Row/Multiple Rows Found');
		list($gradeId)=mysql_fetch_row($result);
		return $gradeId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT gradeId, gradeName FROM grades";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Grade, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $gradeName, $gradePoint, $levelId, $lowestMarks, $highestMarks, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO grades (gradeName, gradePoint, levelId, lowestMarks, highestMarks, extraFilter, extraInformation, flags) VALUES('$gradeName', '$gradePoint', '$levelId', '$lowestMarks', '$highestMarks', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Grade, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Grade, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Grade, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->gradeId;
	}
	public function getGradeId() {
		return $this->gradeId;
	}
	public function getGradeName() {
		return $this->gradeName;
	}
	public function setGradeName($gradeName) {
		if (! is_null($gradeName))	{
			$this->addToUpdateList("gradeName", $gradeName);
			$this->gradeName = $gradeName;
		}
	}
	public function getGradePoint() {
		return $this->gradePoint;
	}
	public function setGradePoint($gradePoint) {
		if (! is_null($gradePoint))	{
			$this->addToUpdateList("gradePoint", $gradePoint);
			$this->gradePoint = $gradePoint;
		}
	}
	public function getEducationLevel() {
		return $this->educationLevel;
	}
	public function setEducationLevel($levelId) {
		if (! is_null($levelId))	{
			$this->addToUpdateList("levelId", $levelId);
			$this->educationLevel = null;
			try	{
				$this->educationLevel = new EducationLevel($this->database, $levelId, $this->conn);
			} catch (Exception $e)	{
				$this->educationLevel = null;
			}
		}
	}
	public function getLowestMarks() {
		return $this->lowestMarks;
	}
	public function setLowestMarks($lowestMarks) {
		if (! is_null($lowestMarks))	{
			$this->addToUpdateList("lowestMarks", $lowestMarks);
			$this->lowestMarks = $lowestMarks;
		}
	}
	public function getHighestMarks() {
		return $this->highestMarks;
	}
	public function setHighestMarks($highestMarks) {
		if (! is_null($highestMarks))	{
			$this->addToUpdateList("highestMarks", $highestMarks);
			$this->highestMarks = $highestMarks;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT gradeId FROM grades";
		return $query;
	}
	public function __construct($database, $gradeId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Grade")) Object::shootException("Grade System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $gradeId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->gradeId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Grade")) Object::shootException("Grade System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE grades SET $setList WHERE gradeId = '$this->gradeId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Grade, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Grade")) Object::shootException("Grade System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM grades WHERE gradeId = '$this->gradeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Grade, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Grade";
	}
	protected function getProperties()	{
		return "gradeId=$this->gradeId"."@gradeName=$this->gradeName"."@gradePoint=$this->gradePoint"."@lowestMarks=$this->lowestMarks"."@highestMarks=$this->highestMarks"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1029.gradeId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradeId))."@1029.gradeName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradeName))."@1029.gradePoint=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradePoint))."@1029.lowestMarks=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->lowestMarks))."@1029.highestMarks=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->highestMarks))."@1029.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1029.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1029.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Grade (NAMESPACETAG = 1029) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->educationLevel))	{
			$this->educationLevel->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->educationLevel))	{
			$matrix1=$this->educationLevel->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->educationLevel))	{
			$csvProcessor1=$this->educationLevel->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $gradeId, $conn) {
		$query="SELECT gradeId, gradeName, gradePoint, levelId, lowestMarks, highestMarks, extraFilter, extraInformation, flags FROM grades WHERE gradeId = '$gradeId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Grade, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe("Grade, Duplicate or No Record ID=$gradeId");
		list($gradeId, $gradeName, $gradePoint, $levelId, $lowestMarks, $highestMarks, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->gradeId = $gradeId;
		if (! is_null($gradeName))	{
			$this->gradeName = $gradeName;
		}
		if (! is_null($gradePoint))	{
			$this->gradePoint = $gradePoint;
		}
		if (! is_null($levelId))	{
			$this->educationLevel = null;
			try	{
				$this->educationLevel = new EducationLevel($this->database, $levelId, $this->conn);
			} catch (Exception $e)	{
				$this->educationLevel = null;
			}
		}
		if (! is_null($lowestMarks))	{
			$this->lowestMarks = $lowestMarks;
		}
		if (! is_null($highestMarks))	{
			$this->highestMarks = $highestMarks;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT gradeName, gradePoint, levelId, lowestMarks, highestMarks, extraFilter, extraInformation, flags FROM grades WHERE gradeId = '$this->gradeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Grade, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Grade, [Clone] Duplicate or No Record');
		list($gradeName, $gradePoint, $levelId, $lowestMarks, $highestMarks, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['gradeName'] = $gradeName;
		$masterDataArray['gradePoint'] = $gradePoint;
		$masterDataArray['levelId'] = $levelId;
		$masterDataArray['lowestMarks'] = $lowestMarks;
		$masterDataArray['highestMarks'] = $highestMarks;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO grades ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Grade [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Grade [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Grade [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class ResultsGroup extends Object {
	private $groupId;
	private $resultsValid;
	private $examinationGroup;
	private $course;
	private $year;
	private $batch;
	private $rawMarksCSVFile;
	private $rawMarksCSVFileChecksum;
	private $gradedMarksCSVFile;
	private $gradedMarksCSVFileChecksum;
	private $displayResultsEnable;
	private $displayResultsSummaryEnable;
	private $availableSemesterList;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__IS_RESULTS_LOCKED = 5;
	static $__IS_AFTER_SUPPLIMENTARY = 6;
	static $__IS_PUBLISH_RESULTS = 7;
	//Status of each student After Compilation 
	static $__RESULTS_CLEARED = 1; //DO NOT CHANGE NUMBERING SYSTEM IT WAS WRITTEN THIS WAY STRATEGICALLY
	static $__RESULTS_FAILED = 2; 	//DO NOT CHANGE NUMBERING SYSTEM IT WAS WRITTEN THIS WAY STRATEGICALLY
	static $__RESULTS_DISQUALIFIED = 3;	//DO NOT CHANGE NUMBERING SYSTEM IT WAS WRITTEN THIS WAY STRATEGICALLY
	public final static function getResultsGroupListFromCriteria($database, $conn, $ownerLoginId, $criteriaArray1)	{
		//For this owner , criteriaArray key-value pair, key is a column name 
		$query = "SELECT resultsGroup.groupId FROM resultsGroup, examinationGroup WHERE resultsGroup.examinationGroupId=examinationGroup.groupId";
		if (! is_null($criteriaArray1))	{
			$columnnumber = 0;
			$setText = "";
			foreach ($criteriaArray1 as $key => $value)	{
				$setText .= " AND $key='$value'";
				$columnnumber++;
			}
			$query = $query.$setText;
		}
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("ResultsGroup [static], Could not Load ResultsGroup List ".mysql_error());
		//It is time to check for ownership 
		$list = array();
		while (list($groupId)=mysql_fetch_row($result))	{
			$group1 = new ResultsGroup($database, $groupId, $conn);
			/*if any ownership shold be done here*/ $list[sizeof($list)] = $groupId;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public function isAfterSupplimentary()	{
		return $this->isFlagSetAt(ResultsGroup::$__IS_AFTER_SUPPLIMENTARY);
	}
	public function setAfterSupplimentary($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(ResultsGroup::$__IS_AFTER_SUPPLIMENTARY);
		} else {
			$this->resetFlagAt(ResultsGroup::$__IS_AFTER_SUPPLIMENTARY);
		}
	}
	public function getRawMarksResultsFile($folderPath)	{
		$resultsFile1 = null;
		try {
			$filename = $this->rawMarksCSVFile;
			if (is_null($filename)) Object::shootException("File is not intialized");
			$filename = $folderPath.$filename;
			if (! file_exists($filename)) Object::shootException("Results File were not found");
			//Need to check if integrity 
			if (md5_file($filename) != $this->rawMarksCSVFileChecksum) Object::shootException("The Results Group could not pass Integrity check");
			$resultsFile1 = new ResultsFile($this->database, $filename, $this->conn);
		} catch (Exception $e)	{
			$resultsFile1 = null;
		}
		return $resultsFile1;
	}
	public function getGradedMarksResultsFile($folderPath)	{
		$resultsFile1 = null;
		try {
			$filename = $this->gradedMarksCSVFile;
			$filename = $folderPath.$filename;
			//Need to check if integrity 
			if (md5_file($filename) != $this->gradedMarksCSVFileChecksum) Object::shootException("The Results Group could not pass Integrity check");
			$resultsFile1 = new ResultsFile($this->database, $filename, $this->conn);
		} catch (Exception $e)	{
			$resultsFile1 = null;
		}
		return $resultsFile1;
	}
	public final static function getResultsGroupFromCourseBatchYearAndSemester($database, $conn, $courseId, $batchId, $year, $semester)	{
		$query = "SELECT resultsGroup.groupId FROM resultsGroup, examinationGroup WHERE resultsGroup.courseId='$courseId' AND resultsGroup.batchId='$batchId' AND resultsGroup._year='$year' AND examinationGroup.semester='$semester' AND resultsGroup.examinationGroupId=examinationGroup.groupId";
		$results = mysql_db_query($database, $query, $conn) or Object::shootException("Results Group [static], Could not execute query");
		//If no results found for specific semester, it is wiser to load for All Semesters [0]
		$returnedRows = mysql_num_rows($results);
		if ($returnedRows == 0)	{
			//Specific for Institutions which their results group covers all semesters in a year
			$semester = 0;
			$query = "SELECT resultsGroup.groupId FROM resultsGroup, examinationGroup WHERE resultsGroup.courseId='$courseId' AND resultsGroup.batchId='$batchId' AND resultsGroup._year='$year' AND examinationGroup.semester='$semester' AND resultsGroup.examinationGroupId=examinationGroup.groupId";
			$results = null;
			$results = mysql_db_query($database, $query, $conn) or Object::shootException("Results Group [static], Could not execute query");
			$returnedRows = mysql_num_rows($results);
		}
		//Now Proceed 
		if ($returnedRows != 1) Object::shootException("[".$returnedRows."] Results Group [static], None or Duplicate records were found");
		list($groupId) = mysql_fetch_row($results);
		return $groupId;
	}
	public final static function getSupplimentaryResultsForThisGroup($database, $conn, $groupId)	{
		$query = "SELECT resultsId FROM results WHERE groupId='$groupId'";
		$results = mysql_db_query($database, $query, $conn) or Object::shootException("Could not fetch supplimentary Results for this a Group");
		$supplimentaryResults1 = null;
		while (list($id)=mysql_fetch_row($results))	{
			$results1 = new Results($database, $id, $conn);
			if (is_null($results1->getExamination())) Object::shootException("Reference Examination were not set");
			if ($results1->getExamination()->isSupplimentary())	{
				$supplimentaryResults1 = $results1;
				break;
			}
		}
		return $supplimentaryResults1;
	}
	public final static function groupResultsCompilation($database, $conn, $profile1, $systemTime1, $groupId, $folderPath, $constantValueIfPassedSupplimentary)	{
		$rawGroupResultsFile1 = null;
		$promise1 = new Promise();
		$group1 = new ResultsGroup($database, $groupId, $conn);
		$group1->setAfterSupplimentary("0");
		if ($group1->getExaminationGroup()->getSemester() == ExaminationGroup::$__ALL_SEMESTERS)	{
			for ($semester = 1; $semester <= $profile1->getNumberOfSemestersPerYear(); $semester++)	{
				$promise1 = self::evaluateGroupResults($database, $conn, $groupId, $folderPath, $semester, false);
				if (! $promise1->isPromising()) Object::shootException($promise1->getReason());
				$tempResultsFile1 = $promise1->getResults();
				//simply merge, there is no header collision 
				if (! is_null($rawGroupResultsFile1)) $tempResultsFile1 = $rawGroupResultsFile1->merge($tempResultsFile1, $systemTime1, false, true);
				$rawGroupResultsFile1 = $tempResultsFile1;
			}
		} else {
			//Specific Semester
			$semester = $group1->getExaminationGroup()->getSemester();
			$promise1 = self::evaluateGroupResults($database, $conn, $groupId, $folderPath, $semester, false);
			if (! $promise1->isPromising()) Object::shootException($promise1->getReason());
			$tempResultsFile1 = $promise1->getResults();
			//simply merge, there is no header collision 
			if (! is_null($rawGroupResultsFile1)) $tempResultsFile1 = $rawGroupResultsFile1->merge($tempResultsFile1, $systemTime1, false, true);
			$rawGroupResultsFile1 = $tempResultsFile1;
		}
		if (is_null($rawGroupResultsFile1)) Object::shootException("The compilation Algorithm returned an Empty Data");
		//We need now to check for Supplimentary Results --
		$supplimentaryResults1 = null;
		if ($group1->isAfterSupplimentary()) $supplimentaryResults1 = self::getSupplimentaryResultsForThisGroup($database, $conn, $groupId);
		if (! is_null($supplimentaryResults1))	{
			$filename = $folderPath.$supplimentaryResults1->getRawMarksCSVFile();
			$supplimentaryResultsFile1 = new ResultsFile($database, $filename, $conn);
			$rawGroupResultsFile1 = ResultsFile::combineGroupResultsFileWithSupplimentaryResultsFile($database, $conn, $rawGroupResultsFile1, $supplimentaryResultsFile1, $constantValueIfPassedSupplimentary);
			if (is_null($rawGroupResultsFile1)) Object::shootException("The compilation returned an Empty data after combining with supplimentary results");
			$group1->setAfterSupplimentary("1");
		}//end-of-supplimentary
		//Apply MRI Rules -- Special Rules ---kd788--special--html788
		//now-proceed
		//Enable display All 
		$rawGroupResultsFile1->enableDisplayAllResults();
		$rawGroupResultsFile1->synchronize();
		//Entering saving mode 
		$groupfilename = "resultsgroup_".$group1->getGroupId().".csv";
		if (! is_null($group1->getRawMarksCSVFile())) $groupfilename = $group1->getRawMarksCSVFile();
		$filename = $folderPath.$groupfilename;
		//RawDataSaving 
		$rawGroupResultsFile1->setFilename($filename);
		$rawGroupResultsFile1->round();
		$rawGroupResultsFile1->save();
		$group1->setRawMarksCSVFile($groupfilename);
		$checksum = md5_file($filename);
		$group1->setRawMarksCSVFileChecksum($checksum);
		//GradedData 
		$groupfilename = $groupfilename.".graded";
		$filename = $folderPath.$groupfilename;
		$rawGroupResultsFile1->grade();
		//Now we have Graded We need to calculate student GPAs 
		$rawGroupResultsFile1->calculateAndSetGPARelatedDatas($profile1);
		$rawGroupResultsFile1->setFilename($filename);
		$rawGroupResultsFile1->save();
		//$rawGroupResultsFile1->debug();
		//Testing for dataLines 
		//$rawGroupResultsFile1->testDataLines();
		$group1->setGradedMarksCSVFile($groupfilename);
		$checksum = md5_file($filename);
		$group1->setGradedMarksCSVFileChecksum($checksum);
		//Commit Saving 
		$group1->commitUpdate();
		//Finalizing Algorithm
		$promise1->setPromise(true);
		return $promise1;
	}
	public final static function evaluateGroupResults($database, $conn, $groupId, $folderPath, $semester, $enableSaving)	{
		//folderPath = data/results/
		//semester false, 1,2 ..
		//constant Value false or value
		$promise1 = new Promise();
		$promise1->setPromise(true);
		$group1 = new ResultsGroup($database, $groupId, $conn);
		$resultsList1 = self::getResultsBelongingToAGroup($database, $conn, $groupId, $semester);
		if (is_null($resultsList1)) Object::shootException("There were not Results Found in a selected Results Group");
		$rawGroupResultsFile1 = null;
		/*
		All Primary Examination Results Should Exists , including their data 
		*/
		$primaryExaminationResults1 = array(); //Index is resultsId 
		$mergedHeaderLine1 = null;
		foreach ($resultsList1 as $resultsId)	{
			$results1 = new Results($database, $resultsId, $conn);
			if ($results1->getExamination()->isPrimary())	{
				if (is_null($results1->getRawMarksCSVFile())) Object::shootException("One of the results is not yet set");
				$filename = $folderPath.$results1->getRawMarksCSVFile();
 				if (! file_exists($filename)) Object::shootException("One of the results is not available");
				$resultsFile1 = new ResultsFile($database, $filename, $conn);
				$primaryExaminationResults1[$results1->getResultsId()] = $resultsFile1;
				$mergedHeaderLine1 = ResultsHeaderLine::mergeHeader($mergedHeaderLine1, $resultsFile1->getHeaderLine());
			}
		}
		if (is_null($mergedHeaderLine1)) Object::shootException("The system could not merge headers, or Individual Results are missing headers");
		if (sizeof($primaryExaminationResults1) == 0) Object::shootException("The system could not get any Individual Results Data");
		foreach ($primaryExaminationResults1 as $resultsId => $resultsFile1)	{
			$results1 = new Results($database, $resultsId, $conn);
			/*
			SIMPLE: Just put your results above percentage weight in a semester kwisha acha story mingi
			$relativeMaximumScore = 0;
			$olderMaximumScore = $resultsFile1->getMaximumScore();
			if ($olderMaximumScore == 0) Object::shootException("The Denominator can not be zero");
			$percentageWeightOfResults = 0;
			*/
			$percentageWeightOfResults = Examination::percentageWeightInAGroupInASemester($database, $conn, $results1->getExamination());
			//$relativeMaximumScore = round((($percentageWeightOfResults * 100)/ $olderMaximumScore),2);
			$resultsFile1->updateScoresBasedOnMaximumScore($percentageWeightOfResults, $resultsFile1->getCompilationTime());
			//Now resultsFile1 has a weighted Results , merging should just involve adding those Res
			$rawGroupResultsFile1 = ResultsFile::mergeWeighted($database, $conn, $rawGroupResultsFile1, $resultsFile1, $mergedHeaderLine1, $resultsFile1->getCompilationTime(), $semester);
		} //end--foreach (resultsId, ResultsFile1)
		if (is_null($rawGroupResultsFile1)) Object::shootException("Group Results File could not be combined");
		$rawGroupResultsFile1->sort(); //We need to preserve our sorting 
		//Now saving
		if ($enableSaving)	{
			$trawGroupResultsFile1 = $rawGroupResultsFile1->cloneMe();
			$groupfilename = "resultsgroup_".$group1->getGroupId().".csv";
			if (! is_null($group1->getRawMarksCSVFile())) $groupfilename = $group1->getRawMarksCSVFile();
			$filename = $folderPath.$groupfilename.".semester.".$semester;
			$trawGroupResultsFile1->setFilename($filename);
			$trawGroupResultsFile1->save();
			$filename = $filename.".graded";
			$trawGroupResultsFile1->grade();
			$trawGroupResultsFile1->setFilename($filename);
			$trawGroupResultsFile1->save();
		} 
		//Finalizing Business 
		$promise1->setPromise(true);
		$promise1->setResults($rawGroupResultsFile1);
		return $promise1;
	}
	public final static function getResultsBelongingToAGroup($database, $conn, $groupId, $semester)	{
		//Semester can be false, 1,2 .. 
		$query = "SELECT resultsId FROM results WHERE groupId='$groupId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Results [static], Could not fetch results from the group");
		$list = array();
		while (list($id)=mysql_fetch_row($result))	{
			$results1 = new Results($database, $id, $conn);
			if (! $semester || (! is_null($results1->getExamination()) && ($results1->getExamination()->getSemester() == $semester)))	{
				$list[sizeof($list)] = $results1->getResultsId();
			}
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function addGroupIfNotExists($database, $conn, $examinationGroupId, $batchId, $courseId, $year, $extraInformation)	{
		/*Older Query :: $query = "SELECT groupId FROM resultsGroup WHERE examinationGroupId='$examinationGroupId' AND extraInformation='$extraInformation'";*/
		$query = "SELECT groupId FROM resultsGroup WHERE examinationGroupId='$examinationGroupId' AND batchId='$batchId' AND courseId='$courseId' AND _year='$year'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Results Group [static], Could not execute fetching query");
		$groupId = "";
		if (mysql_num_rows($result) == 1)	{
			//Found existing record 
			list($groupId) = mysql_fetch_row($result);
		} else {
			//Now insert a new record
			$query="INSERT INTO resultsGroup (examinationGroupId, courseId, _year, batchId, extraInformation) VALUES('$examinationGroupId', '$courseId', '$year', '$batchId', '$extraInformation')";
			$result = mysql_db_query($database, $query, $conn) or Object::shootException("Results Group [static], Could not execute adding query");
			$query="SELECT LAST_INSERT_ID()";
			$result=mysql_db_query($database, $query, $conn) or Object::shootException('Group, Could not Extract Last Inserted ID');
			if (mysql_num_rows($result) != 1) Object::shootException('Group, Last Inserted ID is Not Unique');
			list($groupId)=mysql_fetch_row($result);
		}	
		return $groupId;
	}
	public function canEditNow()	{
		return (false && $this->canLockResultsNow());
	}
	public function canDeleteNow()	{
		return (false && $this->canLockResultsNow());
	}
	public function canNullifyNow()	{
		return $this->canLockResultsNow();
	}
	public function canUploadNow()	{
		return $this->canLockResultsNow();
	}
	public function canViewResultsDetails()	{
		return true; //Allow this any time
	}
	public function canAddNewItemNow()	{
		return (false && $this->canLockResultsNow()); //Make this false we need to emphasise results synchronization
	}
	public function canPublishNow()	{
		return ($this->isResultsLocked() && ! $this->isPublishResultsEnabled());
	}
	public function canUnpublishNow()	{
		return ($this->isResultsLocked() && $this->isPublishResultsEnabled());
	}
	public function canLockResultsNow()	{
		return ! $this->isResultsLocked(); //Means you can now compile
	}
	public function canUnlockResultsNow()	{
		return $this->isResultsLocked();
	}
	public function isEligibleForPublication()	{
		return ($this->isResultsLocked() && $this->isPublishResultsEnabled());
	}
	public function isPublishResultsEnabled()	{
		return $this->isFlagSetAt(ResultsGroup::$__IS_PUBLISH_RESULTS);
	}
	public function setPublishResultsEnabled($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(ResultsGroup::$__IS_PUBLISH_RESULTS);
		} else {
			$this->resetFlagAt(ResultsGroup::$__IS_PUBLISH_RESULTS);
		}
	}
	public function isResultsLocked()	{
		return $this->isFlagSetAt(ResultsGroup::$__IS_RESULTS_LOCKED);
	}
	public function setResultsLocked($val)	{
		if (intval($val) == 1)	{
			//We need to make sure the corresponding Results Are Locked the we lock this one too
			$resultsIdList = ResultsGroup::getResultsBelongingToAGroup($this->database, $this->conn, $this->groupId, false);
			if (! is_null($resultsIdList))	{
				foreach ($resultsIdList as $resultsId)	{
					try {
						$results1 = new Results($this->database, $resultsId, $this->conn);
						$results1->setResultsLocked($val);
						$results1->commitUpdate();
					} catch (Exception $e)	{
						Object::shootException("One of The Results belonging to this Group Failed to Lock ".$e->getMessage());
					}
				}
			}
			$this->setFlagAt(ResultsGroup::$__IS_RESULTS_LOCKED);
		} else {
			$this->resetFlagAt(ResultsGroup::$__IS_RESULTS_LOCKED);
			$this->setAfterSupplimentary("0"); //Need to clear Supplimentary Status
		}
	}
	public final static function isResultsGroupBatchCourseAndYearAlreadyAddedInExaminationGroup($database, $conn, $groupId, $batchId, $courseId, $year)	{
		$query = "SELECT groupId FROM resultsGroup WHERE examinationGroupId='$groupId' AND batchId='$batchId' AND courseId='$courseId' AND _year='$year'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("ResultsGroup [static], Malfunctioned Query");
		return (mysql_num_rows($result) != 0);
	}
	public final static function isReferenceExaminationAlreadyLinkedToResultsGroup($database, $conn, $examinationId, $groupId)	{
		$query = "SELECT resultsId FROM results WHERE examinationId='$examinationId' AND groupId='$groupId'";
		$results = mysql_db_query($database, $query, $conn) or Object::shootException("Results Group [static], Malfunctioned query");
		return (mysql_num_rows($results) != 0);
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT groupId FROM resultsGroup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Results Group, Static Load All Data Failed');
		$list=array();
		while(list($__id)=mysql_fetch_row($result))	{
			try {
				$results1 = new ResultsGroup($database, $__id, $conn);
				if (is_null($results1->getExaminationGroup())) Object::shootException("[Results Group ==>static] Examination Group is null");
				$listsize=sizeof($list);
				$list[$listsize]=array();
				$list[$listsize]['id']=$__id;
				$list[$listsize]['val']=$results1->getExaminationGroup()->getGroupName();
				$list[$listsize]['pEId']=$results1->getExaminationGroup()->getGroupId();
			} catch (Exception $e)	{
				//Just Skip 
			}
		}
		return $list;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@ResultsGroup/resultsValid,boolean,1031;year,text,1031;rawMarksCSVFile,text,1031;rawMarksCSVFileChecksum,text,1031;gradedMarksCSVFile,text,1031;gradedMarksCSVFileChecksum,text,1031;displayResultsEnable,boolean,1031;displayResultsSummaryEnable,boolean,1031;availableSemesterList,list,1031;extraFilter,text,1031;extraInformation,text,1031;flags,text,1031";
		$lineToView .= ExaminationGroup::getAvailableViewableColumns();
		$lineToView .= Course::getAvailableViewableColumns();
		$lineToView .= AccademicYear::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "resultsgroup";
	}
	public final static function getClassContextName()	{
		return "manageresultsgroup";
	}
	public final static function getUniqueGroupId($database, $conn)	{
		$query="SELECT groupId FROM resultsGroup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ResultsGroup, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('ResultsGroup, None or Duplicate Row/Multiple Rows Found');
		list($groupId)=mysql_fetch_row($result);
		return $groupId;
	}
	public final static function add($database, $conn, $resultsValid, $examinationGroupId, $courseId, $_year, $batchId, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $displayResultsEnable, $displayResultsSummaryEnable, $availableSemesterList, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO resultsGroup (resultsValid, examinationGroupId, courseId, _year, batchId, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, displayResultsEnable, displayResultsSummaryEnable, availableSemesterList, extraFilter, extraInformation, flags) VALUES('$resultsValid', '$examinationGroupId', '$courseId', '$_year', '$batchId', '$rawMarksCSVFile', '$rawMarksCSVFileChecksum', '$gradedMarksCSVFile', '$gradedMarksCSVFileChecksum', '$displayResultsEnable', '$displayResultsSummaryEnable', '$availableSemesterList', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ResultsGroup, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ResultsGroup, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('ResultsGroup, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->groupId;
	}
	public function getGroupId() {
		return $this->groupId;
	}
	public function isResultsValid() {
		return $this->resultsValid;
	}
	public function setResultsValid($resultsValid) {
		if (! is_null($resultsValid))	{
			$this->addToUpdateList("resultsValid", $resultsValid);
			$this->resultsValid = ($resultsValid == "1");
		}
	}
	public function getExaminationGroup() {
		return $this->examinationGroup;
	}
	public function setExaminationGroup($examinationGroupId) {
		if (! is_null($examinationGroupId))	{
			$this->addToUpdateList("examinationGroupId", $examinationGroupId);
			$this->examinationGroup = null;
			try	{
				$this->examinationGroup = new ExaminationGroup($this->database, $examinationGroupId, $this->conn);
			} catch (Exception $e)	{
				$this->examinationGroup = null;
			}
		}
	}
	public function getCourse() {
		return $this->course;
	}
	public function setCourse($courseId) {
		if (! is_null($courseId))	{
			$this->addToUpdateList("courseId", $courseId);
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
	}
	public function getYear() {
		return $this->year;
	}
	public function setYear($_year) {
		if (! is_null($_year))	{
			$this->addToUpdateList("_year", $_year);
			$this->year = $_year;
		}
	}
	public function getBatch() {
		return $this->batch;
	}
	public function setBatch($batchId) {
		if (! is_null($batchId))	{
			$this->addToUpdateList("batchId", $batchId);
			$this->batch = null;
			try	{
				$this->batch = new AccademicYear($this->database, $batchId, $this->conn);
			} catch (Exception $e)	{
				$this->batch = null;
			}
		}
	}
	public function getRawMarksCSVFile() {
		return $this->rawMarksCSVFile;
	}
	public function setRawMarksCSVFile($rawMarksCSVFile) {
		if (! is_null($rawMarksCSVFile))	{
			$this->addToUpdateList("rawMarksCSVFile", $rawMarksCSVFile);
			$this->rawMarksCSVFile = $rawMarksCSVFile;
		}
	}
	public function getRawMarksCSVFileChecksum() {
		return $this->rawMarksCSVFileChecksum;
	}
	public function setRawMarksCSVFileChecksum($rawMarksCSVFileChecksum) {
		if (! is_null($rawMarksCSVFileChecksum))	{
			$this->addToUpdateList("rawMarksCSVFileChecksum", $rawMarksCSVFileChecksum);
			$this->rawMarksCSVFileChecksum = $rawMarksCSVFileChecksum;
		}
	}
	public function getGradedMarksCSVFile() {
		return $this->gradedMarksCSVFile;
	}
	public function setGradedMarksCSVFile($gradedMarksCSVFile) {
		if (! is_null($gradedMarksCSVFile))	{
			$this->addToUpdateList("gradedMarksCSVFile", $gradedMarksCSVFile);
			$this->gradedMarksCSVFile = $gradedMarksCSVFile;
		}
	}
	public function getGradedMarksCSVFileChecksum() {
		return $this->gradedMarksCSVFileChecksum;
	}
	public function setGradedMarksCSVFileChecksum($gradedMarksCSVFileChecksum) {
		if (! is_null($gradedMarksCSVFileChecksum))	{
			$this->addToUpdateList("gradedMarksCSVFileChecksum", $gradedMarksCSVFileChecksum);
			$this->gradedMarksCSVFileChecksum = $gradedMarksCSVFileChecksum;
		}
	}
	public function isDisplayResultsEnable() {
		return $this->displayResultsEnable;
	}
	public function setDisplayResultsEnable($displayResultsEnable) {
		if (! is_null($displayResultsEnable))	{
			$this->addToUpdateList("displayResultsEnable", $displayResultsEnable);
			$this->displayResultsEnable = ($displayResultsEnable == "1");
		}
	}
	public function isDisplayResultsSummaryEnable() {
		return $this->displayResultsSummaryEnable;
	}
	public function setDisplayResultsSummaryEnable($displayResultsSummaryEnable) {
		if (! is_null($displayResultsSummaryEnable))	{
			$this->addToUpdateList("displayResultsSummaryEnable", $displayResultsSummaryEnable);
			$this->displayResultsSummaryEnable = ($displayResultsSummaryEnable == "1");
		}
	}
	public function getAvailableSemesterList() {
		return $this->availableSemesterList;
	}
	public function setAvailableSemesterList($availableSemesterList) {
		if (! is_null($availableSemesterList))	{
			$this->addToUpdateList("availableSemesterList", $availableSemesterList);
			$this->availableSemesterList = explode(",", $availableSemesterList);
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT groupId FROM resultsGroup";
		return $query;
	}
	public function __construct($database, $groupId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "ResultsGroup")) Object::shootException("ResultsGroup System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $groupId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->groupId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "ResultsGroup")) Object::shootException("ResultsGroup System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE resultsGroup SET $setList WHERE groupId = '$this->groupId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ResultsGroup, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "ResultsGroup")) Object::shootException("ResultsGroup System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM resultsGroup WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ResultsGroup, Row Deletion Failed');
	}
	public function getClassName()	{
		return "ResultsGroup";
	}
	protected function getProperties()	{
		return "groupId=$this->groupId"."@year=$this->year"."@rawMarksCSVFile=$this->rawMarksCSVFile"."@rawMarksCSVFileChecksum=$this->rawMarksCSVFileChecksum"."@gradedMarksCSVFile=$this->gradedMarksCSVFile"."@gradedMarksCSVFileChecksum=$this->gradedMarksCSVFileChecksum"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags"."@resultsValid=$this->resultsValid"."@displayResultsEnable=$this->displayResultsEnable"."@displayResultsSummaryEnable=$this->displayResultsSummaryEnable"."@".Object::getPropertiesFromArray("availableSemesterList", $this->availableSemesterList);
	}
	protected function getAdvancedProperties()	{
		return "1031.groupId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->groupId))."@1031.year=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->year))."@1031.rawMarksCSVFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->rawMarksCSVFile))."@1031.rawMarksCSVFileChecksum=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->rawMarksCSVFileChecksum))."@1031.gradedMarksCSVFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradedMarksCSVFile))."@1031.gradedMarksCSVFileChecksum=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradedMarksCSVFileChecksum))."@1031.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1031.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1031.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags))."@1031.resultsValid=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->resultsValid))."@1031.displayResultsEnable=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->displayResultsEnable))."@1031.displayResultsSummaryEnable=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->displayResultsSummaryEnable))."@".Object::getAdvancedPropertiesFromArray("availableSemesterList", $this->availableSemesterList, 1031);
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: ResultsGroup (NAMESPACETAG = 1031) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->examinationGroup))	{
			$this->examinationGroup->debug();
		}
		if (! is_null($this->course))	{
			$this->course->debug();
		}
		if (! is_null($this->batch))	{
			$this->batch->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->examinationGroup))	{
			$matrix1=$this->examinationGroup->searchMatrix($matrix1);
		}
		if (! is_null($this->course))	{
			$matrix1=$this->course->searchMatrix($matrix1);
		}
		if (! is_null($this->batch))	{
			$matrix1=$this->batch->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->examinationGroup))	{
			$csvProcessor1=$this->examinationGroup->processCSV($csvProcessor1);
		}
		if (! is_null($this->course))	{
			$csvProcessor1=$this->course->processCSV($csvProcessor1);
		}
		if (! is_null($this->batch))	{
			$csvProcessor1=$this->batch->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $groupId, $conn) {
		$query="SELECT groupId, resultsValid, examinationGroupId, courseId, _year, batchId, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, displayResultsEnable, displayResultsSummaryEnable, availableSemesterList, extraFilter, extraInformation, flags FROM resultsGroup WHERE groupId = '$groupId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('ResultsGroup, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ResultsGroup, Duplicate or No Record');
		list($groupId, $resultsValid, $examinationGroupId, $courseId, $_year, $batchId, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $displayResultsEnable, $displayResultsSummaryEnable, $availableSemesterList, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->groupId = $groupId;
		if (! is_null($resultsValid))	{
			$this->resultsValid = ($resultsValid == "1");
		}
		if (! is_null($examinationGroupId))	{
			$this->examinationGroup = null;
			try	{
				$this->examinationGroup = new ExaminationGroup($this->database, $examinationGroupId, $this->conn);
			} catch (Exception $e)	{
				$this->examinationGroup = null;
			}
		}
		if (! is_null($courseId))	{
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
		if (! is_null($_year))	{
			$this->year = $_year;
		}
		if (! is_null($batchId))	{
			$this->batch = null;
			try	{
				$this->batch = new AccademicYear($this->database, $batchId, $this->conn);
			} catch (Exception $e)	{
				$this->batch = null;
			}
		}
		if (! is_null($rawMarksCSVFile))	{
			$this->rawMarksCSVFile = $rawMarksCSVFile;
		}
		if (! is_null($rawMarksCSVFileChecksum))	{
			$this->rawMarksCSVFileChecksum = $rawMarksCSVFileChecksum;
		}
		if (! is_null($gradedMarksCSVFile))	{
			$this->gradedMarksCSVFile = $gradedMarksCSVFile;
		}
		if (! is_null($gradedMarksCSVFileChecksum))	{
			$this->gradedMarksCSVFileChecksum = $gradedMarksCSVFileChecksum;
		}
		if (! is_null($displayResultsEnable))	{
			$this->displayResultsEnable = ($displayResultsEnable == "1");
		}
		if (! is_null($displayResultsSummaryEnable))	{
			$this->displayResultsSummaryEnable = ($displayResultsSummaryEnable == "1");
		}
		if (! is_null($availableSemesterList))	{
			$this->availableSemesterList = explode(",", $availableSemesterList);
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT resultsValid, examinationGroupId, courseId, _year, batchId, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, displayResultsEnable, displayResultsSummaryEnable, availableSemesterList, extraFilter, extraInformation, flags FROM resultsGroup WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ResultsGroup, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ResultsGroup, [Clone] Duplicate or No Record');
		list($resultsValid, $examinationGroupId, $courseId, $_year, $batchId, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $displayResultsEnable, $displayResultsSummaryEnable, $availableSemesterList, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['resultsValid'] = $resultsValid;
		$masterDataArray['examinationGroupId'] = $examinationGroupId;
		$masterDataArray['courseId'] = $courseId;
		$masterDataArray['_year'] = $_year;
		$masterDataArray['batchId'] = $batchId;
		$masterDataArray['rawMarksCSVFile'] = $rawMarksCSVFile;
		$masterDataArray['rawMarksCSVFileChecksum'] = $rawMarksCSVFileChecksum;
		$masterDataArray['gradedMarksCSVFile'] = $gradedMarksCSVFile;
		$masterDataArray['gradedMarksCSVFileChecksum'] = $gradedMarksCSVFileChecksum;
		$masterDataArray['displayResultsEnable'] = $displayResultsEnable;
		$masterDataArray['displayResultsSummaryEnable'] = $displayResultsSummaryEnable;
		$masterDataArray['availableSemesterList'] = $availableSemesterList;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO resultsGroup ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ResultsGroup [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ResultsGroup [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("ResultsGroup [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class TranscriptFile	{
	private $headers;
	private $dataLines;
	private $database;
	private $conn;
	private $filename;
	static $__IS_CLONE_MODE = "is_clone_mode";
	public final static function getTranscriptForStudent($database, $conn, $profile1, $student1, $systemTime1, $resultsFolder, $transcriptFolder, $headerDataArray1)	{
		$login1 = $student1->getLogin();
		if (is_null($login1)) Object::shootException("The Login Account for student were not found");
		$course1 = $student1->getCourse();
		if (is_null($course1)) Object::shootException("There were no reference Course found");
		$department1 = $course1->getDepartment();
		if (is_null($department1)) Object::shootException("There were no reference Department found");
		$level1 = $course1->getEducationLevel();
		if (is_null($level1)) Object::shootException("There is no reference education level found");
		$filename = $transcriptFolder.$student1->getTranscriptFile();
		if (is_null($student1->getTranscriptFile()) || ! file_exists($filename))	{
			//Better create it 
			$transcriptFile1 = TranscriptFile::getTranscriptFileForStudent($database, $conn, $profile1, $student1->getStudentId(), $systemTime1, $resultsFolder, $transcriptFolder);
			if (is_null($transcriptFile1)) Object::shootException("Transcript File could not be generated");
			$promise1 = $transcriptFile1->save();
			if (! $promise1->isPromising()) Object::shootException("Could not save transcript data");
		}
		$student1 = new Student($database, $student1->getStudentId(), $conn); //same as reload 
		if (is_null($student1)) Object::shootException("Student Could not be found");
		if (is_null($student1->getTranscriptFile())) Object::shootException("There were no transcript file found");
		$filename = $transcriptFolder.$student1->getTranscriptFile();
		if (md5_file($filename) != $student1->getTranscriptHash())	Object::shootException("Transcript Data has been compromised");
		$transcriptFile1 = new TranscriptFile($database, $filename, $conn);
		$window1 = "<div class=\"ui-sys-transcript\">";
		$window1 .= "<div class=\"ui-sys-printable-block ui-sys-printable-header\"><div class=\"ui-sys-profile-logo\"><img alt=\"PF\" src=\"".$profile1->getExtraFilter()."\"/></div><div class=\"ui-sys-header-content\">Transcript Data</div><div class=\"ui-sys-user-logo\"><img alt=\"SP\" src=\"".$student1->getExtraFilter()."\"/></div><div class=\"ui-sys-clearboth\">&nbsp;</div></div>";
		$window1 .= "<div class=\"ui-sys-printable-block\"><table style=\"font-size: 1em; width: 100%;\" class=\"pure-table\"><thead><tr><th colspan=\"4\"></th></tr></thead><tbody>";
		$window1 .= "<tr><td>COURSE:</td><td><b>".$course1->getCourseName()."</b></td><td>DEPARTMENT:</td><td><b>".$department1->getDepartmentName()."</b></td></tr>";
		$window1 .= "<tr><td>SPECIALIZATION:</td><td><b>".$department1->getDepartmentName()."</b></td><td>GENDER:</td><td><b>".$login1->getSex()->getSexName()."</b></td></tr>";
		$window1 .= "<tr><td>STUDENT REG NO.</td><td><b>".$student1->getRegistrationNumber()."</b></td><td>NAME:</td><td><b>".$login1->getFullname()."</b></td></tr>";
		$window1 .= "</tbody></table></div>";
		$duration = $transcriptFile1->getDuration(); 
		for ($i = 1; $i < $duration; $i++)	{
			$currentYearTranscriptFile1 = $transcriptFile1->cloneMe(); //retain original copy
			$currentYearTranscriptFile1 = $currentYearTranscriptFile1->getTranscriptFileForYear($i);
			$headers = $currentYearTranscriptFile1->getHeaders();
			$dataLines = $currentYearTranscriptFile1->getDataLines();
			$firstRow = true;
			$window1 .= "<div class=\"ui-sys-printable-block\"><table class=\"pure-table\"><thead><tr><th>YEAR(LEVEL)</th><th>MODULE CODE & TITLE</th><th>GRADE</th><th>GRADE<br/>POINTS</th><th>CREDITS</th><th>MODULE POINTS</th></tr></thead><tbody>";
			$totalUnits = 0;
			$totalPoints = 0;
			foreach ($dataLines as $dataLine1)	{
				$window1 .= "<tr>";
				if ($firstRow) {
					$window1 .= "<td rowspan=\"".(intval($currentYearTranscriptFile1->getLength()) + 2)."\">".$level1->getLevelName()." (".$level1->getLevelCode().")</td>";
				}
				$units = $dataLine1->getTotalUnits();
				$points = intval($units) * intval($dataLine1->getGradePoint());
				$window1 .= "<td>".$dataLine1->getSubjectCode().": ".$dataLine1->getSubjectName()."</td>";
				$window1 .= "<td>".$dataLine1->getGradeName()."</td>";
				$window1 .= "<td>".$dataLine1->getGradePoint()."</td>";
				$window1 .= "<td>".$units."</td>";
				$window1 .= "<td>".$points."</td>";
				$window1 .= "</tr>";
				$firstRow = false;
				$totalUnits += $units;
				$totalPoints += $points;
			}
			//ADD Two rows here
			$window1 .= "<tr><td class=\"ui-sys-inline-controls-right\" colspan=\"3\"><b>Total</b></td><td>$totalUnits</td><td>$totalPoints</td></tr>";
			$lastRow = "<tr><td colspan=\"5\">&nbsp;</td></tr>";
			if ($totalUnits != 0)	{
				$totalGPA = $totalUnits / $totalPoints;
				$awardId = ClassOfAward::getClassOfAwardFromGPAAndEducationLevel($database, $conn, $totalGPA, $level1->getLevelId());
				$totalGPA = Number::displayFloatDecimal($totalGPA, Object::$__GPA_PRECISION);
				$award1 = new ClassOfAward($database, $awardId, $conn);
				$awardName = $award1->getAwardName();
				$lastRow = "<tr><td class=\"ui-sys-inline-controls-right\" colspan=\"5\"><b>$awardName, GPA is $totalGPA</b></td></tr>";
			} 
			$window1 .= "</tbody></table></div>";
		}
		$window1 .= "</div>";
		return $window1;
	}
	public function __construct($database, $filename, $conn)	{
		if ($filename == TranscriptFile::$__IS_CLONE_MODE) return;
		if (! file_exists($filename)) Object::shootException("Transcript File, Transcript file not available");
		$file1 = fopen($filename, "r") or Object::shootException("Transcript File, Could not open file for reading");
		$this->filename = $filename;
		$this->database = $database;
		$this->conn = $conn;
		$this->headers = array();
		$this->dataLines = array();
		$lineCount = 0;
		$state = 0;
		while (($line = fgets($file1)) !== false)	{
			$lineCount++;
			$lineArr = explode(",", $line);
			if (sizeof($lineArr) != Object::$numberOfTranscriptFileColumns) continue;
			if (($state == 0) && (trim($lineArr[0]) == "@-header"))	{
				//HEADER AREA
				$keyAndValue = explode("_!_",$lineArr[1]); 
				if (sizeof($keyAndValue) != 2) continue;
				$key = $keyAndValue[0];
				$val = $keyAndValue[1];
				$this->headers[$key] = $val; 
			} else if (($state == 0) && (trim($lineArr[0]) == "@-business-logic-begin"))	{
				//TRANSITION AREA
				$state = 1;
			} else if (($state == 1) && (trim($lineArr[0]) == "@-business-logic-end"))	{
				//TRANSITION AREA TO EXIT
				$state = 2;				
			} else if ($state == 1)	{
				//DATALINES 
				$this->dataLines[sizeof($this->dataLines)] = new TranscriptDataLine($line);
			} else {
				continue;
			}			
		} //end-while
		fclose($file1);
		//The Algorithm should exit at state = 2 
		if ($state != 2) Object::shootException("Transcript file was not formed properly");
	}
	public function __destruct()	{ }
	public function getLength()	{ return sizeof($this->dataLines); }
	public function getTranscriptFileForYear($year)	{
		$dataLines = array();
		foreach ($this->dataLines as $dataLine1)	{
			if (intval($dataLine1->getYear()) == intval($year))	{
				$dataLines[sizeof($dataLines)] = $dataLine1->cloneMe();
			}
		}
		$this->dataLines = $dataLines;
		return $this;
	}
	public function getTranscriptFileForSemester($semester)	{
		$dataLines = array();
		foreach ($this->dataLines as $dataLine1)	{
			if (intval($dataLine1->getCummulativeSemester()) == intval($semester))	{
				$dataLines[sizeof($dataLines)] = $dataLine1->cloneMe();
			}
		}
		$this->dataLines = $dataLines;
		return $this;
	}
	public function getHeaders()	{ return $this->headers; }
	public function getDataLines()	{ return $this->dataLines; }
	public final static function getTranscriptFileForStudent($database, $conn, $profile1, $studentId, $systemTime1, $resultsFolder, $transcriptFolder)	{
		$student1 = new Student($database, $studentId, $conn);
		if ($student1->isDiscontinued()) Object::shootException("Transcript is for non Discontinued Students");
		if (! $student1->isAlreadyGraduated()) Object::shootException("Transcript is for students who has graduated only");
		$course1 = $student1->getCourse();
		if (is_null($course1)) Object::shootException("Student is not linked to any course");
		$level1 = $course1->getEducationLevel();
		if (is_null($level1)) Object::shootException("There is no defined education level");
		//source data Structure begin
		$subjectDataStructure1 = $student1->getMySubjectListDataStructure($profile1); /* list[cummulativeSemester][index] = transactionId */
		if (is_null($subjectDataStructure1)) Object::shootException("Could not load subject list for student");
		$resultsDataStructure1 = $student1->getMyCompiledResultsDataStructure($profile1, $resultsFolder);
		/*
			list[cummulativeSemester][index]['transactionId'] = transactionId
			list[cummulativeSemester][index]['rawMarks'] = marks [ie 80]
			list[cummulativeSemester][index]['gradeId'] = gradeId
			list[cummulativeSemester][index][transactionId] = gradeId 
		*/
		if (is_null($resultsDataStructure1)) Object::shootException("1--Could not load results for student");
		$gpaDataStructure1 = $student1->getMyGPADataStructure($subjectDataStructure1, $resultsDataStructure1);
		/*
			ds1[cummulativeSemester]['gpa'] = GPA
									['cleared'] = true //1 means cleared 0 failed 
									['awardId'] = null; reference to ClassOfAward
									['totalUnits'] = 0.0 
									['totalModulePoints'] = 0.0 
		*/
		if (is_null($gpaDataStructure1)) Object::shootException("Could not load GPA structure for student");
		$overalGPADataStructure1 = $student1->getMyOveralGPADataStructure($gpaDataStructure1);
		/*
			list['gpa'], ['cleared'], ['awardId'], ['disqualified']
		*/
		if (is_null($overalGPADataStructure1)) Object::shootException("Could not load the overall GPA structure for student");
		//source data Structure ends
		$transcriptFile1 = new TranscriptFile($database, TranscriptFile::$__IS_CLONE_MODE, $conn);
		//Writing headers 
		$headers = array();
		$headers['studentId'] = $studentId;
		$headers['compilationTime'] = $systemTime1->getDateAndTimeString();
		$headers['fileType'] = "transcript";
		$headers['fileTypeCode'] = md5($headers['fileType']);
		//Student Course 
		$course1 = $student1->getCourse();
		if (is_null($course1)) Object::shootException("Reference Course for Student were not found");
		$headers['courseId'] = $course1->getCourseId();
		$headers['courseName'] = $course1->getCourseName();
		$headers['duration'] = $course1->getDuration();
		$headers['gpa'] = $overalGPADataStructure1['gpa'];
		$cleared = 0;
		if ($overalGPADataStructure1['cleared']) $cleared = 1;
		$headers['cleared'] = $cleared;
		$disqualified = 0;
		if ($overalGPADataStructure1['disqualified']) $disqualified = 1;
		$headers['disqualified'] = $disqualified;
		//Award 
		$headers['awardId'] = $overalGPADataStructure1['awardId'];
		if (! is_null($headers['awardId']))	{
			$award1 = new ClassOfAward($database, $headers['awardId'], $conn);
			$headers['awardName'] = $award1->getAwardName();
		}
		$headers['graduationYear'] = $student1->getGraduationYear();
		//Now dealing with data 
		$dataLines = array();
		$yearDataArray1 = array();
		foreach ($subjectDataStructure1 as $cummulativeSemester => $subjectList1)	{
			$dataArray1 = array();
			$currentYearArr = System::getYearAndSemesterFromACummulativeSemester($cummulativeSemester, $profile1);
			$currentYear = $currentYearArr['year'];
			if (! isset($yearDataArray1[$currentYear])) $yearDataArray1[$currentYear] = array();
			$currentSemester = $currentYearArr['semester'];
			$yearDataArray1[$currentYear][$currentSemester] = array();
			foreach ($subjectList1 as $index => $transactionId)	{
				$dataArray1['transactionId'] = $transactionId;
				$transaction1 = new CourseAndSubjectTransaction($database, $transactionId, $conn);
				$subject1 = $transaction1->getSubject();
				if (is_null($subject1)) Object::shootException("The Subject Could not be found or is empty");
				$dataArray1['subjectName'] = $subject1->getSubjectName();
				$dataArray1['subjectCode'] = $subject1->getSubjectCode();
				$dataArray1['totalUnits'] = $subject1->getTotalUnits();
				//Not Subject and Results share indices 
				if (isset($resultsDataStructure1[$cummulativeSemester]) && isset($resultsDataStructure1[$cummulativeSemester][$index]) && ($resultsDataStructure1[$cummulativeSemester][$index]['transactionId'] == $transactionId))	{
					//We are sure now we are dealing with the correct results 
					$resultsArray1 = $resultsDataStructure1[$cummulativeSemester][$index];
					$dataArray1['rawMarks'] = $resultsArray1['rawMarks'];
					$dataArray1['gradeId'] = $resultsArray1['gradeId'];
					$grade1 = new Grade($database, $dataArray1['gradeId'], $conn);
					$dataArray1['gradeName'] = $grade1->getGradeName();
					$dataArray1['gradePoint'] = $grade1->getGradePoint();
				}
			}
			$dataArray1['semester'] = $cummulativeSemester;
			$dataArray1['year'] = $currentYear;
			//dealing with semester and year gpa 
			$semesterBlock1 = $gpaDataStructure1[$cummulativeSemester];
			$headers['sem_'.$cummulativeSemester.'_gpa'] = $semesterBlock1['gpa'];
			$yearDataArray1[$currentYear][$currentSemester]['gpa'] = $semesterBlock1['gpa'];
			$headers['sem_'.$cummulativeSemester.'_awardId'] = $semesterBlock1['awardId'];
			$award1 = new ClassOfAward($database, $semesterBlock1['awardId'], $conn);
			$headers['sem_'.$cummulativeSemester.'_awardName'] = $award1->getAwardName();
			$dataLine1 = new TranscriptDataLine(TranscriptDataLine::$__IS_CLONE_MODE);
			$dataLine1->assignData($dataArray1);
			$dataLines[sizeof($dataLines)] = $dataLine1;
		}
		//Finalizing Data for year 
		foreach ($yearDataArray1 as $year => $semesterBlock1)	{
			$totalGPA = 0.0;
			$semesterCount = 0;
			foreach ($semesterBlock1 as $semester => $dataBlock1)	{
				$totalGPA = $totalGPA + floatval($dataBlock1['gpa']);
				$semesterCount++;
			}
			if ($semesterCount != 0)	{
				$totalGPA = ($totalGPA / $semesterCount);
				$totalGPA = Number::truncateFloatDecimal($totalGPA, Object::$__GPA_PRECISION);
				//Need to find its equivalent ClassOfAward 
				$awardId = ClassOfAward::getClassOfAwardFromGPAAndEducationLevel($database, $conn, $totalGPA, $level1->getLevelId());
				$totalGPA = Number::displayFloatDecimal($totalGPA, Object::$__GPA_PRECISION);
				//Saving 
				$headers['year_'.$year.'_gpa'] = $totalGPA;
				$headers['year_'.$year.'_awardId'] = $awardId;
				if (! is_null($awardId))	{
					$award1 = new ClassOfAward($database, $awardId, $conn);
					$headers['year_'.$year.'_awardName'] = $award1->getAwardName();
				}
			}
		}
		$filename = "student_".$student1->getStudentId().".csv";
		if (! is_null($student1->getTranscriptFile()))	$filename = $student1->getTranscriptFile();
		$headers['filename'] = $filename;
		$filename = $transcriptFolder.$filename;
		$transcriptFile1->assignData($database, $conn, $filename, $headers, $dataLines);
		return $transcriptFile1;
	}
	public function save()	{
		$promise1 = new Promise();
		$promise1->setPromise(true);
		if (file_exists($this->filename)) $promise1 = FileFactory::createBackupFile($this->filename);
		if (! $promise1->isPromising()) Object::shootException("Could not create a backup file");
		$lineCount = 0;
		$file1 = fopen($this->filename, "w") or Object::shootException("Could not open file for writing");
		//writing Headers 
		foreach ($this->headers as $key => $val)	{
			$lineCount++;
			$line = "@-header,".$key."_!_".$val;
			for ($i = 2; $i < Object::$numberOfTranscriptFileColumns; $i++)	{
				$line .= ",";
			}
			$line .= "\n";
			fwrite($file1, $line) or Object::shootException("Could not write to a file [$lineCount]");
		}
		//Begin Instruction 
		$lineCount++;
		$line = "@-business-logic-begin";
		for ($i = 1; $i < Object::$numberOfTranscriptFileColumns; $i++)	{
			$line .= ",";
		}
		$line .= "\n";
		fwrite($file1, $line) or Object::shootException("Could not write to a file [$lineCount]");
		foreach ($this->dataLines as $dataLine1)	{
			$lineCount++;
			if (is_null($dataLine1)) continue;
			$dataLine1->synchronize();
			$line = $dataLine1->getLine(); 
			$line = str_replace("\n","", str_replace("\r", "", $line));
			$line .= "\n";
			fwrite($file1, $line) or Object::shootException("Could not write to a file [$lineCount]");
		}
		//End Instruction 
		$lineCount++;
		$line = "@-business-logic-end";
		for ($i = 1; $i < Object::$numberOfTranscriptFileColumns; $i++)	{
			$line .= ",";
		}
		$line .= "\n";
		fwrite($file1, $line) or Object::shootException("Could not write to a file [$lineCount]");
		fclose($file1);
		//Entering Saving Mode 
		$checksum = md5_file($this->filename);
		$student1 = new Student($this->database, $this->headers['studentId'], $this->conn);
		$student1->setTranscriptFile($this->headers['filename']);
		$student1->setTranscriptHash($checksum);
		$student1->commitUpdate();
		return $promise1;
	}
	public function cloneMe()	{
		$data1 = new TranscriptFile("Ndimangwa", TranscriptFile::$__IS_CLONE_MODE, "Fadhili");
		$headers = array();
		foreach ($this->headers as $key => $val)	{
			$headers[$key] = $val;
		}
		$dataLines = array();
		foreach ($this->dataLines as $key => $dataLine1)	{
			$dataLines[$key] = $dataLine1->cloneMe();
		}
		$data1->assignData($this->database, $this->conn, $this->filename, $headers, $dataLines);
		return $data1;
	}
	public function assignData($database, $conn, $filename, $headers, $dataLines)	{
		$this->database = $database;
		$this->conn = $conn;
		$this->filename = $filename;
		$this->headers = $headers;
		$this->dataLines = $dataLines;
	}
	public function getCompilationTime()	{
		$compilationTime1 = null;
		try {
			$compilationTime1 = new DateAndTime("Ndimangwa", $this->headers['compilationTime'], "Fadhili");
		} catch (Exception $e)	{
			$compilationTime1 = null;
		}
		return $compilationTime1;
	}
	public function getStudentId()	{ return $this->headers['studentId']; }
	public function getStudent()	{
		$student1 = null;
		try	{
			$student1 = new Student($this->database, $this->headers['studentId'], $this->conn);
		} catch (Exception $e)	{
			$student1 = null;
		}
		return $student1;
	}
	public function getCourseId()	{ return $this->headers['courseId']; }
	public function getCourseName()	{ return $this->headers['courseName']; }
	public function getDuration()	{ return intval($this->headers['duration']); }
	public function getCourse()	{
		$course1 = null;
		try {
			$course1 = new Course($this->database, $this->headers['courseId'], $this->conn);
		} catch (Exception $e)	{
			$course1 = null;
		}
		return $course1;
	}
	public function getGPA()	{ return $this->headers['gpa']; }
	public function isCleared()	{ return (intval($this->headers['cleared']) == 1); }
	public function isDisqualified()	{ return (intval($this->headers['disqualified']) == 1); }
	public function getAwardId()	{ return $this->headers['awardId']; }
	public function getAwardName()	{ return $this->headers['awardName']; }
	public function getAward()	{
		$award1 = null;
		try {
			$award1 = new ClassOfAward($this->database, $this->headers['awardId'], $this->conn);
		} catch (Exception $e)	{
			$award1 = null;
		}
		return $award1;
	}
	public function getStudentFilename()	{ return $this->headers['filename']; }
}
class TranscriptDataLine	{
	private $line;
	private $transactionId;
	private $semester;
	private $year;
	private $subjectName;
	private $subjectCode;
	private $rawMarks;
	private $gradeId;
	private $gradeName;
	private $gradePoint;
	private $totalUnits;
	static $__IS_CLONE_MODE = "is_clone_mode";
	public function __construct($line)	{
		if ($line == TranscriptDataLine::$__IS_CLONE_MODE) return;
		$this->line = $line;
		$lineArr = explode(",", $line);
		if (sizeof($lineArr) != Object::$numberOfTranscriptFileColumns) return;
		$this->transactionId = $lineArr[0];
		$this->semester = $lineArr[1];
		$this->year = $lineArr[2];
		$this->subjectName = $lineArr[5];
		$this->subjectCode = $lineArr[6];
		$this->rawMarks = $lineArr[7];
		$this->gradeId = $lineArr[8];
		$this->gradeName = $lineArr[9];
		$this->gradePoint = $lineArr[10];
		$this->totalUnits = $lineArr[11];
	} 
	public function assignData($dataArray)	{
		if (isset($dataArray['transactionId'])) $this->transactionId = $dataArray['transactionId'];
		if (isset($dataArray['semester'])) $this->semester = $dataArray['semester'];
		if (isset($dataArray['year'])) $this->year = $dataArray['year'];
		if (isset($dataArray['subjectName'])) $this->subjectName = $dataArray['subjectName'];
		if (isset($dataArray['subjectCode'])) $this->subjectCode = $dataArray['subjectCode'];
		if (isset($dataArray['rawMarks'])) $this->rawMarks = $dataArray['rawMarks'];
		if (isset($dataArray['gradeId'])) $this->gradeId = $dataArray['gradeId'];
		if (isset($dataArray['gradeName'])) $this->gradeName = $dataArray['gradeName'];
		if (isset($dataArray['gradePoint'])) $this->gradePoint = $dataArray['gradePoint'];
		if (isset($dataArray['totalUnits'])) $this->totalUnits = $dataArray['totalUnits'];
		if (isset($dataArray['line'])) $this->line = $dataArray['line'];
	}
	public function cloneMe()	{
		$data1 = new TranscriptDataLine(TranscriptDataLine::$__IS_CLONE_MODE);
		$dataArray = array();
		$dataArray['transactionId'] = $this->transactionId;
		$dataArray['semester'] = $this->semester;
		$dataArray['year'] = $this->year;
		$dataArray['subjectName'] = $this->subjectName;
		$dataArray['subjectCode'] = $this->subjectCode;
		$dataArray['rawMarks'] = $this->rawMarks;
		$dataArray['gradeId'] = $this->gradeId;
		$dataArray['gradeName'] = $this->gradeName;
		$dataArray['gradePoint'] = $this->gradePoint;
		$dataArray['totalUnits'] = $this->totalUnits;
		$dataArray['line'] = $this->line;
		$data1->assignData($dataArray);
		return $data1;
	}
	public function synchronize()	{
		//Should be called prior to saving 
		$line = $this->transactionId;
		$line .= ",".$this->semester;
		$line .= ",".$this->year;
		$line .= ",,";
		$line .= ",".$this->subjectName;
		$line .= ",".$this->subjectCode;
		$line .= ",".$this->rawMarks;
		$line .= ",".$this->gradeId;
		$line .= ",".$this->gradeName;
		$line .= ",".$this->gradePoint;
		$line .= ",".$this->totalUnits;		
		$this->line = $line;
	}
	public function setTransactionId($transactionId)	{ $this->transactionId = $transactionId; }
	public function getTransactionId()	{ return $this->transactionId; }
	public function setCummulativeSemester($semester) { $this->semester = $semester; }
	public function getCummulativeSemester()	{ return $this->semester; }
	public function setYear($year) { $this->year = $year; }
	public function getYear()	{ return $this->year; }
	public function setSubjectName($subjectName)	{ $this->subjectName = $subjectName; }
	public function getSubjectName()	{ return $this->subjectName; }
	public function setSubjectCode($subjectCode)	{ $this->subjectCode = $subjectCode; }
	public function getSubjectCode()	{ return $this->subjectCode; }
	public function setRawMarks($rawMarks)	{ $this->rawMarks = $rawMarks; }
	public function getRawMarks()	{ return $this->rawMarks; }
	public function setGradeId($gradeId)	{ $this->gradeId = $gradeId; }
	public function getGradeId()	{ return $this->gradeId; }
	public function setGradeName($gradeName) { $this->gradeName = $gradeName; }
	public function getGradeName()	{ return $this->gradeName; }
	public function setGradePoint($gradePoint)	{ $this->gradePoint = $gradePoint; }
	public function getGradePoint()	{ return $this->gradePoint; }
	public function setTotalUnits($totalUnits)	{ $this->totalUnits = $totalUnits; }
	public function getTotalUnits()	{ return $this->totalUnits; }
	public function getLine()	{ return $this->line; }
}
class ResultsFile {
	private $headers;
	private $headerLine;
	private $dataLines;
	private $filename;
	private $controlIndexArray;
	private $database;
	private $conn;
	private $dataHolder;
	static $__IS_CLONE_MODE = "__is_clone_mode";
	static $__IS_COMPILED_RESULTS = 4;
	static $__IS_AFTER_SUPPLIMENTARY = 5;
	public function replaceDataLine($studentId, $newDataLine)	{
		if (! isset($this->controlIndexArray[$studentId])) Object::shootException("Could not find a reference DataLine to be replaced");
		$this->dataLines[$this->controlIndexArray[$studentId]] = $newDataLine;
		return $this;
	}
	public function testDataLines()	{
		$year = $this->headers['year'];
		$semester = $this->headers['semester'];
		foreach ($this->dataLines as $dataLine1)	{
			$this->replaceDataLine($dataLine1->getStudentId(), $dataLine1->synchronize());
		}
		foreach ($this->dataLines as $dataLine1)	{
			echo "<br/>Line : ".$dataLine1->getLine();
			die("<br/>GPA for Semester $semester is ".$dataLine1->getGPAForSemester($semester));
		}
	}
	public function synchronize()	{
		//Make sure all Object data are ready for saving
		if (is_null($this->dataLines)) Object::shootException("Synchronize, The results contains empty students");
		foreach ($this->dataLines as $dataLine1)	{
			$this->replaceDataLine($dataLine1->getStudentId(), $dataLine1->synchronize());
		}
		return $this;
	}
	public function copyStudentsControlDataFrom($resultsFile1)	{ 
		if (is_null($resultsFile1)) return;
		$controlDataLines1 = $resultsFile1->getDataLines();
		if (is_null($controlDataLines1)) return $this;
		foreach ($controlDataLines1 as $dataLine1)	{
			if (isset($this->controlIndexArray[$dataLine1->getStudentId()]))	{
				$this->dataLines[$this->controlIndexArray[$dataLine1->getStudentId()]]->setGPA($dataLine1->getGPA());
				$this->dataLines[$this->controlIndexArray[$dataLine1->getStudentId()]]->setRegistrationNumber($dataLine1->getRegistrationNumber());
				$this->dataLines[$this->controlIndexArray[$dataLine1->getStudentId()]]->setFlags($dataLine1->getFlags());
				$this->dataLines[$this->controlIndexArray[$dataLine1->getStudentId()]]->setClearedDetails($dataLine1->getClearedDetails());
				$this->dataLines[$this->controlIndexArray[$dataLine1->getStudentId()]]->setUnitDetails($dataLine1->getUnitDetails());
			}
		}
		return $this;
	}
	public function calculateAndSetGPARelatedDatas($profile1)	{
		if (is_null($this->dataLines)) Object::shootException("GPA Related Datas, The results contains empty students");
		if (is_null($this->headers)) Object::shootException("GPA Related Datas, Headers were not found");
		$year = $this->headers['year'];
		$semester = $this->headers['semester'];
		$course1 = new Course($this->database, $this->headers['courseId'], $this->conn);
		foreach ($this->dataLines as $dataLine1)	{
			$dataLine1->putData('year', $year);
			$dataLine1->putData('semester', $semester);
			$dataLine1->putData('profile', $profile1);
			$dataLine1->putData('database', $this->database);
			$dataLine1->putData('connectionString', $this->conn);
			$dataLine1->putData('minimumGPABeforeSupplimentary', $course1->getMinimumGPABeforeSupplimentary());
			$dataLine1->putData('minimumGPAAfterSupplimentary', $course1->getMinimumGPAAfterSupplimentary());
			$isAfterSupplimentary = 0;
			if ($this->isAfterSupplimentary()) $isAfterSupplimentary = 1;
			$dataLine1->putData('isAfterSupplimentary', $isAfterSupplimentary);
			$dataLine1->calculateAndSetGPARelatedDatas();
		}
	}
	public function enableDisplayAllResults()	{
		//Enable display All , continue from here traverse all dataLine to enable Display Results
		if (is_null($this->dataLines)) Object::shootException("Display All Results, The results contains empty students");
		foreach ($this->dataLines as $dataLine1)	{
			$dataLine1->setDisplayResultsEnable(1);
		}
	}
	public final static function drawMarksCard($database, $conn, $profile1, $paper1, $resultsFolder, $results1, $resultsName, $transactionList, $controlFlags)	{
		/*
		Input
			database , conn 
			paper1 : Paper Object {paperName, width, height}
			profile1 : System Profile 
			results1 : we will use its getRawMarksCSVFile , getRawMarksCSVFileChecksum, getGradedMarksCSVFile and getGradedMarksCSVFileChecksum
			resultName : Name of Examination, can be briefcase name, examinationGroup name etc 
			controlFlags : For future enhancement
		*/
		//Step 1: Check if files are set
		if (is_null($results1->getRawMarksCSVFile())) Object::shootException("The Raw Marks Data Are Empty");
		if (is_null($results1->getGradedMarksCSVFile())) Object::shootException("The Graded Marks Data Are Empty");
		//Step 2: Check if file exists 
		$rawMarksFile = $resultsFolder.$results1->getRawMarksCSVFile();
		if (! file_exists($rawMarksFile)) Object::shootException("The Raw Marks were not found");
		$gradedMarksFile = $resultsFolder.$results1->getGradedMarksCSVFile();
		if (! file_exists($gradedMarksFile)) Object::shootException("The Graded Marks were not found");
		//Step 3: Checking Data Integrity 
		if (md5_file($rawMarksFile) != $results1->getRawMarksCSVFileChecksum()) Object::shootException("The Data File Could not pass Integrity check");
		if (md5_file($gradedMarksFile) != $results1->getGradedMarksCSVFileChecksum()) Object::shootException("The Graded File Could not pass Integrity check");
		//Step 4 : Start writing window 
		$width = $paper1->getWidth();
		$height = $paper1->getHeight();
		if ($paper1->isOrientationFlipped())	{
			$width = $paper1->getHeight();
			$height = $paper1->getWidth();
		}
		$window1 = "<div syyle=\"width: $width; height: $height; position: relative;\">";
		$profileName = $profile1->getProfileName();
		$window1 .= "<div><div style=\"font-size: 1.2em; font-weight: bold;\">$profileName</div></div>";
		$window1 .="</div>";
		return $window1;
	}
	public function debug()	{
		if (! is_null($this->dataLines))	{
			foreach ($this->dataLines as $dataLine1)	{
				echo "<br/>";
				$dataLine1->debug();
			}
		} else {
			echo "<br/>No Data Nulled";
		}
	}
	public function setData($key, $value)	{
		$this->dataHolder[$key] = $value;
	}
	public function getData($key)	{
		$val = null;
		if (isset($this->dataHolder[$key])) $val = $this->dataHolder[$key];
		return $val;
	}
	/*Begin -- Flags Processing Functions */
	public function isCompiledResults()	{ return Object::isControlFlagsSetAt($this->headers['flags'], ResultsFile::$__IS_COMPILED_RESULTS); }
	public function setCompiledResults($compiled)	{
		$val = intval("".$compiled);
		if ($val == 1)	{	
			$this->headers['flags'] = Object::setControlFlagsAt($this->headers['flags'], ResultsFile::$__IS_COMPILED_RESULTS);
		} else {
			$this->headers['flags'] = Object::resetControlFlagsAt($this->headers['flags'], ResultsFile::$__IS_COMPILED_RESULTS);
		}
	}
	public function isAfterSupplimentary()	{ return Object::isControlFlagsSetAt($this->headers['flags'], ResultsFile::$__IS_AFTER_SUPPLIMENTARY); }
	public function setAfterSupplimentary($compiled)	{
		$val = intval("".$compiled);
		if ($val == 1)	{	
			$this->headers['flags'] = Object::setControlFlagsAt($this->headers['flags'], ResultsFile::$__IS_AFTER_SUPPLIMENTARY);
		} else {
			$this->headers['flags'] = Object::resetControlFlagsAt($this->headers['flags'], ResultsFile::$__IS_AFTER_SUPPLIMENTARY);
		}
		//We need to set the corresponding bits on each dataLine 
		if (! is_null($this->dataLines))	{
			foreach ($this->dataLines as $dataLine1) $dataLine1->setAfterSupplimentary($compiled);
		}
	}
	/*End -- Flags Processing Functions */
	public function getInstruction()	{ return $this->headers['instruction']; }
	public function getColumnCount()	{ return $this->headers['columnCount']; }
	public function getMaximumScore()	{ return $this->headers['maximumScore']; }
	public function setMaximumScore($maximumScore)	{ $this->headers['maximumScore'] = $maximumScore; }
	public function getFileType()	{ return $this->headers['fileType']; }
	public function getFileTypeCode()	{ return $this->headers['fileTypeCode']; }
	public function getCourse()	{
		$course1 = null;
		try {
			$course1 = new Course($this->database, trim($this->headers['courseId']), $this->conn);
		} catch (Exception $e)	{
			$course1 = null;
		}
		return $course1;
	}
	public function getYear()	{ return $this->headers['year']; }
	public function getSemester()	{ return $this->headers['semester']; }
	public function getBatch()	{
		$batch1 = null;
		try {
			$batch1 = new AccademicYear($this->database, trim($this->headers['batchId']), $this->conn);
		} catch (Exception $e)	{ $batch1 = null; }
		return $batch1;
	}
	public function getCompilationTime()	{
		$time1 = null;
		try {
			$time1 = new DateAndTime("zoomtong", trim($this->headers['compilationTime']), "zk4001"); 
		} catch (Exception $e)	{
			$time1 = null;
		}
		return $time1;
	}
	public function setCompilationTime($dtString)	{
		$this->headers['compilationTime'] = $dtString;
	}
	public function getFlags()	{ return $this->headers['flags']; }
	public function setFlags($flags)	{ $this->headers['flags'] = $flags; }
	public function getHeaders()	{ return $this->headers; }
	public function setHeaders($headers)	{ $this->headers = $headers; }
	public function getHeaderLine()	{ return $this->headerLine; }
	public function setHeaderLine($headerLine)	{ $this->headerLine = $headerLine; }
	public function getDataLines()	{ return $this->dataLines; }
	public function setDataLines($dataLines)	{ $this->dataLines = $dataLines; }
	public function setFilename($filename)	{ $this->filename = $filename; }
	public function getFilename()	{ return $this->filename; }
	public function getControlIndexArray()	{ return $this->controlIndexArray; }
	public function setDatabase($database)	{ $this->database = $database; }
	public function setConnectionString($conn)	{ $this->conn = $conn; }
	public function assignData($database, $conn, $headers, $headerLine, $dataLines, $filename, $controlIndexArray)	{
		$this->database = $database;
		$this->conn = $conn;
		$this->headers = $headers;
		$this->headerLine = $headerLine;
		$this->dataLines = $dataLines;
		$this->filename = $filename;
		$this->controlIndexArray = $controlIndexArray;
	}
	public function cloneMe()	{
		$data1 = new ResultsFile($this->database, ResultsFile::$__IS_CLONE_MODE, $this->conn);
		$headers = array();
		foreach ($this->headers as $key => $val)	{
			$headers[$key] = $val;
		}
		$headerLine = $this->headerLine->cloneMe();
		$dataLines = array();
		foreach ($this->dataLines as $key => $dataLine1)	{
			$dataLines[$key] = $dataLine1->cloneMe();
		}
		$controlIndexArray = array();
		foreach ($this->controlIndexArray as $key => $val)	{
			$controlIndexArray[$key] = $val;
		}
		$data1->assignData($this->database, $this->conn, $headers, $headerLine, $dataLines, $this->filename, $controlIndexArray);
		return $data1;
	}
	public function isRawDataValid()	{
		$maximumScore = $this->getMaximumScore();
		if (($maximumScore == "") || (intval($maximumScore) == 0)) return false;
		$isValid = true;
		foreach ($this->dataLines as $dataLine1)	{
			$marksArray1 = $dataLine1->getMarksArray();
			if (is_null($marksArray1)) Object::shootException("Perhaps Inconsistent format");
			foreach ($marksArray1 as $marks)	{
				$isValid = $isValid && (($marks == "") || (floatval($marks) <= floatval($maximumScore)));
				if (! $isValid) break;
			}
		}
		return $isValid;
	}
	public function isStudentAvailable($studentId)	{
		return isset($this->controlIndexArray[$studentId]);
	}
	public function setMarksAt($studentId, $transactionId, $marks)	{
		if (! isset($this->controlIndexArray[$studentId])) Object::shootException("Student is not in the source File");
		$dataLine1 = $this->dataLines[$this->controlIndexArray[$studentId]];
		$dataLine1->setMarksForTransaction($transactionId, $marks);
	}
	public function getMarksAt($studentId, $transactionId)	{
		if (! isset($this->controlIndexArray[$studentId])) Object::shootException("Student is not in the source File");
		$dataLine1 = $this->dataLines[$this->controlIndexArray[$studentId]];
		return $dataLine1->getMarksForTransaction($transactionId);
	}
	public function getStudentAndTransactionResultsFile($studentId, $transactionId)	{
		$data1 = $this->getStudentResultsFile($studentId);
		if (is_null($data1)) Object::shootException("Student is not found in the source Object");
		$data1 = $data1->getTransactionResultsFile($transactionId);
		if (is_null($data1)) Object::shootException("Subject is not found in the source Object");
		return $data1;
	}
	public function getStudentResultsDataLine($studentId)	{
		if (! isset($this->controlIndexArray[$studentId])) return null;
		return ($this->dataLines[$this->controlIndexArray[$studentId]]);
	}
	public function getStudentResultsFile($studentId)	{
		$data1 = new ResultsFile($this->database, ResultsFile::$__IS_CLONE_MODE, $this->conn);
		if (! isset($this->controlIndexArray[$studentId])) return null; //Empty data 
		$dataLines = array();
		$dataLines[0] = $this->dataLines[$this->controlIndexArray[$studentId]];
		$controlIndexArray[$studentId] = 0; //By default now zero 
		$data1->assignData($this->database, $this->conn, $this->headers, $this->headerLine, $dataLines, $this->filename, $controlIndexArray);
		return $data1;
	}
	public function getTransactionResultsFile($transactionId)	{
		$data1 = new ResultsFile($this->database, ResultsFile::$__IS_CLONE_MODE, $this->conn);
		$headerLine1 = $this->headerLine->getTransactionHeader($transactionId);
		if (is_null($headerLine1)) return null;
		//Working With Headers 
		$this->headers["columnCount"] = $headerLine1->getNumberOfColumns();
		//Working With data Now 
		$dataLines = array();
		$controlIndexArray = array();
		foreach ($this->dataLines as $dataLine1)	{
			$initialString = $dataLine1->getInitialString();
			$marks = $dataLine1->getMarksForTransaction($transactionId);
			$line = $initialString.",".$marks;
			$newDataLine1 = new ResultsDataLine($line, $headerLine1);
			$datasize = sizeof($dataLines);
			$dataLines[$datasize] = $newDataLine1;
			$controlIndexArray[$newDataLine1->getStudentId()] = $datasize; 
		}
		$data1->assignData($this->database, $this->conn, $this->headers, $headerLine1, $dataLines, $this->filename, $controlIndexArray);
		return $data1;
	}
	public function getCustomTransactionResultsFile($transactionList)	{
		$data1 = new ResultsFile($this->database, ResultsFile::$__IS_CLONE_MODE, $this->conn);
		$headerLine1 = $this->headerLine->getCustomTransactionHeader($transactionList);
		if (is_null($headerLine1)) return null;
		$headerArray1 = $headerLine1->getHeaderArray();
		//Working With Headers 
		$this->headers["columnCount"] = $headerLine1->getNumberOfColumns();
		//Working With data Now 
		$dataLines = array();
		$controlIndexArray = array();
		foreach ($this->dataLines as $dataLine1)	{
			$initialString = $dataLine1->getInitialString();
			$line = $initialString;
			foreach ($headerArray1 as $transactionId)	{
				$marks = $dataLine1->getMarksForTransaction($transactionId);
				$line = $line.",".$marks;
			}			
			$newDataLine1 = new ResultsDataLine($line, $headerLine1);
			$datasize = sizeof($dataLines);
			$dataLines[$datasize] = $newDataLine1;
			$controlIndexArray[$newDataLine1->getStudentId()] = $datasize; 
		}
		$data1->assignData($this->database, $this->conn, $this->headers, $headerLine1, $dataLines, $this->filename, $controlIndexArray);
		return $data1;
	}
	public function getAccademicResultsFileForResults($resultsId)	{
		$resultsFile1 = $this;
		//Make sure the supplied Results File is rawMarks
		$data1 = new ResultsFile("Ndimangwa", ResultsFile::$__IS_CLONE_MODE, "Fadhili");
		$dataLines = array();
		$controlIndexArray = array();
		$headerLine1 = $resultsFile1->getHeaderLine();
		if (is_null($headerLine1)) Onject::shootException("Empty Header were found");
		$headerArray1 = $headerLine1->getHeaderArray(); 
		$maximumScore = $resultsFile1->getMaximumScore();
		$results1 = new Results($this->database, $resultsId, $this->conn);
		$examination1 = $results1->getExamination();
		if (is_null($examination1)) Object::shootException("Reference Examination were not found");
		if (intval($maximumScore) == 0) Object::shootException("Maximum Score Can not be Zero");
		$course1 = $resultsFile1->getCourse();
		if (is_null($course1)) Object::shootException("Could not find Course Reference");
		$gradePolicyArray1 = Grade::getGradePolicyForEducationLevel($this->database, $this->conn, $course1->getEducationLevel()->getLevelId());
		foreach ($this->dataLines as $dataLine1)	{
			$gradedDataLine1 = $dataLine1->cloneMe();
			$gradedDataLine1 = $gradedDataLine1->grade($gradePolicyArray1, $maximumScore);
			$marksArray1 = $dataLine1->getMarksArray();
			$gradeArray1 = $gradedDataLine1->getMarksArray();
			foreach ($headerArray1 as $transactionId)	{
				$transaction1 = new CourseAndSubjectTransaction($this->database, $transactionId, $this->conn);
				//Using Raw Data to get Cleared Status -- Called Technical Sup
				$percentage = 0;
				if (trim($marksArray1[$transactionId]) != 0)	{
					$percentage = ($marksArray1[$transactionId] * 100) / $maximumScore;
				}
				$gradeId = $gradeArray1[$transactionId];
				$grade1 = new Grade($this->database, $gradeId, $this->conn);
				if (! $dataLine1->isDisqualified() && ! $dataLine1->isFailed() && ($percentage >= $examination1->getMinimumScorePercentage()))	{
					$dataLine1->setCleared("1");
				} else if (! $dataLine1->isDisqualified()) {
					if ($transaction1->isCoreModule())	{
						$dataLine1->setDisqualified("1");
					} else {
						//Non -- Core Module
						$dataLine1->setFailed("1");
					}
				}
				//Specific Technical Details 
				if ($percentage < $examination1->getMinimumScorePercentage())	{
					if ($transaction1->isCoreModule())	{
						$dataLine1->addClearedDetails($transactionId, ResultsGroup::$__RESULTS_DISQUALIFIED);
					} else {
						$dataLine1->addClearedDetails($transactionId, ResultsGroup::$__RESULTS_FAILED);
					}
				}
				//Using Grading Policy to get Cleared Status -- Normal Sup
				if (! $dataLine1->isDisqualified() && $grade1->isIncomplete())	{
					$dataLine1->setDisqualified("1");
				} else if (! $dataLine1->isDisqualified() && $grade1->isFailed())	{
					if ($transaction1->isCoreModule())	{
						$dataLine1->setDisqualified("1");
					} else {
						//Non -Core Module
						$dataLine1->setFailed("1");
					}
				}
			}
			$dataLine1 = $dataLine1->synchronize();
			$datasize = sizeof($dataLines);
			$dataLines[$datasize] = $dataLine1;
			$controlIndexArray[$dataLine1->getStudentId()] = $datasize; 
		}
		$data1->assignData($this->database, $this->conn, $this->headers, $this->headerLine, $dataLines, $this->filename, $controlIndexArray);
		return $data1;
	}
	public function getSemesterResultsFile($semester)	{
		$transactionList = array();
		$headerLine1 = $this->headerLine;
		$headerArray1 = $headerLine1->getHeaderArray();
		if (is_null($headerArray1)) Object::shootException("Course/Subject Transaction List were not found");
		$this->headers["semester"] = $semester;
		foreach ($headerArray1 as $transactionId)	{
			$transaction1 = new CourseAndSubjectTransaction($this->database, $transactionId, $this->conn);
			if (intval($transaction1->getSemester()) == intval($semester))	{
				$transactionList[sizeof($transactionList)] = $transaction1->getTransactionId();
			}
		}
		return $this->getCustomTransactionResultsFile($transactionList);
	}
	public function resequenceDataLines()	{
		$dataLines = array();
		$controlIndexArray = array();
		foreach ($this->dataLines as $dataLine1)	{
			$datasize = sizeof($dataLines);
			$dataLines[$datasize] = $dataLine1;
			$controlIndexArray[$dataLine1->getStudentId()] = $datasize;
		}
		$this->dataLines = $dataLines;
		$this->controlIndexArray = $controlIndexArray;
	}
	public final static function buildResultsFileFromCollection($database, $conn, $studentCollection1, $headerLine1, $controlFlags)	{
		$resultsFile1 = new ResultsFile($database, ResultsFile::$__IS_CLONE_MODE, $conn);
		$resultsFile1->setHeaderLine($headerLine1);
		$studentCollection1 = $studentCollection1->makeUnique();
		if (is_null($studentCollection1->getCollection())) Object::shootException("The Results Collection returned an empty data");
		$flags = 0;
		//By default this student has cleared -- no results yet 
		$flags = Object::setControlFlagsAt($flags, ResultsDataLine::$__POS_CLEARED);
		//By default set show results enabled 
		$flags = Object::setControlFlagsAt($flags, ResultsDataLine::$__DISPLAY_RESULTS);
		foreach ($studentCollection1->getCollection() as $studentId)	{
			$student1 = new Student($database, $studentId, $conn);
			$dataLine1 = new ResultsDataLine(ResultsDataLine::$__IS_CLONE_MODE, $headerLine1);
			//Add Content to dataLine 
			$dataLine1->setStudentId($studentId);
			$dataLine1->setRegistrationNumber($student1->getRegistrationNumber());
			$dataLine1->setFlags($flags);
			$resultsFile1->addAndBuildDataLine($dataLine1);
		}
		$resultsFile1->setDatabase($database);
		$resultsFile1->setConnectionString($conn);
		return $resultsFile1; 
	}
	public function addAndBuildDataLine($dataLine1)	{
		if (is_null($dataLine1)) return;
		$dataLine1->setResultsHeader($this->headerLine);
		$dataLine1 = $dataLine1->build();
		$datasize = sizeof($this->dataLines);
		$this->dataLines[$datasize] = $dataLine1;
		$this->controlIndexArray[$dataLine1->getStudentId()] = $datasize; 
	}
	public function getListOfStudents()	{
		$list = array();
		if (! is_null($this->dataLines))	{
			foreach ($this->dataLines as $dataLine1)	{
				$list[sizeof($list)] = $dataLine1->getStudentId();
			}
		}
		if (is_null($list)) return null;
		return $list;
	}
	public function __construct($database, $filename, $conn)	{
		$this->headers = array();
		if ($filename == ResultsFile::$__IS_CLONE_MODE) return;
		if (! file_exists($filename)) Object::shootException("File does not exists");
		$this->dataHolder = array(); //Hold any data 
		$this->filename = $filename;
		$this->database = $database;
		$this->conn = $conn;
		if (is_null($filename)) Object::shootException("The filename is not yet set");
		$file1 = fopen($filename, "r") or Object::shootException("Could not create file reference");
		$lineCount = 0;
		$this->dataLines = array();
		$this->controlIndexArray = array(); //index is studentId value is dataLine index 
		while (($line = fgets($file1)) !== false)	{
			$lineCount++;
			if (trim($line) == "") continue;
			$lineArr = explode(",", $line);
			if (sizeof($lineArr) < 2) continue;
			/*  
			Dealing with line 1 .. 12 
			*/
			if (($lineCount >= 1) && ($lineCount <= 13))	{
				$headerBlock = $lineArr[1]; // ie instruction: dsdads 
				$keyValueArr = explode("_!_", $headerBlock);
				if (sizeof($keyValueArr) != 2) continue;
				$key = trim($keyValueArr[0]);
				$value = trim($keyValueArr[1]);
				$this->headers[$key] = $value;
			} else if ($lineCount == 14)	{
				continue; //Reserved Lines
			} else if ($lineCount == 15)	{
				$this->headerLine = new ResultsHeaderLine($line);
			} else if ($lineCount == 16)	{
				continue; //Caption for user
			} else if ($lineCount > 16)	{
				//Data Handling
				$dataLine1 = new ResultsDataLine($line, $this->headerLine);
				$datasize = sizeof($this->dataLines);
				$this->dataLines[$datasize] = $dataLine1;
				$this->controlIndexArray[$dataLine1->getStudentId()] = $datasize; 
			}
		} //end-while
		fclose($file1);
	}
	public function grade()	{
		$course1 = $this->getCourse();
		if (is_null($course1)) Object::shootException("Grading, Could not find course for this Results File");
		$gradePolicyArray1 = Grade::getGradePolicyForEducationLevel($this->database, $this->conn, $course1->getEducationLevel()->getLevelId());
		for ($i =0; $i < sizeof($this->dataLines); $i++)	{
			$this->dataLines[$i] = $this->dataLines[$i]->grade($gradePolicyArray1, $this->getMaximumScore()); 
		}
		return $this;
	}
	public function save()	{
		$promise1 = new Promise();
		$promise1->setPromise(true);
		if (file_exists($this->filename))	$promise1 = FileFactory::createBackupFile($this->filename);
		if (! $promise1->isPromising()) return $promise1;
		//Check If All Student Exists before attempting to open files for writing to avoid partial files 
		for ($i=0; $i < sizeof($this->dataLines); $i++)	{
			$dataLine1 = $this->dataLines[$i];
			//We need to verify student against registrationNumber 
			$studentId = $dataLine1->getStudentId();
			$registrationNumber = $dataLine1->getRegistrationNumber();
			if (! ResultsDataLine::verifyStudentIdWithRegistrationNumber($this->database, $this->conn, $studentId, $registrationNumber)) Object::shootException("Student [$studentId], with registration number [$registrationNumber] does not exists");
		}
		//If file not exists create
		$file1 = fopen($this->filename, "w") or Object::shootException("Could not create file for writing");
		$currentLineNumber = 0;
		$numberOfColumns = intval($this->headers["columnCount"]);
		foreach ($this->headers as $key => $val)	{
			$currentLineNumber++;
			$line = "@-header,$key"."_!_ $val";
			for ($i = 2; $i < $numberOfColumns; $i++)	{
				$line .= ",";
			}
			$line .= "\n";
			fwrite($file1, $line) or Object::shootException("Could not write to Line $currentLineNumber");
		}
		$currentLineNumber++;
		if ($currentLineNumber == 13)	{
			$line = "";
			for ($i = 0; $i < $numberOfColumns - 1; $i++)	{
				$line .= ",";
			}
			$line .= "\n";
			fwrite($file1, $line) or Object::shootException("Could not write to Line $currentLineNumber");
			$currentLineNumber++;
		}
		if ($currentLineNumber == 14)	{
			$line = "";
			for ($i = 0; $i < $numberOfColumns - 1; $i++)	{
				$line .= ",";
			}
			$line .= "\n";
			fwrite($file1, $line) or Object::shootException("Could not write to Line $currentLineNumber");
			$currentLineNumber++;
		}
		if ($currentLineNumber == 15)	{
			$line = "";
			for ($i=1; $i < Object::$numberOfResultsFileLeadingColumn; $i++)	{
				$line .= ",";
			}
			$headerLine1 = $this->headerLine->getHeaderArray();
			for ($i=0; $i < sizeof($headerLine1); $i++)	{
				$line .= ",".$headerLine1[$i];
			}
			$line = str_replace("\n","", str_replace("\r", "", $line));
			$line .= "\n";
			fwrite($file1, $line) or Object::shootException("Could not write to Line $currentLineNumber");
			$currentLineNumber++;
		}
		if ($currentLineNumber == 16)	{
			$line = "Ref,GPA,Reg Number,Flags,Details,res";
			$headerLine1 = $this->headerLine->getHeaderArray();
			for ($i=0; $i < sizeof($headerLine1); $i++)	{
				$transaction1 = new CourseAndSubjectTransaction($this->database, $headerLine1[$i], $this->conn);
				$line .= ",".str_replace(",", " ", $transaction1->getSubject()->getSubjectName());
			}
			$line = str_replace("\n","", str_replace("\r", "", $line));
			$line .= "\n";
			fwrite($file1, $line) or Object::shootException("Could not write to Line $currentLineNumber");
			$currentLineNumber++;
		}
		//Now writing data 
		for ($i=0; ($i < sizeof($this->dataLines)) && ($currentLineNumber >= 17); $i++, $currentLineNumber++)	{
			$dataLine1 = $this->dataLines[$i];
			$dataLine1 = $dataLine1->synchronize();
			$line = $dataLine1->getLine();
			$line = str_replace("\n","", str_replace("\r", "", $line));
			$line .= "\n";
			fwrite($file1, $line) or Object::shootException("Could not write to Line $currentLineNumber");
		}
		fclose($file1);
	}
	public function updateScoresBasedOnMaximumScore($newMaximumScore, $systemTime1)	{
		$oldMaximumScore = floatval($this->headers['maximumScore']);
		$newMaximumScore = floatval($newMaximumScore);
		$datasize = sizeof($this->dataLines);
		for ($i=0; $i < $datasize; $i++)	{
			$this->dataLines[$i] = ResultsDataLine::getResultsLineBasedOnNewMaximumScore($this->dataLines[$i], $oldMaximumScore, $newMaximumScore);
		}
		//We need to update to this one
		$this->headers['maximumScore'] = $newMaximumScore;
		$this->headers['compilationTime'] = $systemTime1->getDateAndTimeString();
		return $this;
	}
	public function customSort($column, $descending)	{
		//getValueAtColumn($col) --dataLine1 
		$datasize = sizeof($this->dataLines);
		for ($i=0; $i < ($datasize - 1); $i++)	{
			$swapped = false;
			for ($j=0; $j < ($datasize - $i - 1); $j++)	{
				$value1 = $this->dataLines[$j]->getValueAtColumn($column);
				$value2 = $this->dataLines[$j+1]->getValueAtColumn($column);
				//Correct these data 
				if (is_null($value1)) $value1 = "";
				if (is_null($value2)) $value2 = "";
				//Logic Processing 
				$logic_non_descending = ! $descending && ($value1 < $value2);
				$logic_descending = $descending && ($value1 > $value2);
				if (! ($logic_non_descending || $logic_descending) && ($value1 !== $value2))	{
					$temp = $this->dataLines[$j];
					$this->dataLines[$j] = $this->dataLines[$j+1];
					$this->dataLines[$j+1] = $temp;
					$swapped = true;
				}
			}
			if (! $swapped)	{
				//No need to continue already sorted 
				break;
			}
		}
		return $this;
	}
	public function sort()	{
		//We need to sort the dataLines Obj 
		$datasize = sizeof($this->dataLines);
		for ($i=0; $i < ($datasize - 1); $i++)	{
			$swapped = false;
			for ($j=0; $j < ($datasize - $i - 1); $j++)	{
				if (intval($this->dataLines[$j]->getStudentId()) > intval($this->dataLines[$j+1]->getStudentId()))	{
					$temp = $this->dataLines[$j];
					$this->dataLines[$j] = $this->dataLines[$j+1];
					$this->dataLines[$j+1] = $temp;
					$swapped = true;
				}
			}
			if (! $swapped)	{
				//No need to continue already sorted 
				break;
			}
		}
		return $this;
	}
	public function round()	{
		$datasize = sizeof($this->dataLines);
		for ($i=0; $i < $datasize; $i++)	{
			$this->dataLines[$i]->round();
		}
	}
	public final static function combineGroupResultsFileWithSupplimentaryResultsFile($database, $conn, $rawGroupResultsFile1, $supplimentaryResultsFile1, $constantValueIfPassedSupplimentary)	{
		/* constantValueIfPassedSupplimentary false or a non Non zero value */
		//We will update the rawGroupResultsFile1 based upon gradedGroupResultsFile1 
		//We need to make sure the supplimentary Examination is also graded to 100  which is default 
		if ($supplimentaryResultsFile1->getMaximumScore() != Object::$__DEFAULT_MAXIMUM_SCORE)	{
			$supplimentaryResultsFile1->updateScoresBasedOnMaximumScore(Object::$__DEFAULT_MAXIMUM_SCORE, $supplimentaryResultsFile1->getCompilationTime());
		}
		$course1 = $rawGroupResultsFile1->getCourse();
		if (is_null($course1)) Object::shootException("Could not find Course Reference");
		$gradePolicyArray1 = Grade::getGradePolicyForEducationLevel($database, $conn, $course1->getEducationLevel()->getLevelId());
		if (is_null($gradePolicyArray1)) Object::shootException("Grade Policy could not be found");
		$rawGroupDataLines = $rawGroupResultsFile1->getDataLines();
		foreach ($rawGroupDataLines as $rawOriginalDataLine1)	{ 
			$rawSupplimentaryDataLine1 = $supplimentaryResultsFile1->getStudentResultsDataLine($rawOriginalDataLine1->getStudentId());
			if (is_null($rawSupplimentaryDataLine1)) continue; //if_null_means_not_found
			$dataLine1 = $rawOriginalDataLine1->clearSupplimentary($database, $conn, $gradePolicyArray1, $rawOriginalDataLine1, $rawSupplimentaryDataLine1, $constantValueIfPassedSupplimentary, Object::$__DEFAULT_MAXIMUM_SCORE, 0);
			//clearSupplimentary($database, $conn, $gradePolicyArray1, $rawOriginalDataLine1, $gradedOriginalDataLine1, $rawSupplimentaryDataLine1, $gradedSupplimentaryDataLine1, $constantValueIfPassedSupplimentary, $maximumscore, $controlFlags)
		}
		return $rawGroupResultsFile1;
	}
	public final static function mergeWeighted($database, $conn, $resultsFile1, $resultsFile2, $headerLine1, $systemTime1, $semester)	{
		if (is_null($resultsFile1) && is_null($resultsFile2)) Object::shootException("Individual Results Files are Empty");
		$mergedResultsFile1 = new ResultsFile($database, ResultsFile::$__IS_CLONE_MODE, $conn);
		/*
		Student should be present in all examination, if missing any mark for removal (will remove the student)
		if column [transactionId ] is mission, fill it empty
		*/
		//Writing headers 
		$headers1 = null; $headers2 = null;
		$dataLineArr1 = null;
		$dataLineArr2 = null;
		$combinedControlIndexArray1 = null;
		$combinedDataLineArray1 = null;
		if (! is_null($resultsFile1)) {
			//Make sure is sorted 
			$resultsFile1->sort();
			$headers1 = $resultsFile1->getHeaders();
			$resultsFile1->resequenceDataLines(); //Make sure the dataLines begin at Index 0
			$dataLineArr1 = $resultsFile1->getDataLines();
			$combinedControlIndexArray1 = $resultsFile1->getControlIndexArray();
			$combinedDataLineArray1 = $resultsFile1->getDataLines();
		}
		if (! is_null($resultsFile2)) {
			//Make sure is sorted 
			$resultsFile2->sort();
			$headers2 = $resultsFile2->getHeaders();
			$resultsFile2->resequenceDataLines(); //Make sure the dataLines begin at Index 0
			$dataLineArr2 = $resultsFile2->getDataLines();
			$combinedControlIndexArray1 = $resultsFile2->getControlIndexArray();
			$combinedDataLineArray1 = $resultsFile2->getDataLines();
		}
		$combinedHeaders = array();
		if (! is_null($headers1) && ! is_null($headers2))	{
			$maximumScore = 0;
			foreach ($headers1 as $key => $val)	{
				if ($key == "compilationTime") continue;
				if ($key == "columnCount") continue;
				if ($key == "maximumScore") {
					$combinedHeaders[$key] = floatval($headers1[$key]) + floatval($headers2[$key]);
					//.i.think.$combinedHeaders[$key] = $val;
					continue;
				}
				if (! $semester && ($key == "semester")) {
					$combinedHeaders[$key] = "0";
					continue; //To Avoid Mismatch
				}
				if ($headers1[$key] != $headers2[$key]) Object::shootException("Headers Mismatch has occurred in $key"); 
				$combinedHeaders[$key] = $headers1[$key];
			}
		} else if (! is_null($headers1))	{
			$combinedHeaders = $headers1;
		} else if (! is_null($headers2))	{
			$combinedHeaders = $headers2;
		}
		$combinedHeaders["compilationTime"] = $systemTime1->getDateAndTimeString();
		$combinedHeaders["columnCount"] = $headerLine1->getNumberOfColumns();
		//Constructing headerLine 
		/*
		There is no need to think about combinedHeaderLine, the headerLine1 in the argument is the merged HeaderLine
		*/
		/*Combined Data Line */
		if (! is_null($resultsFile1) && ! is_null($resultsFile2))	{
			$combinedControlIndexArray1 = array(); //Now is merged 
			$combinedDataLineArray1 = array();
			for ($i=0, $j=0; ($i < sizeof($dataLineArr1) && $j < sizeof($dataLineArr2)); )	{
				$dataLine1 = $dataLineArr1[$i];
				$dataLine2 = $dataLineArr2[$j];
				//Add only records which matches both ways 
				if ($dataLine1->getStudentId() == $dataLine2->getStudentId())	{
					$mergedDataLine1 = ResultsDataLine::mergeDataWeighted($dataLine1, $dataLine2, $headerLine1);
					$listsize = sizeof($combinedDataLineArray1);
					$combinedDataLineArray1[$listsize] = $mergedDataLine1;
					$combinedControlIndexArray1[$mergedDataLine1->getStudentId()] = $listsize;
					$i++; $j++;
				} else if ($dataLine1->getStudentId() < $dataLine2->getStudentId())	{
					$i++;
				} else {
					/* $dataLine2->getStudentId() < $dataLine1->getStudentId() */
					$j++;
				}
			}
		}
		$mergedResultsFile1->assignData($database, $conn, $combinedHeaders, $headerLine1, $combinedDataLineArray1, "my_temp_file", $combinedControlIndexArray1);
		return $mergedResultsFile1;
	}
	public function merge($resultsFile1, $systemTime1, $overwrite, $allowSemesterMixing)	{
		//We need to make sure everything is sorted -- We do not need to assume
		$this->sort();
		$resultsFile1->sort();
		if (is_null($overwrite)) $overwrite = false;
		/* Merge resultsFile1 to this resultsFile 	
		*/
		$headers = null;
		$headerLine1  = null;
		$dataLines = null;
		if (is_null($resultsFile1)) Object::shootException("One of the Merging Results File is not set");
		//Working With Headers 
		$headers1 = $this->headers;
		$headers2 = $resultsFile1->getHeaders();
		if (is_null($headers1) || is_null($headers2)) Object::shootException("One of the Merging headers is not set");
		$headers = array();
		foreach ($headers1 as $key => $val)	{
			if ($key == "columnCount") continue;
			if ($key == "compilationTime") continue;
			if (($key == "semester") && $allowSemesterMixing) continue;
			if ($headers1[$key] != $headers2[$key]) Object::shootException("Could not match the $key. Make sure the data matches the supplied format");
			$headers[$key] = $headers1[$key];
		}
		$headers["compilationTime"] = $systemTime1->getDateAndTimeString();
		if (is_null($resultsFile1->getHeaderLine())) Object::shootException("The uploaded file has no Header Lines or are Empty");
		if (is_null($this->headerLine)) Object::shootException("The stored Header Lines are Empty");
		$headerLine1 = ResultsHeaderLine::mergeHeader($this->headerLine, $resultsFile1->getHeaderLine());
		$headers["columnCount"] = $headerLine1->getNumberOfColumns();
		if ($allowSemesterMixing) $headers["semester"] = 0;
		//Working with data -- assume sorted 
		$dataLineArr1 = $this->dataLines;
		$dataLineArr2 = $resultsFile1->getDataLines();
		$dataLines = array();
		$controlIndexArray = array();
		$i = 0;
		$j = 0;
		for (; ($i < sizeof($dataLineArr1)) && ($j < sizeof($dataLineArr2)); )	{
			/*
			i and j would be advanced depends on the situation
			*/
			$dataLine1 = $dataLineArr1[$i];
			$dataLine2 = $dataLineArr2[$j];
			$mergedDataLine1 = null;
			if ($dataLine1->getStudentId() == $dataLine2->getStudentId())	{
				$mergedDataLine1 = ResultsDataLine::mergeData($dataLine1, $dataLine2, $headerLine1, $overwrite);
				$i++; $j++;
			} else if ($dataLine1->getStudentId() < $dataLine2->getStudentId())	{
				$mergedDataLine1 = ResultsDataLine::mergeData($dataLine1, null, $headerLine1, $overwrite);
				$i++;
			} else {
				/* $dataLine2->getStudentId() < $dataLine1->getStudentId() */
				$mergedDataLine1 = ResultsDataLine::mergeData(null, $dataLine2, $headerLine1, $overwrite);
				$j++;
			}
			$listsize = sizeof($dataLines);
			$dataLines[$listsize] = $mergedDataLine1;
			$controlIndexArray[$mergedDataLine1->getStudentId()] = $listsize;
		}
		//if Array 1 is still having data just append coz the array 2 was exhausted above 
		for (; $i < sizeof($dataLineArr1); $i++)	{
			$dataLine1 = $dataLineArr1[$i];
			$mergedDataLine1 = ResultsDataLine::mergeData($dataLine1, null, $headerLine1, $overwrite);
			$listsize = sizeof($dataLines);
			$dataLines[$listsize] = $mergedDataLine1;
			$controlIndexArray[$mergedDataLine1->getStudentId()] = $listsize;
		}
		//if Array 2 is still having data just append coz array 1 was exhausted 
		for (; $j < sizeof($dataLineArr2); $j++)	{
			$dataLine2 = $dataLineArr2[$j];
			$mergedDataLine1 = ResultsDataLine::mergeData(null, $dataLine2, $headerLine1, $overwrite);
			$listsize = sizeof($dataLines);
			$dataLines[$listsize] = $mergedDataLine1;
			$controlIndexArray[$mergedDataLine1->getStudentId()] = $listsize;
		}
		/* We need to update this ResultsFile Object  */
		$this->headers = $headers;
		$this->headerLine = $headerLine1;
		$this->dataLines = $dataLines;
		$this->controlIndexArray = $controlIndexArray;
		return $this;
	}
}
class ResultsHeaderLine	{
	/* Map Key File  */
	private $line;
	private $transactionArr;
	static $__IS_CLONE_MODE = "__is_clone_mode";
	public final static function mergeHeader($headerLine1, $headerLine2)	{
		if (is_null($headerLine1) && is_null($headerLine2)) Object::shootException("Both Headers are Empty");
		$list1 = null; $list2 = null;
		if (! is_null($headerLine1))	$list1 = $headerLine1->getHeaderArray();
		if (! is_null($headerLine2))	$list2 = $headerLine2->getHeaderArray();
		$mergedList = array();
		if (! is_null($list1))	{
			foreach ($list1 as $id1)	{
				$mergedList[sizeof($mergedList)] = $id1;
			}
		}
		if (! is_null($list2))	{
			foreach ($list2 as $id1)	{
				$mergedList[sizeof($mergedList)] = $id1;
			}
		}
		$mergedList = Object::getUniqueArrayFromArray($mergedList);
		//Construct a line 
		$line = "";
		for ($i = 1; $i < Object::$numberOfResultsFileLeadingColumn; $i++)	$line .= ",";
		for ($i = 0; $i < sizeof($mergedList); $i++)	{
			$transactionId = $mergedList[$i];
			$line .= ",$transactionId";
		}
		return (new ResultsHeaderLine($line));
	}
	public function getTransactionHeader($transactionId)	{
		$list1 = $this->transactionArr;
		//check if transactionId in array 
		$found = false;
		foreach ($list1 as $alist1)	{
			if ($alist1 == $transactionId)	{
				$found = true;
				break;
			}
		}
		if (! $found) return null;
		$line = "";
		for ($i = 1; $i < Object::$numberOfResultsFileLeadingColumn; $i++)	$line .= ",";
		$line .= ",$transactionId";
		return (new ResultsHeaderLine($line));
	}
	public function getCustomTransactionHeader($transactionList)	{
		$list1 = $this->transactionArr;
		//Found List 
		$foundList1 = array();
		//Add Only found Headers 
		foreach ($transactionList as $transactionId)	{
			foreach ($list1 as $alist1)	{
				if ($alist1 == $transactionId)	{
					$foundList1[sizeof($foundList1)] = $transactionId;
					break; //Break Inner Loop
				}
			}
		}
		if (sizeof($foundList1) == 0) return null;
		$foundList1 = Object::getUniqueArrayFromArray($foundList1);
		//We need to make sure the
		$line = "";
		for ($i = 1; $i < Object::$numberOfResultsFileLeadingColumn; $i++)	$line .= ",";
		foreach ($foundList1 as $transactionId)	$line .= ",$transactionId";
		return (new ResultsHeaderLine($line));
	}
	public function __construct($line)	{
		if ($line == ResultsHeaderLine::$__IS_CLONE_MODE) return;
		$this->line = $line;
		$lineArr = explode(",", $line);
		if (sizeof($lineArr) < Object::$numberOfResultsFileLeadingColumn) {
			$this->transactionArr = null;
			return;
		}
		$this->transactionArr = array();
		for ($i = Object::$numberOfResultsFileLeadingColumn; $i < sizeof($lineArr); $i++)	{
			$this->transactionArr[sizeof($this->transactionArr)] = intval($lineArr[$i]);
		}
	}
	public function getNumberOfColumns()	{
		return (intval(Object::$numberOfResultsFileLeadingColumn) + sizeof($this->transactionArr));
	}
	public function getLine()	{ return $this->line; }
	public function getHeaderArray()	{
		return $this->transactionArr;
	}
	public function assignData($line, $transactionArr)	{
		$this->line = $line;
		$this->transactionArr = $transactionArr;
	}
	public function cloneMe()	{
		//Create a new Reference space 
		$resultsHeaderLine1 = new ResultsHeaderLine(ResultsHeaderLine::$__IS_CLONE_MODE);
		$transactionArr = array();
		foreach ($this->transactionArr as $key => $val)	{
			$transactionArr[$key] = $val;
		}
		$resultsHeaderLine1->assignData($this->line, $transactionArr);
		return $resultsHeaderLine1;
	}
}
class ResultsDataLine	{
	private $studentId;
	private $gpa;
	private $registrationNumber;
	private $flags;
	private $clearedDetails;
	private $unitDetails;
	private $initialString;
	private $leadingData;
	private $line;
	private $itemCount;
	private $marksArray;
	private $resultsHeader;
	private $specialInstructions;
	private $dataHolder;
	static $__IS_CLONE_MODE = "__is_clone_mode";
	static $__NO_INSTRUCTION = 0;
	static $__FAILED_INSTRUCTION = 1;
	//Flags Treatment
	static $__POS_CLEARED = 0;
	static $__POS_FAILED = 1;
	static $__IS_REPEATING = 2;
	static $__DISPLAY_RESULTS = 3;
	static $__GPA_DISQUALIFIED = 4; //Check if Disqualified due to GPA /* If this bit is set make sure also the bit 0 and 1 are both set, why the system is already notified about fail from bit 0 and 1, so it will not have to check again this bit unless it needs extra information */
	static $__IS_AFTER_SUPPLIMENTARY = 5;
	public function putData($key, $value)	{
		$this->dataHolder[$key] = $value;
	}
	public function getData($key)	{
		$value = null;
		if (isset($this->dataHolder[$key])) $value = $this->dataHolder[$key];
		return $value;
	}
	public function debug()	{ echo $this->line; }
	public function getMyClearanceCode()	{ //v788 can lead you to status 
		//either ResultsGroup::$__RESULTS_CLEARED /__RESULTS_FAILED / __RESULTS_DISQUALIFIED
		$cleared = 0; //UNKNOWN 
		if ($this->isCleared())	{
			$cleared = ResultsGroup::$__RESULTS_CLEARED;
		} else if ($this->isAfterSupplimentary())	{
			//Return the actual status, it might be cleared or disqualified
			if ($this->isFailed())	$cleared = ResultsGroup::$__RESULTS_FAILED; //Allowed to carry
			else if ($this->isDisqualified()) $cleared = ResultsGroup::$__RESULTS_DISQUALIFIED; //Repeat a year
		} else {
			//Failed can suppliment because is before supplimentary 
			$cleared = ResultsGroup::$__RESULTS_FAILED;
		}
		return $cleared;
	}
	public function getValueAtColumn($col)	{
		$col = intval("".$col);
		$val = null;
		if ($col < sizeof($this->leadingData))	{
			$val = $this->leadingData[$col];
		} else if ($col < (sizeof($this->leadingData) + sizeof($this->marksArray)))	{
			$col = $col - sizeof($this->leadingData);
			$val = $this->marksArray[$col];
		}
		return $val;
	}
	public function getClearanceStatus()	{
		$cleared = ResultsGroup::$__RESULTS_CLEARED;
		if (is_null($this->clearedDetails)) return $cleared;
		foreach ($this->clearedDetails as $clr)	{
			$cleared = max($cleared, $clr);
		}
		return $cleared;
	}
	public final static function clearSupplimentary($database, $conn, $gradePolicyArray1, $rawOriginalDataLine1, $rawSupplimentaryDataLine1, $constantValueIfPassedSupplimentary, $maximumscore, $controlFlags)	{
		/*
			INPUT 
				rawOriginalDataLine1 the raw Data version of already compiled dataline before supplimentary 
				#gradedOriginalDataLine1 graded version of rawOriginalDataLine1 
				
				rawSupplimentaryDataLine1 the raw Data version of supplimentary results 
				#gradedSupplimentaryDataLine1 graded version of rawSupplimentaryDataLine1 
				
				constantValueIfPassedSupplimentary , if constant value should be used or not 
				
				controlFlags the control flags if any default is zero 
				
			OUTPUT 
				RAW MARKS DATA LINE of merged dataLine this should update all relevant fields including flags 
		*/
		if (is_null($rawOriginalDataLine1)) Object::shootException("DataLine [merge with Supplimentary], One of the Input dataline is not set");
		$gradedOriginalDataLine1 = $rawOriginalDataLine1($gradePolicyArray1, $maximumscore);
		//If it is failed due to low gpa do not waste your time, do not touch anything 
		if ($rawOriginalDataLine1->isGPADisqualified()) return $rawOriginalDataLine1;
		if (is_null($rawSupplimentaryDataLine1)) Object::shootException("DataLine [merge with Supplimentary], One of the Input dataline is not set");
		$gradedSupplimentaryDataLine1 = $rawSupplimentaryDataLine1->grade($gradePolicyArray1, $maximumscore);
		//Checking Student Consistency 
		if ($rawOriginalDataLine1->getStudentId() !== $rawSupplimentaryDataLine1->getStudentId()) Object::shootException("Student should be the same through the compilation process with supplimentary");
		//Actual Algorithm begin 
		//Elligible and not elligible for supplimentary based on clearedDetails
		$transactionNotEllibigleForSupplimentary1 = $rawOriginalDataLine1->getTransactionsNotElligibleForSupplimentary();
		$transactionElligibleForSupplimentary1 = $rawOriginalDataLine1->getTransactionsElligibleForSupplimentary();
		//Now using original Grades to decide 
		$gradedMarksArray1 = $gradedOriginalDataLine1->getMarksArray();
		if (is_null($gradedMarksArray1)) Object::shootException("Graded Grade List could not be found");
		//clearance Status 
		$cleared = ResultsGroup::$__RESULTS_CLEARED;
		foreach ($gradedMarksArray1 as $transactionId => $gradeId)	{
			$grade1 = new Grade($database, $gradeId, $conn);
			$logic_A = $grade1->isIncomplete();
			$logic_B = $grade1->isFailed();
			$logic_C = $transactionNotEllibigleForSupplimentary1->isItemInACollection($transactionId);
			$logic_D = $transactionElligibleForSupplimentary1->isItemInACollection($transactionId);
			if (! $logic_A && ! $logic_C && ($logic_B || $logic_D))	{
				//Now According to the original Marks this student need to be cleared , however we need to 
				//Check with the supplimentary marks 
				// if found proceed , else if not found you need to mark as disqualified
				try {
					$supplimentaryMarks = $rawSupplimentaryDataLine1->getMarksForTransaction($transactionId);
					$supplimentaryGradeId = $gradedSupplimentaryDataLine1->getMarksForTransaction($transactionId);
					$supplimentaryGrade1 = new Grade($database, $supplimentaryGradeId, $conn);
					if ($constantValueIfPassedSupplimentary && ! $supplimentaryGrade1->isIncomplete())	{
						if ($supplimentaryGrade1->isFailed())	{
							$rawOriginalDataLine1->setMarksForTransaction($transactionId, $supplimentaryMarks);
						} else {
							//Passed Just write that constant value 
							$rawOriginalDataLine1->setMarksForTransaction($transactionId, $constantValueIfPassedSupplimentary);
							if ($logic_D)		{
								$rawOriginalDataLine1->clearTransactionFromClearedDetails($transactionId);
							}
						}
					} else if (! $supplimentaryGrade1->isIncomplete()) {
						//Dealing with scenario where we do not have constantValueIfPassedSupplimentary
						$rawOriginalDataLine1->setMarksForTransaction($transactionId, $supplimentaryMarks);
						//If Passed we need to check in clearedDetails and remove  
						if (! $supplimentaryGrade1->isFailed() && $logic_D)		{
							$rawOriginalDataLine1->clearTransactionFromClearedDetails($transactionId); 
						}
					}
				} catch (Exception $e)	{
					//We need to mark now this subject as disqualified , student marks not found in supplimentary , technical details need to be set to disqualified
					continue;
				}
			}
		} //end--foreach--
		//We need to process flags properly 
		//Consider the normal fail based on grade, during synchronization clearedDetails data will be taken into account 
		$gradedOriginalDataLine1 = $rawOriginalDataLine1->grade($gradePolicyArray1, $maximumscore);
		$marksArray1 = $gradedOriginalDataLine1->getMarksArray();
		if (is_null($marksArray1)) Object::shootException("Grade list were not found");
		$cleared = ResultsGroup::$__RESULTS_CLEARED;
		foreach ($marksArray1 as $transactionId => $gradeId)	{
			$grade1 = new Grade($database, $gradeId, $conn);
			$transaction1 = new CourseAndSubjectTransaction($database, $transactionId, $conn);
			if ($grade1->isFailed())	{
				if ($transaction1->isCoreModule()) $cleared = max($cleared, ResultsGroup::$__RESULTS_DISQUALIFIED);
				else $cleared = max($cleared, ResultsGroup::$__RESULTS_FAILED);
			}
		}
		$flags = Object::assignRightMostBitsOfFlag($rawOriginalDataLine1->getFlags(), 2, $cleared);
		$rawOriginalDataLine1->setFlags($flags);
		return $rawOriginalDataLine1;
	}
	public function getTransactionsNotElligibleForSupplimentary()	{
		$collection1 = new Collection();
		//Return Only those which are marked as Discontinue ResultsGroup::$__RESULTS_DISQUALIFIED //
		// The reality is return empty, all are elligible for supplimentary
		/*if (is_null($this->clearedDetails)) return $collection1;
		foreach ($this->clearedDetails as $transactionId => $cleared)	{
			if ($cleared == ResultsGroup::$__RESULTS_DISQUALIFIED) $collection1->addItem($transactionId);
		}*/
		return $collection1;
	}
	public function getTransactionsElligibleForSupplimentary()	{
		$collection1 = new Collection();
		//Return Only those which are marked as Discontinue ResultsGroup::$__RESULTS_DISQUALIFIED //
		/* All are elligible  */
		if (is_null($this->clearedDetails)) return $collection1;
		foreach ($this->clearedDetails as $transactionId => $cleared)	{
			if (($cleared == ResultsGroup::$__RESULTS_FAILED) || ($cleared == ResultsGroup::$__RESULTS_DISQUALIFIED)) $collection1->addItem($transactionId);
		}
		return $collection1;
	}
	public function clearTransactionFromClearedDetails($transactionIdToClear)	{
		if (is_null($this->clearedDetails)) return null;
		$list = array();
		foreach ($this->clearedDetails as $transactionId => $cleared)	{
			if ($transactionIdToClear !== $transactionId) $list[$transactionId] = $cleared;
		}
		if (sizeof($list) == 0) $list = null;
		$this->clearedDetails = $list;
		return $this->clearedDetails;
	}
	public final static function verifyStudentIdWithRegistrationNumber($database, $conn, $studentId, $registrationNumber)	{
		$query = "SELECT studentId FROM students WHERE studentId='$studentId' AND registrationNumber='$registrationNumber'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Student [$studentId] , with Registration Number [$registrationNumber] query could not be executed");
		return (mysql_num_rows($result) == 1);
	}
	public function setMarksForTransaction($transactionId, $marks)	{
		if (! isset($this->marksArray[$transactionId])) Object::shootException("Subject was not found in the source File");
		$this->marksArray[$transactionId] = $marks;
	}
	public function getMarksForTransaction($transactionId)	{
		if (! isset($this->marksArray[$transactionId])) Object::shootException("Subject was not found in the source File");
		return $this->marksArray[$transactionId];
	}
	public final static function getResultsLineBasedOnNewMaximumScore($dataLine1, $oldMaximumScore, $newMaximumScore)	{
		$headerLine1 = $dataLine1->getResultsHeader();
		$headerArray1 = $headerLine1->getHeaderArray();
		$initialString = "";
		$list1 = array();
		//Initialization 
		for ($i = 0; $i < sizeof($headerArray1); $i++)	{
			$list1[$headerArray1[$i]] = ""; //Nothing During Initialization procedures
		}
		foreach ($list1 as $key => $val)	{
			$marksArray1 = $dataLine1->getMarksArray();
			if (isset($marksArray1[$key]) && (trim($marksArray1[$key]) != "")) {
				$list1[$key] = round((floatval($marksArray1[$key]) * $newMaximumScore) / $oldMaximumScore ,2);
			}
		}
		$initialString = $dataLine1->getInitialString();
		//We need to write a Line 
		for ($i = 0; $i < sizeof($headerArray1); $i++)	{
			$initialString .= ",".$list1[$headerArray1[$i]];
		}
		return (new ResultsDataLine($initialString, $headerLine1));
	}
	public function round()	{
		if (is_null($this->marksArray)) return;
		foreach ($this->marksArray as $key => $val)	{
			if (trim($val) !== "") $this->marksArray[$key] = round($val);
		}
	}
	public final static function mergeDataWeighted($dataLine1, $dataLine2, $headerLine1)	{
		if (is_null($dataLine1) || is_null($dataLine2)) Object::shootException("Both Data Lines should be set");
		$list1 = array();
		$headerArray1 = $headerLine1->getHeaderArray();
		$initialString = "";
		//Initialization 
		for ($i = 0; $i < sizeof($headerArray1); $i++)	{
			$list1[$headerArray1[$i]] = ""; //Just Initialization Procedures 
		}
		//Both DataLines Should be present 
		$marksArray1 = $dataLine1->getMarksArray();
		$marksArray2 = $dataLine2->getMarksArray();
		if ($dataLine1->getStudentId() != $dataLine2->getStudentId()) Object::shootException("You are merging non-compatible students");
		if ($dataLine1->getRegistrationNumber() != $dataLine2->getRegistrationNumber()) Object::shootException("You are merging non-compatible students");
		foreach ($list1 as $key => $val)	{
			/*
			Both Marks from both ends should be present to calculate, if any is missing then leave the default.empty
			if we are in the same semester
			*/
			
			if (isset($marksArray1[$key]) && isset($marksArray2[$key]))	{
				if ((trim($marksArray1[$key]) != "") && (trim($marksArray2[$key]) != ""))	{
					$list1[$key] = floatval($marksArray1[$key]) + floatval($marksArray2[$key]);
				}
			} 
		}
		$mergedResultsDataLine1 = new ResultsDataLine(ResultsDataLine::$__IS_CLONE_MODE, "Ndimangwa Fadhili Ngoya");
		$mergedResultsDataLine1->setResultsHeader($headerLine1);
		$mergedResultsDataLine1->setStudentId($dataLine1->getStudentId());
		$mergedResultsDataLine1->setRepeating("0");
		$mergedResultsDataLine1->setRegistrationNumber($dataLine1->getRegistrationNumber());
		$mergedResultsDataLine1->setMarksArray($list1);
		$mergedResultsDataLine1->setCleared("1");
		if ($dataLine1->isDisqualified() || $dataLine2->isDisqualified())	{
			//Technical Disqualified 
			$mergedResultsDataLine1->setDisqualified("1");
		} else if ($dataLine1->isFailed() || $dataLine2->isFailed())	{
			//Technical Failure 
			$mergedResultsDataLine1->setFailed("1");
		}
		//Cleared Details should also be involved during merging process 
		$clearedDetails = ResultsDataLine::mergeClearedDetailsArrays($dataLine1->getClearedDetails(), $dataLine2->getClearedDetails());
		$mergedResultsDataLine1->setClearedDetails($clearedDetails);
		$mergedResultsDataLine1 = $mergedResultsDataLine1->synchronize();
		return $mergedResultsDataLine1;
	}
	public final static function mergeData($dataLine1, $dataLine2, $headerLine1, $overwrite)	{
		if (is_null($dataLine1) && is_null($dataLine2)) return null;
		$list1 = array();
		$headerArray1 = $headerLine1->getHeaderArray();
		$initialString = "";
		//Initialization 
		for ($i = 0; $i < sizeof($headerArray1); $i++)	{
			$list1[$headerArray1[$i]] = ""; //Nothing During Initialization procedures
		}
		if (is_null($dataLine1))	{
			//Use dataLine2 
			$marksArray1 = $dataLine2->getMarksArray();
			foreach ($list1 as $key => $val)	{
				if (isset($marksArray1[$key]))	$list1[$key] = $marksArray1[$key];
			}
			$initialString = $dataLine2->getInitialString();
		} else if (is_null($dataLine2))	{
			//User dataLine1
			$marksArray1 = $dataLine1->getMarksArray();
			foreach ($list1 as $key => $val)	{
				if (isset($marksArray1[$key]))	$list1[$key] = $marksArray1[$key];
			}
			$initialString = $dataLine1->getInitialString();
		} else {
			$marksArray1 = $dataLine1->getMarksArray();
			$marksArray2 = $dataLine2->getMarksArray();
			$initialString = $dataLine1->getInitialString();
			foreach ($list1 as $key => $val)	{
				$enableOverwrite = false;
				if (isset($marksArray1[$key])) {	
					$list1[$key] = $marksArray1[$key]; $enableOverwrite = true;
				}
				if (! $enableOverwrite && isset($marksArray2[$key]))	{
					$list1[$key] = $marksArray2[$key]; //array 1 has was not set 
				}
				if ($overwrite && $enableOverwrite && isset($marksArray2[$key]))	{
					$list1[$key] = $marksArray2[$key];
				}	
				if ($overwrite)	{
					$initialString = $dataLine2->getInitialString(); // You need overwrite the dataLine
				}
			}
			if ($dataLine1->getStudentId() != $dataLine2->getStudentId())	Object::shootException("Leading Columns are not matching for the two lines refering to the same student");
		}	
		//We need to write a Line 
		for ($i = 0; $i < sizeof($headerArray1); $i++)	{
			$initialString .= ",".$list1[$headerArray1[$i]];
		}
		return (new ResultsDataLine($initialString, $headerLine1));
	}
	public final static function getGPAArrayFromString($gpaString1)	{
		/*
		INPUT: semester:gpa(#semester:gpa)* ie 1:4.2#2:2.3
		OUTPUT: array[semester] = gpa
		*/
		$gpaString1 = trim($gpaString1);
		if (is_null($gpaString1) || ($gpaString1 == "") || ($gpaString1 == 0)) return null; //All Backward Compatibility 
		$blockArray1 = explode("#", $gpaString1);
		$list = array();
		foreach ($blockArray1 as $singleblockArray1)	{
			$gpaDs = explode(":", $singleblockArray1);
			if (sizeof($gpaDs) != 2) Object::shootException("GPA String, Format Error [$gpaString1]");
			$list[$gpaDs[0]] = $gpaDs[1]; //0 index is semester, 1 index is gpa
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function getGPAStringFromArray($gpaArray1)	{
		/*
		INPUT: array[semester] = gpa
		OUTPUT: semester:gpa(#semester:gpa)* ie 1:4.2#2:2.3 ie 1:4.2#2:2.3
		*/
		if (is_null($gpaArray1)) return "";
		$string1 = "";
		$count = 0;
		foreach ($gpaArray1 as $semester => $gpa)	{
			$tstring = $semester.":".$gpa;
			if ($count == 0)	{
				$string1 = $tstring;
			} else {
				$string1 .= "#".$tstring;
			}
			$count++;
		}
		return $string1;
	}
	public final static function getUnitDetailsArrayFromString($unitDetailsString1)	{
		/*
		INPUT: semester:totalUnits:totalModulePoints(#semester:totalUnits:totalModulePoints)*
		OUTPUT: array[semester][0] = totalUnits
				array[semester][1] = totalModulePoints
		*/
		$unitDetailsString1 = trim($unitDetailsString1);
		if (is_null($unitDetailsString1) || ($unitDetailsString1 == "") || ($unitDetailsString1 == "#")) return null; //Backward Compatibility 
		$blockArray1 = explode("#", $unitDetailsString1);
		$list = array();
		foreach ($blockArray1 as $singleblockArray1)	{
			$unitDetailsDs = explode(":", $singleblockArray1);
			if (sizeof($unitDetailsDs) != 3) Object::shootException("Unit Details, Format Error [$unitDetailsString1]");
			$list[$unitDetailsDs[0]] = array();
			$list[$unitDetailsDs[0]][0] = $unitDetailsDs[1]; //totalUnits 
			$list[$unitDetailsDs[0]][1] = $unitDetailsDs[2]; //totalModulePoints
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function getUnitDetailsStringFromArray($unitDetailsArray1)	{
		/*
		INPUT: array[semester][0] = totalUnits
				array[semester][1] = totalModulePoints
		OUTPUT: semester:totalUnits:totalModulePoints(#semester:totalUnits:totalModulePoints)*
		*/
		if (is_null($unitDetailsArray1)) return "";
		$string1 = "";
		$count = 0;
		foreach ($unitDetailsArray1 as $semester => $unitDataArray1)	{
			if (sizeof($unitDataArray1) != 2) Object::shootException("Unit Details, Data Structure Error");
			$totalUnits = $unitDataArray1[0];
			$totalModulePoints = $unitDataArray1[1];
			$tstring = $semester.":".$totalUnits.":".$totalModulePoints;
			if ($count == 0)	{
				$string1 = $tstring;
			} else {
				$string1 .= "#".$tstring;
			}
			$count++;
		}
		return $string1;
	}
	public final static function getClearedDetailsArrayFromString($clearedDetails)	{
		$list1 = array();
		/*
		INPUT transactionId.cleared#transactionId.cleared ie 7.2 or 7.2#8.1
		OUTPUT list[transactionId] = cleared
		*/
		$clearedDetails = trim($clearedDetails);
		if ($clearedDetails != "")	{
			$blockArray1 = explode("#", $clearedDetails); //Now we have 7.2 
			foreach ($blockArray1 as $singleblockArray1)	{
				$blockArray2 = explode(".", $singleblockArray1);
				if (sizeof($blockArray2) != 2) Object::shootException("Cleared Details : Format error [$clearedDetails]");
				$transactionId = $blockArray2[0];
				$cleared = $blockArray2[1];
				$list1[$transactionId] = $cleared;
			}
		}
		if (sizeof($list1) == 0) $list1 = null;
		return $list1;
	}
	public final static function getClearedDetailsStringFromArray($list1)	{
		if (is_null($list1)) return ""; //Empty String 
		$count = 0;
		$string1 = "";
		foreach ($list1 as $transactionId => $cleared)	{
			if ($count == 0)	{
				$string1 = $transactionId.".".$cleared;
			} else {
				$string1 .= "#".$transactionId.".".$cleared;
			}
			$count++;
		}
		return $string1;
	}
	public final static function mergeClearedDetailsArrays($list1, $list2)	{
		$mergedList1 = null;
		if (! is_null($list1) && ! is_null($list2))	{
			$mergedList1 = array();
			//Checking for individual Transaction 
			//We are making sure only disqualified and failed are logged the rest i.e.cleared do ignore 
			foreach ($list1 as $transactionId => $cleared)	{
				//Keep Add if disqualified OR failed 
				if (($cleared == ResultsGroup::$__RESULTS_DISQUALIFIED) || ($cleared == ResultsGroup::$__RESULTS_FAILED))	{
					$mergedList1[$transactionId] = $cleared;
				}
			}
			//Now List 2 
			foreach ($list2 as $transactionId => $cleared)	{
				//If already precent you need to do precedence add, else add as you did in list above 
				if (isset($mergedList1[$transactionId]))	{
					//No need to write a lot of if else just use max function 
					$mergedList1[$transactionId] = max($mergedList1[$transactionId], $cleared);
				} else {
					//Not set 
					if (($cleared == ResultsGroup::$__RESULTS_DISQUALIFIED) || ($cleared == ResultsGroup::$__RESULTS_FAILED))	{
						$mergedList1[$transactionId] = $cleared;
					}
				}
			}
		} else if (! is_null($list1))	{
			$mergedList1 = $list1;
		} else if (! is_null($list2))	{
			$mergedList1 = $list2;
		}
		if (is_null($mergedList1) || (sizeof($mergedList1) == 0)) $mergedList1 = null;
		return $mergedList1;
	}
	public function build()	{
		//Make sure the line is having the changes made in the object 
		// This should be called before saving 
		$headerLine1 = $this->resultsHeader;
		$initialString = $this->studentId;
		$initialString .= ",".ResultsDataLine::getGPAStringFromArray($this->gpa);
		$initialString .= ",".$this->registrationNumber;
		$initialString .= ",".$this->flags;
		$initialString .= ",".ResultsDataLine::getClearedDetailsStringFromArray($this->clearedDetails);
		$initialString .= ",".ResultsDataLine::getUnitDetailsStringFromArray($this->unitDetails);
		$headerArray1 = $headerLine1->getHeaderArray();
		$marksArray1 = array(); 
		for ($i = 0; $i < sizeof($headerArray1); $i++)	{
			$marksArray1[$headerArray1[$i]] = 0;
			$initialString .= ",".$marksArray1[$headerArray1[$i]];
		}
		return (new ResultsDataLine($initialString, $headerLine1));
	}
	public function synchronize()	{
		//We need to make sure the content of flags is synchronized with cleared Details 
		// Remember the numbering is the same as 
		$cleared_bits = 2;
		$flags_clear_value = Object::getRightMostBitsOfFlag($this->flags, $cleared_bits); //The two rightmost bits 
		$clearDetails_clear_value = $this->getClearanceStatus();
		$clear_value = max($flags_clear_value, $clearDetails_clear_value); 
		if ($clear_value !== $flags_clear_value)	{
			//Need to update flags accordingly, with the value of clear_value 
			$this->flags = Object::assignRightMostBitsOfFlag($this->flags, $cleared_bits, $clear_value);			
		}
		//Make sure the line is having the changes made in the object 
		// This should be called before saving 
		$headerLine1 = $this->resultsHeader;
		$initialString = $this->studentId;
		$initialString .= ",".ResultsDataLine::getGPAStringFromArray($this->gpa);
		$initialString .= ",".$this->registrationNumber;
		$initialString .= ",".$this->flags;
		$initialString .= ",".ResultsDataLine::getClearedDetailsStringFromArray($this->clearedDetails);
		$initialString .= ",".ResultsDataLine::getUnitDetailsStringFromArray($this->unitDetails);
		$headerArray1 = $headerLine1->getHeaderArray();
		$marksArray1 = $this->marksArray;
		for ($i = 0; $i < sizeof($headerArray1); $i++)	{
			$initialString .= ",".$marksArray1[$headerArray1[$i]];
		}
		return (new ResultsDataLine($initialString, $headerLine1));
	}
	public function __construct($line, $resultsHeader1)	{
		$this->dataHolder = array();
		if ($line == ResultsDataLine::$__IS_CLONE_MODE) return;
		$this->line = $line;
		$lineArr = explode(",", $line);
		$this->itemCount = sizeof($lineArr);
		if (sizeof($lineArr) < Object::$numberOfResultsFileLeadingColumn) return;
		$this->studentId = trim($lineArr[0]);
		$this->gpa = ResultsDataLine::getGPAArrayFromString($lineArr[1]);
		$this->registrationNumber = trim($lineArr[2]);
		$this->flags = trim($lineArr[3]);
		if (is_null($this->flags)) $this->flags = 9; //Backward Compatibility display results and cleared 
		$this->clearedDetails = ResultsDataLine::getClearedDetailsArrayFromString($lineArr[4]);
		$this->unitDetails = ResultsDataLine::getUnitDetailsArrayFromString($lineArr[5]);
		$this->resultsHeader = $resultsHeader1;
		$headerArray1 = $resultsHeader1->getHeaderArray();
		if (is_null($headerArray1)) return;
		if ((sizeof($lineArr) - Object::$numberOfResultsFileLeadingColumn) != sizeof($headerArray1)) return;
		$this->marksArray = array();
		//Initial Data 
		for ($i=0; $i< Object::$numberOfResultsFileLeadingColumn; $i++)	{
			if ($i == 0)	{
				$this->initialString = $lineArr[$i];
			} else {
				$this->initialString .= ",".$lineArr[$i];
			}
		}
		//Index of marksArray is transaction Array 
		for ($i=0; $i < sizeof($headerArray1); $i++)	{
			$transactionId = $headerArray1[$i];
			$marks = $lineArr[Object::$numberOfResultsFileLeadingColumn + $i];
			$this->marksArray[$transactionId] = $marks;
		}
		$this->leadingData = explode(",", $this->initialString);
		$this->specialInstructions = ResultsDataLine::$__NO_INSTRUCTION;
	}
	public function grade($gradePolicyArray1, $maximumScore)	{
		//Index of marksArray is transaction Array 
		$headerLine1 = $this->getResultsHeader();
		$headerArray1 = $headerLine1->getHeaderArray();
		$initialString = "";
		$list1 = array();
		//Initialization 
		for ($i = 0; $i < sizeof($headerArray1); $i++)	{
			$list1[$headerArray1[$i]] = ""; //Nothing During Initialization procedures
		}
		foreach ($list1 as $key => $val)	{
			$marksArray1 = $this->getMarksArray();
			if (isset($marksArray1[$key])) {
				/*We need to convert marks to base 100 */
				$marks = "1001";
				if (trim($marksArray1[$key]) != "")	{
					$marks = (floatval($marksArray1[$key]) * 100) / $maximumScore;
				}
				$list1[$key] = Grade::getGradeFromMarks($marks, $gradePolicyArray1);
			}
		}
		$initialString = $this->getInitialString();
		//We need to write a Line 
		for ($i = 0; $i < sizeof($headerArray1); $i++)	{
			$initialString .= ",".$list1[$headerArray1[$i]];
		}
		return (new ResultsDataLine($initialString, $headerLine1));
	}
	public function assignData($studentId, $gpa, $registrationNumber, $flags, $clearedDetails, $unitDetails, $initialString, $leadingData, $line, $itemCount, $marksArray, $resultsHeader1, $specialInstructions)	{
		$this->studentId = $studentId;
		$this->gpa = ResultsDataLine::getGPAArrayFromString($gpa);
		$this->registrationNumber = $registrationNumber;
		$this->flags = $flags;
		$this->clearedDetails = ResultsDataLine::getClearedDetailsArrayFromString($clearedDetails);
		$this->unitDetails = ResultsDataLine::getUnitDetailsArrayFromString($unitDetails);
		$this->initialString = $initialString;
		$this->leadingData = $leadingData;
		$this->line = $line;
		$this->itemCount = $itemCount;
		$this->marksArray = $marksArray;
		$this->resultsHeader = $resultsHeader1;
		$this->specialInstructions = $specialInstructions;
	}
	public function cloneMe()	{
		$data1 = new ResultsDataLine(ResultsDataLine::$__IS_CLONE_MODE, null);
		$leadingData = array();
		foreach ($this->leadingData as $key => $val)	{
			$leadingData[$key] = $val;
		}
		$marksArray = array();
		foreach ($this->marksArray as $key => $val)	{
			$marksArray[$key] = $val;
		}
		$resultsHeader1 = $this->resultsHeader->cloneMe();
		$gpa = ResultsDataLine::getGPAStringFromArray($this->gpa);
		$clearedDetails = ResultsDataLine::getClearedDetailsStringFromArray($this->clearedDetails);
		$unitDetails = ResultsDataLine::getUnitDetailsStringFromArray($this->unitDetails);
		$data1->assignData($this->studentId, $gpa, $this->registrationNumber, $this->flags, $clearedDetails, $unitDetails, $this->initialString, $leadingData, $this->line, $this->itemCount, $marksArray, $resultsHeader1, $this->specialInstructions);
		return $data1;
	}
	public function getStudentId()	{ return $this->studentId; }
	public function setStudentId($studentId)	{ $this->studentId = $studentId; }
	public function getGPA()	{ return $this->gpa; }
	public function setGPA($gpa) { $this->gpa = $gpa; }
	public function addGPAForSemester($semester, $gpa)	{
		if (is_null($this->gpa)) $this->gpa = array();
		$this->gpa[$semester] = $gpa;
	}
	public function getGPAForSemester($semester)	{
		$gpa = 0;
		if (! is_null($this->gpa) && isset($this->gpa[$semester])) $gpa = $this->gpa[$semester];
		return $gpa;
	}
	public function addTotalUnitsAndModulePointsForSemester($semester, $totalUnits, $totalModulePoints)	{
		if (is_null($this->unitDetails))	{
			$this->unitDetails = array();
			$this->unitDetails[$semester] = array();
			$this->unitDetails[$semester][0] = 0;
			$this->unitDetails[$semester][1] = 0;
		}
		if (! isset($this->unitDetails[$semester]))	{
			$this->unitDetails[$semester] = array();
			$this->unitDetails[$semester][0] = 0;
			$this->unitDetails[$semester][1] = 0;
		}
		$this->unitDetails[$semester][0] = $totalUnits;
		$this->unitDetails[$semester][1] = $totalModulePoints;
	}
	public function addTotalUnitsForSemester($semester, $totalUnits)	{
		if (is_null($this->unitDetails))	{
			$this->unitDetails = array();
			$this->unitDetails[$semester] = array();
			$this->unitDetails[$semester][0] = 0;
			$this->unitDetails[$semester][1] = 0;
		}
		if (! isset($this->unitDetails[$semester]))	{
			$this->unitDetails[$semester] = array();
			$this->unitDetails[$semester][0] = 0;
			$this->unitDetails[$semester][1] = 0;
		}
		$this->unitDetails[$semester][0] = $totalUnits;
	}
	public function getTotalUnitsForSemester($semester)	{
		if (is_null($this->unitDetails)) return 0;
		if (! isset($this->unitDetails[$semester])) return 0;
		return $this->unitDetails[$semester][0];
	}
	public function addTotalModulePointsForSemester($semester, $totalModulePoints)	{
		if (is_null($this->unitDetails))	{
			$this->unitDetails = array();
			$this->unitDetails[$semester] = array();
			$this->unitDetails[$semester][0] = 0;
			$this->unitDetails[$semester][1] = 0;
		}
		if (! isset($this->unitDetails[$semester]))	{
			$this->unitDetails[$semester] = array();
			$this->unitDetails[$semester][0] = 0;
			$this->unitDetails[$semester][1] = 0;
		}
		$this->unitDetails[$semester][1] = $totalModulePoints;
	}
	public function getTotalModulePointsForSemester($semester)	{
		if (is_null($this->unitDetails)) return 0;
		if (! isset($this->unitDetails[$semester])) return 0;
		return $this->unitDetails[$semester][1];
	}
	public function calculateTotalModulePoints($database, $conn, $listOfUnits)	{
		/*
		From the this dataLine , fetch results of only available subjects on listOfUnits ,
		listOfUnits have results of the semester we are interested with and which applies to this student 
		listOfUnits[transactionId] = creditHours
		*/
		if (is_null($listOfUnits)) Object::shootException("You have supplied the empty list");
		$dataLine1 = $this;
		$headerLine1 = $dataLine1->getResultsHeader(); //index for marks Array which is transactionId
		if (is_null($headerLine1)) Object::shootException("Results Data has no header line");
		$headerArray1 = $headerLine1->getHeaderArray();
		if (is_null($headerArray1)) Object::shootException("Header List are empty");
		$marksArray1 = $dataLine1->getMarksArray(); 
		if (is_null($marksArray1)) Object::shootException("Data List are empty");
		//We need results which are found alos in list Of Units
		$totalModulePoints = 0.0;
		foreach ($headerArray1 as $transactionId)	{
			if (isset($marksArray1[$transactionId]) && isset($listOfUnits[$transactionId]))	{
				$units = $listOfUnits[$transactionId];
				//Now fetch gradePoint , remember this is a graded file 
				$grade1 = new Grade($database, $marksArray1[$transactionId], $conn);
				$gradePoint = $grade1->getGradePoint();
				$totalModulePoints += (floatval($gradePoint) * floatval($units));
			}
		}
		return round($totalModulePoints, 1);
	}
	public function calculateAndSetGPARelatedDatas()	{
		//This should be carried on the graded data 
		//All GPA And Module Points -- Expect year, semester, profile, database and connectionString to be put in data using putData 
		if (is_null($this->getData('year'))) Object::shootException("ResultsDataLine, Reference Year were not set");
		if (is_null($this->getData('semester'))) Object::shootException("ResultsDataLine , Reference Semester were not set");
		if (is_null($this->getData('profile'))) Object::shootException("ResultsDataLine, System Profile were not set");
		if (is_null($this->getData('database'))) Object::shootException("ResultsDataLine, Database were not set");
		if (is_null($this->getData('connectionString'))) Object::shootException("ResultsDataLine, Database Connection String were not set");
		if (is_null($this->getData('minimumGPABeforeSupplimentary'))) Object::shootException("Minimum GPA Before Supplimentary were not set");
		if (is_null($this->getData('minimumGPAAfterSupplimentary'))) Object::shootException("Minimum GPA After Supplimentary were not set");
		if (is_null($this->getData('isAfterSupplimentary'))) Object::shootException("After Supplimentary status were not set");
		$year = intval($this->getData('year'));
		$semester = intval($this->getData('semester'));
		$profile1 = $this->getData('profile');
		$database = $this->getData('database');
		$conn = $this->getData('connectionString');
		$minimumGPABeforeSupplimentary = $this->getData('minimumGPABeforeSupplimentary');
		$minimumGPAAfterSupplimentary = $this->getData('minimumGPAAfterSupplimentary');
		$isAfterSupplimentary = $this->getData('isAfterSupplimentary');
		//Let Us Start with total Units 
		$student1 = new Student($database, $this->getStudentId(), $conn);
		//$listOfTransactions = $student1->getListOfCourseAndSubjectTransactionsForYearAndSemester($year, $semester, $profile1);
		$totalUnits = $student1->getTotalUnitsForYearAndSemester($year, $semester, $profile1);
		//Now Setting Up Data Properly
		$gpa = "-1";
		$totalModulePoints = 0.0;
		if (($totalUnits == 0.0) || (intval($totalUnits) == 0))	{
			$gpa = 0.0;
			$totalModulePoints = 0.0;
		} else {
			$listOfUnits /* list[transactionId] = creditHours */ = $student1->getListOfUnitsForYearAndSemester($year, $semester, $profile1);
			//We need to Calculate, Module Points 
			$totalModulePoints = $this->calculateTotalModulePoints($database, $conn, $listOfUnits);
			//Now calculating GPA 
			$gpa = Number::truncate(($totalModulePoints / $totalUnits), Object::$__GPA_PRECISION);
		}
		//Assigning data Now 
		$this->addTotalUnitsAndModulePointsForSemester($semester, $totalUnits, $totalModulePoints);
		$this->addGPAForSemester($semester, $gpa);
		//We need to set failed flag appropriately 
		$logic_A = (intval("".$isAfterSupplimentary) == 1);
		$logic_B = (floatval($gpa) < floatval($minimumGPABeforeSupplimentary));
		$logic_C = (floatval($gpa) < floatval($minimumGPAAfterSupplimentary));
		/*
		If it was already Disqualified you can not undisqualify simply by group Arithmetics, if it were already disqualified by GPA you need keep locking the failed status 
		*/
		if ($this->isGPADisqualified()) $this->setGPADisqualified("1");  //Make sure failed bits are sync with GPA Disqualified
		if ((! $logic_A && $logic_B) || ($logic_A && $logic_C)) $this->setGPADisqualified("1");
		return $this;
	}
	public function setUnitDetails($unitDetails)	{ $this->unitDetails = $unitDetails; }
	public function getUnitDetails()	{ return $this->unitDetails; }
	public function getRegistrationNumber()	{ return $this->registrationNumber; }
	public function setRegistrationNumber($registrationNumber)	{ $this->registrationNumber = $registrationNumber; }
	public function getFlags()	{ return $this->flags; }
	public function setFlags($flags)	{ $this->flags = $flags; }
	public function getLine()	{ return $this->line; }
	public function setLine($line)	{ $this->line = $line; }
	public function getItemCount()	{ return $this->itemCount; }
	public function getMarksArray()	{ return $this->marksArray; }
	public function setMarksArray($marksArray) { $this->marksArray = $marksArray; }
	public function getInitialString()	{ return $this->initialString; }
	public function setInitialString($initialString)	{ $this->initialString = $initialString; }
	public function getResultsHeader()	{ return $this->resultsHeader; }
	public function setResultsHeader($resultsHeader)	{ $this->resultsHeader = $resultsHeader; }
	public function getLeadingData()	{ return $this->leadingData; }
	public function setSpecialInstruction($spec)	{ $this->specialInstructions = $spec; }
	public function getSpecialInstruction()	{ return $this->specialInstructions; }
	//Flags based functionality
	public function isRepeating()	{ return Object::isControlFlagsSetAt($this->flags, ResultsDataLine::$__IS_REPEATING); }
	public function setRepeating($repeating)	{
		$val = intval("".$repeating);
		if ($val == 1)	{
			$this->flags = Object::setControlFlagsAt($this->flags, ResultsDataLine::$__IS_REPEATING);
		} else {
			$this->flags = Object::resetControlFlagsAt($this->flags, ResultsDataLine::$__IS_REPEATING);
		}
	}
	public function isCleared()	{ /*01*/ return (! Object::isControlFlagsSetAt($this->flags, ResultsDataLine::$__POS_FAILED) && Object::isControlFlagsSetAt($this->flags, ResultsDataLine::$__POS_CLEARED)); }
	Protected function resetClearAndFailedBits()	{
		$this->flags = Object::resetControlFlagsAt($this->flags, ResultsDataLine::$__POS_CLEARED);
		$this->flags = Object::resetControlFlagsAt($this->flags, ResultsDataLine::$__POS_FAILED);
	}
	public function setCleared($cleared)	{ 
		$val = intval("".$cleared);
		if ($val == 1)	{
			$this->flags = Object::setControlFlagsAt($this->flags, ResultsDataLine::$__POS_CLEARED);
			$this->flags = Object::resetControlFlagsAt($this->flags, ResultsDataLine::$__POS_FAILED);
		} else {
			$this->resetClearAndFailedBits();
		}
	}
	public function isFailed()	{ /*10*/ return (Object::isControlFlagsSetAt($this->flags, ResultsDataLine::$__POS_FAILED) && ! Object::isControlFlagsSetAt($this->flags, ResultsDataLine::$__POS_CLEARED)); }
	public function setFailed($failed)	{
		$val = intval("".$failed);
		if ($val == 1)	{
			$this->flags = Object::resetControlFlagsAt($this->flags, ResultsDataLine::$__POS_CLEARED);
			$this->flags = Object::setControlFlagsAt($this->flags, ResultsDataLine::$__POS_FAILED);
		} else {
			$this->resetClearAndFailedBits();
		}
	}
	public function isDisqualified()	{ /*11*/ return (Object::isControlFlagsSetAt($this->flags, ResultsDataLine::$__POS_FAILED) && Object::isControlFlagsSetAt($this->flags, ResultsDataLine::$__POS_CLEARED)); }
	public function setDisqualified($failed)	{
		$val = intval("".$failed);
		if ($val == 1)	{
			$this->flags = Object::setControlFlagsAt($this->flags, ResultsDataLine::$__POS_CLEARED);
			$this->flags = Object::setControlFlagsAt($this->flags, ResultsDataLine::$__POS_FAILED);
		} else {
			$this->resetClearAndFailedBits();
		}
	}
	public function isGPADisqualified()	{ return Object::isControlFlagsSetAt($this->flags, ResultsDataLine::$__GPA_DISQUALIFIED); }
	public function setGPADisqualified($failed)	{
		$val = intval("".$failed);
		if ($val == 1)	{
			$this->flags = Object::setControlFlagsAt($this->flags, ResultsDataLine::$__GPA_DISQUALIFIED);
			$this->setDisqualified($failed);
		} else {
			$this->flags = Object::resetControlFlagsAt($this->flags, ResultsDataLine::$__GPA_DISQUALIFIED);
		}
	}
	public function isAfterSupplimentary()	{ return Object::isControlFlagsSetAt($this->flags, ResultsDataLine::$__IS_AFTER_SUPPLIMENTARY); }
	public function setAfterSupplimentary($failed)	{
		$val = intval("".$failed);
		if ($val == 1)	{
			$this->flags = Object::setControlFlagsAt($this->flags, ResultsDataLine::$__IS_AFTER_SUPPLIMENTARY);
		} else {
			$this->flags = Object::resetControlFlagsAt($this->flags, ResultsDataLine::$__IS_AFTER_SUPPLIMENTARY);
		}
	}
	public function isDisplayResultsEnable()	{ return Object::isControlFlagsSetAt($this->flags, ResultsDataLine::$__DISPLAY_RESULTS); }
	public function setDisplayResultsEnable($enable)	{
		$val = intval("".$enable);
		if ($val == 1)	{
			$this->flags = Object::setControlFlagsAt($this->flags, ResultsDataLine::$__DISPLAY_RESULTS);
		} else {
			$this->flags = Object::resetControlFlagsAt($this->flags, ResultsDataLine::$__DISPLAY_RESULTS);
		}
	}
	public function getClearedDetails()	{ return $this->clearedDetails; }
	public function setClearedDetails($clearedDetails)	{
		$this->clearedDetails = $clearedDetails;
	}
	public function addClearedDetails($transactionId, $cleared)	{
		$list1 = array();
		$list1[$transactionId] = $cleared;
		$this->clearedDetails = ResultsDataLine::mergeClearedDetailsArrays($this->clearedDetails, $list1);
	}
	public function getClearedDetailsForTransaction($transactionId)	{
		if (is_null($this->clearedDetails)) return null;
		if (! isset($this->clearedDetails[$transactionId])) return null;
		return $this->clearedDetails[$transactionId];
	}
}
class Results extends Object {
	private $resultsId;
	private $resultsValid;
	private $group;
	private $examination;
	private $rawMarksCSVFile;
	private $rawMarksCSVFileChecksum;
	private $gradedMarksCSVFile;
	private $gradedMarksCSVFileChecksum;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__IS_RESULTS_LOCKED = 5;
	static $__IS_PUBLISH_RESULTS = 6;
	//Proceed for type of results Briefcase or Results 
	static $__RESULTS_MODE = 1;
	static $__BRIEFCASE_MODE = 2;
	public static final function showResultsUI($database, $conn, $results1, $paper1, $systemTime1, $controlFlags)	{
		/*The following should be set
			In results Object data 
			1. lineHeader1 -- Tumain Univer 
			2. lineHeader2 -- Kiliman 
			3. lineHeader3 -- Faculty of dash dash 
			4. lineHeader4 -- Course Name, 
			5. folder -- contain results folder 
			6. logo -- contain absolute image file 
		*/
		if (is_null($results1->getData('lineHeight1'))) Object::shootException("Line Data One is not set"); 
		if (is_null($results1->getData('lineHeight2'))) Object::shootException("Line Data Two is not set"); 
		if (is_null($results1->getData('captionText'))) Object::shootException("Caption Text is not set");
		if (is_null($results1->getData('folder'))) Object::shootException("Folder Path is not set");
		if (is_null($results1->getData('logo'))) Object::shootException("Logo File is not set");
		$lineHeight1 = $results1->getData('lineHeight1');
		$lineHeight2 = $results1->getData('lineHeight2');
		$captionText = $results1->getData('captionText');
		$folder = $results1->getData('folder');
		$logo = $results1->getData('logo');
 		$width = $paper1->getWidth();
		$height = $paper1->getHeight();
		$imageWidth = 36;
		$twidth = $width."mm";
		$window1 = "<div id=\"__view_results_services\" class=\"ui-results-container ui-sys-oi\" style=\"width: $twidth;\">";
		//Header 
		$window1 .= "<div style=\"position: relative; font-size: 12px; font-weight: bold; padding-bottom: 2px; border-bottom: 1px solid black; margin-bottom: 2px;\">";
		$twidth = $imageWidth."mm";
		$theight = "32mm";
		$window1 .=  "<div style=\"display: inline-block; width: $twidth; height: $theight; padding: 0; border: none; margin: 0;\"><div style=\"margin: 1px; position: relative;\"><img src=\"$logo\" alt=\"NA\" style=\"width: 100%; height: 100%;\"/></div></div>";
		$twidth = $width - $imageWidth;
		$twidth = $twidth -1;
		$twidth = $twidth."mm";
		$window1 .=  "<div style=\"display: inline-block; width: $twidth; padding: 0; border: none; margin: 0; text-align: center;\">";
		$ttext = $results1->getData('lineHeight1');
		$window1 .= "<div style=\"font-size: 1.8em;\">$ttext</div>";
		$ttext = $results1->getData('lineHeight2');
		$window1 .= "<div style=\"font-size: 1.4em;\">$ttext</div>";
		$window1 .= "</div>";
		//Results Files Check 
		if (is_null($results1->getRawMarksCSVFile()) || is_null($results1->getGradedMarksCSVFile())) Object::shootException("Results is not Initialized or Uploaded");
		$rawMarksCSVFile = $folder.$results1->getRawMarksCSVFile();
		$gradedMarksCSVFile = $folder.$results1->getGradedMarksCSVFile();
		if (! (file_exists($rawMarksCSVFile) && file_exists($gradedMarksCSVFile))) Object::shootException("Results has not been uploaded or results storage is not found");
		if (! ((md5_file($rawMarksCSVFile) == $results1->getRawMarksCSVFileChecksum()) && (md5_file($gradedMarksCSVFile) == $results1->getGradedMarksCSVFileChecksum()))) Object::shootException("Results has failed the Integrity Check");
		$rawMarksResultsFile1 = new ResultsFile($database, $rawMarksCSVFile, $conn);
		$gradedMarksResultsFile1 = new ResultsFile($database, $gradedMarksCSVFile, $conn);
		$courseName = "";
		$departmentName = "";
		$course1 = $rawMarksResultsFile1->getCourse();
		if (! is_null($course1))	{
			$courseName = $course1->getCourseName()." (".$course1->getCourseCode().")";
			$department1 = $course1->getDepartment();
			if (! is_null($department1))	{
				$departmentName = $department1->getDepartmentName();
			}
		}
		$window1 .= "<div style=\"text-align: center; font-weight: normal; font-style: italic; font-size: 1.1em;\">$departmentName</div>";
		$window1 .= "<div style=\"text-align: center; font-weight: normal; font-style: italic; \">$courseName&nbsp;&nbsp;&nbsp;<span style=\"font-size: 0.8em;\">($captionText)</span></div>";
		$batchName = "";
		if (! is_null($rawMarksResultsFile1->getBatch())) $batchName = $rawMarksResultsFile1->getBatch()->getAccademicYear();
		$ttext = "<b>Batch of </b> : ".$batchName;
		$ttext .= " ,<b>Maximum Score</b> : ".$rawMarksResultsFile1->getMaximumScore();
		$ttext .= ", <b>Year of Study </b> : ".$rawMarksResultsFile1->getYear();
		$semester = "All";
		if (intval($rawMarksResultsFile1->getSemester()) != 0) $semester = $rawMarksResultsFile1->getSemester();
		$ttext .= ", <b>Semester </b> : ".$semester;
		$window1 .= "<div style=\"text-align: center; font-size: 0.8em; font-weight: normal; font-style: italic;\">$ttext</div>";
		$window1 .= "</div>"; //End Header
		//Begin Contet
		$headerLine1 = $rawMarksResultsFile1->getHeaderLine();
		if (is_null($headerLine1)) Object::shootException("The System detected an Invalid Results Header");
		$headerArray1 = $headerLine1->getHeaderArray();
		if (is_null($headerArray1)) Object::shootException("The system returned an empty module/subject list");
		if (sizeof($headerArray1)== 0) Object::shootException("There is no module/subject list uploaded"); 
		$window1 .= "<div style=\"padding: 2px; margin: 2px; margin-top: 8px; margin-bottom: 8px; position: relative;\"><table style=\"width: 100%;\"><thead>";
		$firstRow = "<tr style=\"text-align: center;\">";
		$secondRow = "<tr style=\"text-align: center; font-size: 0.9em;\">";
		$firstRow .= "<th rowspan=\"2\"></th><th rowspan=\"2\">Examination Numbers</th>"; 
		foreach ($headerArray1 as $transactionId)	{
			$transaction1 = new CourseAndSubjectTransaction($database, $transactionId, $conn);
			$subject1 = $transaction1->getSubject();
			if (is_null($subject1)) continue;
			$subjectCode = $subject1->getSubjectCode();
			$firstRow .= "<th colspan=\"3\" style=\"text-align: center;\">$subjectCode</th>";
			$secondRow .= "<th>Marks</th><th>Grade</th><th></th>";
		}
		$firstRow .= "<th rowspan=\"2\">Comments</th>";
		$secondRow .= "</tr>";
		$firstRow .= "</tr>";
		$window1 .= $firstRow.$secondRow;
		$window1 .= "</thead><tbody>";
		//Pass Value Comment Box 
		$generalCommentLookup = array();
		$generalCommentLookup[0] = "Pass";
		$generalCommentLookup[1] = "Failed";
		$generalCommentLookup[2] = "Completely Failed";
		$generalCommentLookup[3] = "Incomplete";
		//Get List of Student, use rawMarksResultsFile1 and confirm grades in gradedMarksResultsFile1
		$listOfStudents = $rawMarksResultsFile1->getDataLines();
		if (is_null($listOfStudents)) Object::shootException("There is not student found in the results");
		$studentCount = 0;
		foreach ($listOfStudents as $dataLine1)	{
			$studentCount++;
			$studentId = $dataLine1->getStudentId();
			$registrationNumber = $dataLine1->getRegistrationNumber();
			$window1 .= "<tr><td>$studentCount</td><td>$registrationNumber</td>";
			/*We need a strategic passValue Numbering 
				3 -- Incomplete 
				2 -- Completely Failed  
				1 -- Failed 
				0 -- Passed 
			*/
			$passValue = 0; // I do assume pass 
			foreach ($headerArray1 as $transactionId)	{
				$marks = "";
				$gradeName = "";
				try {
					$marks = $rawMarksResultsFile1->getMarksAt($studentId, $transactionId);
					$grade1 = new Grade($database, $gradedMarksResultsFile1->getMarksAt($studentId, $transactionId), $conn);
					$gradeName = $grade1->getGradeName();
					//Priority is Incomplete 
					$tempPassValue = 0;
					if ($grade1->isIncomplete()) $tempPassValue = 3;
					else if ($grade1->isCompleteFailed()) $tempPassValue = 2;
					else if ($grade1->isFailed()) $tempPassValue = 1;
					//Now we need to compare 
					if ($tempPassValue > $passValue) $passValue = $tempPassValue;
				} catch (Exception $e)	{
					//do nothing 
				}
				$window1 .= "<td>$marks</td><td>$gradeName</td><td></td>"; 
			}
			$window1 .= "<td style=\"font-size: 0.9em;\">".$generalCommentLookup[$passValue]."</td></tr>";
		}
		$window1 .= "</tbody><tfoot></tfoot></table></div>";// End Content
		$window1 .= "</div>";
		return $window1;
	}
	public static final function isResultsMode($controlFlags)	{
		return ((intval($controlFlags) & Results::$__RESULTS_MODE) == Results::$__RESULTS_MODE);
	}
	public static final function isBriefcaseMode($controlFlags)	{
		return ((intval($controlFlags) & Results::$__BRIEFCASE_MODE) == Results::$__BRIEFCASE_MODE);
	}
	public function nullifyMe()	{
		//Expects full path to be in extraInformation
		$filename = $this->extraInformation;
		$filename = $filename.$this->rawMarksCSVFile;
		if (! file_exists($filename)) Object::shootException("The Original Marks File were not found");
		$promise1 = FileFactory::createBackupFile($filename);
		if (! $promise1->isPromising()) Object::shootException("Backup file could not be created");
		if (! unlink($filename)) Object::shootException("Could not remove the Physical File");
		$extraFilter = System::getCodeString(8);
		$query = "UPDATE results SET rawMarksCSVFile=NULL, rawMarksCSVFileChecksum=NULL, gradedMarksCSVFile=NULL, gradedMarksCSVFileChecksum=NULL, extraFilter='$extraFilter' WHERE resultsId='$this->resultsId'";
		mysql_db_query($this->database, $query, $this->conn) or Object::shootException("Could not update the database system");
	}
	public function getRawMarksResultsFile($folderPath)	{
		$resultsFile1 = null;
		try {
			$filename = $this->rawMarksCSVFile;
			if (is_null($filename)) Object::shootException("The marks file is empty");
			$filename = $folderPath.$filename;
			//Need to check if integrity 
			if (md5_file($filename) != $this->rawMarksCSVFileChecksum) Object::shootException("The Results could not pass Integrity check");
			$resultsFile1 = new ResultsFile($this->database, $filename, $this->conn);
		} catch (Exception $e)	{
			$resultsFile1 = null;
		}
		return $resultsFile1;
	}
	public function getGradedMarksResultsFile($folderPath)	{
		$resultsFile1 = null;
		try {
			$filename = $this->gradedMarksCSVFile;
			$filename = $folderPath.$filename;
			//Need to check if integrity 
			if (md5_file($filename) != $this->gradedMarksCSVFileChecksum) Object::shootException("The Results could not pass Integrity check");
			$resultsFile1 = new ResultsFile($this->database, $filename, $this->conn);
		} catch (Exception $e)	{
			$resultsFile1 = null;
		}
		return $resultsFile1;
	}
	public function canEditNow()	{
		return (false && $this->canLockResultsNow());
	}
	public function canDeleteNow()	{
		return (false && $this->canLockResultsNow());
	}
	public function canNullifyNow()	{
		return $this->canLockResultsNow();
	}
	public function canUploadNow()	{
		return $this->canLockResultsNow();
	}
	public function canViewResultsDetails()	{
		return true; //Allow this any time
	}
	public function canPublishNow()	{
		return (! $this->group->isResultsLocked() && $this->isResultsLocked() && ! $this->isPublishResultsEnabled());
	}
	public function canUnpublishNow()	{
		return (! $this->group->isResultsLocked() && $this->isResultsLocked() && $this->isPublishResultsEnabled());
	}
	public function canLockResultsNow()	{
		return (! $this->group->isResultsLocked() && ! $this->isResultsLocked());
	}
	public function canUnlockResultsNow()	{
		return (! $this->group->isResultsLocked() && $this->isResultsLocked());
	}
	public function isEligibleForPublication()	{
		return ($this->isResultsLocked() && $this->isPublishResultsEnabled() && ! $this->group->isResultsLocked());
	}
	public function isPublishResultsEnabled()	{
		return $this->isFlagSetAt(Results::$__IS_PUBLISH_RESULTS);
	}
	public function setPublishResultsEnabled($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(Results::$__IS_PUBLISH_RESULTS);
		} else {
			$this->resetFlagAt(Results::$__IS_PUBLISH_RESULTS);
		}
	}
	public function isResultsLocked()	{
		return $this->isFlagSetAt(Results::$__IS_RESULTS_LOCKED);
	}
	public function setResultsLocked($val)	{
		if (intval($val) == 1)	{
			$this->setFlagAt(Results::$__IS_RESULTS_LOCKED);
		} else {
			$this->resetFlagAt(Results::$__IS_RESULTS_LOCKED);
		}
	}
	public final static function monitorResults($database, $conn, $rawResultsFile1, $gradedResultsFile1)	{
		/*
		RawResultsFile 
		GradedResultsFile
		*/
		$table1 = "<div class=\"ui-sys-tabs\"><ul><li><a href=\"#__fragment_raw\">Raw Marks</a></li><li><a href=\"#__fragment_graded\">Graded Marks</a></li></ul><div style=\"overflow-x: scroll;\" id=\"__fragment_raw\">";
		if (! is_null($rawResultsFile1))	{
			if (is_null($rawResultsFile1->getCourse())) Object::shootException("No Course were found attached to the results file"); 
			$courseName = $rawResultsFile1->getCourse()->getCourseName()."(".$rawResultsFile1->getCourse()->getCourseCode().")"; 
			if (is_null($rawResultsFile1->getBatch())) Object::shootException("No Batch were found attached to the results file");
			$batchName = $rawResultsFile1->getBatch()->getAccademicYear(); 
			$year = $rawResultsFile1->getYear();
			$semester = $rawResultsFile1->getSemester();
			$maximumScore = $rawResultsFile1->getMaximumScore();
			$table1 .= "<div>Course Name : <span>$courseName</span><br/>Batch of : <span>$batchName</span>&nbsp;&nbsp;&nbsp;&nbsp; Year: <span>$year</span>&nbsp;&nbsp;&nbsp;&nbsp;Semester: <span>$semester</span></div><div>Maximum Score: <span>$maximumScore</span></div><table class=\"pure-table\"><thead><tr>";
			for ($i=0; $i < Object::$numberOfResultsFileLeadingColumn; $i++)	$table1 .= "<th></th>";
			$headerLine1 = $rawResultsFile1->getHeaderLine();
			$headerArray1 = $headerLine1->getHeaderArray(); 
			foreach ($headerArray1 as $transactionId)	{
				$transaction1 = new CourseAndSubjectTransaction($database, $transactionId, $conn);
				$subjectCode = $transaction1->getSubject()->getSubjectCode();
				$subjectName = $transaction1->getSubject()->getSubjectName();
				$table1 .= "<th title=\"$subjectName\">$subjectCode</th>";
			}
			$table1 .= "</tr></thead><tbody>";
			$dataLines = $rawResultsFile1->getDataLines();
			if (! is_null($dataLines))	{
				foreach ($dataLines as $dataLine1)	{
					$table1 .= "<tr>";
					$leadingData = $dataLine1->getLeadingData();
					foreach ($leadingData as $dt)	{
						$table1 .= "<td>$dt</td>";
					}
					$marksArray = $dataLine1->getMarksArray();
					foreach ($headerArray1 as $transactionId)	{
						$marks = $marksArray[$transactionId];
						$table1 .= "<td>$marks</td>";
					}
					$table1 .= "</tr>";
				}
			}
			$table1 .= "</tbody></table>";
		}
		$table1 .= "</div><div style=\"overflow-x: scroll;\" id=\"__fragment_graded\">";
		if (! is_null($gradedResultsFile1))	{
			$courseName = $gradedResultsFile1->getCourse()->getCourseName()."(".$gradedResultsFile1->getCourse()->getCourseCode().")";
			$batchName = $gradedResultsFile1->getBatch()->getAccademicYear();
			$year = $gradedResultsFile1->getYear();
			$semester = $gradedResultsFile1->getSemester();
			$table1 .= "<div>Course Name : <span>$courseName</span><br/>Batch of : <span>$batchName</span>&nbsp;&nbsp;&nbsp;&nbsp; Year: <span>$year</span>&nbsp;&nbsp;&nbsp;&nbsp;Semester: <span>$semester</span></div><div>Maximum Score: <span>$maximumScore</span></div><table class=\"pure-table\"><thead><tr>";
			for ($i=0; $i < Object::$numberOfResultsFileLeadingColumn; $i++)	$table1 .= "<th></th>";
			$headerLine1 = $gradedResultsFile1->getHeaderLine();
			$headerArray1 = $headerLine1->getHeaderArray();
			foreach ($headerArray1 as $transactionId)	{
				$transaction1 = new CourseAndSubjectTransaction($database, $transactionId, $conn);
				$subjectCode = $transaction1->getSubject()->getSubjectCode();
				$subjectName = $transaction1->getSubject()->getSubjectName();
				$table1 .= "<th title=\"$subjectName\">$subjectCode</th>";
			}
			$table1 .= "</tr></thead><tbody>";
			$dataLines = $gradedResultsFile1->getDataLines();
			if (! is_null($dataLines))	{
				foreach ($dataLines as $dataLine1)	{
					$table1 .= "<tr>";
					$leadingData = $dataLine1->getLeadingData();
					foreach ($leadingData as $dt)	{
						$table1 .= "<td>$dt</td>";
					}
					$marksArray = $dataLine1->getMarksArray();
					foreach ($headerArray1 as $transactionId)	{
						$gradeId = $marksArray[$transactionId];
						$grade1 = new Grade($database, trim($gradeId), $conn);
						$gradeName = $grade1->getGradeName();
						$table1 .= "<td>$gradeName</td>";
					}
					$table1 .= "</tr>";
				}
			}
			$table1 .= "</tbody></table>";
		}
		$table1 .= "</div></div>";
		return $table1;
	}
	public final static function addResultsIfNotExists($database, $conn, $resultsGroupId, $examinationId, $extraInformation)	{
		//Use examinationId should appear once in the resultsGroup
		/*$query = "SELECT resultsId FROM results WHERE groupId='$resultsGroupId' AND examinationId='$examinationId' AND extraInformation='$extraInformation'";*/
		$query = "SELECT resultsId FROM results WHERE groupId='$resultsGroupId' AND examinationId='$examinationId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Results [static], Could not execute fetching query");
		$resultsId = "";
		if (mysql_num_rows($result) == 1)	{
			//Found existing record 
			list($resultsId) = mysql_fetch_row($result);
		} else {
			//Now insert a new record
			$query = "INSERT INTO results (groupId, examinationId, extraInformation) VALUES ('$resultsGroupId', '$examinationId', '$extraInformation')";
			$result = mysql_db_query($database, $query, $conn) or Object::shootException("Results [static], Could not execute adding query");
			$query="SELECT LAST_INSERT_ID()";
			$result=mysql_db_query($database, $query, $conn) or Object::shootException('Group, Could not Extract Last Inserted ID');
			if (mysql_num_rows($result) != 1) Object::shootException('Group, Last Inserted ID is Not Unique');
			list($resultsId)=mysql_fetch_row($result);
		}	
		return $resultsId;
	}
	public final static function synchronize($database, $conn, $batchId)	{
		$promise1 = new Promise();
		$query = "SELECT courseId FROM course";
		$courseResult = mysql_db_query($database, $query, $conn) or Object::shootException("Synchronize Results, Could not execute course query");
		$accademicYear1 = new AccademicYear($database, $batchId, $conn);
		while (list($courseId)=mysql_fetch_row($courseResult))	{
			$course1 = new Course($database, $courseId, $conn);
			$examinationGroupId = null;
			try {
				if (is_null($course1->getEducationLevel())) Object::shootException("Education Level Not Found");
				$examinationGroupList = ExaminationGroup::getExaminationGroupBelongingToEducationLevel($database, $conn, $course1->getEducationLevel()->getLevelId());
				if (is_null($examinationGroupList)) Object::shootException("Examination Group List were not found");
				foreach ($examinationGroupList as $examinationGroupId)	{
					$examIdList = Examination::getExaminationsBelongingToExaminationGroup($database, $conn, $examinationGroupId);
					if (is_null($examIdList)) Object::shootException("Examination List were not found");
					$examinationGroup1 = new ExaminationGroup($database, $examinationGroupId, $conn);
					$duration = intval($course1->getDuration());
					for ($year = 1; $year <= $duration; $year++)	{
						$extraInformation = $examinationGroup1->getGroupName()." -- ".$course1->getCourseCode()."_".$accademicYear1->getAccademicYear()."_YEAR_".$year;
						$resultsGroupId = ResultsGroup::addGroupIfNotExists($database, $conn, $examinationGroup1->getGroupId(), $accademicYear1->getAccademicYearId(), $course1->getCourseId(), $year, $extraInformation);
						foreach ($examIdList as $examinationId)	{
							$examination1 = new Examination($database, $examinationId, $conn);
							$extraInformation = $examination1->getExaminationName()." -- ".$course1->getCourseCode()."_".$accademicYear1->getAccademicYear()."_YEAR_".$year."_and_SEM_".$examination1->getSemester();
							$resultsId = Results::addResultsIfNotExists($database, $conn, $resultsGroupId, $examination1->getExaminationId(), $extraInformation); 
						}
					}
				}
			} catch (Exception $e)	{
				continue;
			}
		}
		$promise1->setPromise(true);
		return $promise1;
	}
	public final static function updateMaximumScore($database, $conn, $filename, $maximumScore, $systemTime1)	{
		$resultsFile1 = new ResultsFile($database, $filename, $conn);
		$resultsFile1->updateScoresBasedOnMaximumScore($maximumScore, $systemTime1);
		//We need now to save to the same file 
		$resultsFile1->save();
	}
	public final static function uploadResults($database, $conn, $resultsObject1, $resultsFileToUpload, $resultsFolder, $systemTime1, $overwrite, $controlFlags)	{
		$resultsFile1 = null;
		$storageFilename = $resultsFolder."results_".$resultsObject1->getId().".csv";
		$storageGradedFilename = $storageFilename.".graded";
		if (! is_null($resultsObject1->getRawMarksCSVFile()))	{
			$filename = $resultsFolder.$resultsObject1->getRawMarksCSVFile();
			$storageFilename = $filename;
			if (! file_exists($filename)) Object::shootException("[Raw] The store results file does not exists in the system");
			if (md5_file($filename) != $resultsObject1->getRawMarksCSVFileChecksum()) Object::shootException("[Raw] The content of the results file has been modified outside the system procedures");
			$resultsFile1 = new ResultsFile($database, $filename, $conn);
		}
		//Verify graded File 
		if (! is_null($resultsObject1->getGradedMarksCSVFile()))	{
			$filename = $resultsFolder.$resultsObject1->getGradedMarksCSVFile();
			$storageGradedFilename = $filename;
			if (! file_exists($filename)) Object::shootException("[Graded] The store results file does not exists in the system");
			if (md5_file($filename) != $resultsObject1->getGradedMarksCSVFileChecksum()) Object::shootException("[Graded] The content of the results file has been modified outside the system procedures");
		} 
		//Now deal with uploaded file 
		$resultsFile2 = new ResultsFile($database, $resultsFileToUpload, $conn);
		$resultsFileToSave1 = $resultsFile2;
		if (! is_null($resultsFile1))	{
			//During Merging Change the algorithm, not necessary to assume everything is sorted
			$resultsFile1->merge($resultsFile2, $systemTime1, $overwrite, false);
			$resultsFileToSave1 = $resultsFile1; //Now Combined
		} else {
			//We need to save the file path 
			//The previous path was null
			$filename = "results_".$resultsObject1->getId().".csv";
			$resultsObject1->setRawMarksCSVFile($filename);
			$filename = $filename.".graded";
			$resultsObject1->setGradedMarksCSVFile($filename);
		} 
		//Check Data Validity 
		if (! $resultsFileToSave1->isRawDataValid()) Object::shootException("Some of the marks are not the valid marks");
		//We need to sort before saving
		$resultsFileToSave1->sort();
		//We need to put failed Markers on the file 
		if (Results::isResultsMode($controlFlags)) $resultsFileToSave1 = $resultsFileToSave1->getAccademicResultsFileForResults($resultsObject1->getId());
		//We need to compare data in the file against the ResultsFileManager 
		if ($resultsFileToSave1->getCourse()->getCourseId() != $resultsObject1->getGroup()->getCourse()->getCourseId()) Object::shootException("Results Data does not belong to the course specified by its corresponding results manager");
		if ($resultsFileToSave1->getYear() != $resultsObject1->getGroup()->getYear()) Object::shootException("Results Data does not belong to the year specified by its corresponding results manager");
		if (Results::isResultsMode($controlFlags) && ($resultsFileToSave1->getSemester() != $resultsObject1->getExamination()->getSemester())) Object::shootException("Results Data does not belong to the semester specified by its corresponding results manager");
		$resultsFileToSave1->setCompilationTime($systemTime1->getDateAndTimeString());
		//We need to update the saving path incase it is temporary
		$resultsFileToSave1->setFilename($storageFilename);
		$resultsFileToSave1->save();
		$checksum = md5_file($storageFilename);
		$resultsObject1->setRawMarksCSVFileChecksum($checksum);
		//We need to update the saving path for graded marks 
		$resultsFileToSave1->grade();
		$resultsFileToSave1->setFilename($storageGradedFilename);
		$resultsFileToSave1->save();
		$checksum = md5_file($storageGradedFilename);
		$resultsObject1->setGradedMarksCSVFileChecksum($checksum);
		//Now proceed on Saving
		$resultsObject1->commitUpdate();
		$promise1 = new Promise();
		$promise1->setPromise(true);
		return $promise1;
	}
	public final static function downloadResultsTemplate($database, $conn, $profile1, $folderPath, $filename, $systemTime1, $batchId, $courseId, $year, $semester, $maximumScore, $transactionArr)	{
		$columnToReserve = Object::$numberOfResultsFileLeadingColumn;
		$promise1 = new Promise();
		$promise1->setPromise(false);
		if (is_null($transactionArr)) Object::shootException("There are no subject transaction list");
		$dateAndTimeString = $systemTime1->getDateAndTimeString();
		$filename = $folderPath.$filename;
		$file1 = fopen($filename, "w") or Object::shootException("Could not open file for writing");
		$numberOfColumn = $columnToReserve + sizeof($transactionArr);
		$columnFillingPattern = "";
		for ($i=2; $i < $numberOfColumn; $i++) $columnFillingPattern .= ",";
		$columnFillingPattern .= "\n";
		$lineToWrite = "@-header,instruction_!_ Please DO NOT CHANGE THE STRUCTURE OF THIS FILE".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Instruction Processor Line Failed");
		$lineToWrite = "@-header,compilationTime_!_ $dateAndTimeString".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Timestamp Processor Line Failed");
		$lineToWrite = "@-header,columnCount_!_ $numberOfColumn".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Column Count Processor Line Failed");
		$lineToWrite = "@-header,maximumScore_!_ $maximumScore".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Maximum Score Processor Line Failed");
		$lineToWrite = "@-header,fileType_!_ results".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Results Processor Line Failed");
		$resultsFileCode = md5(Object::$resultsFileCode);
		$lineToWrite = "@-header,fileTypeCode_!_ $resultsFileCode".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("File Type Code Processor Line Failed");
		$lineToWrite = "@-header,courseId_!_ $courseId".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Reference Course [Id] Failed");
		$course1 = new Course($database, $courseId, $conn);
		$courseName = $course1->getCourseName();
		$lineToWrite = "@-header,courseName_!_ $courseName".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Reference Course [Name] Failed");
		$lineToWrite = "@-header,year_!_ $year".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Year of Study Failed");
		$lineToWrite = "@-header,semester_!_ $semester".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Semester of Study Failed");
		$lineToWrite = "@-header,batchId_!_ $batchId".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Reference batch [Id] Failed");
		$batch1 = new AccademicYear($database, $batchId, $conn);
		$batchName = $batch1->getAccademicYear();
		$lineToWrite = "@-header,batchName_!_ $batchName".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Reference batch [Name] Failed");
		$lineToWrite = "@-header,flags_!_0".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Line Reserved Failed");
		$lineToWrite = ",".$columnFillingPattern;
		fwrite($file1, $lineToWrite) or Object::shootException("Line Reserved Failed");
		/*Begin Subjects Now use transaction reference */
		$lineToWrite = "";
		for ($i=1; $i < $columnToReserve; $i++) $lineToWrite .= ",";
		$lineToWrite2 = "Ref,GPA,Exam Number,Flags,Details,res";
		foreach ($transactionArr as $transactionId)	{
			$transaction1 = new CourseAndSubjectTransaction($database, $transactionId, $conn);
			$lineToWrite2 .= ",".str_replace(",", " ", $transaction1->getSubject()->getSubjectCode());
			$lineToWrite .= ",".$transaction1->getTransactionId();
		}
		$lineToWrite .= "\n";
		$lineToWrite2 .= "\n";
		fwrite($file1, $lineToWrite) or Object::shootException("Line Failed: Could not write a subject list line");
		fwrite($file1, $lineToWrite2) or Object::shootException("Line Failed: Could not write a references transaction list line");
		/*Now students are needed*/
		$query = "SELECT studentId FROM students WHERE courseId='$courseId' AND cyear='$year' AND csemester='$semester'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could Not Pull Students Reference Query");
		while (list($studentId)=mysql_fetch_row($result))	{
			$student1 = new Student($database, $studentId, $conn);
			$ulogin1 = $student1->getLogin();
			$lineToWrite = "";
			if ($ulogin1->isAdmitted() && $student1->isActive($profile1)&& $student1->isInABatch($batchId) && ! is_null($student1->getExaminationNumber()))	{
				$gpa = "";
				$flags = 0;
				//By default this student has cleared -- no results yet 
				$flags = Object::setControlFlagsAt($flags, ResultsDataLine::$__POS_CLEARED);
				//Check of the student is repeating or not 
				if ($student1->isRepeating($batchId)) { $flags = Object::setControlFlagsAt($flags, ResultsDataLine::$__IS_REPEATING); }
				//By default set show results enabled 
				$flags = Object::setControlFlagsAt($flags, ResultsDataLine::$__DISPLAY_RESULTS);
				$lineToWrite = $student1->getStudentId().",$gpa,".$student1->getExaminationNumber().",$flags,,#";
				$remainingCount = sizeof($transactionArr);
				for ($i=0; $i < $remainingCount; $i++) $lineToWrite .= ",";
				$lineToWrite .= "\n";
				fwrite($file1, $lineToWrite) or Object::shootException("Could not Add the entry ".$student1->getRegistrationNumber());
			}
		}
		fclose($file1);
		$promise1->setResults($filename);
		$promise1->setPromise(true);
		return $promise1;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT resultsId FROM results";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Results, Static Load All Data Failed');
		$list=array();
		while(list($__id)=mysql_fetch_row($result))	{
			try {
				$results1 = new Results($database, $__id, $conn);
				if (is_null($results1->getExamination())) Object::shootException("[Results ==>static] Examination is null");
				$listsize=sizeof($list);
				$list[$listsize]=array();
				$list[$listsize]['id']=$__id;
				$list[$listsize]['val']=$results1->getExamination()->getExaminationName()."(".$results1->getExamination()->getExaminationCode().") -- ".$results1->getGroup()->getCourse()->getCourseCode()." - ".$results1->getGroup()->getBatch()->getAccademicYear()." _ ".$results1->getGroup()->getYear()."_SEM_".$results1->getExamination()->getSemester();
			} catch (Exception $e)	{
				//Just Skip 
			}
		}
		return $list;
	}
	public final static function isResultsDataForThisResultsManager($database, $conn, $resultsId, $batchId, $courseId, $year, $semester)	{
		//This function can throw exception 
		$results1 = new Results($database, $resultsId, $conn);
		if (is_null($results1->getGroup())) Object::shootException("Host Group for this Results were not found");
		$group1 = $results1->getGroup();
		if (is_null($group1->getBatch()))	Object::shootException("Host Group is not linked to any batch");
		if (is_null($group1->getCourse()))	Object::shootException("Host Group is not linked to any course");
		if (is_null($results1->getExamination())) Object::shootException("Results is not Linked to any Examination");
		return (($group1->getBatch()->getAccademicYearId() == $batchId) && ($group1->getCourse()->getCourseId() == $courseId) && (intval($group1->getYear()) == intval($year)) && ((intval($results1->getExamination()->getSemester()) == 0) || (intval($results1->getExamination()->getSemester()) == intval($semester))));
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Results/resultsValid,boolean,1032;rawMarksCSVFile,text,1032;rawMarksCSVFileChecksum,text,1032;gradedMarksCSVFile,text,1032;gradedMarksCSVFileChecksum,text,1032;extraFilter,text,1032;extraInformation,text,1032;flags,text,1032";
		$lineToView .= ResultsGroup::getAvailableViewableColumns();
		$lineToView .= Examination::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "results";
	}
	public final static function getClassContextName()	{
		return "manageresults";
	}
	public final static function getUniqueResultsId($database, $conn)	{
		$query="SELECT resultsId FROM results";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Results, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Results, None or Duplicate Row/Multiple Rows Found');
		list($resultsId)=mysql_fetch_row($result);
		return $resultsId;
	}
	public final static function add($database, $conn, $resultsValid, $groupId, $examinationId, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO results (resultsValid, groupId, examinationId, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, extraFilter, extraInformation, flags) VALUES('$resultsValid', '$groupId', '$examinationId', '$rawMarksCSVFile', '$rawMarksCSVFileChecksum', '$gradedMarksCSVFile', '$gradedMarksCSVFileChecksum', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Results, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Results, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Results, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->resultsId;
	}
	public function getResultsId() {
		return $this->resultsId;
	}
	public function isResultsValid() {
		return $this->resultsValid;
	}
	public function setResultsValid($resultsValid) {
		if (! is_null($resultsValid))	{
			$this->addToUpdateList("resultsValid", $resultsValid);
			$this->resultsValid = ($resultsValid == "1");
		}
	}
	public function getGroup() {
		return $this->group;
	}
	public function setGroup($groupId) {
		if (! is_null($groupId))	{
			$this->addToUpdateList("groupId", $groupId);
			$this->group = null;
			try	{
				$this->group = new ResultsGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->group = null;
			}
		}
	}
	public function getExamination() {
		return $this->examination;
	}
	public function setExamination($examinationId) {
		if (! is_null($examinationId))	{
			$this->addToUpdateList("examinationId", $examinationId);
			$this->examination = null;
			try	{
				$this->examination = new Examination($this->database, $examinationId, $this->conn);
			} catch (Exception $e)	{
				$this->examination = null;
			}
		}
	}
	public function getRawMarksCSVFile() {
		return $this->rawMarksCSVFile;
	}
	public function setRawMarksCSVFile($rawMarksCSVFile) {
		if (! is_null($rawMarksCSVFile))	{
			$this->addToUpdateList("rawMarksCSVFile", $rawMarksCSVFile);
			$this->rawMarksCSVFile = $rawMarksCSVFile;
		}
	}
	public function getRawMarksCSVFileChecksum() {
		return $this->rawMarksCSVFileChecksum;
	}
	public function setRawMarksCSVFileChecksum($rawMarksCSVFileChecksum) {
		if (! is_null($rawMarksCSVFileChecksum))	{
			$this->addToUpdateList("rawMarksCSVFileChecksum", $rawMarksCSVFileChecksum);
			$this->rawMarksCSVFileChecksum = $rawMarksCSVFileChecksum;
		}
	}
	public function getGradedMarksCSVFile() {
		return $this->gradedMarksCSVFile;
	}
	public function setGradedMarksCSVFile($gradedMarksCSVFile) {
		if (! is_null($gradedMarksCSVFile))	{
			$this->addToUpdateList("gradedMarksCSVFile", $gradedMarksCSVFile);
			$this->gradedMarksCSVFile = $gradedMarksCSVFile;
		}
	}
	public function getGradedMarksCSVFileChecksum() {
		return $this->gradedMarksCSVFileChecksum;
	}
	public function setGradedMarksCSVFileChecksum($gradedMarksCSVFileChecksum) {
		if (! is_null($gradedMarksCSVFileChecksum))	{
			$this->addToUpdateList("gradedMarksCSVFileChecksum", $gradedMarksCSVFileChecksum);
			$this->gradedMarksCSVFileChecksum = $gradedMarksCSVFileChecksum;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT resultsId FROM results";
		return $query;
	}
	public function __construct($database, $resultsId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Results")) Object::shootException("Results System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $resultsId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->resultsId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Results")) Object::shootException("Results System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE results SET $setList WHERE resultsId = '$this->resultsId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Results, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Results")) Object::shootException("Results System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM results WHERE resultsId = '$this->resultsId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Results, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Results";
	}
	protected function getProperties()	{
		return "resultsId=$this->resultsId"."@rawMarksCSVFile=$this->rawMarksCSVFile"."@rawMarksCSVFileChecksum=$this->rawMarksCSVFileChecksum"."@gradedMarksCSVFile=$this->gradedMarksCSVFile"."@gradedMarksCSVFileChecksum=$this->gradedMarksCSVFileChecksum"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags"."@resultsValid=$this->resultsValid";
	}
	protected function getAdvancedProperties()	{
		return "1032.resultsId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->resultsId))."@1032.rawMarksCSVFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->rawMarksCSVFile))."@1032.rawMarksCSVFileChecksum=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->rawMarksCSVFileChecksum))."@1032.gradedMarksCSVFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradedMarksCSVFile))."@1032.gradedMarksCSVFileChecksum=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradedMarksCSVFileChecksum))."@1032.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1032.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1032.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags))."@1032.resultsValid=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->resultsValid));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Results (NAMESPACETAG = 1032) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->group))	{
			$this->group->debug();
		}
		if (! is_null($this->examination))	{
			$this->examination->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->group))	{
			$matrix1=$this->group->searchMatrix($matrix1);
		}
		if (! is_null($this->examination))	{
			$matrix1=$this->examination->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->group))	{
			$csvProcessor1=$this->group->processCSV($csvProcessor1);
		}
		if (! is_null($this->examination))	{
			$csvProcessor1=$this->examination->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $resultsId, $conn) {
		$query="SELECT resultsId, resultsValid, groupId, examinationId, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, extraFilter, extraInformation, flags FROM results WHERE resultsId = '$resultsId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Results, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Results, Duplicate or No Record');
		list($resultsId, $resultsValid, $groupId, $examinationId, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->resultsId = $resultsId;
		if (! is_null($resultsValid))	{
			$this->resultsValid = ($resultsValid == "1");
		}
		if (! is_null($groupId))	{
			$this->group = null;
			try	{
				$this->group = new ResultsGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->group = null;
			}
		}
		if (! is_null($examinationId))	{
			$this->examination = null;
			try	{
				$this->examination = new Examination($this->database, $examinationId, $this->conn);
			} catch (Exception $e)	{
				$this->examination = null;
			}
		}
		if (! is_null($rawMarksCSVFile))	{
			$this->rawMarksCSVFile = $rawMarksCSVFile;
		}
		if (! is_null($rawMarksCSVFileChecksum))	{
			$this->rawMarksCSVFileChecksum = $rawMarksCSVFileChecksum;
		}
		if (! is_null($gradedMarksCSVFile))	{
			$this->gradedMarksCSVFile = $gradedMarksCSVFile;
		}
		if (! is_null($gradedMarksCSVFileChecksum))	{
			$this->gradedMarksCSVFileChecksum = $gradedMarksCSVFileChecksum;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT resultsValid, groupId, examinationId, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, extraFilter, extraInformation, flags FROM results WHERE resultsId = '$this->resultsId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Results, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Results, [Clone] Duplicate or No Record');
		list($resultsValid, $groupId, $examinationId, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['resultsValid'] = $resultsValid;
		$masterDataArray['groupId'] = $groupId;
		$masterDataArray['examinationId'] = $examinationId;
		$masterDataArray['rawMarksCSVFile'] = $rawMarksCSVFile;
		$masterDataArray['rawMarksCSVFileChecksum'] = $rawMarksCSVFileChecksum;
		$masterDataArray['gradedMarksCSVFile'] = $gradedMarksCSVFile;
		$masterDataArray['gradedMarksCSVFileChecksum'] = $gradedMarksCSVFileChecksum;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO results ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Results [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Results [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Results [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
} 
class Currency extends Object {
	private $currencyId;
	private $currencyName;
	private $currencyCode;
	private $country;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Currency/currencyName,text,1031;currencyCode,text,1031;extraFilter,text,1031;extraInformation,text,1031;flags,text,1031";
		$lineToView .= Country::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "currency";
	}
	public final static function getClassContextName()	{
		return "managecurrency";
	}
	public final static function getUniqueCurrencyId($database, $conn)	{
		$query="SELECT currencyId FROM currency";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Currency, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Currency, None or Duplicate Row/Multiple Rows Found');
		list($currencyId)=mysql_fetch_row($result);
		return $currencyId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT currencyId, currencyName, currencyCode FROM currency";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Currency, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val, $__code)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val." (".$__code.")";
		}
		return $list;
	}
	public final static function add($database, $conn, $currencyName, $currencyCode, $countryId, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO currency (currencyName, currencyCode, countryId, extraFilter, extraInformation, flags) VALUES('$currencyName', '$currencyCode', '$countryId', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Currency, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Currency, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Currency, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->currencyId;
	}
	public function getCurrencyId() {
		return $this->currencyId;
	}
	public function getCurrencyName() {
		return $this->currencyName;
	}
	public function setCurrencyName($currencyName) {
		if (! is_null($currencyName))	{
			$this->addToUpdateList("currencyName", $currencyName);
			$this->currencyName = $currencyName;
		}
	}
	public function getCurrencyCode() {
		return $this->currencyCode;
	}
	public function setCurrencyCode($currencyCode) {
		if (! is_null($currencyCode))	{
			$this->addToUpdateList("currencyCode", $currencyCode);
			$this->currencyCode = $currencyCode;
		}
	}
	public function getCountry() {
		return $this->country;
	}
	public function setCountry($countryId) {
		if (! is_null($countryId))	{
			$this->addToUpdateList("countryId", $countryId);
			$this->country = null;
			try	{
				$this->country = new Country($this->database, $countryId, $this->conn);
			} catch (Exception $e)	{
				$this->country = null;
			}
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT currencyId FROM currency";
		return $query;
	}
	public function __construct($database, $currencyId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Currency")) Object::shootException("Currency System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $currencyId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->currencyId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Currency")) Object::shootException("Currency System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE currency SET $setList WHERE currencyId = '$this->currencyId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Currency, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Currency")) Object::shootException("Currency System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM currency WHERE currencyId = '$this->currencyId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Currency, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Currency";
	}
	protected function getProperties()	{
		return "currencyId=$this->currencyId"."@currencyName=$this->currencyName"."@currencyCode=$this->currencyCode"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1031.currencyId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->currencyId))."@1031.currencyName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->currencyName))."@1031.currencyCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->currencyCode))."@1031.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1031.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1031.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Currency (NAMESPACETAG = 1031) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->country))	{
			$this->country->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->country))	{
			$matrix1=$this->country->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->country))	{
			$csvProcessor1=$this->country->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $currencyId, $conn) {
		$query="SELECT currencyId, currencyName, currencyCode, countryId, extraFilter, extraInformation, flags FROM currency WHERE currencyId = '$currencyId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Currency, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Currency, Duplicate or No Record');
		list($currencyId, $currencyName, $currencyCode, $countryId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->currencyId = $currencyId;
		if (! is_null($currencyName))	{
			$this->currencyName = $currencyName;
		}
		if (! is_null($currencyCode))	{
			$this->currencyCode = $currencyCode;
		}
		if (! is_null($countryId))	{
			$this->country = null;
			try	{
				$this->country = new Country($this->database, $countryId, $this->conn);
			} catch (Exception $e)	{
				$this->country = null;
			}
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT currencyName, currencyCode, countryId, extraFilter, extraInformation, flags FROM currency WHERE currencyId = '$this->currencyId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Currency, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Currency, [Clone] Duplicate or No Record');
		list($currencyName, $currencyCode, $countryId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['currencyName'] = $currencyName;
		$masterDataArray['currencyCode'] = $currencyCode;
		$masterDataArray['countryId'] = $countryId;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO currency ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Currency [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Currency [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Currency [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class FeeStructure extends Object {
	private $structureId;
	private $course;
	private $year;
	private $validFrom;
	private $amount;
	private $currency;
	private $citizen;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public function getTitle() {
		return $this->extraInformation;
	}
	public function setTitle($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@FeeStructure/year,text,1034;amount,text,1034;citizen,boolean,1034;extraFilter,text,1034;extraInformation,text,1034;flags,text,1034";
		$lineToView .= Course::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= Currency::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "feestructure";
	}
	public final static function getClassContextName()	{
		return "managefeestructure";
	}
	public final static function getUniqueStructureId($database, $conn)	{
		$query="SELECT structureId FROM feeStructure";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeeStructure, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('FeeStructure, None or Duplicate Row/Multiple Rows Found');
		list($structureId)=mysql_fetch_row($result);
		return $structureId;
	}
	public final static function add($database, $conn, $courseId, $year, $validFrom, $amount, $currencyId, $citizen, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO feeStructure (courseId, year, validFrom, amount, currencyId, citizen, extraFilter, extraInformation, flags) VALUES('$courseId', '$year', '$validFrom', '$amount', '$currencyId', '$citizen', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeeStructure, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeeStructure, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('FeeStructure, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->structureId;
	}
	public function getStructureId() {
		return $this->structureId;
	}
	public function getCourse() {
		return $this->course;
	}
	public function setCourse($courseId) {
		if (! is_null($courseId))	{
			$this->addToUpdateList("courseId", $courseId);
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
	}
	public function getYear() {
		return $this->year;
	}
	public function setYear($year) {
		if (! is_null($year))	{
			$this->addToUpdateList("year", $year);
			$this->year = $year;
		}
	}
	public function getValidFrom() {
		return $this->validFrom;
	}
	public function setValidFrom($validFrom) {
		if (! is_null($validFrom))	{
			$this->addToUpdateList("validFrom", $validFrom);
			$this->validFrom = null;
			try	{
				$this->validFrom = new DateAndTime($this->database, $validFrom, $this->conn);
			} catch (Exception $e)	{
				$this->validFrom = null;
			}
		}
	}
	public function getAmount() {
		return $this->amount;
	}
	public function setAmount($amount) {
		if (! is_null($amount))	{
			$this->addToUpdateList("amount", $amount);
			$this->amount = $amount;
		}
	}
	public function getCurrency() {
		return $this->currency;
	}
	public function setCurrency($currencyId) {
		if (! is_null($currencyId))	{
			$this->addToUpdateList("currencyId", $currencyId);
			$this->currency = null;
			try	{
				$this->currency = new Currency($this->database, $currencyId, $this->conn);
			} catch (Exception $e)	{
				$this->currency = null;
			}
		}
	}
	public function isCitizen() {
		return $this->citizen;
	}
	public function setCitizen($citizen) {
		if (! is_null($citizen))	{
			$this->addToUpdateList("citizen", $citizen);
			$this->citizen = ($citizen == "1");
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT structureId FROM feeStructure";
		return $query;
	}
	public function __construct($database, $structureId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "FeeStructure")) Object::shootException("FeeStructure System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $structureId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->structureId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "FeeStructure")) Object::shootException("FeeStructure System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE feeStructure SET $setList WHERE structureId = '$this->structureId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeeStructure, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "FeeStructure")) Object::shootException("FeeStructure System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM feeStructure WHERE structureId = '$this->structureId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeeStructure, Row Deletion Failed');
	}
	public function getClassName()	{
		return "FeeStructure";
	}
	protected function getProperties()	{
		return "structureId=$this->structureId"."@year=$this->year"."@amount=$this->amount"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags"."@citizen=$this->citizen";
	}
	protected function getAdvancedProperties()	{
		return "1034.structureId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->structureId))."@1034.year=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->year))."@1034.amount=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->amount))."@1034.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1034.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1034.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags))."@1034.citizen=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->citizen));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: FeeStructure (NAMESPACETAG = 1034) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->course))	{
			$this->course->debug();
		}
		if (! is_null($this->validFrom))	{
			$this->validFrom->debug();
		}
		if (! is_null($this->currency))	{
			$this->currency->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->course))	{
			$matrix1=$this->course->searchMatrix($matrix1);
		}
		if (! is_null($this->validFrom))	{
			$matrix1=$this->validFrom->searchMatrix($matrix1);
		}
		if (! is_null($this->currency))	{
			$matrix1=$this->currency->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->course))	{
			$csvProcessor1=$this->course->processCSV($csvProcessor1);
		}
		if (! is_null($this->validFrom))	{
			$csvProcessor1=$this->validFrom->processCSV($csvProcessor1);
		}
		if (! is_null($this->currency))	{
			$csvProcessor1=$this->currency->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $structureId, $conn) {
		$query="SELECT structureId, courseId, year, validFrom, amount, currencyId, citizen, extraFilter, extraInformation, flags FROM feeStructure WHERE structureId = '$structureId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('FeeStructure, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('FeeStructure, Duplicate or No Record');
		list($structureId, $courseId, $year, $validFrom, $amount, $currencyId, $citizen, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->structureId = $structureId;
		if (! is_null($courseId))	{
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
		if (! is_null($year))	{
			$this->year = $year;
		}
		if (! is_null($validFrom))	{
			$this->validFrom = null;
			try	{
				$this->validFrom = new DateAndTime($this->database, $validFrom, $this->conn);
			} catch (Exception $e)	{
				$this->validFrom = null;
			}
		}
		if (! is_null($amount))	{
			$this->amount = $amount;
		}
		if (! is_null($currencyId))	{
			$this->currency = null;
			try	{
				$this->currency = new Currency($this->database, $currencyId, $this->conn);
			} catch (Exception $e)	{
				$this->currency = null;
			}
		}
		if (! is_null($citizen))	{
			$this->citizen = ($citizen == "1");
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT courseId, year, validFrom, amount, currencyId, citizen, extraFilter, extraInformation, flags FROM feeStructure WHERE structureId = '$this->structureId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeeStructure, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('FeeStructure, [Clone] Duplicate or No Record');
		list($courseId, $year, $validFrom, $amount, $currencyId, $citizen, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['courseId'] = $courseId;
		$masterDataArray['year'] = $year;
		$masterDataArray['validFrom'] = $validFrom;
		$masterDataArray['amount'] = $amount;
		$masterDataArray['currencyId'] = $currencyId;
		$masterDataArray['citizen'] = $citizen;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO feeStructure ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("FeeStructure [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("FeeStructure [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("FeeStructure [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class FeeInvoiceGroup extends Object {
	private $groupId;
	private $groupName;
	private $course;
	private $year;
	private $generationTime;
	private $structureIdList;
	private $currency;
	private $invoicePrefix;
	private $paymentPrefix;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	static $__AUTO_GENERATED = 5; 
	static $__ALREADY_GENERATED = 6;
	static $__IS_CITIZEN = 7;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public function isAutoGenerated()	{
		return $this->isFlagSetAt(FeeInvoiceGroup::$__AUTO_GENERATED);
	}
	public function setAutoGenerated($val)	{
		if (intval($val) == 1)	{
			$this->setFlagAt(FeeInvoiceGroup::$__AUTO_GENERATED);
		} else {
			$this->resetFlagAt(FeeInvoiceGroup::$__AUTO_GENERATED);
		}
	}
	public function isInvoicesAlreadyGenerated()	{
		return $this->isFlagSetAt(FeeInvoiceGroup::$__ALREADY_GENERATED);
	}
	public function setInvoicesAlreadyGenerated($val)	{
		if (intval($val) == 1)	{
			$this->setFlagAt(FeeInvoiceGroup::$__ALREADY_GENERATED);
		} else {
			$this->resetFlagAt(FeeInvoiceGroup::$__ALREADY_GENERATED);
		}
	}
	public function isCitizen()	{
		return $this->isFlagSetAt(FeeInvoiceGroup::$__IS_CITIZEN);
	}
	public function setCitizen($val)	{
		if (intval($val) == 1)	{
			$this->setFlagAt(FeeInvoiceGroup::$__IS_CITIZEN);
		} else {
			$this->resetFlagAt(FeeInvoiceGroup::$__IS_CITIZEN);
		}
	}
	public function getTotalAmount()	{
		$total = 0;
		if (! is_null($this->structureIdList))	{
			foreach ($this->structureIdList as $structure1)	{
				$total = $total + intval($structure1->getAmount());
			}
		}
		return $total;
	}
	public final static function isInvoicePrefixAvailable($database, $conn, $invoicePrefix)	{
		$query = "SELECT groupId FROM feeInvoiceGroup WHERE invoicePrefix='$invoicePrefix'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not Execute Query for InvoicePrefix");
		return (mysql_num_rows($result) == 0);
	}
	public final static function isPaymentPrefixAvailable($database, $conn, $paymentPrefix)	{
		$query = "SELECT groupId FROM feeInvoiceGroup WHERE paymentPrefix='$paymentPrefix'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not Execute Query for PaymentPrefix");
		return (mysql_num_rows($result) == 0);
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@FeeInvoiceGroup/groupName,text,1035;year,text,1035;invoicePrefix,text,1035;paymentPrefix,text,1035;extraFilter,text,1035;extraInformation,text,1035;flags,text,1035";
		$lineToView .= Course::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= FeeStructure::getAvailableViewableColumns();
		$lineToView .= Currency::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "feeinvoicegroup";
	}
	public final static function getClassContextName()	{
		return "managefeeinvoicegroup";
	}
	public final static function getUniqueGroupId($database, $conn)	{
		$query="SELECT groupId FROM feeInvoiceGroup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeeInvoiceGroup, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('FeeInvoiceGroup, None or Duplicate Row/Multiple Rows Found');
		list($groupId)=mysql_fetch_row($result);
		return $groupId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT groupId, groupName FROM feeInvoiceGroup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeeInvoiceGroup, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $groupName, $courseId, $_year, $generationTime, $structureIdList, $currencyId, $invoicePrefix, $paymentPrefix, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO feeInvoiceGroup (groupName, courseId, _year, generationTime, structureIdList, currencyId, invoicePrefix, paymentPrefix, extraFilter, extraInformation, flags) VALUES('$groupName', '$courseId', '$_year', '$generationTime', '$structureIdList', '$currencyId', '$invoicePrefix', '$paymentPrefix', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeeInvoiceGroup, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeeInvoiceGroup, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('FeeInvoiceGroup, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->groupId;
	}
	public function getGroupId() {
		return $this->groupId;
	}
	public function getGroupName() {
		return $this->groupName;
	}
	public function setGroupName($groupName) {
		if (! is_null($groupName))	{
			$this->addToUpdateList("groupName", $groupName);
			$this->groupName = $groupName;
		}
	}
	public function getCourse() {
		return $this->course;
	}
	public function setCourse($courseId) {
		if (! is_null($courseId))	{
			$this->addToUpdateList("courseId", $courseId);
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
	}
	public function getYear() {
		return $this->year;
	}
	public function setYear($_year) {
		if (! is_null($_year))	{
			$this->addToUpdateList("_year", $_year);
			$this->year = $_year;
		}
	}
	public function getGenerationTime() {
		return $this->generationTime;
	}
	public function setGenerationTime($generationTime) {
		if (! is_null($generationTime))	{
			$this->addToUpdateList("generationTime", $generationTime);
			$this->generationTime = null;
			try	{
				$this->generationTime = new DateAndTime($this->database, $generationTime, $this->conn);
			} catch (Exception $e)	{
				$this->generationTime = null;
			}
		}
	}
	public function getStructureIdList() {
		return $this->structureIdList;
	}
	public function setStructureIdList($structureIdList) {
		if (! is_null($structureIdList))	{
			$this->addToUpdateList("structureIdList", $structureIdList);
			$this->structureIdList = array();
			$idListArr = explode(",", $structureIdList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new FeeStructure($this->database, $id, $this->conn);
					$this->structureIdList[sizeof($this->structureIdList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getCurrency() {
		return $this->currency;
	}
	public function setCurrency($currencyId) {
		if (! is_null($currencyId))	{
			$this->addToUpdateList("currencyId", $currencyId);
			$this->currency = null;
			try	{
				$this->currency = new Currency($this->database, $currencyId, $this->conn);
			} catch (Exception $e)	{
				$this->currency = null;
			}
		}
	}
	public function getInvoicePrefix() {
		return $this->invoicePrefix;
	}
	public function setInvoicePrefix($invoicePrefix) {
		if (! is_null($invoicePrefix))	{
			$this->addToUpdateList("invoicePrefix", $invoicePrefix);
			$this->invoicePrefix = $invoicePrefix;
		}
	}
	public function getPaymentPrefix() {
		return $this->paymentPrefix;
	}
	public function setPaymentPrefix($paymentPrefix) {
		if (! is_null($paymentPrefix))	{
			$this->addToUpdateList("paymentPrefix", $paymentPrefix);
			$this->paymentPrefix = $paymentPrefix;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT groupId FROM feeInvoiceGroup";
		return $query;
	}
	public function __construct($database, $groupId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "FeeInvoiceGroup")) Object::shootException("FeeInvoiceGroup System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $groupId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->groupId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "FeeInvoiceGroup")) Object::shootException("FeeInvoiceGroup System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE feeInvoiceGroup SET $setList WHERE groupId = '$this->groupId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeeInvoiceGroup, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "FeeInvoiceGroup")) Object::shootException("FeeInvoiceGroup System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM feeInvoiceGroup WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeeInvoiceGroup, Row Deletion Failed');
	}
	public function getClassName()	{
		return "FeeInvoiceGroup";
	}
	protected function getProperties()	{
		return "groupId=$this->groupId"."@groupName=$this->groupName"."@year=$this->year"."@invoicePrefix=$this->invoicePrefix"."@paymentPrefix=$this->paymentPrefix"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1035.groupId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->groupId))."@1035.groupName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->groupName))."@1035.year=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->year))."@1035.invoicePrefix=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->invoicePrefix))."@1035.paymentPrefix=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->paymentPrefix))."@1035.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1035.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1035.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: FeeInvoiceGroup (NAMESPACETAG = 1035) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->course))	{
			$this->course->debug();
		}
		if (! is_null($this->generationTime))	{
			$this->generationTime->debug();
		}
		if (! is_null($this->currency))	{
			$this->currency->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->course))	{
			$matrix1=$this->course->searchMatrix($matrix1);
		}
		if (! is_null($this->generationTime))	{
			$matrix1=$this->generationTime->searchMatrix($matrix1);
		}
		if (! is_null($this->currency))	{
			$matrix1=$this->currency->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->course))	{
			$csvProcessor1=$this->course->processCSV($csvProcessor1);
		}
		if (! is_null($this->generationTime))	{
			$csvProcessor1=$this->generationTime->processCSV($csvProcessor1);
		}
		if (! is_null($this->currency))	{
			$csvProcessor1=$this->currency->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $groupId, $conn) {
		$query="SELECT groupId, groupName, courseId, _year, generationTime, structureIdList, currencyId, invoicePrefix, paymentPrefix, extraFilter, extraInformation, flags FROM feeInvoiceGroup WHERE groupId = '$groupId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('FeeInvoiceGroup, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('FeeInvoiceGroup, Duplicate or No Record');
		list($groupId, $groupName, $courseId, $_year, $generationTime, $structureIdList, $currencyId, $invoicePrefix, $paymentPrefix, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->groupId = $groupId;
		if (! is_null($groupName))	{
			$this->groupName = $groupName;
		}
		if (! is_null($courseId))	{
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
		if (! is_null($_year))	{
			$this->year = $_year;
		}
		if (! is_null($generationTime))	{
			$this->generationTime = null;
			try	{
				$this->generationTime = new DateAndTime($this->database, $generationTime, $this->conn);
			} catch (Exception $e)	{
				$this->generationTime = null;
			}
		}
		if (! is_null($structureIdList))	{
			$this->structureIdList = array();
			$idListArr = explode(",", $structureIdList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new FeeStructure($this->database, $id, $this->conn);
					$this->structureIdList[sizeof($this->structureIdList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($currencyId))	{
			$this->currency = null;
			try	{
				$this->currency = new Currency($this->database, $currencyId, $this->conn);
			} catch (Exception $e)	{
				$this->currency = null;
			}
		}
		if (! is_null($invoicePrefix))	{
			$this->invoicePrefix = $invoicePrefix;
		}
		if (! is_null($paymentPrefix))	{
			$this->paymentPrefix = $paymentPrefix;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT groupName, courseId, _year, generationTime, structureIdList, currencyId, invoicePrefix, paymentPrefix, extraFilter, extraInformation, flags FROM feeInvoiceGroup WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeeInvoiceGroup, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('FeeInvoiceGroup, [Clone] Duplicate or No Record');
		list($groupName, $courseId, $_year, $generationTime, $structureIdList, $currencyId, $invoicePrefix, $paymentPrefix, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['groupName'] = $groupName;
		$masterDataArray['courseId'] = $courseId;
		$masterDataArray['_year'] = $_year;
		$masterDataArray['generationTime'] = $generationTime;
		$masterDataArray['structureIdList'] = $structureIdList;
		$masterDataArray['currencyId'] = $currencyId;
		$masterDataArray['invoicePrefix'] = $invoicePrefix;
		$masterDataArray['paymentPrefix'] = $paymentPrefix;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO feeInvoiceGroup ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("FeeInvoiceGroup [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("FeeInvoiceGroup [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("FeeInvoiceGroup [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class FeeInvoice extends Object {
	private $invoiceId;
	private $invoiceNumber;
	private $group;
	private $student;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function drawFeePaymentForStudent($database, $conn, $studentId, $counter1, $enableDelete)	{
		//counter1 keeps track of remained Amount 
		$table1 = "<div>";
		$list = self::getInvoicesBelongingToStudent($database, $conn, $studentId);
		if (is_null($list)) Object::shootException("FeeInvoice [static], There are no Invoices for this Student");
		foreach ($list as $invoiceId)	{
			$table1 .= "<br/>".FeePayment::drawFeePaymentForInvoice($database, $conn, $invoiceId, $counter1, $enableDelete);
		}
		$remainedAmount = $counter1->getCounts();
		$captionText = "You still have a dept ";
		$sRemainedAmount= Number::getCommaSeparatorFormat($remainedAmount);
		$sRemainedAmount = "($sRemainedAmount)";
		if ($remainedAmount == 0)	{
			$captionText = "You have cleared your dept ";
			$sRemainedAmount = 0;
		} else if ($remainedAmount < 0)	{
			$captionText = "You have cleared your dept, Your Balance is ";
			$remainedAmount = Number::getCommaSeparatorFormat(-1 * $remainedAmount);
			$sRemainedAmount = $remainedAmount;
		}
		$table1 .= "<div style=\"font-weight: bold; font-size: 1.1em;\" class=\"ui-sys-inline-controls-center\">$captionText &nbsp;&nbsp;<span>$sRemainedAmount</span></div></div>";
		return $table1;
	}
	public final static function getInvoicesBelongingToStudent($database, $conn, $studentId)	{
		$query = "SELECT invoiceId FROM feeInvoices WHERE studentId='$studentId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("FeeInvoice [static], Could not fetch Invoices");
		$list = array();
		while (list($invoiceId)=mysql_fetch_row($result))	{
			$list[sizeof($list)] = $invoiceId;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function generateAutoInvoicesForStudent($database, $conn, $studentId, $profile1, $extraInformation)	{
		$promise1 = new Promise();
		$promise1->setPromise(false);
		//You do not to check if student admitted or not, this should be processed just before admission
		//Should also be executed once a student advances the next year 
		$student1 = new Student($database, $studentId, $conn);
		if (is_null($student1->getCourse())) Object::shootException("Course Information for Student were not found");
		$courseId = $student1->getCourse()->getCourseId();
		$currentYear = $student1->getCurrentYear();
		$query = "SELECT groupId FROM feeInvoiceGroup WHERE courseId='$courseId' AND _year='$currentYear'";
		$groupResults = mysql_db_query($database, $query, $conn) or Object::shootException("Could not fetch Fee Invoice Groups for this student");
		while (list($groupId)=mysql_fetch_row($groupResults))	{
			$group1 = new FeeInvoiceGroup($database, $groupId, $conn);
			$invoicePrefix = $group1->getInvoicePrefix().rand(10,99);
			/*
			We need to make sure this feeInvoices had already being generate and it is AutoGenerate .
			This will help to make sure if invoice generation Algorithm has not being run, this student will not be invoiced Twice
			*/
			if ($group1->isAutoGenerated() && $group1->isInvoicesAlreadyGenerated() && ($student1->isCitizen($profile1) == $group1->isCitizen()))	{
				//We need to make sure we only insert a feeInvoice it it were not attach 
				$query = "SELECT invoiceId FROM feeInvoices WHERE groupId='$groupId' AND studentId='$studentId'";
				$tempResults = mysql_db_query($database, $query, $conn) or Object::shootException("Could not Fetch reference invoices");
				if (mysql_num_rows($tempResults) == 0)	{
					//Fee in not yet attached
					$invoiceNumber = $invoicePrefix.System::convertIntegerToStringOfAGivenLength($student1->getStudentId(), 6);
					$query = "INSERT INTO feeInvoices (invoiceNumber, groupId, studentId, extraInformation) VALUES('$invoiceNumber', '$groupId', '$studentId', '$extraInformation')";
					$tempResults = mysql_db_query($database, $query, $conn);
				}
			}
		}//end-fee-invoice
		$promise1->setPromise(true);
		return $promise1;
	}
	public final static function generateAutoInvoices($database, $conn, $profile1, $groupId, $extraInformation)	{
		//GroupId is a Fee Invoice group 
		//This function has to be in a try block 
		//Works Only for Admitted Students
		$promise1 = new Promise();
		$promise1->setPromise(false);
		$group1 = new FeeInvoiceGroup($database, $groupId, $conn);
		if (! $group1->isAutoGenerated() || $group1->isInvoicesAlreadyGenerated()) Object::shootException("Either Invoices are Not Auto Generated or Invoices had already been generated for the selected group");
		if (is_null($group1->getCourse())) Object::shootException("This selected group has no attached course");
		$courseId = $group1->getCourse()->getCourseId();
		$year = $group1->getYear();
		$query = "SELECT studentId FROM students WHERE courseId='$courseId' AND cyear='$year'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not pull students belonging to course and year");
		$invoicePrefix = $group1->getInvoicePrefix().rand(10,99);
		$generalCounter1 = new Counter();
		$failedCounter1 = new Counter();
		while (list($studentId)=mysql_fetch_row($result))	{
			$student1 = new Student($database, $studentId, $conn);
			$login1 = $student1->getLogin();
			if ($login1->isAdmitted() && ($student1->isCitizen($profile1) == $group1->isCitizen()))	{
				//We have cleared citizen issue 
				//Need to Insert Now 
				$invoiceNumber = $invoicePrefix.System::convertIntegerToStringOfAGivenLength($student1->getStudentId(), 6);
				$groupId = $group1->getGroupId();
				$studentId = $student1->getStudentId();
				$query = "INSERT INTO feeInvoices (invoiceNumber, groupId, studentId, extraInformation) VALUES('$invoiceNumber', '$groupId', '$studentId', '$extraInformation')";
				$tempResults = mysql_db_query($database, $query, $conn) or $failedCounter1->advanceCounter();
				$generalCounter1->advanceCounter();
			}
		}
		$countsSuccess = intval($generalCounter1->getCounts()) - intval($failedCounter1->getCounts());
		$countsFailed = $failedCounter1->getCounts();
		//We need to set a group that invoices has already being generated 
		$group1->setInvoicesAlreadyGenerated(true);
		try {
			$group1->commitUpdate();
		} catch (Exception $e)	{
			$promise1->setReason($e->getMessage());
			return $promise1;
		}
		$promise1->setReason("Number of successful Generated Invoice is $countsSuccess<br/>Number of failed Generated Invoice is $countsFailed");
		$promise1->setPromise(true);
		return $promise1;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@FeeInvoice/invoiceNumber,text,1036;extraFilter,text,1036;extraInformation,text,1036;flags,text,1036";
		$lineToView .= FeeInvoiceGroup::getAvailableViewableColumns();
		$lineToView .= Student::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "feeinvoice";
	}
	public final static function getClassContextName()	{
		return "managefeeinvoice";
	}
	public final static function getUniqueInvoiceId($database, $conn)	{
		$query="SELECT invoiceId FROM feeInvoices";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeeInvoice, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('FeeInvoice, None or Duplicate Row/Multiple Rows Found');
		list($invoiceId)=mysql_fetch_row($result);
		return $invoiceId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT invoiceId, invoiceNumber FROM feeInvoices";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeeInvoice, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $invoiceNumber, $groupId, $studentId, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO feeInvoices (invoiceNumber, groupId, studentId, extraFilter, extraInformation, flags) VALUES('$invoiceNumber', '$groupId', '$studentId', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeeInvoice, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeeInvoice, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('FeeInvoice, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->invoiceId;
	}
	public function getInvoiceId() {
		return $this->invoiceId;
	}
	public function getInvoiceNumber() {
		return $this->invoiceNumber;
	}
	public function setInvoiceNumber($invoiceNumber) {
		if (! is_null($invoiceNumber))	{
			$this->addToUpdateList("invoiceNumber", $invoiceNumber);
			$this->invoiceNumber = $invoiceNumber;
		}
	}
	public function getGroup() {
		return $this->group;
	}
	public function setGroup($groupId) {
		if (! is_null($groupId))	{
			$this->addToUpdateList("groupId", $groupId);
			$this->group = null;
			try	{
				$this->group = new FeeInvoiceGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->group = null;
			}
		}
	}
	public function getStudent() {
		return $this->student;
	}
	public function setStudent($studentId) {
		if (! is_null($studentId))	{
			$this->addToUpdateList("studentId", $studentId);
			$this->student = null;
			try	{
				$this->student = new Student($this->database, $studentId, $this->conn);
			} catch (Exception $e)	{
				$this->student = null;
			}
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT invoiceId FROM feeInvoices";
		return $query;
	}
	public function __construct($database, $invoiceId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "FeeInvoice")) Object::shootException("FeeInvoice System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $invoiceId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->invoiceId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "FeeInvoice")) Object::shootException("FeeInvoice System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE feeInvoices SET $setList WHERE invoiceId = '$this->invoiceId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeeInvoice, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "FeeInvoice")) Object::shootException("FeeInvoice System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM feeInvoices WHERE invoiceId = '$this->invoiceId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeeInvoice, Row Deletion Failed');
	}
	public function getClassName()	{
		return "FeeInvoice";
	}
	protected function getProperties()	{
		return "invoiceId=$this->invoiceId"."@invoiceNumber=$this->invoiceNumber"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1036.invoiceId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->invoiceId))."@1036.invoiceNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->invoiceNumber))."@1036.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1036.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1036.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: FeeInvoice (NAMESPACETAG = 1036) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->group))	{
			$this->group->debug();
		}
		if (! is_null($this->student))	{
			$this->student->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->group))	{
			$matrix1=$this->group->searchMatrix($matrix1);
		}
		if (! is_null($this->student))	{
			$matrix1=$this->student->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->group))	{
			$csvProcessor1=$this->group->processCSV($csvProcessor1);
		}
		if (! is_null($this->student))	{
			$csvProcessor1=$this->student->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $invoiceId, $conn) {
		$query="SELECT invoiceId, invoiceNumber, groupId, studentId, extraFilter, extraInformation, flags FROM feeInvoices WHERE invoiceId = '$invoiceId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('FeeInvoice, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('FeeInvoice, Duplicate or No Record');
		list($invoiceId, $invoiceNumber, $groupId, $studentId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->invoiceId = $invoiceId;
		if (! is_null($invoiceNumber))	{
			$this->invoiceNumber = $invoiceNumber;
		}
		if (! is_null($groupId))	{
			$this->group = null;
			try	{
				$this->group = new FeeInvoiceGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->group = null;
			}
		}
		if (! is_null($studentId))	{
			$this->student = null;
			try	{
				$this->student = new Student($this->database, $studentId, $this->conn);
			} catch (Exception $e)	{
				$this->student = null;
			}
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT invoiceNumber, groupId, studentId, extraFilter, extraInformation, flags FROM feeInvoices WHERE invoiceId = '$this->invoiceId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeeInvoice, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('FeeInvoice, [Clone] Duplicate or No Record');
		list($invoiceNumber, $groupId, $studentId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['invoiceNumber'] = $invoiceNumber;
		$masterDataArray['groupId'] = $groupId;
		$masterDataArray['studentId'] = $studentId;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO feeInvoices ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("FeeInvoice [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("FeeInvoice [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("FeeInvoice [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class FeePayer extends Object {
	private $payerId;
	private $payerName;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public function getName()	{ return $this->payerName; }
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@FeePayer/payerName,text,1034;extraFilter,text,1034;extraInformation,text,1034;flags,text,1034";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "feepayer";
	}
	public final static function getClassContextName()	{
		return "managefeepayer";
	}
	public final static function getUniquePayerId($database, $conn)	{
		$query="SELECT payerId FROM feePayer";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeePayer, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('FeePayer, None or Duplicate Row/Multiple Rows Found');
		list($payerId)=mysql_fetch_row($result);
		return $payerId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT payerId, payerName FROM feePayer";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeePayer, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $payerName, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO feePayer (payerName, extraFilter, extraInformation, flags) VALUES('$payerName', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeePayer, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeePayer, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('FeePayer, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->payerId;
	}
	public function getPayerId() {
		return $this->payerId;
	}
	public function getPayerName() {
		return $this->payerName;
	}
	public function setPayerName($payerName) {
		if (! is_null($payerName))	{
			$this->addToUpdateList("payerName", $payerName);
			$this->payerName = $payerName;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT payerId FROM feePayer";
		return $query;
	}
	public function __construct($database, $payerId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "FeePayer")) Object::shootException("FeePayer System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $payerId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->payerId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "FeePayer")) Object::shootException("FeePayer System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE feePayer SET $setList WHERE payerId = '$this->payerId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeePayer, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "FeePayer")) Object::shootException("FeePayer System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM feePayer WHERE payerId = '$this->payerId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeePayer, Row Deletion Failed');
	}
	public function getClassName()	{
		return "FeePayer";
	}
	protected function getProperties()	{
		return "payerId=$this->payerId"."@payerName=$this->payerName"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1034.payerId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->payerId))."@1034.payerName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->payerName))."@1034.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1034.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1034.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: FeePayer (NAMESPACETAG = 1034) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $payerId, $conn) {
		$query="SELECT payerId, payerName, extraFilter, extraInformation, flags FROM feePayer WHERE payerId = '$payerId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('FeePayer, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('FeePayer, Duplicate or No Record');
		list($payerId, $payerName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->payerId = $payerId;
		if (! is_null($payerName))	{
			$this->payerName = $payerName;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT payerName, extraFilter, extraInformation, flags FROM feePayer WHERE payerId = '$this->payerId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeePayer, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('FeePayer, [Clone] Duplicate or No Record');
		list($payerName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['payerName'] = $payerName;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO feePayer ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("FeePayer [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("FeePayer [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("FeePayer [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class FeePayment extends Object {
	private $paymentId;
	private $invoice;
	private $payer;
	private $paymentNumber;
	private $paymentTime;
	private $amount;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function drawFeePaymentForInvoice($database, $conn, $invoiceId, $counter1, $enableDelete)	{
		//Counter is aimed to keep the cummulative remained Amount 
		$columnCount = 6;
		$table1 = "<div class=\"ui-sys-invoice-tooltip\" title=\"Invoice\"><table class=\"pure-table\"><thead><tr><th colspan=\"$columnCount\">";
		$invoice1 = new FeeInvoice($database, $invoiceId, $conn);
		$currencyCode = $invoice1->getGroup()->getCurrency()->getCurrencyCode();
		$invoiceAmount = $invoice1->getGroup()->getTotalAmount();
		$sInvoiceAmount = Number::getCommaSeparatorFormat($invoiceAmount);
		$group1 = $invoice1->getGroup();
		$groupname= $group1->getGroupName();
		$generationtime = $group1->getGenerationTime()->getDateAndTimeString();
		$table1 .= "<span>Invoice Group Name: ".$groupname."</span><br/><span style=\"font-size: 1.1em;\">Invoice Number : ".$invoice1->getInvoiceNumber()."</span><br/><span>Generated on : ".$generationtime."</span><br/><span style=\"font-size: 0.9em; font-weight: bold;\">Student Name : ".$invoice1->getStudent()->getLogin()->getFullname()."</span><br/><span style=\"font-size: 0.9em;\">Total Invoice Amount $currencyCode &nbsp;&nbsp;<span style=\"font-size: 1.2em;\">".$sInvoiceAmount."</span></span>";
		$table1 .= "</th></tr><tr><th></th><th>Payment No</th><th>Payed By</th><th>Payment Time</th><th>Amount</th><th></th></tr></thead>";
		$totalPayedAmount = 0;
		$paymentList = self::getPaymentsForInvoice($database, $conn, $invoiceId);
		$tooltip1 = "{\"groupName\":\"$groupname\",\"generationTime\":\"$generationtime\",\"feeStructures\":[";
		if (! is_null($group1->getStructureIdList()))	{
			$structureList1 = $group1->getStructureIdList();
			for ($i=0; $i < sizeof($structureList1); $i++)	{
				$structure1 = $structureList1[$i];
				$feename = $structure1->getExtraInformation();
				$amount = Number::getCommaSeparatorFormat($structure1->getAmount());
				$currency = $structure1->getCurrency()->getCurrencyCode();
				$validfrom = $structure1->getValidFrom()->getDateAndTimeString();
				$linetooltip1 = "{\"feeName\":\"$feename\",\"amount\":\"$amount\",\"currency\":\"$currency\",\"validFrom\":\"$validfrom\"}";
				if ($i != 0)	$linetooltip1 = ",".$linetooltip1;
				$tooltip1 .= $linetooltip1;
			}
		}
		$tooltip1 .= "]}";
		if (! is_null($paymentList))	{
			$table1 .= "<tbody>";
			$count = 0;
			foreach ($paymentList as $paymentId)	{
				$count++;
				$payment1 = new FeePayment($database, $paymentId, $conn);
				$payedAmount = $payment1->getAmount();
				$sPayedAmount = Number::getCommaSeparatorFormat($payedAmount);
				$totalPayedAmount += $payedAmount;
				$deleteControl = "";
				if ($enableDelete) $deleteControl = "<a title=\"Delete Payment\" class=\"delete-payment\" style=\"text-decoration: none; display: inline-block; width: 32px; height: 32px; font-weight: bold; font-size: 30px; color: red; cursor: pointer;\" data-payment-id=\"".$payment1->getPaymentId()."\">X</a>";
				$table1 .= "<tr><td>$count</td><td>".$payment1->getPaymentNumber()."</td><td>".$payment1->getPayer()->getPayerName()."</td><td>".$payment1->getPaymentTime()->getDateAndTimeString()."</td><td>".$sPayedAmount."</td><td><span>$deleteControl</span></td></tr>";
			}
			$table1 .= "</tbody>";
		}
		$remainedAmount = $invoiceAmount - $totalPayedAmount;
		$counter1->addCounts($remainedAmount);
		$captionText = "You still have a dept of $currencyCode ";
		$sRemainedAmount = Number::getCommaSeparatorFormat($remainedAmount);
		$sRemainedAmount = "($sRemainedAmount)";
		if ($remainedAmount == 0)	{
			$captionText = "You have cleared your dept ";
		} else if ($remainedAmount < 0)	{
			$captionText = "You have cleared your dept, your balance is $currencyCode ";
			$remainedAmount = Number::getCommaSeparatorFormat(-1 * $remainedAmount);
			$sRemainedAmount = $remainedAmount;
		}
		$sTotalPayedAmount = Number::getCommaSeparatorFormat($totalPayedAmount);
		$table1 .= "<tfoot data-invoice-popup='$tooltip1'><tr><td colspan=\"".($columnCount - 2)."\">Total Amount Paid </td><td>$sTotalPayedAmount</td><td></td></tr><tr><td colspan=\"".($columnCount - 2)."\"><span style=\"font-size: 0.9em; font-weight: bold;\">$captionText</span></td><td>$sRemainedAmount</td><td></td></tr></tfoot></table></div>";
		return $table1;
	}
	public final static function getPaymentsForInvoice($database, $conn, $invoiceId)	{
		$query = "SELECT paymentId FROM feePayments WHERE invoiceId='$invoiceId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("FeePayment [static], Could not get Payments for Invoice");
		$list = array();
		while (list($paymentId)=mysql_fetch_row($result))	{
			$list[sizeof($list)] = $paymentId;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@FeePayment/paymentNumber,text,1038;amount,text,1038;extraFilter,text,1038;extraInformation,text,1038;flags,text,1038";
		$lineToView .= FeeInvoice::getAvailableViewableColumns();
		$lineToView .= FeePayer::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "feepayment";
	}
	public final static function getClassContextName()	{
		return "managefeepayment";
	}
	public final static function getUniquePaymentId($database, $conn)	{
		$query="SELECT paymentId FROM feePayments";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeePayment, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('FeePayment, None or Duplicate Row/Multiple Rows Found');
		list($paymentId)=mysql_fetch_row($result);
		return $paymentId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT paymentId, paymentNumber FROM feePayments";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeePayment, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $invoiceId, $payerId, $paymentNumber, $paymentTime, $amount, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO feePayments (invoiceId, payerId, paymentNumber, paymentTime, amount, extraFilter, extraInformation, flags) VALUES('$invoiceId', '$payerId', '$paymentNumber', '$paymentTime', '$amount', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeePayment, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('FeePayment, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('FeePayment, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->paymentId;
	}
	public function getPaymentId() {
		return $this->paymentId;
	}
	public function getInvoice() {
		return $this->invoice;
	}
	public function setInvoice($invoiceId) {
		if (! is_null($invoiceId))	{
			$this->addToUpdateList("invoiceId", $invoiceId);
			$this->invoice = null;
			try	{
				$this->invoice = new FeeInvoice($this->database, $invoiceId, $this->conn);
			} catch (Exception $e)	{
				$this->invoice = null;
			}
		}
	}
	public function getPayer() {
		return $this->payer;
	}
	public function setPayer($payerId) {
		if (! is_null($payerId))	{
			$this->addToUpdateList("payerId", $payerId);
			$this->payer = null;
			try	{
				$this->payer = new FeePayer($this->database, $payerId, $this->conn);
			} catch (Exception $e)	{
				$this->payer = null;
			}
		}
	}
	public function getPaymentNumber() {
		return $this->paymentNumber;
	}
	public function setPaymentNumber($paymentNumber) {
		if (! is_null($paymentNumber))	{
			$this->addToUpdateList("paymentNumber", $paymentNumber);
			$this->paymentNumber = $paymentNumber;
		}
	}
	public function getPaymentTime() {
		return $this->paymentTime;
	}
	public function setPaymentTime($paymentTime) {
		if (! is_null($paymentTime))	{
			$this->addToUpdateList("paymentTime", $paymentTime);
			$this->paymentTime = null;
			try	{
				$this->paymentTime = new DateAndTime($this->database, $paymentTime, $this->conn);
			} catch (Exception $e)	{
				$this->paymentTime = null;
			}
		}
	}
	public function getAmount() {
		return $this->amount;
	}
	public function setAmount($amount) {
		if (! is_null($amount))	{
			$this->addToUpdateList("amount", $amount);
			$this->amount = $amount;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT paymentId FROM feePayments";
		return $query;
	}
	public function __construct($database, $paymentId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "FeePayment")) Object::shootException("FeePayment System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $paymentId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->paymentId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "FeePayment")) Object::shootException("FeePayment System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE feePayments SET $setList WHERE paymentId = '$this->paymentId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeePayment, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "FeePayment")) Object::shootException("FeePayment System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM feePayments WHERE paymentId = '$this->paymentId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeePayment, Row Deletion Failed');
	}
	public function getClassName()	{
		return "FeePayment";
	}
	protected function getProperties()	{
		return "paymentId=$this->paymentId"."@paymentNumber=$this->paymentNumber"."@amount=$this->amount"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1038.paymentId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->paymentId))."@1038.paymentNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->paymentNumber))."@1038.amount=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->amount))."@1038.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1038.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1038.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: FeePayment (NAMESPACETAG = 1038) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->invoice))	{
			$this->invoice->debug();
		}
		if (! is_null($this->payer))	{
			$this->payer->debug();
		}
		if (! is_null($this->paymentTime))	{
			$this->paymentTime->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->invoice))	{
			$matrix1=$this->invoice->searchMatrix($matrix1);
		}
		if (! is_null($this->payer))	{
			$matrix1=$this->payer->searchMatrix($matrix1);
		}
		if (! is_null($this->paymentTime))	{
			$matrix1=$this->paymentTime->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->invoice))	{
			$csvProcessor1=$this->invoice->processCSV($csvProcessor1);
		}
		if (! is_null($this->payer))	{
			$csvProcessor1=$this->payer->processCSV($csvProcessor1);
		}
		if (! is_null($this->paymentTime))	{
			$csvProcessor1=$this->paymentTime->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $paymentId, $conn) {
		$query="SELECT paymentId, invoiceId, payerId, paymentNumber, paymentTime, amount, extraFilter, extraInformation, flags FROM feePayments WHERE paymentId = '$paymentId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('FeePayment, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('FeePayment, Duplicate or No Record');
		list($paymentId, $invoiceId, $payerId, $paymentNumber, $paymentTime, $amount, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->paymentId = $paymentId;
		if (! is_null($invoiceId))	{
			$this->invoice = null;
			try	{
				$this->invoice = new FeeInvoice($this->database, $invoiceId, $this->conn);
			} catch (Exception $e)	{
				$this->invoice = null;
			}
		}
		if (! is_null($payerId))	{
			$this->payer = null;
			try	{
				$this->payer = new FeePayer($this->database, $payerId, $this->conn);
			} catch (Exception $e)	{
				$this->payer = null;
			}
		}
		if (! is_null($paymentNumber))	{
			$this->paymentNumber = $paymentNumber;
		}
		if (! is_null($paymentTime))	{
			$this->paymentTime = null;
			try	{
				$this->paymentTime = new DateAndTime($this->database, $paymentTime, $this->conn);
			} catch (Exception $e)	{
				$this->paymentTime = null;
			}
		}
		if (! is_null($amount))	{
			$this->amount = $amount;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT invoiceId, payerId, paymentNumber, paymentTime, amount, extraFilter, extraInformation, flags FROM feePayments WHERE paymentId = '$this->paymentId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('FeePayment, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('FeePayment, [Clone] Duplicate or No Record');
		list($invoiceId, $payerId, $paymentNumber, $paymentTime, $amount, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['invoiceId'] = $invoiceId;
		$masterDataArray['payerId'] = $payerId;
		$masterDataArray['paymentNumber'] = $paymentNumber;
		$masterDataArray['paymentTime'] = $paymentTime;
		$masterDataArray['amount'] = $amount;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO feePayments ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("FeePayment [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("FeePayment [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("FeePayment [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Venue extends Object {
	private $venueId;
	private $venueName;
	private $venueCode;
	private $capacity;
	private $numberOfConcurrentAllocations;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Venue/venueName,text,1036;venueCode,text,1036;capacity,text,1036;numberOfConcurrentAllocations,text,1036;extraFilter,text,1036;extraInformation,text,1036;flags,text,1036";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "venue";
	}
	public final static function getClassContextName()	{
		return "managevenue";
	}
	public final static function getUniqueVenueId($database, $conn)	{
		$query="SELECT venueId FROM venue";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Venue, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Venue, None or Duplicate Row/Multiple Rows Found');
		list($venueId)=mysql_fetch_row($result);
		return $venueId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT venueId, venueName FROM venue";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Venue, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $venueName, $venueCode, $capacity, $numberOfConcurrentAllocations, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO venue (venueName, venueCode, capacity, numberOfConcurrentAllocations, extraFilter, extraInformation, flags) VALUES('$venueName', '$venueCode', '$capacity', '$numberOfConcurrentAllocations', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Venue, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Venue, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Venue, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->venueId;
	}
	public function getVenueId() {
		return $this->venueId;
	}
	public function getVenueName() {
		return $this->venueName;
	}
	public function setVenueName($venueName) {
		if (! is_null($venueName))	{
			$this->addToUpdateList("venueName", $venueName);
			$this->venueName = $venueName;
		}
	}
	public function getVenueCode() {
		return $this->venueCode;
	}
	public function setVenueCode($venueCode) {
		if (! is_null($venueCode))	{
			$this->addToUpdateList("venueCode", $venueCode);
			$this->venueCode = $venueCode;
		}
	}
	public function getCapacity() {
		return $this->capacity;
	}
	public function setCapacity($capacity) {
		if (! is_null($capacity))	{
			$this->addToUpdateList("capacity", $capacity);
			$this->capacity = $capacity;
		}
	}
	public function getNumberOfConcurrentAllocations() {
		return $this->numberOfConcurrentAllocations;
	}
	public function setNumberOfConcurrentAllocations($numberOfConcurrentAllocations) {
		if (! is_null($numberOfConcurrentAllocations))	{
			$this->addToUpdateList("numberOfConcurrentAllocations", $numberOfConcurrentAllocations);
			$this->numberOfConcurrentAllocations = $numberOfConcurrentAllocations;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT venueId FROM venue";
		return $query;
	}
	public function __construct($database, $venueId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Venue")) Object::shootException("Venue System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $venueId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->venueId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Venue")) Object::shootException("Venue System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE venue SET $setList WHERE venueId = '$this->venueId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Venue, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Venue")) Object::shootException("Venue System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM venue WHERE venueId = '$this->venueId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Venue, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Venue";
	}
	protected function getProperties()	{
		return "venueId=$this->venueId"."@venueName=$this->venueName"."@venueCode=$this->venueCode"."@capacity=$this->capacity"."@numberOfConcurrentAllocations=$this->numberOfConcurrentAllocations"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1036.venueId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->venueId))."@1036.venueName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->venueName))."@1036.venueCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->venueCode))."@1036.capacity=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->capacity))."@1036.numberOfConcurrentAllocations=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->numberOfConcurrentAllocations))."@1036.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1036.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1036.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Venue (NAMESPACETAG = 1036) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $venueId, $conn) {
		$query="SELECT venueId, venueName, venueCode, capacity, numberOfConcurrentAllocations, extraFilter, extraInformation, flags FROM venue WHERE venueId = '$venueId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Venue, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Venue, Duplicate or No Record');
		list($venueId, $venueName, $venueCode, $capacity, $numberOfConcurrentAllocations, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->venueId = $venueId;
		if (! is_null($venueName))	{
			$this->venueName = $venueName;
		}
		if (! is_null($venueCode))	{
			$this->venueCode = $venueCode;
		}
		if (! is_null($capacity))	{
			$this->capacity = $capacity;
		}
		if (! is_null($numberOfConcurrentAllocations))	{
			$this->numberOfConcurrentAllocations = $numberOfConcurrentAllocations;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT venueName, venueCode, capacity, numberOfConcurrentAllocations, extraFilter, extraInformation, flags FROM venue WHERE venueId = '$this->venueId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Venue, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Venue, [Clone] Duplicate or No Record');
		list($venueName, $venueCode, $capacity, $numberOfConcurrentAllocations, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['venueName'] = $venueName;
		$masterDataArray['venueCode'] = $venueCode;
		$masterDataArray['capacity'] = $capacity;
		$masterDataArray['numberOfConcurrentAllocations'] = $numberOfConcurrentAllocations;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO venue ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Venue [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Venue [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Venue [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Timetable extends Object {
	private $timetableId;
	private $activityName;
	private $venue;
	private $instructorList;
	private $groupList;
	private $subjectList;
	private $validFrom;
	private $validTo;
	private $startTime;
	private $endTime;
	private $dayOfAWeek;
	private $textColor;
	private $backgroundColor;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/*Just declare the following constants*/
	static $__MODE_TARGET_GROUP = 1;
	static $__MODE_HOST_USER = 2;
	public function getCaptionName()	{
		$captionName = $this->activityName;
		if (! is_null($this->subjectList) && (sizeof($this->subjectList) == 1))	{
			$captionName = $this->subjectList[0]->getSubjectName()."(".$this->subjectList[0]->getSubjectCode().")";
		}
		return $captionName;
	}
	public final static function isValid($timetable1, $systemTime1)	{
		return $systemTime1->inDateAndTimeRangeInclude($timetable1->getValidFrom(), $timetable1->getValidTo());
	}
	public final static function isVenueAlreadyBooked($database, $conn, $venueId, $dayId, $time1, $time2, $systemTime1)	{
		$venue1 = new Venue($database, $venueId, $conn);
		$query = Timetable::getQueryText();
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Timetable [static], Could not execute query");
		$currentNumberOfAllocations = 0;
		while (list($id) = mysql_fetch_row($result))	{
			$timetable1 = new TimeTable($database, $id, $conn);
			if (($timetable1->getVenue()->getVenueId() == $venue1->getVenueId()) && Timetable::isValid($timetable1, $systemTime1) && ($timetable1->getDayOfAWeek()->getDayId() == $dayId) && DateAndTime::isTimeRangeOverlap($timetable1->getStartTime(), $timetable1->getEndTime(), $time1, $time2))	{
				$currentNumberOfAllocations++;
			}
		}
		return ! ($currentNumberOfAllocations < $venue1->getNumberOfConcurrentAllocations());
	}
	public final static function isUserAlreadyOccupied($database, $conn, $loginId, $dayId, $time1, $time2, $systemTime1)	{
		$query = Timetable::getQueryText();
		$userIsOccupied = false;
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not pull timetable data");
		while (list($id) = mysql_fetch_row($result))	{
			$timetable1 = new Timetable($database, $id, $conn);
			if (($timetable1->isUserAHost($loginId) || $timetable1->isUserHosted($loginId)) && Timetable::isValid($timetable1, $systemTime1) && ($timetable1->getDayOfAWeek()->getDayId() == $dayId) && DateAndTime::isTimeRangeOverlap($timetable1->getStartTime(), $timetable1->getEndTime(), $time1, $time2))	{
				$userIsOccupied = true;
				/* There is no need of proceeding it is obvious there is a collision */
				break;
			}
		}
		return $userIsOccupied;
	}
	public final static function isGroupAlreadyOccupied($database, $conn, $groupId, $dayId, $time1, $time2, $systemTime1)	{
		$query = Timetable::getQueryText();
		$groupIsOccupied = false;
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not pull timetable data");
		while (list($id) = mysql_fetch_row($result))	{
			$timetable1 = new Timetable($database, $id, $conn);
			if (Timetable::isValid($timetable1, $systemTime1) && $timetable1->isGroupHosted($groupId) && ($timetable1->getDayOfAWeek()->getDayId() == $dayId) && DateAndTime::isTimeRangeOverlap($timetable1->getStartTime(), $timetable1->getEndTime(), $time1, $time2))	{
				$groupIsOccupied = true;
				/* There is no need of proceeding it is obvious there is a collision */
				break;
			} 
		}
		return $groupIsOccupied;
	}
	public final static function drawMyTimetable($database, $conn, $ttIdList1, $systemTime1, $offset)	{
		$recordAttendanceClass = "";
		if (intval($systemTime1->getExtraFilter()) == 1)	{
			$recordAttendanceClass = "ui-sys-record-attendance";
		}
		$ds1 = self::getMyTimetableDataStructure($database, $conn, $ttIdList1, $systemTime1, $offset);
		if (is_null($ds1)) return null;
		$time1 = array();
		//Populate time 
		for ($i=0; $i < 10; $i++) {
			$time1[$i] = "0$i:00AM - 0$i:59AM";
		}
		for ($i=10; $i < 12; $i++)	{
			$time1[$i] = "$i:00AM - $i:59AM";
		}
		$time1[12] = "12:00PM - 12:59PM";
		for ($i=13; $i < 22; $i++)	{
			$j = $i - 12;
			$time1[$i] = "0$j:00PM - 0$j:59PM";
		}
		for ($i=22; $i < 24; $i++)	{
			$j = $i - 12;
			$time1[$i] = "$j:00PM - $j:59PM";
		}
		$columnWidth = 200;
		$rowHeight = 64;
		$horizontalScale = 1;
		$verticalScale = 1;
		$columnWidth = $columnWidth * $horizontalScale;
		$rowHeight = $rowHeight * $verticalScale;
		$noColumns = 1 + (1 + intval($ds1['maxOffset']) - intval($ds1['minOffset']));
		$tableWidth = $noColumns * $columnWidth;
		$table1 = "<div class=\"ui-sys-timetable-container ui-sys-printable\"><div class=\"ui-sys-printable-controls\"><a><img title=\"Print\" alt=\"P\" src=\"../sysimage/print.png\"/></a></div><div style=\"width: $tableWidth; position: relative;\" class=\"ui-sys-horizontal-scrollable\"><table style=\"width: $tableWidth;\" class=\"ui-sys-timetable pure-table\"><thead><tr>";
		//In The Header region
		$table1 .= "<th>Time</th>";
		for ($i=intval($ds1['minOffset']); $i <= intval($ds1['maxOffset']); $i++)	{
			//We need to get the Initial Offset , remember this will be enclose in try .. catch block 
			$originalOffsetValue = DaysOfAWeek::readjustOffsetValue($i, $offset);
			//Get Day reference 
			$dayId = DaysOfAWeek::getDayIdFromOffset($database, $conn, $originalOffsetValue);
			$day1 = new DaysOfAWeek($database, $dayId, $conn);
			$dayAbbreviation = $day1->getDayAbbreviation();
			$dayName = $day1->getDayName();
			$table1 .= "<th title=\"$dayName\">$dayAbbreviation</th>";
		}
		$table1 .= "</tr></thead><tbody>";
		//In Body region 
		$beginRow ="";
		$endRow = "";
		$row = "";
		$beginIndex = 0;
		$endIndex = 0;
		$referenceStartingHeight = 0;
		/*Appending Cells */
		$appendTheseCells = "";
		$reservedCelles = "";
		for ($i=intval($ds1['minOffset']); $i <= intval($ds1['maxOffset']); $i++)	{
			$appendTheseCells .= "<td></td>";
			$reservedCelles .= "<td class=\"reserved\"></td>";
		}
		for ($i = 0; $i < 24; $i++)	{
			$height = $i * 60;
			if (($height >= intval($ds1['minHeight'])) && ($height <= intval($ds1['maxHeight'])))	{
				$row .= "<tr><td>".$time1[$i]."</td>".$appendTheseCells."</tr>";
				if (($beginIndex == 0) && ($i != 0)) {
					$beginIndex = $i;
					$referenceStartingHeight = $height;
				}
				$endIndex = $i;
			}
		}
		//Make correction here for begin and end
		if ($beginIndex > 0)	{
			//Check if there were any missed part at the beginning
			$height = $beginIndex * 60;
			if ($height > intval($ds1['minHeight']))	{
				$beginRow = "<tr><td>".$time1[$beginIndex - 1]."</td>".$appendTheseCells."</tr>";
				$referenceStartingHeight = ($beginIndex - 1) * 60;
			}
		}
		$lastIndex = $endIndex;
		if ($endIndex < (24-1))	{
			$height = $endIndex * 60;
			if ($height < intval($ds1['maxHeight']))	{
				$endRow = "<tr><td>".$time1[$endIndex + 1]."</td>".$appendTheseCells."</tr>";
				$lastIndex = $endIndex + 1;
			}
		}
		//Make sure the last row can accomodate even if it is multicolums
		for ($i = ($lastIndex + 1), $j = 60; ($i < 24) && ($j < intval($ds1['maxGapHeight'])); $i++, $j = $j + 60)	{
			$height = $i * 60;
			$endRow .= "<tr><td>".$time1[$i]."</td>".$appendTheseCells."</tr>";
		}
		$table1 .= $beginRow.$row.$endRow."<tr>".$reservedCelles."<td class\"reserved\">";
		/* We dump the entire timetable at the last cell, since it is absolute positioned then it will find its way right */
		foreach ($ds1['ttId'] as $cell1)	{
			$ttId = $cell1[0];
			$top = $cell1[1] - $referenceStartingHeight;
			$height = $cell1[2] - $cell1[1];
			$width = $columnWidth;
			$left = 1 + ($cell1[3] - $ds1['minOffset']);
			$left = $left * $columnWidth;
			//Adjusting Height 
			// Gap is $rowHeight, from calculation is 60, readjust 
			$height = $height * $rowHeight / 60;
			$top = $top * $rowHeight / 60;
			$timetable1 = new Timetable($database, $ttId, $conn);
			$color = $timetable1->getTextColor();
			$bgcolor = $timetable1->getBackgroundColor();
			//Adjust by value 
			$top = $top + 2;
			$left = $left + 2;
			$height = $height - 6;
			$width = $width - 6;
			//Adding units of measure 
			$width = $width."px";
			$height = $height."px";
			$left = $left."px";
			$top = $top."px";
			$color = "#".$color;
			$bgcolor = "#".$bgcolor;
			$timetableId = $timetable1->getTimetableId();
			$activityName = $timetable1->getActivityName();
			/*Subject List*/
			$jSubjectList = null;
			$subjectList1 = $timetable1->getSubjectList();
			if (! is_null($subjectList1))	{
				if (sizeof($subjectList1) == 1)	$activityName = $subjectList1[0]->getSubjectName()."(".$subjectList1[0]->getSubjectCode().")";
				$jSubjectList = "\"subjects\":[";
				for ($i = 0; $i < sizeof($subjectList1); $i++)	{
					$subject1 = $subjectList1[$i];
					$temp = "{\"subjectName\":\"".$subject1->getSubjectName()."\",\"subjectCode\":\"".$subject1->getSubjectCode()."\"}";
					if ($i == 0) $jSubjectList .= $temp;
					else $jSubjectList .= ",".$temp;
				}
				$jSubjectList .= "]";
			}
			/*Instructor List*/
			$jInstructorsList = null;
			$loginList1 = $timetable1->getInstructorList();
			if (! is_null($loginList1))	{
				$jInstructorsList = "\"instructors\":[";
				for ($i = 0; $i < sizeof($loginList1); $i++)	{
					$login1 = $loginList1[$i];
					$temp = "{\"name\":\"".$login1->getFullname()."\",\"email\":\"".$login1->getEmail()."\",\"phone\":\"".$login1->getPhone()."\"}";
					if ($i == 0) $jInstructorsList .= $temp;
					else $jInstructorsList .= ",".$temp;
				}
				$jInstructorsList .= "]";
			}
			/*Group List*/
			$jGroupList = null;
			$groupList1 = $timetable1->getGroupList();
			if (! is_null($groupList1))	{
				$jGroupList = "\"groups\":[";
				for ($i = 0; $i < sizeof($groupList1); $i++)	{
					$group1 = $groupList1[$i];
					$temp = "{\"groupName\":\"".$group1->getGroupName()."\"}";
					if ($i == 0) $jGroupList .= $temp;
					else $jGroupList .= ",".$temp;
				}
				$jGroupList .= "]";
			}
			/*Preparing json String*/
			$jString = "{\"timetableId\":\"$timetableId\",\"activityName\":\"$activityName\"";
			$venueName = "";
			if (! is_null($timetable1->getVenue()))	{
				$jString .= ",\"venueName\":\"".$timetable1->getVenue()->getVenueName()."\",\"venueCode\":\"".$timetable1->getVenue()->getVenueCode()."\"";
				$venueName = $timetable1->getVenue()->getVenueName()." (".$timetable1->getVenue()->getVenueCode().")";
			}
			if (! is_null($timetable1->getStartTime()))	{
				$jString .= ",\"startTime\":\"".DateAndTime::convertFromSystemDateAndTimeFormatToTimeOnlyFormat($timetable1->getStartTime()->getDateAndTimeString())."\"";
			}
			if (! is_null($timetable1->getEndTime()))	{
				$jString .= ",\"endTime\":\"".DateAndTime::convertFromSystemDateAndTimeFormatToTimeOnlyFormat($timetable1->getEndTime()->getDateAndTimeString())."\"";
			}
			if (! is_null($timetable1->getValidFrom()))	{
				$jString .= ",\"validFrom\":\"".DateAndTime::convertFromDateTimeObjectToGUIDateFormat($timetable1->getValidFrom())."\"";
			}
			if (! is_null($timetable1->getValidTo()))	{
				$jString .= ",\"validTo\":\"".DateAndTime::convertFromDateTimeObjectToGUIDateFormat($timetable1->getValidTo())."\"";
			}
			if (! is_null($timetable1->getDayOfAWeek()))	{
				$jString .= ",\"dayName\":\"".$timetable1->getDayOfAWeek()->getDayName()."\",\"dayAbbreviation\":\"".$timetable1->getDayOfAWeek()->getDayAbbreviation()."\"";
			}
			if (! is_null($jSubjectList))	{
				$jString .= ",".$jSubjectList;
			}
			if (! is_null($jInstructorsList))	{
				$jString .= ",".$jInstructorsList;
			}
			if (! is_null($jGroupList))	{
				$jString .= ",".$jGroupList;
			}
			$jString .= "}";
			$table1 .= "<a title=\"$activityName\" class=\"$recordAttendanceClass ui-sys-timetable-tooltip\" data-timetable-popup='".$jString."' style=\"width: $width; height: $height; left: $left; top: $top; color: $color; background-color: $bgcolor; border: 1px solid black;\"><span style=\"font-size: 0.9em;\">$activityName</span><br/><span style=\"font-size: 0.8em;\"><u>Venue</u>: $venueName</span></a>";
		}
		$table1 .= "</td></tr></tbody><tfoot>&nbsp;&nbsp;</tfoot></table></div></div>";
		return $table1;
	}
	public final static function getMyTimetableDataStructure($database, $conn, $ttIdList1, $systemTime1, $offset)	{
		/*
		All these are gui settings
		Height = minutes + 60 * hours // We expect 0 .. 1439
		Data Structure to return 
		list['ttId'][$i][0] = ttId 
						[1] = minHeight 
						[2] = maxHeight  
						[3] = offsetValue 
		list['minHeight'] = minBox Height 
		list['maxHeight'] = maxBox Height 
		list['minOffset'] = minBox Offset 
		list['maxOffset'] = maxBox Offset 
		list['maxGapHeight'] = maximumCell size of cell height
		*/
		if (is_null($ttIdList1)) return null;
		$minHeight = 1440;
		$maxHeight = 0;
		$minOffset = 7;
		$maxOffset = 0;
		$maxGapHeight = 0;
		$list1 = array();
		$list1['ttId'] = array();
		for ($i=0; $i < sizeof($ttIdList1); $i++)	{
			$ttId = $ttIdList1[$i];
			$timetable1 = new Timetable($database, $ttId, $conn);
			if (! is_null($timetable1->getStartTime()) && ! is_null($timetable1->getEndTime()) && ! is_null($timetable1->getDayOfAWeek()) && Timetable::isValid($timetable1, $systemTime1))	{
				$startHeight = $timetable1->getStartTime()->getTimeHeight();
				$endHeight = $timetable1->getEndTime()->getTimeHeight(); 
				$offsetValue = DaysOfAWeek::adjustOffsetValue($timetable1->getDayOfAWeek()->getOffsetValue(), $offset);
				$list1['ttId'][$i] = array();
				$list1['ttId'][$i][0] = $timetable1->getTimetableId();
				$list1['ttId'][$i][1] = $startHeight;
				$list1['ttId'][$i][2] = $endHeight;
				$list1['ttId'][$i][3] = $offsetValue;
				if (intval($startHeight) < intval($minHeight)) $minHeight = $startHeight;
				if (intval($endHeight) > intval($maxHeight)) $maxHeight = $endHeight;
				if (intval($offsetValue) < intval($minOffset)) $minOffset = $offsetValue;
				if (intval($offsetValue) > intval($maxOffset)) $maxOffset = $offsetValue;
				if ((intval($endHeight) - intval($startHeight)) > $maxGapHeight) $maxGapHeight = (intval($endHeight) - intval($startHeight));
			}
		}
		$list1['minHeight'] = $minHeight;
		$list1['maxHeight'] = $maxHeight;
		$list1['minOffset'] = $minOffset;
		$list1['maxOffset'] = $maxOffset;
		$list1['maxGapHeight'] = $maxGapHeight; ;
		if (sizeof($list1['ttId']) == 0) $list1 = null;
		return $list1;
	}
	public final static function getTimetableListIAmHosting($database, $conn, $loginId, $systemTime1)	{
		$query = self::getQueryText();
		$list1 = array();
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("[Timetable], Could not execute query");
		while (list($id) = mysql_fetch_row($result))	{
			$timetable1 = new Timetable($database, $id, $conn);
			if ($timetable1->isUserAHost($loginId) && Timetable::isValid($timetable1, $systemTime1))	{
				$list1[sizeof($list1)] = $id;
			}
		}
		if (sizeof($list1) == 0) $list1 = null;
		return $list1;
	}
	public final static function getTimetableListIAmHosted($database, $conn, $loginId, $systemTime1)	{
		$query = self::getQueryText();
		$list1 = array();
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("[Timetable], Could not execute query");
		while (list($id) = mysql_fetch_row($result))	{
			$timetable1 = new Timetable($database, $id, $conn);
			if ($timetable1->isUserHosted($loginId) && Timetable::isValid($timetable1, $systemTime1))	{
				$list1[sizeof($list1)] = $id;
			}
		}
		if (sizeof($list1) == 0) $list1 = null;
		return $list1;
	}
	public function isUserAHost($loginId)	{
		//check if user is a host 
		if (is_null($this->instructorList)) return false;
		$isAHost = false;
		foreach ($this->instructorList as $login1)	{
			if ($loginId == $login1->getLoginId())	{
				$isAHost = true;
				break;
			}
		}
		return $isAHost;
	}
	public function isUserHosted($loginId)	{
		//Check if this user is Hosted 
		if (is_null($this->groupList)) return false;
		$groupId = -1;
		try {
			$login1 = new Login($this->database, $loginId, $this->conn);
			$group1 = $login1->getGroup();
			$groupId = $group1->getGroupId();
		} catch (Exception $e)	{
			return false;
		}
		$isHosted = false;
		foreach ($this->groupList as $group1)	{
			if ($groupId == $group1->getGroupId())	{
				$isHosted = true;
				break;
			}
		}
		return $isHosted;
	}
	public function isGroupHosted($groupId)	{
		//Check if this user is Hosted 
		if (is_null($this->groupList)) return false;
		try {
			$group1 = new Group($this->database, $groupId, $this->conn);
		} catch (Exception $e)	{
			return false;
		}
		$isHosted = false;
		foreach ($this->groupList as $group1)	{
			if ($groupId == $group1->getGroupId())	{
				$isHosted = true;
				break;
			}
		}
		return $isHosted;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Timetable/activityName,text,1037;textColor,text,1037;backgroundColor,text,1037;extraFilter,text,1037;extraInformation,text,1037;flags,text,1037";
		$lineToView .= Venue::getAvailableViewableColumns();
		$lineToView .= Login::getAvailableViewableColumns();
		$lineToView .= Group::getAvailableViewableColumns();
		$lineToView .= Subject::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= DaysOfAWeek::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "timetable";
	}
	public final static function getClassContextName()	{
		return "managetimetable";
	}
	public final static function getUniqueTimetableId($database, $conn)	{
		$query="SELECT ttId FROM timetable";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Timetable, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Timetable, None or Duplicate Row/Multiple Rows Found');
		list($timetableId)=mysql_fetch_row($result);
		return $timetableId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT ttId, ttName FROM timetable";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Timetable, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $ttName, $venueId, $instructorList, $groupList, $subjectList, $validFrom, $validTo, $startTime, $endTime, $dayOfAWeekId, $textColor, $backgroundColor, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO timetable (ttName, venueId, instructorList, groupList, subjectList, validFrom, validTo, startTime, endTime, dayOfAWeekId, textColor, backgroundColor, extraFilter, extraInformation, flags) VALUES('$ttName', '$venueId', '$instructorList', '$groupList', '$subjectList', '$validFrom', '$validTo', '$startTime', '$endTime', '$dayOfAWeekId', '$textColor', '$backgroundColor', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Timetable, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Timetable, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Timetable, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->timetableId;
	}
	public function getTimetableId() {
		return $this->timetableId;
	}
	public function getActivityName() {
		return $this->activityName;
	}
	public function setActivityName($ttName) {
		if (! is_null($ttName))	{
			$this->addToUpdateList("ttName", $ttName);
			$this->activityName = $ttName;
		}
	}
	public function getVenue() {
		return $this->venue;
	}
	public function setVenue($venueId) {
		if (! is_null($venueId))	{
			$this->addToUpdateList("venueId", $venueId);
			$this->venue = null;
			try	{
				$this->venue = new Venue($this->database, $venueId, $this->conn);
			} catch (Exception $e)	{
				$this->venue = null;
			}
		}
	}
	public function getInstructorList() {
		return $this->instructorList;
	}
	public function setInstructorList($instructorList) {
		if (! is_null($instructorList))	{
			$this->addToUpdateList("instructorList", $instructorList);
			$this->instructorList = array();
			$idListArr = explode(",", $instructorList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Login($this->database, $id, $this->conn);
					$this->instructorList[sizeof($this->instructorList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getGroupList() {
		return $this->groupList;
	}
	public function setGroupList($groupList) {
		if (! is_null($groupList))	{
			$this->addToUpdateList("groupList", $groupList);
			$this->groupList = array();
			$idListArr = explode(",", $groupList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Group($this->database, $id, $this->conn);
					$this->groupList[sizeof($this->groupList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getSubjectList() {
		return $this->subjectList;
	}
	public function setSubjectList($subjectList) {
		if (! is_null($subjectList))	{
			$this->addToUpdateList("subjectList", $subjectList);
			$this->subjectList = array();
			$idListArr = explode(",", $subjectList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Subject($this->database, $id, $this->conn);
					$this->subjectList[sizeof($this->subjectList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getValidFrom() {
		return $this->validFrom;
	}
	public function setValidFrom($validFrom) {
		if (! is_null($validFrom))	{
			$this->addToUpdateList("validFrom", $validFrom);
			$this->validFrom = null;
			try	{
				$this->validFrom = new DateAndTime($this->database, $validFrom, $this->conn);
			} catch (Exception $e)	{
				$this->validFrom = null;
			}
		}
	}
	public function getValidTo() {
		return $this->validTo;
	}
	public function setValidTo($validTo) {
		if (! is_null($validTo))	{
			$this->addToUpdateList("validTo", $validTo);
			$this->validTo = null;
			try	{
				$this->validTo = new DateAndTime($this->database, $validTo, $this->conn);
			} catch (Exception $e)	{
				$this->validTo = null;
			}
		}
	}
	public function getStartTime() {
		return $this->startTime;
	}
	public function setStartTime($startTime) {
		if (! is_null($startTime))	{
			$this->addToUpdateList("startTime", $startTime);
			$this->startTime = null;
			try	{
				$this->startTime = new DateAndTime($this->database, $startTime, $this->conn);
			} catch (Exception $e)	{
				$this->startTime = null;
			}
		}
	}
	public function getEndTime() {
		return $this->endTime;
	}
	public function setEndTime($endTime) {
		if (! is_null($endTime))	{
			$this->addToUpdateList("endTime", $endTime);
			$this->endTime = null;
			try	{
				$this->endTime = new DateAndTime($this->database, $endTime, $this->conn);
			} catch (Exception $e)	{
				$this->endTime = null;
			}
		}
	}
	public function getDayOfAWeek() {
		return $this->dayOfAWeek;
	}
	public function setDayOfAWeek($dayOfAWeekId) {
		if (! is_null($dayOfAWeekId))	{
			$this->addToUpdateList("dayOfAWeekId", $dayOfAWeekId);
			$this->dayOfAWeek = null;
			try	{
				$this->dayOfAWeek = new DaysOfAWeek($this->database, $dayOfAWeekId, $this->conn);
			} catch (Exception $e)	{
				$this->dayOfAWeek = null;
			}
		}
	}
	public function getTextColor() {
		return $this->textColor;
	}
	public function setTextColor($textColor) {
		if (! is_null($textColor))	{
			$this->addToUpdateList("textColor", $textColor);
			$this->textColor = $textColor;
		}
	}
	public function getBackgroundColor() {
		return $this->backgroundColor;
	}
	public function setBackgroundColor($backgroundColor) {
		if (! is_null($backgroundColor))	{
			$this->addToUpdateList("backgroundColor", $backgroundColor);
			$this->backgroundColor = $backgroundColor;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT ttId FROM timetable";
		return $query;
	}
	public function __construct($database, $ttId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Timetable")) Object::shootException("Timetable System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $ttId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->timetableId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Timetable")) Object::shootException("Timetable System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE timetable SET $setList WHERE ttId = '$this->timetableId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Timetable, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Timetable")) Object::shootException("Timetable System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM timetable WHERE ttId = '$this->timetableId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Timetable, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Timetable";
	}
	protected function getProperties()	{
		return "timetableId=$this->timetableId"."@activityName=$this->activityName"."@textColor=$this->textColor"."@backgroundColor=$this->backgroundColor"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1037.timetableId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->timetableId))."@1037.activityName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->activityName))."@1037.textColor=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->textColor))."@1037.backgroundColor=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->backgroundColor))."@1037.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1037.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1037.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Timetable (NAMESPACETAG = 1037) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->venue))	{
			$this->venue->debug();
		}
		if (! is_null($this->validFrom))	{
			$this->validFrom->debug();
		}
		if (! is_null($this->validTo))	{
			$this->validTo->debug();
		}
		if (! is_null($this->startTime))	{
			$this->startTime->debug();
		}
		if (! is_null($this->endTime))	{
			$this->endTime->debug();
		}
		if (! is_null($this->dayOfAWeek))	{
			$this->dayOfAWeek->debug();
		}
		if (! is_null($this->instructorList))	{
			foreach ($this->instructorList as $instructorListSingleObject)	{
				$instructorListSingleObject->debug();
			}
		}
		if (! is_null($this->groupList))	{
			foreach ($this->groupList as $groupListSingleObject)	{
				$groupListSingleObject->debug();
			}
		}
		if (! is_null($this->subjectList))	{
			foreach ($this->subjectList as $subjectListSingleObject)	{
				$subjectListSingleObject->debug();
			}
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->venue))	{
			$matrix1=$this->venue->searchMatrix($matrix1);
		}
		if (! is_null($this->validFrom))	{
			$matrix1=$this->validFrom->searchMatrix($matrix1);
		}
		if (! is_null($this->validTo))	{
			$matrix1=$this->validTo->searchMatrix($matrix1);
		}
		if (! is_null($this->startTime))	{
			$matrix1=$this->startTime->searchMatrix($matrix1);
		}
		if (! is_null($this->endTime))	{
			$matrix1=$this->endTime->searchMatrix($matrix1);
		}
		if (! is_null($this->dayOfAWeek))	{
			$matrix1=$this->dayOfAWeek->searchMatrix($matrix1);
		}
		if (! is_null($this->instructorList))	{
			foreach ($this->instructorList as $instructorListSingleObject)	{
				$matrix1=$instructorListSingleObject->searchMatrix($matrix1);
			}
		}
		if (! is_null($this->groupList))	{
			foreach ($this->groupList as $groupListSingleObject)	{
				$matrix1=$groupListSingleObject->searchMatrix($matrix1);
			}
		}
		if (! is_null($this->subjectList))	{
			foreach ($this->subjectList as $subjectListSingleObject)	{
				$matrix1=$subjectListSingleObject->searchMatrix($matrix1);
			}
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->venue))	{
			$csvProcessor1=$this->venue->processCSV($csvProcessor1);
		}
		if (! is_null($this->validFrom))	{
			$csvProcessor1=$this->validFrom->processCSV($csvProcessor1);
		}
		if (! is_null($this->validTo))	{
			$csvProcessor1=$this->validTo->processCSV($csvProcessor1);
		}
		if (! is_null($this->startTime))	{
			$csvProcessor1=$this->startTime->processCSV($csvProcessor1);
		}
		if (! is_null($this->endTime))	{
			$csvProcessor1=$this->endTime->processCSV($csvProcessor1);
		}
		if (! is_null($this->dayOfAWeek))	{
			$csvProcessor1=$this->dayOfAWeek->processCSV($csvProcessor1);
		}
		if (! is_null($this->instructorList))	{
			foreach ($this->instructorList as $instructorListSingleObject)	{
				$csvProcessor1=$instructorListSingleObject->processCSV($csvProcessor1);
			}
		}
		if (! is_null($this->groupList))	{
			foreach ($this->groupList as $groupListSingleObject)	{
				$csvProcessor1=$groupListSingleObject->processCSV($csvProcessor1);
			}
		}
		if (! is_null($this->subjectList))	{
			foreach ($this->subjectList as $subjectListSingleObject)	{
				$csvProcessor1=$subjectListSingleObject->processCSV($csvProcessor1);
			}
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $ttId, $conn) {
		$query="SELECT ttId, ttName, venueId, instructorList, groupList, subjectList, validFrom, validTo, startTime, endTime, dayOfAWeekId, textColor, backgroundColor, extraFilter, extraInformation, flags FROM timetable WHERE ttId = '$ttId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Timetable, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Timetable, Duplicate or No Record');
		list($ttId, $ttName, $venueId, $instructorList, $groupList, $subjectList, $validFrom, $validTo, $startTime, $endTime, $dayOfAWeekId, $textColor, $backgroundColor, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->timetableId = $ttId;
		if (! is_null($ttName))	{
			$this->activityName = $ttName;
		}
		if (! is_null($venueId))	{
			$this->venue = null;
			try	{
				$this->venue = new Venue($this->database, $venueId, $this->conn);
			} catch (Exception $e)	{
				$this->venue = null;
			}
		}
		if (! is_null($instructorList))	{
			$this->instructorList = array();
			$idListArr = explode(",", $instructorList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Login($this->database, $id, $this->conn);
					$this->instructorList[sizeof($this->instructorList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($groupList))	{
			$this->groupList = array();
			$idListArr = explode(",", $groupList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Group($this->database, $id, $this->conn);
					$this->groupList[sizeof($this->groupList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($subjectList))	{
			$this->subjectList = array();
			$idListArr = explode(",", $subjectList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Subject($this->database, $id, $this->conn);
					$this->subjectList[sizeof($this->subjectList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($validFrom))	{
			$this->validFrom = null;
			try	{
				$this->validFrom = new DateAndTime($this->database, $validFrom, $this->conn);
			} catch (Exception $e)	{
				$this->validFrom = null;
			}
		}
		if (! is_null($validTo))	{
			$this->validTo = null;
			try	{
				$this->validTo = new DateAndTime($this->database, $validTo, $this->conn);
			} catch (Exception $e)	{
				$this->validTo = null;
			}
		}
		if (! is_null($startTime))	{
			$this->startTime = null;
			try	{
				$this->startTime = new DateAndTime($this->database, $startTime, $this->conn);
			} catch (Exception $e)	{
				$this->startTime = null;
			}
		}
		if (! is_null($endTime))	{
			$this->endTime = null;
			try	{
				$this->endTime = new DateAndTime($this->database, $endTime, $this->conn);
			} catch (Exception $e)	{
				$this->endTime = null;
			}
		}
		if (! is_null($dayOfAWeekId))	{
			$this->dayOfAWeek = null;
			try	{
				$this->dayOfAWeek = new DaysOfAWeek($this->database, $dayOfAWeekId, $this->conn);
			} catch (Exception $e)	{
				$this->dayOfAWeek = null;
			}
		}
		if (! is_null($textColor))	{
			$this->textColor = $textColor;
		}
		if (! is_null($backgroundColor))	{
			$this->backgroundColor = $backgroundColor;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT ttName, venueId, instructorList, groupList, subjectList, validFrom, validTo, startTime, endTime, dayOfAWeekId, textColor, backgroundColor, extraFilter, extraInformation, flags FROM timetable WHERE ttId = '$this->timetableId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Timetable, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Timetable, [Clone] Duplicate or No Record');
		list($ttName, $venueId, $instructorList, $groupList, $subjectList, $validFrom, $validTo, $startTime, $endTime, $dayOfAWeekId, $textColor, $backgroundColor, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['ttName'] = $ttName;
		$masterDataArray['venueId'] = $venueId;
		$masterDataArray['instructorList'] = $instructorList;
		$masterDataArray['groupList'] = $groupList;
		$masterDataArray['subjectList'] = $subjectList;
		$masterDataArray['validFrom'] = $validFrom;
		$masterDataArray['validTo'] = $validTo;
		$masterDataArray['startTime'] = $startTime;
		$masterDataArray['endTime'] = $endTime;
		$masterDataArray['dayOfAWeekId'] = $dayOfAWeekId;
		$masterDataArray['textColor'] = $textColor;
		$masterDataArray['backgroundColor'] = $backgroundColor;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO timetable ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Timetable [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Timetable [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Timetable [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Schedule extends Object {
	private $scheduleId;
	private $activityName;
	private $venue;
	private $instructorList;
	private $groupList;
	private $startTime;
	private $endTime;
	private $textColor;
	private $backgroundColor;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Schedule/activityName,text,1038;textColor,text,1038;backgroundColor,text,1038;extraFilter,text,1038;extraInformation,text,1038;flags,text,1038";
		$lineToView .= Venue::getAvailableViewableColumns();
		$lineToView .= Login::getAvailableViewableColumns();
		$lineToView .= Group::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "schedule";
	}
	public final static function getClassContextName()	{
		return "manageschedule";
	}
	public final static function getUniqueScheduleId($database, $conn)	{
		$query="SELECT scheduleId FROM schedule";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Schedule, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Schedule, None or Duplicate Row/Multiple Rows Found');
		list($scheduleId)=mysql_fetch_row($result);
		return $scheduleId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT scheduleId, scheduleName FROM schedule";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Schedule, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $scheduleName, $venueId, $instructorList, $groupList, $startTime, $endTime, $textColor, $backgroundColor, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO schedule (scheduleName, venueId, instructorList, groupList, startTime, endTime, textColor, backgroundColor, extraFilter, extraInformation, flags) VALUES('$scheduleName', '$venueId', '$instructorList', '$groupList', '$startTime', '$endTime', '$textColor', '$backgroundColor', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Schedule, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Schedule, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Schedule, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->scheduleId;
	}
	public function getScheduleId() {
		return $this->scheduleId;
	}
	public function getActivityName() {
		return $this->activityName;
	}
	public function setActivityName($scheduleName) {
		if (! is_null($scheduleName))	{
			$this->addToUpdateList("scheduleName", $scheduleName);
			$this->activityName = $scheduleName;
		}
	}
	public function getVenue() {
		return $this->venue;
	}
	public function setVenue($venueId) {
		if (! is_null($venueId))	{
			$this->addToUpdateList("venueId", $venueId);
			$this->venue = null;
			try	{
				$this->venue = new Venue($this->database, $venueId, $this->conn);
			} catch (Exception $e)	{
				$this->venue = null;
			}
		}
	}
	public function getInstructorList() {
		return $this->instructorList;
	}
	public function setInstructorList($instructorList) {
		if (! is_null($instructorList))	{
			$this->addToUpdateList("instructorList", $instructorList);
			$this->instructorList = array();
			$idListArr = explode(",", $instructorList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Login($this->database, $id, $this->conn);
					$this->instructorList[sizeof($this->instructorList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getGroupList() {
		return $this->groupList;
	}
	public function setGroupList($groupList) {
		if (! is_null($groupList))	{
			$this->addToUpdateList("groupList", $groupList);
			$this->groupList = array();
			$idListArr = explode(",", $groupList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Group($this->database, $id, $this->conn);
					$this->groupList[sizeof($this->groupList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getStartTime() {
		return $this->startTime;
	}
	public function setStartTime($startTime) {
		if (! is_null($startTime))	{
			$this->addToUpdateList("startTime", $startTime);
			$this->startTime = null;
			try	{
				$this->startTime = new DateAndTime($this->database, $startTime, $this->conn);
			} catch (Exception $e)	{
				$this->startTime = null;
			}
		}
	}
	public function getEndTime() {
		return $this->endTime;
	}
	public function setEndTime($endTime) {
		if (! is_null($endTime))	{
			$this->addToUpdateList("endTime", $endTime);
			$this->endTime = null;
			try	{
				$this->endTime = new DateAndTime($this->database, $endTime, $this->conn);
			} catch (Exception $e)	{
				$this->endTime = null;
			}
		}
	}
	public function getTextColor() {
		return $this->textColor;
	}
	public function setTextColor($textColor) {
		if (! is_null($textColor))	{
			$this->addToUpdateList("textColor", $textColor);
			$this->textColor = $textColor;
		}
	}
	public function getBackgroundColor() {
		return $this->backgroundColor;
	}
	public function setBackgroundColor($backgroundColor) {
		if (! is_null($backgroundColor))	{
			$this->addToUpdateList("backgroundColor", $backgroundColor);
			$this->backgroundColor = $backgroundColor;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT scheduleId FROM schedule";
		return $query;
	}
	public function __construct($database, $scheduleId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Schedule")) Object::shootException("Schedule System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $scheduleId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->scheduleId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Schedule")) Object::shootException("Schedule System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE schedule SET $setList WHERE scheduleId = '$this->scheduleId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Schedule, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Schedule")) Object::shootException("Schedule System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM schedule WHERE scheduleId = '$this->scheduleId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Schedule, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Schedule";
	}
	protected function getProperties()	{
		return "scheduleId=$this->scheduleId"."@activityName=$this->activityName"."@textColor=$this->textColor"."@backgroundColor=$this->backgroundColor"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1038.scheduleId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->scheduleId))."@1038.activityName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->activityName))."@1038.textColor=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->textColor))."@1038.backgroundColor=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->backgroundColor))."@1038.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1038.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1038.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Schedule (NAMESPACETAG = 1038) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->venue))	{
			$this->venue->debug();
		}
		if (! is_null($this->startTime))	{
			$this->startTime->debug();
		}
		if (! is_null($this->endTime))	{
			$this->endTime->debug();
		}
		if (! is_null($this->instructorList))	{
			foreach ($this->instructorList as $instructorListSingleObject)	{
				$instructorListSingleObject->debug();
			}
		}
		if (! is_null($this->groupList))	{
			foreach ($this->groupList as $groupListSingleObject)	{
				$groupListSingleObject->debug();
			}
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->venue))	{
			$matrix1=$this->venue->searchMatrix($matrix1);
		}
		if (! is_null($this->startTime))	{
			$matrix1=$this->startTime->searchMatrix($matrix1);
		}
		if (! is_null($this->endTime))	{
			$matrix1=$this->endTime->searchMatrix($matrix1);
		}
		if (! is_null($this->instructorList))	{
			foreach ($this->instructorList as $instructorListSingleObject)	{
				$matrix1=$instructorListSingleObject->searchMatrix($matrix1);
			}
		}
		if (! is_null($this->groupList))	{
			foreach ($this->groupList as $groupListSingleObject)	{
				$matrix1=$groupListSingleObject->searchMatrix($matrix1);
			}
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->venue))	{
			$csvProcessor1=$this->venue->processCSV($csvProcessor1);
		}
		if (! is_null($this->startTime))	{
			$csvProcessor1=$this->startTime->processCSV($csvProcessor1);
		}
		if (! is_null($this->endTime))	{
			$csvProcessor1=$this->endTime->processCSV($csvProcessor1);
		}
		if (! is_null($this->instructorList))	{
			foreach ($this->instructorList as $instructorListSingleObject)	{
				$csvProcessor1=$instructorListSingleObject->processCSV($csvProcessor1);
			}
		}
		if (! is_null($this->groupList))	{
			foreach ($this->groupList as $groupListSingleObject)	{
				$csvProcessor1=$groupListSingleObject->processCSV($csvProcessor1);
			}
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $scheduleId, $conn) {
		$query="SELECT scheduleId, scheduleName, venueId, instructorList, groupList, startTime, endTime, textColor, backgroundColor, extraFilter, extraInformation, flags FROM schedule WHERE scheduleId = '$scheduleId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Schedule, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Schedule, Duplicate or No Record');
		list($scheduleId, $scheduleName, $venueId, $instructorList, $groupList, $startTime, $endTime, $textColor, $backgroundColor, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->scheduleId = $scheduleId;
		if (! is_null($scheduleName))	{
			$this->activityName = $scheduleName;
		}
		if (! is_null($venueId))	{
			$this->venue = null;
			try	{
				$this->venue = new Venue($this->database, $venueId, $this->conn);
			} catch (Exception $e)	{
				$this->venue = null;
			}
		}
		if (! is_null($instructorList))	{
			$this->instructorList = array();
			$idListArr = explode(",", $instructorList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Login($this->database, $id, $this->conn);
					$this->instructorList[sizeof($this->instructorList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($groupList))	{
			$this->groupList = array();
			$idListArr = explode(",", $groupList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Group($this->database, $id, $this->conn);
					$this->groupList[sizeof($this->groupList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($startTime))	{
			$this->startTime = null;
			try	{
				$this->startTime = new DateAndTime($this->database, $startTime, $this->conn);
			} catch (Exception $e)	{
				$this->startTime = null;
			}
		}
		if (! is_null($endTime))	{
			$this->endTime = null;
			try	{
				$this->endTime = new DateAndTime($this->database, $endTime, $this->conn);
			} catch (Exception $e)	{
				$this->endTime = null;
			}
		}
		if (! is_null($textColor))	{
			$this->textColor = $textColor;
		}
		if (! is_null($backgroundColor))	{
			$this->backgroundColor = $backgroundColor;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT scheduleName, venueId, instructorList, groupList, startTime, endTime, textColor, backgroundColor, extraFilter, extraInformation, flags FROM schedule WHERE scheduleId = '$this->scheduleId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Schedule, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Schedule, [Clone] Duplicate or No Record');
		list($scheduleName, $venueId, $instructorList, $groupList, $startTime, $endTime, $textColor, $backgroundColor, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['scheduleName'] = $scheduleName;
		$masterDataArray['venueId'] = $venueId;
		$masterDataArray['instructorList'] = $instructorList;
		$masterDataArray['groupList'] = $groupList;
		$masterDataArray['startTime'] = $startTime;
		$masterDataArray['endTime'] = $endTime;
		$masterDataArray['textColor'] = $textColor;
		$masterDataArray['backgroundColor'] = $backgroundColor;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO schedule ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Schedule [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Schedule [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Schedule [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Holiday extends Object {
	private $holidayId;
	private $holidayName;
	private $holidayTime;
	private $textColor;
	private $backgroundColor;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Holiday/holidayName,text,1039;textColor,text,1039;backgroundColor,text,1039;extraFilter,text,1039;extraInformation,text,1039;flags,text,1039";
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "holiday";
	}
	public final static function getClassContextName()	{
		return "manageholiday";
	}
	public final static function getUniqueHolidayId($database, $conn)	{
		$query="SELECT holidayId FROM holiday";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Holiday, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Holiday, None or Duplicate Row/Multiple Rows Found');
		list($holidayId)=mysql_fetch_row($result);
		return $holidayId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT holidayId, holidayName FROM holiday";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Holiday, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $holidayName, $holidayTime, $textColor, $backgroundColor, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO holiday (holidayName, holidayTime, textColor, backgroundColor, extraFilter, extraInformation, flags) VALUES('$holidayName', '$holidayTime', '$textColor', '$backgroundColor', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Holiday, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Holiday, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Holiday, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->holidayId;
	}
	public function getHolidayId() {
		return $this->holidayId;
	}
	public function getHolidayName() {
		return $this->holidayName;
	}
	public function setHolidayName($holidayName) {
		if (! is_null($holidayName))	{
			$this->addToUpdateList("holidayName", $holidayName);
			$this->holidayName = $holidayName;
		}
	}
	public function getHolidayTime() {
		return $this->holidayTime;
	}
	public function setHolidayTime($holidayTime) {
		if (! is_null($holidayTime))	{
			$this->addToUpdateList("holidayTime", $holidayTime);
			$this->holidayTime = null;
			try	{
				$this->holidayTime = new DateAndTime($this->database, $holidayTime, $this->conn);
			} catch (Exception $e)	{
				$this->holidayTime = null;
			}
		}
	}
	public function getTextColor() {
		return $this->textColor;
	}
	public function setTextColor($textColor) {
		if (! is_null($textColor))	{
			$this->addToUpdateList("textColor", $textColor);
			$this->textColor = $textColor;
		}
	}
	public function getBackgroundColor() {
		return $this->backgroundColor;
	}
	public function setBackgroundColor($backgroundColor) {
		if (! is_null($backgroundColor))	{
			$this->addToUpdateList("backgroundColor", $backgroundColor);
			$this->backgroundColor = $backgroundColor;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT holidayId FROM holiday";
		return $query;
	}
	public function __construct($database, $holidayId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Holiday")) Object::shootException("Holiday System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $holidayId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->holidayId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Holiday")) Object::shootException("Holiday System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE holiday SET $setList WHERE holidayId = '$this->holidayId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Holiday, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Holiday")) Object::shootException("Holiday System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM holiday WHERE holidayId = '$this->holidayId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Holiday, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Holiday";
	}
	protected function getProperties()	{
		return "holidayId=$this->holidayId"."@holidayName=$this->holidayName"."@textColor=$this->textColor"."@backgroundColor=$this->backgroundColor"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1039.holidayId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->holidayId))."@1039.holidayName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->holidayName))."@1039.textColor=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->textColor))."@1039.backgroundColor=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->backgroundColor))."@1039.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1039.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1039.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Holiday (NAMESPACETAG = 1039) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->holidayTime))	{
			$this->holidayTime->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->holidayTime))	{
			$matrix1=$this->holidayTime->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->holidayTime))	{
			$csvProcessor1=$this->holidayTime->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $holidayId, $conn) {
		$query="SELECT holidayId, holidayName, holidayTime, textColor, backgroundColor, extraFilter, extraInformation, flags FROM holiday WHERE holidayId = '$holidayId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Holiday, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Holiday, Duplicate or No Record');
		list($holidayId, $holidayName, $holidayTime, $textColor, $backgroundColor, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->holidayId = $holidayId;
		if (! is_null($holidayName))	{
			$this->holidayName = $holidayName;
		}
		if (! is_null($holidayTime))	{
			$this->holidayTime = null;
			try	{
				$this->holidayTime = new DateAndTime($this->database, $holidayTime, $this->conn);
			} catch (Exception $e)	{
				$this->holidayTime = null;
			}
		}
		if (! is_null($textColor))	{
			$this->textColor = $textColor;
		}
		if (! is_null($backgroundColor))	{
			$this->backgroundColor = $backgroundColor;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT holidayName, holidayTime, textColor, backgroundColor, extraFilter, extraInformation, flags FROM holiday WHERE holidayId = '$this->holidayId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Holiday, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Holiday, [Clone] Duplicate or No Record');
		list($holidayName, $holidayTime, $textColor, $backgroundColor, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['holidayName'] = $holidayName;
		$masterDataArray['holidayTime'] = $holidayTime;
		$masterDataArray['textColor'] = $textColor;
		$masterDataArray['backgroundColor'] = $backgroundColor;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO holiday ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Holiday [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Holiday [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Holiday [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Attendance extends Object {
	private $attendanceId;
	private $attendanceName;
	private $course;
	private $month;
	private $year;
	private $attendanceFile;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function recordAttendance($database, $conn, $profile1, $loginId, $timetableId, $folderPath, $systemTime1)	{
		/*
		Allow Loose, Allow Only within the specified day 
		*/
		$promise1 = new Promise();
		$login1 = new Login($database, $loginId, $conn);
		if (! ($login1->isStudent() || $login1->isCourseInstructor() || $login1->isNormalUser())) Object::shootException("This user type is not defined in the system");
		$timetable1 = new Timetable($database, $timetableId, $conn);
		if (is_null($timetable1->getDayOfAWeek())) Object::shootException("Timetable has no Day of A Week");
		if (intval($timetable1->getDayOfAWeek()->getOffsetValue()) != $systemTime1->getDayOfAWeekOffsetValue($profile1)) Object::shootException("Attendance is Enabled for today only, you can not take Attendance of Another Day");
		$user1 = Login::getUserWithThisLogin($database, $conn, $login1);
		if (is_null($user1)) Object::shootException("A Reference User could not be found");
		//Preparing Data 
		$monthId = MonthOfAYear::getMonthOfAYearReferenceFromMonthNumber($database, $systemTime1->getMonth(), $conn);
		if (is_null($monthId)) Object::shootException("Month Reference Were not found");
		$month1 = new MonthOfAYear($database, $monthId, $conn);
		$year = $systemTime1->getYear();
		$courseId = 0;
		$filename = "attendance_".$courseId."_".$monthId."_".$year.".csv";
		$captionName = $month1->getMonthAbbreviation().", $year";
		$query = "INSERT INTO attendance (attendanceName, monthId, _ayear, attendanceFile) VALUES('$captionName', '$monthId', '$year', '$filename')";
		$userType = 0;
		if ($login1->isStudent())	{
			if (is_null($user1->getCourse())) Object::shootException("Student is not attached to any course");
			$courseId = $user1->getCourse()->getCourseId();
			$filename = "attendance_".$courseId."_".$monthId."_".$year.".csv";
			$query = "INSERT INTO attendance (attendanceName, courseId, monthId, _ayear, attendanceFile) VALUES('$captionName', '$courseId', '$monthId', '$year', '$filename')";
			$userType = UserType::$__STUDENT;
		} else if ($login1->isCourseInstructor())	{
			$userType = UserType::$__COURSEINSTRUCTOR;
		} else if ($login1->isNormalUser())	{
			$userType = UserType::$__USER;
		}
		$timeString = $systemTime1->getDateAndTimeString();
		$lineToWrite = "$loginId,$timetableId,$timeString,$userType\n";
		$fullFilePath = $folderPath.$filename;
		if (! file_exists($fullFilePath))	{
			//We must register a record for this file 
			$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not register Attendance File Manager");
		}
		//Opening for appending
		if (! file_put_contents($fullFilePath, $lineToWrite, FILE_APPEND | LOCK_EX)) Object::shootException("There were problems in recording your attendance");
		$promise1->setPromise(true);
		return $promise1;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Attendance/attendanceName,text,1043;year,text,1043;attendanceFile,text,1043;extraFilter,text,1043;extraInformation,text,1043;flags,text,1043";
		$lineToView .= Course::getAvailableViewableColumns();
		$lineToView .= MonthOfAYear::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "attendance";
	}
	public final static function getClassContextName()	{
		return "manageattendance";
	}
	public final static function getUniqueAttendanceId($database, $conn)	{
		$query="SELECT attendanceId FROM attendance";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Attendance, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Attendance, None or Duplicate Row/Multiple Rows Found');
		list($attendanceId)=mysql_fetch_row($result);
		return $attendanceId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT attendanceId, attendanceName FROM attendance";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Attendance, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $attendanceName, $courseId, $monthId, $_ayear, $attendanceFile, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO attendance (attendanceName, courseId, monthId, _ayear, attendanceFile, extraFilter, extraInformation, flags) VALUES('$attendanceName', '$courseId', '$monthId', '$_ayear', '$attendanceFile', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Attendance, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Attendance, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Attendance, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->attendanceId;
	}
	public function getAttendanceId() {
		return $this->attendanceId;
	}
	public function getAttendanceName() {
		return $this->attendanceName;
	}
	public function setAttendanceName($attendanceName) {
		if (! is_null($attendanceName))	{
			$this->addToUpdateList("attendanceName", $attendanceName);
			$this->attendanceName = $attendanceName;
		}
	}
	public function getCourse() {
		return $this->course;
	}
	public function setCourse($courseId) {
		if (! is_null($courseId))	{
			$this->addToUpdateList("courseId", $courseId);
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
	}
	public function getMonth() {
		return $this->month;
	}
	public function setMonth($monthId) {
		if (! is_null($monthId))	{
			$this->addToUpdateList("monthId", $monthId);
			$this->month = null;
			try	{
				$this->month = new MonthOfAYear($this->database, $monthId, $this->conn);
			} catch (Exception $e)	{
				$this->month = null;
			}
		}
	}
	public function getYear() {
		return $this->year;
	}
	public function setYear($_ayear) {
		if (! is_null($_ayear))	{
			$this->addToUpdateList("_ayear", $_ayear);
			$this->year = $_ayear;
		}
	}
	public function getAttendanceFile() {
		return $this->attendanceFile;
	}
	public function setAttendanceFile($attendanceFile) {
		if (! is_null($attendanceFile))	{
			$this->addToUpdateList("attendanceFile", $attendanceFile);
			$this->attendanceFile = $attendanceFile;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT attendanceId FROM attendance";
		return $query;
	}
	public function __construct($database, $attendanceId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Attendance")) Object::shootException("Attendance System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $attendanceId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->attendanceId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Attendance")) Object::shootException("Attendance System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE attendance SET $setList WHERE attendanceId = '$this->attendanceId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Attendance, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Attendance")) Object::shootException("Attendance System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM attendance WHERE attendanceId = '$this->attendanceId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Attendance, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Attendance";
	}
	protected function getProperties()	{
		return "attendanceId=$this->attendanceId"."@attendanceName=$this->attendanceName"."@year=$this->year"."@attendanceFile=$this->attendanceFile"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1043.attendanceId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->attendanceId))."@1043.attendanceName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->attendanceName))."@1043.year=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->year))."@1043.attendanceFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->attendanceFile))."@1043.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1043.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1043.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Attendance (NAMESPACETAG = 1043) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->course))	{
			$this->course->debug();
		}
		if (! is_null($this->month))	{
			$this->month->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->course))	{
			$matrix1=$this->course->searchMatrix($matrix1);
		}
		if (! is_null($this->month))	{
			$matrix1=$this->month->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->course))	{
			$csvProcessor1=$this->course->processCSV($csvProcessor1);
		}
		if (! is_null($this->month))	{
			$csvProcessor1=$this->month->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $attendanceId, $conn) {
		$query="SELECT attendanceId, attendanceName, courseId, monthId, _ayear, attendanceFile, extraFilter, extraInformation, flags FROM attendance WHERE attendanceId = '$attendanceId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Attendance, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Attendance, Duplicate or No Record');
		list($attendanceId, $attendanceName, $courseId, $monthId, $_ayear, $attendanceFile, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->attendanceId = $attendanceId;
		if (! is_null($attendanceName))	{
			$this->attendanceName = $attendanceName;
		}
		if (! is_null($courseId))	{
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
		if (! is_null($monthId))	{
			$this->month = null;
			try	{
				$this->month = new MonthOfAYear($this->database, $monthId, $this->conn);
			} catch (Exception $e)	{
				$this->month = null;
			}
		}
		if (! is_null($_ayear))	{
			$this->year = $_ayear;
		}
		if (! is_null($attendanceFile))	{
			$this->attendanceFile = $attendanceFile;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT attendanceName, courseId, monthId, _ayear, attendanceFile, extraFilter, extraInformation, flags FROM attendance WHERE attendanceId = '$this->attendanceId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Attendance, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Attendance, [Clone] Duplicate or No Record');
		list($attendanceName, $courseId, $monthId, $_ayear, $attendanceFile, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['attendanceName'] = $attendanceName;
		$masterDataArray['courseId'] = $courseId;
		$masterDataArray['monthId'] = $monthId;
		$masterDataArray['_ayear'] = $_ayear;
		$masterDataArray['attendanceFile'] = $attendanceFile;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO attendance ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Attendance [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Attendance [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Attendance [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class LeaveType extends Object {
	private $typeId;
	private $typeName;
	private $minimumNumberOfDaysPriorNotice;
	private $maximumNumberOfDaysAllocatedPerYear;
	private $maximumNumberOfContinuousDaysPerLeave;
	private $numberOfTimesThisLeaveCanBeTakenInAYear;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@LeaveType/typeName,text,1041;minimumNumberOfDaysPriorNotice,text,1041;maximumNumberOfDaysAllocatedPerYear,text,1041;maximumNumberOfContinuousDaysPerLeave,text,1041;numberOfTimesThisLeaveCanBeTakenInAYear,text,1041;extraFilter,text,1041;extraInformation,text,1041;flags,text,1041";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "leavetype";
	}
	public final static function getClassContextName()	{
		return "manageleavetype";
	}
	public final static function getUniqueTypeId($database, $conn)	{
		$query="SELECT typeId FROM leaveType";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveType, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('LeaveType, None or Duplicate Row/Multiple Rows Found');
		list($typeId)=mysql_fetch_row($result);
		return $typeId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT typeId, typeName FROM leaveType";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveType, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $typeName, $minDaysNotice, $maxDaysAllocatedPerYear, $maxContinuousDaysPerLeave, $numberOfTimesThisLeaveCanBeTakenInAYear, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO leaveType (typeName, minDaysNotice, maxDaysAllocatedPerYear, maxContinuousDaysPerLeave, numberOfTimesThisLeaveCanBeTakenInAYear, extraFilter, extraInformation, flags) VALUES('$typeName', '$minDaysNotice', '$maxDaysAllocatedPerYear', '$maxContinuousDaysPerLeave', '$numberOfTimesThisLeaveCanBeTakenInAYear', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveType, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveType, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('LeaveType, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->typeId;
	}
	public function getTypeId() {
		return $this->typeId;
	}
	public function getTypeName() {
		return $this->typeName;
	}
	public function setTypeName($typeName) {
		if (! is_null($typeName))	{
			$this->addToUpdateList("typeName", $typeName);
			$this->typeName = $typeName;
		}
	}
	public function getMinimumNumberOfDaysPriorNotice() {
		return $this->minimumNumberOfDaysPriorNotice;
	}
	public function setMinimumNumberOfDaysPriorNotice($minDaysNotice) {
		if (! is_null($minDaysNotice))	{
			$this->addToUpdateList("minDaysNotice", $minDaysNotice);
			$this->minimumNumberOfDaysPriorNotice = $minDaysNotice;
		}
	}
	public function getMaximumNumberOfDaysAllocatedPerYear() {
		return $this->maximumNumberOfDaysAllocatedPerYear;
	}
	public function setMaximumNumberOfDaysAllocatedPerYear($maxDaysAllocatedPerYear) {
		if (! is_null($maxDaysAllocatedPerYear))	{
			$this->addToUpdateList("maxDaysAllocatedPerYear", $maxDaysAllocatedPerYear);
			$this->maximumNumberOfDaysAllocatedPerYear = $maxDaysAllocatedPerYear;
		}
	}
	public function getMaximumNumberOfContinuousDaysPerLeave() {
		return $this->maximumNumberOfContinuousDaysPerLeave;
	}
	public function setMaximumNumberOfContinuousDaysPerLeave($maxContinuousDaysPerLeave) {
		if (! is_null($maxContinuousDaysPerLeave))	{
			$this->addToUpdateList("maxContinuousDaysPerLeave", $maxContinuousDaysPerLeave);
			$this->maximumNumberOfContinuousDaysPerLeave = $maxContinuousDaysPerLeave;
		}
	}
	public function getNumberOfTimesThisLeaveCanBeTakenInAYear() {
		return $this->numberOfTimesThisLeaveCanBeTakenInAYear;
	}
	public function setNumberOfTimesThisLeaveCanBeTakenInAYear($numberOfTimesThisLeaveCanBeTakenInAYear) {
		if (! is_null($numberOfTimesThisLeaveCanBeTakenInAYear))	{
			$this->addToUpdateList("numberOfTimesThisLeaveCanBeTakenInAYear", $numberOfTimesThisLeaveCanBeTakenInAYear);
			$this->numberOfTimesThisLeaveCanBeTakenInAYear = $numberOfTimesThisLeaveCanBeTakenInAYear;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT typeId FROM leaveType";
		return $query;
	}
	public function __construct($database, $typeId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "LeaveType")) Object::shootException("LeaveType System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $typeId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->typeId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "LeaveType")) Object::shootException("LeaveType System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE leaveType SET $setList WHERE typeId = '$this->typeId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveType, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "LeaveType")) Object::shootException("LeaveType System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM leaveType WHERE typeId = '$this->typeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveType, Row Deletion Failed');
	}
	public function getClassName()	{
		return "LeaveType";
	}
	protected function getProperties()	{
		return "typeId=$this->typeId"."@typeName=$this->typeName"."@minimumNumberOfDaysPriorNotice=$this->minimumNumberOfDaysPriorNotice"."@maximumNumberOfDaysAllocatedPerYear=$this->maximumNumberOfDaysAllocatedPerYear"."@maximumNumberOfContinuousDaysPerLeave=$this->maximumNumberOfContinuousDaysPerLeave"."@numberOfTimesThisLeaveCanBeTakenInAYear=$this->numberOfTimesThisLeaveCanBeTakenInAYear"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1041.typeId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->typeId))."@1041.typeName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->typeName))."@1041.minimumNumberOfDaysPriorNotice=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->minimumNumberOfDaysPriorNotice))."@1041.maximumNumberOfDaysAllocatedPerYear=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->maximumNumberOfDaysAllocatedPerYear))."@1041.maximumNumberOfContinuousDaysPerLeave=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->maximumNumberOfContinuousDaysPerLeave))."@1041.numberOfTimesThisLeaveCanBeTakenInAYear=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->numberOfTimesThisLeaveCanBeTakenInAYear))."@1041.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1041.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1041.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: LeaveType (NAMESPACETAG = 1041) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $typeId, $conn) {
		$query="SELECT typeId, typeName, minDaysNotice, maxDaysAllocatedPerYear, maxContinuousDaysPerLeave, numberOfTimesThisLeaveCanBeTakenInAYear, extraFilter, extraInformation, flags FROM leaveType WHERE typeId = '$typeId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('LeaveType, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('LeaveType, Duplicate or No Record');
		list($typeId, $typeName, $minDaysNotice, $maxDaysAllocatedPerYear, $maxContinuousDaysPerLeave, $numberOfTimesThisLeaveCanBeTakenInAYear, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->typeId = $typeId;
		if (! is_null($typeName))	{
			$this->typeName = $typeName;
		}
		if (! is_null($minDaysNotice))	{
			$this->minimumNumberOfDaysPriorNotice = $minDaysNotice;
		}
		if (! is_null($maxDaysAllocatedPerYear))	{
			$this->maximumNumberOfDaysAllocatedPerYear = $maxDaysAllocatedPerYear;
		}
		if (! is_null($maxContinuousDaysPerLeave))	{
			$this->maximumNumberOfContinuousDaysPerLeave = $maxContinuousDaysPerLeave;
		}
		if (! is_null($numberOfTimesThisLeaveCanBeTakenInAYear))	{
			$this->numberOfTimesThisLeaveCanBeTakenInAYear = $numberOfTimesThisLeaveCanBeTakenInAYear;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT typeName, minDaysNotice, maxDaysAllocatedPerYear, maxContinuousDaysPerLeave, numberOfTimesThisLeaveCanBeTakenInAYear, extraFilter, extraInformation, flags FROM leaveType WHERE typeId = '$this->typeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveType, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('LeaveType, [Clone] Duplicate or No Record');
		list($typeName, $minDaysNotice, $maxDaysAllocatedPerYear, $maxContinuousDaysPerLeave, $numberOfTimesThisLeaveCanBeTakenInAYear, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['typeName'] = $typeName;
		$masterDataArray['minDaysNotice'] = $minDaysNotice;
		$masterDataArray['maxDaysAllocatedPerYear'] = $maxDaysAllocatedPerYear;
		$masterDataArray['maxContinuousDaysPerLeave'] = $maxContinuousDaysPerLeave;
		$masterDataArray['numberOfTimesThisLeaveCanBeTakenInAYear'] = $numberOfTimesThisLeaveCanBeTakenInAYear;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO leaveType ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("LeaveType [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("LeaveType [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("LeaveType [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class LeaveApprovalSchemaGroup extends Object {
	private $groupId;
	private $jobTitle;
	private $leaveType;
	private $groupName;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@LeaveApprovalSchemaGroup/groupName,text,1042;extraFilter,text,1042;extraInformation,text,1042;flags,text,1042";
		$lineToView .= JobTitle::getAvailableViewableColumns();
		$lineToView .= LeaveType::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "leaveapprovalschemagroup";
	}
	public final static function getClassContextName()	{
		return "manageleaveapprovalschemagroup";
	}
	public final static function getUniqueGroupId($database, $conn)	{
		$query="SELECT groupId FROM leaveApprovalSchemaGroup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApprovalSchemaGroup, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('LeaveApprovalSchemaGroup, None or Duplicate Row/Multiple Rows Found');
		list($groupId)=mysql_fetch_row($result);
		return $groupId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT groupId, groupName FROM leaveApprovalSchemaGroup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApprovalSchemaGroup, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $jobId, $typeId, $groupName, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO leaveApprovalSchemaGroup (jobId, typeId, groupName, extraFilter, extraInformation, flags) VALUES('$jobId', '$typeId', '$groupName', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApprovalSchemaGroup, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApprovalSchemaGroup, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('LeaveApprovalSchemaGroup, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->groupId;
	}
	public function getGroupId() {
		return $this->groupId;
	}
	public function getJobTitle() {
		return $this->jobTitle;
	}
	public function setJobTitle($jobId) {
		if (! is_null($jobId))	{
			$this->addToUpdateList("jobId", $jobId);
			$this->jobTitle = null;
			try	{
				$this->jobTitle = new JobTitle($this->database, $jobId, $this->conn);
			} catch (Exception $e)	{
				$this->jobTitle = null;
			}
		}
	}
	public function getLeaveType() {
		return $this->leaveType;
	}
	public function setLeaveType($typeId) {
		if (! is_null($typeId))	{
			$this->addToUpdateList("typeId", $typeId);
			$this->leaveType = null;
			try	{
				$this->leaveType = new LeaveType($this->database, $typeId, $this->conn);
			} catch (Exception $e)	{
				$this->leaveType = null;
			}
		}
	}
	public function getGroupName() {
		return $this->groupName;
	}
	public function setGroupName($groupName) {
		if (! is_null($groupName))	{
			$this->addToUpdateList("groupName", $groupName);
			$this->groupName = $groupName;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT groupId FROM leaveApprovalSchemaGroup";
		return $query;
	}
	public function __construct($database, $groupId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "LeaveApprovalSchemaGroup")) Object::shootException("LeaveApprovalSchemaGroup System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $groupId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->groupId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "LeaveApprovalSchemaGroup")) Object::shootException("LeaveApprovalSchemaGroup System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE leaveApprovalSchemaGroup SET $setList WHERE groupId = '$this->groupId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveApprovalSchemaGroup, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "LeaveApprovalSchemaGroup")) Object::shootException("LeaveApprovalSchemaGroup System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM leaveApprovalSchemaGroup WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveApprovalSchemaGroup, Row Deletion Failed');
	}
	public function getClassName()	{
		return "LeaveApprovalSchemaGroup";
	}
	protected function getProperties()	{
		return "groupId=$this->groupId"."@groupName=$this->groupName"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1042.groupId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->groupId))."@1042.groupName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->groupName))."@1042.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1042.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1042.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: LeaveApprovalSchemaGroup (NAMESPACETAG = 1042) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->jobTitle))	{
			$this->jobTitle->debug();
		}
		if (! is_null($this->leaveType))	{
			$this->leaveType->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->jobTitle))	{
			$matrix1=$this->jobTitle->searchMatrix($matrix1);
		}
		if (! is_null($this->leaveType))	{
			$matrix1=$this->leaveType->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->jobTitle))	{
			$csvProcessor1=$this->jobTitle->processCSV($csvProcessor1);
		}
		if (! is_null($this->leaveType))	{
			$csvProcessor1=$this->leaveType->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $groupId, $conn) {
		$query="SELECT groupId, jobId, typeId, groupName, extraFilter, extraInformation, flags FROM leaveApprovalSchemaGroup WHERE groupId = '$groupId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('LeaveApprovalSchemaGroup, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('LeaveApprovalSchemaGroup, Duplicate or No Record');
		list($groupId, $jobId, $typeId, $groupName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->groupId = $groupId;
		if (! is_null($jobId))	{
			$this->jobTitle = null;
			try	{
				$this->jobTitle = new JobTitle($this->database, $jobId, $this->conn);
			} catch (Exception $e)	{
				$this->jobTitle = null;
			}
		}
		if (! is_null($typeId))	{
			$this->leaveType = null;
			try	{
				$this->leaveType = new LeaveType($this->database, $typeId, $this->conn);
			} catch (Exception $e)	{
				$this->leaveType = null;
			}
		}
		if (! is_null($groupName))	{
			$this->groupName = $groupName;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT jobId, typeId, groupName, extraFilter, extraInformation, flags FROM leaveApprovalSchemaGroup WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveApprovalSchemaGroup, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('LeaveApprovalSchemaGroup, [Clone] Duplicate or No Record');
		list($jobId, $typeId, $groupName, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['jobId'] = $jobId;
		$masterDataArray['typeId'] = $typeId;
		$masterDataArray['groupName'] = $groupName;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO leaveApprovalSchemaGroup ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("LeaveApprovalSchemaGroup [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("LeaveApprovalSchemaGroup [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("LeaveApprovalSchemaGroup [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class LeaveApprovalSchema extends Object {
	private $schemaId;
	private $schemaName;
	private $schemaGroup;
	private $sequenceNumber;
	private $jobTitle;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@LeaveApprovalSchema/schemaName,text,1043;sequenceNumber,text,1043;extraFilter,text,1043;extraInformation,text,1043;flags,text,1043";
		$lineToView .= LeaveApprovalSchemaGroup::getAvailableViewableColumns();
		$lineToView .= JobTitle::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "leaveapprovalschema";
	}
	public final static function getClassContextName()	{
		return "manageleaveapprovalschema";
	}
	public final static function getUniqueSchemaId($database, $conn)	{
		$query="SELECT schemaId FROM leaveApprovalSchema";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApprovalSchema, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('LeaveApprovalSchema, None or Duplicate Row/Multiple Rows Found');
		list($schemaId)=mysql_fetch_row($result);
		return $schemaId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT schemaId, schemaName FROM leaveApprovalSchema";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApprovalSchema, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $schemaName, $groupId, $sequenceNumber, $jobId, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO leaveApprovalSchema (schemaName, groupId, sequenceNumber, jobId, extraFilter, extraInformation, flags) VALUES('$schemaName', '$groupId', '$sequenceNumber', '$jobId', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApprovalSchema, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApprovalSchema, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('LeaveApprovalSchema, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->schemaId;
	}
	public function getSchemaId() {
		return $this->schemaId;
	}
	public function getSchemaName() {
		return $this->schemaName;
	}
	public function setSchemaName($schemaName) {
		if (! is_null($schemaName))	{
			$this->addToUpdateList("schemaName", $schemaName);
			$this->schemaName = $schemaName;
		}
	}
	public function getSchemaGroup() {
		return $this->schemaGroup;
	}
	public function setSchemaGroup($groupId) {
		if (! is_null($groupId))	{
			$this->addToUpdateList("groupId", $groupId);
			$this->schemaGroup = null;
			try	{
				$this->schemaGroup = new LeaveApprovalSchemaGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->schemaGroup = null;
			}
		}
	}
	public function getSequenceNumber() {
		return $this->sequenceNumber;
	}
	public function setSequenceNumber($sequenceNumber) {
		if (! is_null($sequenceNumber))	{
			$this->addToUpdateList("sequenceNumber", $sequenceNumber);
			$this->sequenceNumber = $sequenceNumber;
		}
	}
	public function getJobTitle() {
		return $this->jobTitle;
	}
	public function setJobTitle($jobId) {
		if (! is_null($jobId))	{
			$this->addToUpdateList("jobId", $jobId);
			$this->jobTitle = null;
			try	{
				$this->jobTitle = new JobTitle($this->database, $jobId, $this->conn);
			} catch (Exception $e)	{
				$this->jobTitle = null;
			}
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT schemaId FROM leaveApprovalSchema";
		return $query;
	}
	public function __construct($database, $schemaId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "LeaveApprovalSchema")) Object::shootException("LeaveApprovalSchema System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $schemaId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->schemaId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "LeaveApprovalSchema")) Object::shootException("LeaveApprovalSchema System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE leaveApprovalSchema SET $setList WHERE schemaId = '$this->schemaId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveApprovalSchema, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "LeaveApprovalSchema")) Object::shootException("LeaveApprovalSchema System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM leaveApprovalSchema WHERE schemaId = '$this->schemaId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveApprovalSchema, Row Deletion Failed');
	}
	public function getClassName()	{
		return "LeaveApprovalSchema";
	}
	protected function getProperties()	{
		return "schemaId=$this->schemaId"."@schemaName=$this->schemaName"."@sequenceNumber=$this->sequenceNumber"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1043.schemaId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->schemaId))."@1043.schemaName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->schemaName))."@1043.sequenceNumber=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->sequenceNumber))."@1043.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1043.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1043.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: LeaveApprovalSchema (NAMESPACETAG = 1043) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->schemaGroup))	{
			$this->schemaGroup->debug();
		}
		if (! is_null($this->jobTitle))	{
			$this->jobTitle->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->schemaGroup))	{
			$matrix1=$this->schemaGroup->searchMatrix($matrix1);
		}
		if (! is_null($this->jobTitle))	{
			$matrix1=$this->jobTitle->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->schemaGroup))	{
			$csvProcessor1=$this->schemaGroup->processCSV($csvProcessor1);
		}
		if (! is_null($this->jobTitle))	{
			$csvProcessor1=$this->jobTitle->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $schemaId, $conn) {
		$query="SELECT schemaId, schemaName, groupId, sequenceNumber, jobId, extraFilter, extraInformation, flags FROM leaveApprovalSchema WHERE schemaId = '$schemaId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('LeaveApprovalSchema, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('LeaveApprovalSchema, Duplicate or No Record');
		list($schemaId, $schemaName, $groupId, $sequenceNumber, $jobId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->schemaId = $schemaId;
		if (! is_null($schemaName))	{
			$this->schemaName = $schemaName;
		}
		if (! is_null($groupId))	{
			$this->schemaGroup = null;
			try	{
				$this->schemaGroup = new LeaveApprovalSchemaGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->schemaGroup = null;
			}
		}
		if (! is_null($sequenceNumber))	{
			$this->sequenceNumber = $sequenceNumber;
		}
		if (! is_null($jobId))	{
			$this->jobTitle = null;
			try	{
				$this->jobTitle = new JobTitle($this->database, $jobId, $this->conn);
			} catch (Exception $e)	{
				$this->jobTitle = null;
			}
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT schemaName, groupId, sequenceNumber, jobId, extraFilter, extraInformation, flags FROM leaveApprovalSchema WHERE schemaId = '$this->schemaId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveApprovalSchema, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('LeaveApprovalSchema, [Clone] Duplicate or No Record');
		list($schemaName, $groupId, $sequenceNumber, $jobId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['schemaName'] = $schemaName;
		$masterDataArray['groupId'] = $groupId;
		$masterDataArray['sequenceNumber'] = $sequenceNumber;
		$masterDataArray['jobId'] = $jobId;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO leaveApprovalSchema ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("LeaveApprovalSchema [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("LeaveApprovalSchema [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("LeaveApprovalSchema [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class LeaveApplication extends Object {
	private $leaveId;
	private $login;
	private $schemaGroup;
	private $leaveName;
	private $timeOfApplication;
	private $leaveApprovalSchemaList;
	private $timeOfApproval;
	private $startTime;
	private $endTime;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@LeaveApplication/leaveName,text,1044;leaveApprovalSchemaList,text,1044;extraFilter,text,1044;extraInformation,text,1044;flags,text,1044";
		$lineToView .= Login::getAvailableViewableColumns();
		$lineToView .= LeaveApprovalSchemaGroup::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "leaveapplication";
	}
	public final static function getClassContextName()	{
		return "manageleaveapplication";
	}
	public final static function getUniqueLeaveId($database, $conn)	{
		$query="SELECT leaveId FROM leaveApplication";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApplication, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('LeaveApplication, None or Duplicate Row/Multiple Rows Found');
		list($leaveId)=mysql_fetch_row($result);
		return $leaveId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT leaveId, leaveName FROM leaveApplication";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApplication, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $loginId, $groupId, $leaveName, $timeOfApplication, $leaveApprovalSchemaList, $timeOfApproval, $startTime, $endTime, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO leaveApplication (loginId, groupId, leaveName, timeOfApplication, leaveApprovalSchemaList, timeOfApproval, startTime, endTime, extraFilter, extraInformation, flags) VALUES('$loginId', '$groupId', '$leaveName', '$timeOfApplication', '$leaveApprovalSchemaList', '$timeOfApproval', '$startTime', '$endTime', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApplication, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('LeaveApplication, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('LeaveApplication, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->leaveId;
	}
	public function getLeaveId() {
		return $this->leaveId;
	}
	public function getLogin() {
		return $this->login;
	}
	public function setLogin($loginId) {
		if (! is_null($loginId))	{
			$this->addToUpdateList("loginId", $loginId);
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
	}
	public function getSchemaGroup() {
		return $this->schemaGroup;
	}
	public function setSchemaGroup($groupId) {
		if (! is_null($groupId))	{
			$this->addToUpdateList("groupId", $groupId);
			$this->schemaGroup = null;
			try	{
				$this->schemaGroup = new LeaveApprovalSchemaGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->schemaGroup = null;
			}
		}
	}
	public function getLeaveName() {
		return $this->leaveName;
	}
	public function setLeaveName($leaveName) {
		if (! is_null($leaveName))	{
			$this->addToUpdateList("leaveName", $leaveName);
			$this->leaveName = $leaveName;
		}
	}
	public function getTimeOfApplication() {
		return $this->timeOfApplication;
	}
	public function setTimeOfApplication($timeOfApplication) {
		if (! is_null($timeOfApplication))	{
			$this->addToUpdateList("timeOfApplication", $timeOfApplication);
			$this->timeOfApplication = null;
			try	{
				$this->timeOfApplication = new DateAndTime($this->database, $timeOfApplication, $this->conn);
			} catch (Exception $e)	{
				$this->timeOfApplication = null;
			}
		}
	}
	public function getLeaveApprovalSchemaList() {
		return $this->leaveApprovalSchemaList;
	}
	public function setLeaveApprovalSchemaList($leaveApprovalSchemaList) {
		if (! is_null($leaveApprovalSchemaList))	{
			$this->addToUpdateList("leaveApprovalSchemaList", $leaveApprovalSchemaList);
			$this->leaveApprovalSchemaList = $leaveApprovalSchemaList;
		}
	}
	public function getTimeOfApproval() {
		return $this->timeOfApproval;
	}
	public function setTimeOfApproval($timeOfApproval) {
		if (! is_null($timeOfApproval))	{
			$this->addToUpdateList("timeOfApproval", $timeOfApproval);
			$this->timeOfApproval = null;
			try	{
				$this->timeOfApproval = new DateAndTime($this->database, $timeOfApproval, $this->conn);
			} catch (Exception $e)	{
				$this->timeOfApproval = null;
			}
		}
	}
	public function getStartTime() {
		return $this->startTime;
	}
	public function setStartTime($startTime) {
		if (! is_null($startTime))	{
			$this->addToUpdateList("startTime", $startTime);
			$this->startTime = null;
			try	{
				$this->startTime = new DateAndTime($this->database, $startTime, $this->conn);
			} catch (Exception $e)	{
				$this->startTime = null;
			}
		}
	}
	public function getEndTime() {
		return $this->endTime;
	}
	public function setEndTime($endTime) {
		if (! is_null($endTime))	{
			$this->addToUpdateList("endTime", $endTime);
			$this->endTime = null;
			try	{
				$this->endTime = new DateAndTime($this->database, $endTime, $this->conn);
			} catch (Exception $e)	{
				$this->endTime = null;
			}
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT leaveId FROM leaveApplication";
		return $query;
	}
	public function __construct($database, $leaveId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "LeaveApplication")) Object::shootException("LeaveApplication System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $leaveId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->leaveId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "LeaveApplication")) Object::shootException("LeaveApplication System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE leaveApplication SET $setList WHERE leaveId = '$this->leaveId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveApplication, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "LeaveApplication")) Object::shootException("LeaveApplication System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM leaveApplication WHERE leaveId = '$this->leaveId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveApplication, Row Deletion Failed');
	}
	public function getClassName()	{
		return "LeaveApplication";
	}
	protected function getProperties()	{
		return "leaveId=$this->leaveId"."@leaveName=$this->leaveName"."@leaveApprovalSchemaList=$this->leaveApprovalSchemaList"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1044.leaveId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->leaveId))."@1044.leaveName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->leaveName))."@1044.leaveApprovalSchemaList=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->leaveApprovalSchemaList))."@1044.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1044.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1044.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: LeaveApplication (NAMESPACETAG = 1044) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->login))	{
			$this->login->debug();
		}
		if (! is_null($this->schemaGroup))	{
			$this->schemaGroup->debug();
		}
		if (! is_null($this->timeOfApplication))	{
			$this->timeOfApplication->debug();
		}
		if (! is_null($this->timeOfApproval))	{
			$this->timeOfApproval->debug();
		}
		if (! is_null($this->startTime))	{
			$this->startTime->debug();
		}
		if (! is_null($this->endTime))	{
			$this->endTime->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->login))	{
			$matrix1=$this->login->searchMatrix($matrix1);
		}
		if (! is_null($this->schemaGroup))	{
			$matrix1=$this->schemaGroup->searchMatrix($matrix1);
		}
		if (! is_null($this->timeOfApplication))	{
			$matrix1=$this->timeOfApplication->searchMatrix($matrix1);
		}
		if (! is_null($this->timeOfApproval))	{
			$matrix1=$this->timeOfApproval->searchMatrix($matrix1);
		}
		if (! is_null($this->startTime))	{
			$matrix1=$this->startTime->searchMatrix($matrix1);
		}
		if (! is_null($this->endTime))	{
			$matrix1=$this->endTime->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->login))	{
			$csvProcessor1=$this->login->processCSV($csvProcessor1);
		}
		if (! is_null($this->schemaGroup))	{
			$csvProcessor1=$this->schemaGroup->processCSV($csvProcessor1);
		}
		if (! is_null($this->timeOfApplication))	{
			$csvProcessor1=$this->timeOfApplication->processCSV($csvProcessor1);
		}
		if (! is_null($this->timeOfApproval))	{
			$csvProcessor1=$this->timeOfApproval->processCSV($csvProcessor1);
		}
		if (! is_null($this->startTime))	{
			$csvProcessor1=$this->startTime->processCSV($csvProcessor1);
		}
		if (! is_null($this->endTime))	{
			$csvProcessor1=$this->endTime->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $leaveId, $conn) {
		$query="SELECT leaveId, loginId, groupId, leaveName, timeOfApplication, leaveApprovalSchemaList, timeOfApproval, startTime, endTime, extraFilter, extraInformation, flags FROM leaveApplication WHERE leaveId = '$leaveId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('LeaveApplication, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('LeaveApplication, Duplicate or No Record');
		list($leaveId, $loginId, $groupId, $leaveName, $timeOfApplication, $leaveApprovalSchemaList, $timeOfApproval, $startTime, $endTime, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->leaveId = $leaveId;
		if (! is_null($loginId))	{
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
		if (! is_null($groupId))	{
			$this->schemaGroup = null;
			try	{
				$this->schemaGroup = new LeaveApprovalSchemaGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->schemaGroup = null;
			}
		}
		if (! is_null($leaveName))	{
			$this->leaveName = $leaveName;
		}
		if (! is_null($timeOfApplication))	{
			$this->timeOfApplication = null;
			try	{
				$this->timeOfApplication = new DateAndTime($this->database, $timeOfApplication, $this->conn);
			} catch (Exception $e)	{
				$this->timeOfApplication = null;
			}
		}
		if (! is_null($leaveApprovalSchemaList))	{
			$this->leaveApprovalSchemaList = $leaveApprovalSchemaList;
		}
		if (! is_null($timeOfApproval))	{
			$this->timeOfApproval = null;
			try	{
				$this->timeOfApproval = new DateAndTime($this->database, $timeOfApproval, $this->conn);
			} catch (Exception $e)	{
				$this->timeOfApproval = null;
			}
		}
		if (! is_null($startTime))	{
			$this->startTime = null;
			try	{
				$this->startTime = new DateAndTime($this->database, $startTime, $this->conn);
			} catch (Exception $e)	{
				$this->startTime = null;
			}
		}
		if (! is_null($endTime))	{
			$this->endTime = null;
			try	{
				$this->endTime = new DateAndTime($this->database, $endTime, $this->conn);
			} catch (Exception $e)	{
				$this->endTime = null;
			}
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT loginId, groupId, leaveName, timeOfApplication, leaveApprovalSchemaList, timeOfApproval, startTime, endTime, extraFilter, extraInformation, flags FROM leaveApplication WHERE leaveId = '$this->leaveId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('LeaveApplication, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('LeaveApplication, [Clone] Duplicate or No Record');
		list($loginId, $groupId, $leaveName, $timeOfApplication, $leaveApprovalSchemaList, $timeOfApproval, $startTime, $endTime, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['loginId'] = $loginId;
		$masterDataArray['groupId'] = $groupId;
		$masterDataArray['leaveName'] = $leaveName;
		$masterDataArray['timeOfApplication'] = $timeOfApplication;
		$masterDataArray['leaveApprovalSchemaList'] = $leaveApprovalSchemaList;
		$masterDataArray['timeOfApproval'] = $timeOfApproval;
		$masterDataArray['startTime'] = $startTime;
		$masterDataArray['endTime'] = $endTime;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO leaveApplication ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("LeaveApplication [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("LeaveApplication [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("LeaveApplication [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class MessageType extends Object {
	private $typeId;
	private $typeName;
	private $typeCode;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	static $__MESSAGE_TYPE_ALL = 0;
	static $__MESSAGE_TYPE_LOCAL = 1;
	static $__MESSAGE_TYPE_SMS = 2;
	static $__MESSAGE_TYPE_EMAIL = 3;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getMessageTypeIdFromCode($database, $conn, $code)	{
		$query = "SELECT typeId FROM messageType WHERE typeCode='$code'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Message Type [static], Could not get Type reference for Message");
		if (mysql_num_rows($result) != 1) Object::shootException("Message Type [static], Duplicate or No reference for Type of the Message");
		list ($id) = mysql_fetch_row($result);
		return $id;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@MessageType/typeName,text,1045;typeCode,text,1045;extraFilter,text,1045;extraInformation,text,1045;flags,text,1045";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "messagetype";
	}
	public final static function getClassContextName()	{
		return "managemessagetype";
	}
	public final static function getUniqueTypeId($database, $conn)	{
		$query="SELECT typeId FROM messageType";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MessageType, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('MessageType, None or Duplicate Row/Multiple Rows Found');
		list($typeId)=mysql_fetch_row($result);
		return $typeId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT typeId, typeName, typeCode FROM messageType";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MessageType, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val, $__code)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
			$list[$listsize]['code']=$__code;
		}
		return $list;
	}
	public final static function add($database, $conn, $typeName, $typeCode, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO messageType (typeName, typeCode, extraFilter, extraInformation, flags) VALUES('$typeName', '$typeCode', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MessageType, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MessageType, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('MessageType, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->typeId;
	}
	public function getTypeId() {
		return $this->typeId;
	}
	public function getTypeName() {
		return $this->typeName;
	}
	public function setTypeName($typeName) {
		if (! is_null($typeName))	{
			$this->addToUpdateList("typeName", $typeName);
			$this->typeName = $typeName;
		}
	}
	public function getTypeCode() {
		return $this->typeCode;
	}
	public function setTypeCode($typeCode) {
		if (! is_null($typeCode))	{
			$this->addToUpdateList("typeCode", $typeCode);
			$this->typeCode = $typeCode;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT typeId FROM messageType";
		return $query;
	}
	public function __construct($database, $typeId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "MessageType")) Object::shootException("MessageType System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $typeId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->typeId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "MessageType")) Object::shootException("MessageType System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE messageType SET $setList WHERE typeId = '$this->typeId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MessageType, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "MessageType")) Object::shootException("MessageType System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM messageType WHERE typeId = '$this->typeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MessageType, Row Deletion Failed');
	}
	public function getClassName()	{
		return "MessageType";
	}
	protected function getProperties()	{
		return "typeId=$this->typeId"."@typeName=$this->typeName"."@typeCode=$this->typeCode"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1045.typeId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->typeId))."@1045.typeName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->typeName))."@1045.typeCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->typeCode))."@1045.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1045.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1045.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: MessageType (NAMESPACETAG = 1045) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $typeId, $conn) {
		$query="SELECT typeId, typeName, typeCode, extraFilter, extraInformation, flags FROM messageType WHERE typeId = '$typeId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('MessageType, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('MessageType, Duplicate or No Record');
		list($typeId, $typeName, $typeCode, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->typeId = $typeId;
		if (! is_null($typeName))	{
			$this->typeName = $typeName;
		}
		if (! is_null($typeCode))	{
			$this->typeCode = $typeCode;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT typeName, typeCode, extraFilter, extraInformation, flags FROM messageType WHERE typeId = '$this->typeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MessageType, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('MessageType, [Clone] Duplicate or No Record');
		list($typeName, $typeCode, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['typeName'] = $typeName;
		$masterDataArray['typeCode'] = $typeCode;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO messageType ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("MessageType [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("MessageType [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("MessageType [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class MessagePolicyType extends Object {
	private $typeId;
	private $typeName;
	private $typeCode;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@MessagePolicyType/typeName,text,1046;typeCode,text,1046;extraFilter,text,1046;extraInformation,text,1046;flags,text,1046";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "messagepolicytype";
	}
	public final static function getClassContextName()	{
		return "managemessagepolicytype";
	}
	public final static function getUniqueTypeId($database, $conn)	{
		$query="SELECT typeId FROM messagePolicyType";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MessagePolicyType, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('MessagePolicyType, None or Duplicate Row/Multiple Rows Found');
		list($typeId)=mysql_fetch_row($result);
		return $typeId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT typeId, typeName FROM messagePolicyType";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MessagePolicyType, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $typeName, $typeCode, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO messagePolicyType (typeName, typeCode, extraFilter, extraInformation, flags) VALUES('$typeName', '$typeCode', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MessagePolicyType, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MessagePolicyType, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('MessagePolicyType, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->typeId;
	}
	public function getTypeId() {
		return $this->typeId;
	}
	public function getTypeName() {
		return $this->typeName;
	}
	public function setTypeName($typeName) {
		if (! is_null($typeName))	{
			$this->addToUpdateList("typeName", $typeName);
			$this->typeName = $typeName;
		}
	}
	public function getTypeCode() {
		return $this->typeCode;
	}
	public function setTypeCode($typeCode) {
		if (! is_null($typeCode))	{
			$this->addToUpdateList("typeCode", $typeCode);
			$this->typeCode = $typeCode;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT typeId FROM messagePolicyType";
		return $query;
	}
	public function __construct($database, $typeId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "MessagePolicyType")) Object::shootException("MessagePolicyType System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $typeId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->typeId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "MessagePolicyType")) Object::shootException("MessagePolicyType System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE messagePolicyType SET $setList WHERE typeId = '$this->typeId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MessagePolicyType, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "MessagePolicyType")) Object::shootException("MessagePolicyType System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM messagePolicyType WHERE typeId = '$this->typeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MessagePolicyType, Row Deletion Failed');
	}
	public function getClassName()	{
		return "MessagePolicyType";
	}
	protected function getProperties()	{
		return "typeId=$this->typeId"."@typeName=$this->typeName"."@typeCode=$this->typeCode"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1046.typeId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->typeId))."@1046.typeName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->typeName))."@1046.typeCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->typeCode))."@1046.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1046.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1046.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: MessagePolicyType (NAMESPACETAG = 1046) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $typeId, $conn) {
		$query="SELECT typeId, typeName, typeCode, extraFilter, extraInformation, flags FROM messagePolicyType WHERE typeId = '$typeId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('MessagePolicyType, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('MessagePolicyType, Duplicate or No Record');
		list($typeId, $typeName, $typeCode, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->typeId = $typeId;
		if (! is_null($typeName))	{
			$this->typeName = $typeName;
		}
		if (! is_null($typeCode))	{
			$this->typeCode = $typeCode;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT typeName, typeCode, extraFilter, extraInformation, flags FROM messagePolicyType WHERE typeId = '$this->typeId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MessagePolicyType, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('MessagePolicyType, [Clone] Duplicate or No Record');
		list($typeName, $typeCode, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['typeName'] = $typeName;
		$masterDataArray['typeCode'] = $typeCode;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO messagePolicyType ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("MessagePolicyType [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("MessagePolicyType [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("MessagePolicyType [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class EntryCriteria extends Object {
	private $criteriaId;
	private $course;
	private $criteriaList;
	private $exclusionCriteriaList;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__ENABLE_EQUIVALENT = 5;
	public function isEquivalentEnabled()	{
		return $this->isFlagSetAt(EntryCriteria::$__ENABLE_EQUIVALENT);
	}
	public function setEquivalentEnabled($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(EntryCriteria::$__ENABLE_EQUIVALENT);
		} else {
			$this->resetFlagAt(EntryCriteria::$__ENABLE_EQUIVALENT);
		}
	}
	public final static function addBulkEntryCriterias($database, $conn, $levelId, $educationLevelList)	{
		$promise1 = new Promise();
		$promise1->setPromise(false);
		//GEt All Course with this levelId 
		$list = Course::getListOfCoursesBelongingToEducationLevel($database, $conn, $levelId);
		if (is_null($list)) Object::shootException("Bulk Criteria, Course List returned an Empty Set");
		//Get List of educationLevel 
		$educationLevelList = Object::getUniqueArrayFromArray($educationLevelList);
		$criteriaList = Object::getCommaSeparatedListFromArray($educationLevelList);
		foreach ($list as $courseId)	{
			$criteriaId = EntryCriteria::getCriteriaFromCourse($database, $conn, $courseId);
			if (is_null($criteriaId))	{
				//We not found , add it 
				$query = "INSERT INTO entryCriteria (courseId,flags) VALUES ('$courseId','15')";
				mysql_db_query($database, $query, $conn) or Object::shootException("Could not Insert a New Course in a Criteria");
				$criteriaId = EntryCriteria::getCriteriaFromCourse($database, $conn, $courseId);
				if (is_null($criteriaId)) Object::shootException("The Last Inserted Criteria could not be found");
			}
			$criteria1 = new EntryCriteria($database, $criteriaId, $conn);
			$criteria1->setCriteriaList($criteriaList);
			$criteria1->commitUpdate();
		}
		$promise1->setPromise(true);
		return $promise1;
	}
	public final static function getCriteriaFromCourse($database, $conn, $courseId)	{
		$query = "SELECT criteriaId FROM entryCriteria WHERE courseId='$courseId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Entry Criteria, could not fetch criteria reference");
		if (mysql_num_rows($result) != 1) return null;
		//Now one record found 
		list($criteriaId)=mysql_fetch_row($result);
		return $criteriaId;
	}
	public final static function isQualifiedToJoinCourse($database, $conn, $courseId, $list)	{
		if (is_null($list)) Object::shootException("At least one academic history is required");
		//Step 1: Find if this course is in entry criteria , if not present then qualify
		$query = "SELECT criteriaId FROM entryCriteria WHERE courseId='$courseId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Entry Criteria, could not fetch criteria reference");
		if (mysql_num_rows($result) == 0) return true;
		if (mysql_num_rows($result) != 1)	{
			Object::shootException("Entry Criteria, Non Unique Criteria for course were found");
		}
		//We are now sure we have a reference criteria 
		list($criteriaId) = mysql_fetch_row($result);
		$criteria1 = new EntryCriteria($database, $criteriaId, $conn);
		//CriteriaList 
		if (is_null($criteria1->getCriteriaList())) return true;
		if (sizeof($criteria1->getCriteriaList()) == 0) return true;
		//Preparing DataArray 
		$userCollection1 = new Collection();
		$userCollection1->addList($list);
		//Equivalent Collection 
		$exclusionCollection1 = null;
		if (! is_null($criteria1->getExclusionCriteriaList()) && (sizeof($criteria1->getExclusionCriteriaList()) != 0))	{
			$exclusionCollection1 = new Collection();
			$exclusionCollection1->addList(Object::getArrayReferenceFromObjectList($criteria1->getExclusionCriteriaList()));
		}
		$passedAllCriteria = true;
		foreach ($criteria1->getCriteriaList() as $level1)	{
			//We need to make sure all criterias exists in the user Collection 
			$tempBln = $userCollection1->isItemInACollection($level1->getLevelId());
			//If not We need to dig further 
			if (! $tempBln && $criteria1->isEquivalentEnabled())	{
				//Get Equivalent list 
				$list = $level1->getMyEquivalent(); 
				if (! is_null($list) && ! is_null($equivalentCollection1))	{
					foreach ($list as $levelId)	{
						if (! $exclusionCollection1->isItemInACollection($levelId) && $userCollection1->isItemInACollection($levelId))	{
							$tempBln = true; //Atleast one of the equivalent is found and is not excluded
							break; 
						}
					}
				}
			}
			$passedAllCriteria = $passedAllCriteria && $tempBln;
			if (! $passedAllCriteria) break;
		}
		return $passedAllCriteria;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@EntryCriteria/extraFilter,text,1050;extraInformation,text,1050;flags,text,1050";
		$lineToView .= Course::getAvailableViewableColumns();
		$lineToView .= EducationLevel::getAvailableViewableColumns();
		$lineToView .= EducationLevel::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "entrycriteria";
	}
	public final static function getClassContextName()	{
		return "manageentrycriteria";
	}
	public final static function getUniqueCriteriaId($database, $conn)	{
		$query="SELECT criteriaId FROM entryCriteria";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('EntryCriteria, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('EntryCriteria, None or Duplicate Row/Multiple Rows Found');
		list($criteriaId)=mysql_fetch_row($result);
		return $criteriaId;
	}
	public final static function add($database, $conn, $courseId, $criteriaList, $exclusionCriteriaList, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO entryCriteria (courseId, criteriaList, exclusionCriteriaList, extraFilter, extraInformation, flags) VALUES('$courseId', '$criteriaList', '$exclusionCriteriaList', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('EntryCriteria, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('EntryCriteria, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('EntryCriteria, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->criteriaId;
	}
	public function getCriteriaId() {
		return $this->criteriaId;
	}
	public function getCourse() {
		return $this->course;
	}
	public function setCourse($courseId) {
		if (! is_null($courseId))	{
			$this->addToUpdateList("courseId", $courseId);
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
	}
	public function getCriteriaList() {
		return $this->criteriaList;
	}
	public function setCriteriaList($criteriaList) {
		if (! is_null($criteriaList))	{
			$this->addToUpdateList("criteriaList", $criteriaList);
			$this->criteriaList = array();
			$idListArr = explode(",", $criteriaList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new EducationLevel($this->database, $id, $this->conn);
					$this->criteriaList[sizeof($this->criteriaList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getExclusionCriteriaList() {
		return $this->exclusionCriteriaList;
	}
	public function setExclusionCriteriaList($exclusionCriteriaList) {
		if (! is_null($exclusionCriteriaList))	{
			$this->addToUpdateList("exclusionCriteriaList", $exclusionCriteriaList);
			$this->exclusionCriteriaList = array();
			$idListArr = explode(",", $exclusionCriteriaList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new EducationLevel($this->database, $id, $this->conn);
					$this->exclusionCriteriaList[sizeof($this->exclusionCriteriaList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT criteriaId FROM entryCriteria";
		return $query;
	}
	public function __construct($database, $criteriaId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "EntryCriteria")) Object::shootException("EntryCriteria System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $criteriaId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->criteriaId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "EntryCriteria")) Object::shootException("EntryCriteria System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE entryCriteria SET $setList WHERE criteriaId = '$this->criteriaId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('EntryCriteria, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "EntryCriteria")) Object::shootException("EntryCriteria System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM entryCriteria WHERE criteriaId = '$this->criteriaId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('EntryCriteria, Row Deletion Failed');
	}
	public function getClassName()	{
		return "EntryCriteria";
	}
	protected function getProperties()	{
		return "criteriaId=$this->criteriaId"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1050.criteriaId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->criteriaId))."@1050.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1050.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1050.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: EntryCriteria (NAMESPACETAG = 1050) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->course))	{
			$this->course->debug();
		}
		if (! is_null($this->criteriaList))	{
			foreach ($this->criteriaList as $criteriaListSingleObject)	{
				$criteriaListSingleObject->debug();
			}
		}
		if (! is_null($this->exclusionCriteriaList))	{
			foreach ($this->exclusionCriteriaList as $exclusionCriteriaListSingleObject)	{
				$exclusionCriteriaListSingleObject->debug();
			}
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->course))	{
			$matrix1=$this->course->searchMatrix($matrix1);
		}
		if (! is_null($this->criteriaList))	{
			foreach ($this->criteriaList as $criteriaListSingleObject)	{
				$matrix1=$criteriaListSingleObject->searchMatrix($matrix1);
			}
		}
		if (! is_null($this->exclusionCriteriaList))	{
			foreach ($this->exclusionCriteriaList as $exclusionCriteriaListSingleObject)	{
				$matrix1=$exclusionCriteriaListSingleObject->searchMatrix($matrix1);
			}
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->course))	{
			$csvProcessor1=$this->course->processCSV($csvProcessor1);
		}
		if (! is_null($this->criteriaList))	{
			foreach ($this->criteriaList as $criteriaListSingleObject)	{
				$csvProcessor1=$criteriaListSingleObject->processCSV($csvProcessor1);
			}
		}
		if (! is_null($this->exclusionCriteriaList))	{
			foreach ($this->exclusionCriteriaList as $exclusionCriteriaListSingleObject)	{
				$csvProcessor1=$exclusionCriteriaListSingleObject->processCSV($csvProcessor1);
			}
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $criteriaId, $conn) {
		$query="SELECT criteriaId, courseId, criteriaList, exclusionCriteriaList, extraFilter, extraInformation, flags FROM entryCriteria WHERE criteriaId = '$criteriaId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('EntryCriteria, Object Creation Failed '.mysql_error());
		if (mysql_num_rows($result) != 1) $this->throwMe('EntryCriteria, Duplicate or No Record');
		list($criteriaId, $courseId, $criteriaList, $exclusionCriteriaList, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->criteriaId = $criteriaId;
		if (! is_null($courseId))	{
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
		if (! is_null($criteriaList))	{
			$this->criteriaList = array();
			$idListArr = explode(",", $criteriaList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new EducationLevel($this->database, $id, $this->conn);
					$this->criteriaList[sizeof($this->criteriaList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($exclusionCriteriaList))	{
			$this->exclusionCriteriaList = array();
			$idListArr = explode(",", $exclusionCriteriaList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new EducationLevel($this->database, $id, $this->conn);
					$this->exclusionCriteriaList[sizeof($this->exclusionCriteriaList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT courseId, criteriaList, exclusionCriteriaList, extraFilter, extraInformation, flags FROM entryCriteria WHERE criteriaId = '$this->criteriaId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('EntryCriteria, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('EntryCriteria, [Clone] Duplicate or No Record');
		list($courseId, $criteriaList, $exclusionCriteriaList, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['courseId'] = $courseId;
		$masterDataArray['criteriaList'] = $criteriaList;
		$masterDataArray['exclusionCriteriaList'] = $exclusionCriteriaList;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO entryCriteria ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("EntryCriteria [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("EntryCriteria [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("EntryCriteria [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class ApprovalSequenceSchema extends Object {
	private $schemaId;
	private $schemaName;
	private $operationCode;
	private $approvedJobList;
	private $approvingJobList;
	private $numberOfValidDays;
	private $defaultApproveText;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__IS_DEFAULT_APPROVE = 4;
	static $__USER_EDIT_NAMES = 1;
	static $__USER_EDIT_MARITAL = 2;
	static $__USER_EDIT_DISABILITY = 3;
	static $__USER_EDIT_COURSE = 4;
	static $__USER_EDIT_PHOTO = 5;
	static $__USER_EDIT_CITIZENSHIP = 6;
	static $__USER_EDIT_OCCUPATION = 7;
	static $__USER_EDIT_RELIGION = 8;
	static $__USER_EDIT_ADDRESS = 9;
	static $__USER_EDIT_EMPLOYMENT = 10;
	static $__USER_EDIT_SPONSOR = 11;
	static $__USER_EDIT_BANK = 12;
	static $__USER_EDIT_NEXTOFKIN = 13;
	static $__USER_EDIT_CONTACTS = 14;
	static $__ADMIT_STUDENTS = 15;
	static $__REVOKE_ADMISSION = 16;
	static $__USER_EDIT_PASSWORD = 17;
	static $__ADVANCE_YEAR_OR_SEMESTER = 18;
	static $__USER_EDIT_REG_NUMBER = 19;
	static $__EDIT_STUDENT_DATA = 20;
	static $schemaDB = array(
		"1"=>"Change Names"
		,"2"=>"Update Marital Status"
		,"3"=>"Update Disability"
		,"4"=>"Change Course"
		,"5"=>"Change Profile Picture"
		,"6"=>"Change Citizenship"
		,"7"=>"Update Occupation"
		,"8"=>"Change Religion"
		,"9"=>"Change Addresses"
		,"10"=>"Update Employment History"
		,"11"=>"Update Sponsor List"
		,"12"=>"Update Bank Information"
		,"13"=>"Update Next of Kin"
		,"14"=>"Change Email && Phone Number"
		,"15"=>"Admit Students"
		,"16"=>"Revoke Admission"
		,"17"=>"Change Password"
		,"18"=>"Advance Year or Semester"
		,"19"=>"Change Registration Number"
		,"20"=>"Edit Student Data"
	);
	public final static function getSchemaDB()	{
		$list = array();
		foreach (self::$schemaDB as $code => $val)	{
			$listsize = sizeof($list);
			$list[$listsize] = array();
			$list[$listsize]['code'] = $code;
			$list[$listsize]['val'] = $val;
		}
		return $list;
	}
	public final static function getSchemaListFromCode($database, $conn, $code)	{
		$query = "SELECT schemaId FROM approvalSequenceSchema WHERE operationCode='$code'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("ApprovalSequenceSchema[static] Could not Pull Data from the Database");
		$list = array();
		while (list($schemaId)=mysql_fetch_row($result))	{
			$list[sizeof($list)] = $schemaId;
		}
		return $list;
	}
	public final static function getSchemaCaptionFromCode($code)	{
		return self::$schemaDB[$code];
	}
	public function isJobInApprovingJobList($jobId)	{
		if (is_null($this->approvingJobList)) return false;
		$isJobIn = false;
		foreach ($this->approvingJobList as $job1)	{
			if ($job1->getJobId() == $jobId)	{
				$isJobIn = true;
				break;
			}
		}
		return $isJobIn;
	}
	public function isJobInApprovedJobList($jobId)	{
		if (is_null($this->approvedJobList)) return false;
		$isJobIn = false;
		foreach ($this->approvedJobList as $job1)	{
			if ($job1->getJobId() == $jobId)	{
				$isJobIn = true;
				break;
			}
		}
		return $isJobIn;
	}	
	public final static function getApprovingSchemaFromCodeAndLogin($database, $conn, $loginId, $operationCode)	{
		$query = "SELECT schemaId FROM approvalSequenceSchema WHERE operationCode='$operationCode'";
		//We need schema, the jobId for this login is present, if not found the return the 
		//firstOneWith Default Approve 
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not execute Approval Sequence Schema query");
		$approvingSchema1 = null;
		$defaultApprovingSchema1 = null;
		$login1 = new Login($database, $loginId, $conn);
		if (is_null($login1->getJobTitle())) Object::shootException("This user is not attached to any Job Title");
		while (list($schemaId) = mysql_fetch_row($result))	{
			$schema1 = new ApprovalSequenceSchema($database, $schemaId, $conn);
			if (is_null($defaultApprovingSchema1) && is_null($schema1->getApprovingJobList()) && $schema1->isDefaultApprove()) $defaultApprovingSchema1 = $schema1;
			if (is_null($approvingSchema1) && $schema1->isJobInApprovingJobList($login1->getJobTitle()->getJobId())) $approvingSchema1 = $schema1;
			if (! is_null($approvingSchema1))	{
				break; //We just needed the first matching  Only
			}
		}
		//If we did not find any the load default
		if (is_null($approvingSchema1) && ! is_null($defaultApprovingSchema1)) $approvingSchema1 = $defaultApprovingSchema1;
		return $approvingSchema1;
	}
	public final static function getApprovedSchemaFromCodeAndLogin($database, $conn, $loginId, $operationCode)	{
		$query = "SELECT schemaId FROM approvalSequenceSchema WHERE operationCode='$operationCode'";
		//We need schema, the jobId for this login is present, if not found the return the 
		//firstOneWith Default Approve 
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not execute Approval Sequence Schema query");
		$approvedSchema1 = null;
		$defaultApprovedSchema1 = null;
		$login1 = new Login($database, $loginId, $conn);
		if (is_null($login1->getJobTitle())) Object::shootException("This user is not attached to any Job Title");
		while (list($schemaId) = mysql_fetch_row($result))	{
			$schema1 = new ApprovalSequenceSchema($database, $schemaId, $conn);
			if (is_null($defaultApprovedSchema1) && is_null($schema1->getApprovedJobList()) && $schema1->isDefaultApprove()) $defaultApprovedSchema1 = $schema1;
			if (is_null($approvedSchema1) && $schema1->isJobInApprovedJobList($login1->getJobTitle()->getJobId())) $approvedSchema1 = $schema1;
			if (! is_null($approvedSchema1))	{
				break; //We just needed the first matching Only
			}
		}
		//If we did not find any the load default 
		if (is_null($approvedSchema1) && ! is_null($defaultApprovedSchema1)) $approvedSchema1 = $defaultApprovedSchema1;
		$schemaId = null;
		if (! is_null($approvedSchema1)) $schemaId = $approvedSchema1->getSchemaId();
		return $schemaId;
	}
	public final static function getSchemaNotFoundApprovalSequenceWindow($loginId, $code, $customMessage)	{
		$customMessageWindow = "";
		if (! is_null($customMessage)) $customMessageWindow = "<div class=\"ui-sys-warning\">$customMessage</div>";
		$headerText = self::getSchemaCaptionFromCode($code);
		$window1 = "<div class=\"ui-sys-panel-container ui-sys-panel ui-widget ui-widget-content ui-sys-approval-window\"><div class=\"ui-sys-panel-header ui-widget-header\">Action : $headerText</div><div class=\"ui-sys-panel-body ui-sys-data-capture\">";
		$window1 .= "$customMessageWindow<div class=\"ui-state-error\">The Approval Sequence Schema for this Action was not found</div>";
		$window1 .= "</div><div class=\"ui-sys-panel-footer\"><input type=\"button\" value=\"Close\" class=\"close-approval-window button-approval-schema-not-found\"/></div></div>";
		return $window1;
	}
	public final static function getNewApprovalSequenceWindow($loginId, $code, $schemaId, $customMessage, $regExpression, $msgExpression, $serverPath, $specialInstruction)	{
		if (is_null($specialInstruction)) $specialInstruction = 0;
		$customMessageWindow = "";
		if (! is_null($customMessage)) $customMessageWindow = "<div class=\"ui-sys-warning\">$customMessage</div>";
		$headerText = self::getSchemaCaptionFromCode($code);
		$window1 = "<div class=\"ui-sys-panel-container ui-sys-panel ui-widget ui-widget-content ui-sys-approval-window\"><div class=\"ui-sys-panel-header ui-widget-header\">Action : $headerText</div><div class=\"ui-sys-panel-body ui-sys-data-capture\">";
		$window1 .= "$customMessageWindow<form id=\"approval-form-1\"><label title=\"Kindly Describe the new values you are about to submit. Example: firstname=John, lastname=Smith, reason=I have official changed names, document ref no. 4176 etc\">Brief About <br/>New Data</label>&nbsp;&nbsp;<textarea class=\"text-approval-data\" rows=\"4\" cols=\"80\" validate=\"true\" validate_control=\"text\" validate_expression=\"$regExpression\" validate_message=\"$headerText : $msgExpression \"></textarea></form><br/><div id=\"ui-sys-error-message\" class=\"ui-sys-error-message\"></div>";
		$window1 .= "</div><div class=\"ui-sys-panel-footer\"><input data-special-instruction=\"$specialInstruction\" data-login-id=\"$loginId\" data-schema-id=\"$schemaId\" data-server-path=\"$serverPath\" type=\"button\" class=\"button-approval-submit-new\"  value=\"submit\"/></div></div><br/>";
		return $window1;
	}
	public final static function getAwaitingApprovalSequenceWindow($loginId, $code, $schemaId, $customMessage, $serverPath)	{
		$customMessageWindow = "";
		if (! is_null($customMessage)) $customMessageWindow = "<div class=\"ui-sys-warning\">$customMessage</div>";
		$headerText = self::getSchemaCaptionFromCode($code);
		$window1 = "<div class=\"ui-sys-panel-container ui-sys-panel ui-widget ui-widget-content ui-sys-approval-window\"><div class=\"ui-sys-panel-header ui-widget-header\">Action : $headerText</div><div class=\"ui-sys-panel-body ui-sys-data-capture\">";
		$window1 .= $customMessageWindow."<div>This Action is Awaiting for Approval, Once the Approval is done you will receive a Notification</div>";
		$window1 .= "</div><div class=\"ui-sys-panel-footer\"><input data-login-id=\"$loginId\"  data-schema-id=\"$schemaId\" data-server-path=\"$serverPath\" type=\"button\" value=\"Close\" class=\"close-approval-window button-approval-awaiting-approval\"/></div></div><br/>";
		return $window1;
	}
	public function isDefaultApprove()	{
		return $this->isFlagSetAt(ApprovalSequenceSchema::$__IS_DEFAULT_APPROVE);
	}
	public function setDefaultApprove($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(ApprovalSequenceSchema::$__IS_DEFAULT_APPROVE);
		} else {
			$this->resetFlagAt(ApprovalSequenceSchema::$__IS_DEFAULT_APPROVE);
		}
	}
	public function getFirstApprovingJob()	{
		if (is_null($this->approvingJobList)) return null;
		if (sizeof($this->approvingJobList) == 0) return null;
		$job1 = $this->approvingJobList[0];
		if (is_null($job1)) return null;
		return $job1->getJobId();
	}
	public function getTheNextApprovingJob($currentJobId)	{
		if (is_null($this->approvingJobList)) return null;
		$currentJobIdIsFound = false;
		$nextJobId = null;
		foreach ($this->approvingJobList as $job1)	{
			if ($currentJobIdIsFound)	{
				$nextJobId = $job1->getJobId();
				break;
			}
			if ($currentJobId == $job1->getJobId())	{
				$currentJobIdIsFound = true;
			}
		}
		return $nextJobId;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@ApprovalSequenceSchema/schemaName,text,1051;operationCode,text,1051;numberOfValidDays,text,1051;defaultApproveText,text,1051;extraFilter,text,1051;extraInformation,text,1051;flags,text,1051";
		$lineToView .= JobTitle::getAvailableViewableColumns();
		$lineToView .= JobTitle::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "approvalsequenceschema";
	}
	public final static function getClassContextName()	{
		return "manageapprovalsequenceschema";
	}
	public final static function getUniqueSchemaId($database, $conn)	{
		$query="SELECT schemaId FROM approvalSequenceSchema";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ApprovalSequenceSchema, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('ApprovalSequenceSchema, None or Duplicate Row/Multiple Rows Found');
		list($schemaId)=mysql_fetch_row($result);
		return $schemaId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT schemaId, schemaName FROM approvalSequenceSchema";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ApprovalSequenceSchema, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $schemaName, $operationCode, $approvedJobList, $approvingJobList, $validity, $defaultApproveText, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO approvalSequenceSchema (schemaName, operationCode, approvedJobList, approvingJobList, validity, defaultApproveText, extraFilter, extraInformation, flags) VALUES('$schemaName', '$operationCode', '$approvedJobList', '$approvingJobList', '$validity', '$defaultApproveText', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ApprovalSequenceSchema, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ApprovalSequenceSchema, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('ApprovalSequenceSchema, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->schemaId;
	}
	public function getSchemaId() {
		return $this->schemaId;
	}
	public function getSchemaName() {
		return $this->schemaName;
	}
	public function setSchemaName($schemaName) {
		if (! is_null($schemaName))	{
			$this->addToUpdateList("schemaName", $schemaName);
			$this->schemaName = $schemaName;
		}
	}
	public function getOperationCode() {
		return $this->operationCode;
	}
	public function setOperationCode($operationCode) {
		if (! is_null($operationCode))	{
			$this->addToUpdateList("operationCode", $operationCode);
			$this->operationCode = $operationCode;
		}
	}
	public function getApprovedJobList() {
		return $this->approvedJobList;
	}
	public function setApprovedJobList($approvedJobList) {
		if (! is_null($approvedJobList))	{
			$this->addToUpdateList("approvedJobList", $approvedJobList);
			$this->approvedJobList = array();
			$idListArr = explode(",", $approvedJobList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new JobTitle($this->database, $id, $this->conn);
					$this->approvedJobList[sizeof($this->approvedJobList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getApprovingJobList() {
		return $this->approvingJobList;
	}
	public function setApprovingJobList($approvingJobList) {
		if (! is_null($approvingJobList))	{
			$this->addToUpdateList("approvingJobList", $approvingJobList);
			$this->approvingJobList = array();
			$idListArr = explode(",", $approvingJobList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new JobTitle($this->database, $id, $this->conn);
					$this->approvingJobList[sizeof($this->approvingJobList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getNumberOfValidDays() {
		return $this->numberOfValidDays;
	}
	public function setNumberOfValidDays($validity) {
		if (! is_null($validity))	{
			$this->addToUpdateList("validity", $validity);
			$this->numberOfValidDays = $validity;
		}
	}
	public function getDefaultApproveText() {
		return $this->defaultApproveText;
	}
	public function setDefaultApproveText($defaultApproveText) {
		if (! is_null($defaultApproveText))	{
			$this->addToUpdateList("defaultApproveText", $defaultApproveText);
			$this->defaultApproveText = $defaultApproveText;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT schemaId FROM approvalSequenceSchema";
		return $query;
	}
	public function __construct($database, $schemaId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "ApprovalSequenceSchema")) Object::shootException("ApprovalSequenceSchema System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $schemaId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->schemaId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "ApprovalSequenceSchema")) Object::shootException("ApprovalSequenceSchema System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE approvalSequenceSchema SET $setList WHERE schemaId = '$this->schemaId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ApprovalSequenceSchema, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "ApprovalSequenceSchema")) Object::shootException("ApprovalSequenceSchema System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM approvalSequenceSchema WHERE schemaId = '$this->schemaId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ApprovalSequenceSchema, Row Deletion Failed');
	}
	public function getClassName()	{
		return "ApprovalSequenceSchema";
	}
	protected function getProperties()	{
		return "schemaId=$this->schemaId"."@schemaName=$this->schemaName"."@operationCode=$this->operationCode"."@numberOfValidDays=$this->numberOfValidDays"."@defaultApproveText=$this->defaultApproveText"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1051.schemaId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->schemaId))."@1051.schemaName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->schemaName))."@1051.operationCode=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->operationCode))."@1051.numberOfValidDays=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->numberOfValidDays))."@1051.defaultApproveText=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->defaultApproveText))."@1051.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1051.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1051.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: ApprovalSequenceSchema (NAMESPACETAG = 1051) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $schemaId, $conn) {
		$query="SELECT schemaId, schemaName, operationCode, approvedJobList, approvingJobList, validity, defaultApproveText, extraFilter, extraInformation, flags FROM approvalSequenceSchema WHERE schemaId = '$schemaId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('ApprovalSequenceSchema, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ApprovalSequenceSchema, Duplicate or No Record');
		list($schemaId, $schemaName, $operationCode, $approvedJobList, $approvingJobList, $validity, $defaultApproveText, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->schemaId = $schemaId;
		if (! is_null($schemaName))	{
			$this->schemaName = $schemaName;
		}
		if (! is_null($operationCode))	{
			$this->operationCode = $operationCode;
		}
		if (! is_null($approvedJobList))	{
			$this->approvedJobList = array();
			$idListArr = explode(",", $approvedJobList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new JobTitle($this->database, $id, $this->conn);
					$this->approvedJobList[sizeof($this->approvedJobList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($approvingJobList))	{
			$this->approvingJobList = array();
			$idListArr = explode(",", $approvingJobList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new JobTitle($this->database, $id, $this->conn);
					$this->approvingJobList[sizeof($this->approvingJobList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($validity))	{
			$this->numberOfValidDays = $validity;
		}
		if (! is_null($defaultApproveText))	{
			$this->defaultApproveText = $defaultApproveText;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT schemaName, operationCode, approvedJobList, approvingJobList, validity, defaultApproveText, extraFilter, extraInformation, flags FROM approvalSequenceSchema WHERE schemaId = '$this->schemaId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ApprovalSequenceSchema, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ApprovalSequenceSchema, [Clone] Duplicate or No Record');
		list($schemaName, $operationCode, $approvedJobList, $approvingJobList, $validity, $defaultApproveText, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['schemaName'] = $schemaName;
		$masterDataArray['operationCode'] = $operationCode;
		$masterDataArray['approvedJobList'] = $approvedJobList;
		$masterDataArray['approvingJobList'] = $approvingJobList;
		$masterDataArray['validity'] = $validity;
		$masterDataArray['defaultApproveText'] = $defaultApproveText;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO approvalSequenceSchema ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ApprovalSequenceSchema [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ApprovalSequenceSchema [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("ApprovalSequenceSchema [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class ApprovalSequenceData extends Object {
	private $dataId;
	private $schema;
	private $requestedBy;
	private $nextJobToApprove;
	private $alreadyApprovedList;
	private $timeOfRegistration;
	private $specialInstruction;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__IS_COMPLETED = 4;
	public final static function clearApprovalSequenceData($database, $conn, $operationCode, $operationCodeQualifier, $dataOwnerLogin1, $dataTargetQualifier, $controlFlags)	{
		/*
		Used to remove the approvalSequenceData after the action has been performed successful 
		Inputs
			1: database and conn, connection should be active 
			2: operationCode : As Defined in the schema ie ApprovalSequenceSchema::$__USER_EDIT_ADDRESS
			3: operationCodeQualifier : To make specific for operationCode 
				Example in the Examination, Semester exams and End of Semester Exams might have a different ApprovalSequenceData
					One can have the Qualifier of Examination.1 and and another Examination.2 [format, Classname.objectId]
					default null [no qualifier]
			4: dataOwnerLogin1 , is a login reference for the owner of the data record, most of the time the logged in user 
			5: dataTargetQualifier, the target example Student.1, suppose you are editing multiple students, each one must have his/her owner approval data, 
				the dataTargetQualifier helps to differentiate 
			6: controlFlags, might be used on the future 
		Output:
		
			Returns nothing otherwise throw errors 		
			*/
		$schemaId = ApprovalSequenceSchema::getApprovedSchemaFromCodeAndLogin($database, $conn, $dataOwnerLogin1->getLoginId(), $operationCode);
		if (is_null($schemaId)) Object::shootException("The Approval Sequence Schema Can not be empty");
		$dataId = ApprovalSequenceData::getDataIdForRequesterInASchema($database, $conn, $dataOwnerLogin1->getLoginId(), $schemaId, $dataTargetQualifier);
		if (is_null($dataId)) Object::shootException("There were not Approval Sequence Data Found");
		$data1 = new ApprovalSequenceData($database, $dataId, $conn);
		$data1->commitDelete();
	}
	public final static function getApprovalSequenceDataListFromSchema($database, $conn, $schemaId)	{
		$query = "SELECT dataId FROM approvalSequenceData WHERE schemaId='$schemaId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("ApprovalSequenceData[static], Could not load Approval Data");
		$list = array();
		while (list($id) = mysql_fetch_row($result))	{
			$list[sizeof($list)] = $id;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function getApprovalSequenceAwaitingMyApprovalWindow($database, $conn, $systemTime1, $loginId, $serverPath, $serverPathReject, $nextPage, $searchButtonImage, $searchText)	{
		$list = self::getApprovalSequenceAwaitingMyApproval($database, $conn, $loginId);
		if (is_null($list)) return null;
		$timeString = $systemTime1->getDateAndTimeString();
		$myjobname = null;
		try {
			$login1 = new Login($database, $loginId, $conn);
			$job1 = $login1->getJobTitle();
			if (is_null($job1)) Object::shootException("This user is not registered to any Job Title");
			$myjobname = $job1->getJobName();
		} catch (Exception $e)	{
			return null;
		}
		$anchorTag = "__ikx0901.n_d_i_m_a_n_g_w_a__f_a_d_h_i_l_i_";
		$window1 = "<div id=\"$anchorTag\" class=\"ui-widget module ui-sys-approve-action\"><div class=\"ui-widget-content\"><div class=\"ui-widget-header\">Request(s) Awaiting my Approval (As : $myjobname)</div>";
		$window1 .= "<div class=\"ui-sys-search-container pure-form pure-transaction-control\"><input type=\"text\" title=\"At Least Three Characters should be supplied\" required placeholder=\"ABC\" size=\"32\"/><a title=\"Click to Search\" class=\"click-to-search\" data-anchor-id=\"$anchorTag\" data-next-page=\"$nextPage?page=request_awaiting_my_approval\" data-min-character=\"3\"><img src=\"$searchButtonImage\" alt=\"DAT\"/></a></div>";
		$window1 .= "<table style=\"font-size: 0.9em;\" class=\"pure-table pure-table-horizontal\"><thead><tr><th></th><th></th><th>Requested By</th><th>Operation</th><th>Details</th><th>Remaining<br/>Days</th><th>Parties which <br/>has approved</th><th></th></tr></thead><tbody>";
		$count = 0;
		for ($i =0; $i < sizeof($list); $i++)	{
			$dataId = $list[$i];
			$data1 = null;
			$login1 = null; //Requester
			try {
				$data1 = new ApprovalSequenceData($database, $dataId, $conn);
				$login1 = $data1->getRequestedBy();
				if (is_null($login1)) Object::shootException("The Requested user were not found");
				if ($data1->isApprovingComplete() && $data1->isStillValid()) Object::shootException("Does not need my Attention");
			} catch (Exception $e)	{
				continue;
			}
			//Perform Search 
			$matrix1 = new SearchMatrix($searchText);
			if (! $data1->searchMatrix($matrix1)->evaluateResult()) continue;
			$count++;
			$referenceDataId = $data1->getDataId();
			$requestedBy = $login1->getFullname();
			$schema1 = $data1->getSchema();
			if (is_null($schema1)) continue;
			$statusControl = "<span title=\"Still Awaiting for Approval\" style=\"background-color: gold; font-weight: bold;\">&nbsp;&nbsp;&nbsp;AWAITING&nbsp;&nbsp;&nbsp;</span>";
			if ($data1->isApprovingComplete() && ! $data1->isStillValid()) {
				$statusControl = "<span title=\"Approval Completed, however the requester did not respond within valid time window\" style=\"background-color: red; color: white; font-weight: bold;\">&nbsp;&nbsp;&nbsp;EXPIRED&nbsp;&nbsp;&nbsp;</span>";
			} else if (! $data1->isStillValid())	{
				$statusControl = "<span title=\"Approval Expired\" style=\"background-color: red; color: white; font-weight: bold;\">&nbsp;&nbsp;&nbsp;EXPIRED&nbsp;&nbsp;&nbsp;</span>";
			}
			$remainingDays = $data1->getRemainingDays();
			$operationName = $schema1->getSchemaName();
			$extraInformation = $data1->getExtraInformation();
			$defaultApproveText = $schema1->getDefaultApproveText();
			$window1 .= "<tr><td>$count</td><td>$statusControl</td><td>$requestedBy</td><td>$operationName</td><td><span style=\"font-size: 0.9em;\">$extraInformation</span></td><td>$remainingDays</td><td style=\"font-size: 0.9em;\">";
			//We need details of who have already approved  
			$alreadyApprovedList1 = $data1->getAlreadyApprovedList();
			if (! is_null($alreadyApprovedList1))	{
				$window1 .= "<ol>";
				foreach ($alreadyApprovedList1 as $login1)	{
					if (is_null($login1)) continue;
					if (is_null($login1->getJobTitle())) continue;
					$job1 = $login1->getJobTitle();
					$fullname = $login1->getFullname();
					$jobname = $job1->getJobName();
					$window1 .= "<li>$defaultApproveText : $fullname ($jobname)</li>";
				}
				$window1 .= "</ol>";
			}
			$window1 .= "</td><td><input class=\"button-intermediate-approve-action\" data-requested-by=\"$requestedBy\" data-schema-name=\"$operationName\" data-data-id=\"$referenceDataId\" data-server-path=\"$serverPath\" data-time=\"$timeString\" type=\"button\" value=\"Approve\"/>&nbsp;&nbsp;<input class=\"button-intermediate-approve-reject-action\" data-requested-by=\"$requestedBy\" data-schema-name=\"$operationName\" data-data-id=\"$referenceDataId\" data-server-path=\"$serverPathReject\" data-time=\"$timeString\"  type=\"button\" value=\"Reject\"/></td></tr>";
		}
		$window1 .= "</tbody><tfoot><tr><td colspan=\"8\" class=\"ui-sys-feedback-panel ui-sys-inline-controls-center\" style=\"font-size: 1em;\"></td></tr></tfoot></table></div></div>";
		return $window1;
	}
	public final static function getApprovalSequenceAwaitingMyApproval($database, $conn, $loginId)	{
		$jobId = null;
		try {
			$login1 = new Login($database, $loginId, $conn);
			$job1 = $login1->getJobTitle();
			if (is_null($job1)) Object::shootException("Reference Job Were not found");
			$jobId = $job1->getJobId();
		} catch (Exception $e)	{
			return null;
		}
		$query = "SELECT dataId FROM approvalSequenceData WHERE nextJobToApprove='$jobId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("ApprovalSequenceData [static] Could not execute query ");
		$list = array();
		while (list($id) = mysql_fetch_row($result))	{
			$list[sizeof($list)] = $id;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function getMyApprovalSequenceWaitingToBeApprovedWindow($database, $conn, $loginId)	{
		$list = self::getMyApprovalSequenceWaitingToBeApproved($database, $conn, $loginId);
		if (is_null($list)) return null;
		$window1 = "<div class=\"ui-widget module\"><div class=\"ui-widget-content\"><div class=\"ui-widget-header\">My Request(s) Awaiting Approval</div>";
		$window1 .= "<table style=\"font-size: 0.9em;\" class=\"pure-table pure-table-horizontal\"><thead><tr><th></th><th></th><th>Operation</th><th>Details</th><th>Remaining<br/>Days</th><th>Parties which <br/>has approved</th><th>Awaiting to<br/>Approve</th></tr></thead><tbody>";
		for ($i =0; $i < sizeof($list); $i++)	{
			$dataId = $list[$i];
			$data1 = null;
			try {
				$data1 = new ApprovalSequenceData($database, $dataId, $conn);
			} catch (Exception $e)	{
				continue;
			}
			$schema1 = $data1->getSchema();
			if (is_null($schema1)) continue;
			$nextJobNameToApprove = "";
			if (! is_null($data1->getNextJobToApprove())) $nextJobNameToApprove = $data1->getNextJobToApprove()->getJobName();
			$counts = $i + 1;
			$statusControl = "<span title=\"Still Awaiting for Approval\" style=\"background-color: gold; font-weight: bold;\">&nbsp;&nbsp;&nbsp;AWAITING&nbsp;&nbsp;&nbsp;</span>";
			if ($data1->isApprovingComplete() && $data1->isStillValid()) {
				$statusControl = "<span title=\"Approval Completed, You better change your data before action exprires\" style=\"background-color: blue; color: white; font-weight: bold;\">&nbsp;&nbsp;&nbsp;COMPLETED&nbsp;&nbsp;&nbsp;</span>";
				$nextJobNameToApprove = "";
			} 
			if (! $data1->isStillValid())	{
				$statusControl = "<span title=\"Approval Expired\" style=\"background-color: red; color: white; font-weight: bold;\">&nbsp;&nbsp;&nbsp;EXPIRED&nbsp;&nbsp;&nbsp;</span>";
				$nextJobNameToApprove = "";
			}
			$remainingDays = $data1->getRemainingDays();
			$operationName = $schema1->getSchemaName();
			$extraInformation = $data1->getExtraInformation();
			$defaultApproveText = $schema1->getDefaultApproveText();
			$window1 .= "<tr><td>$counts</td><td>$statusControl</td><td>$operationName</td><td><span style=\"font-size: 0.9em;\">$extraInformation</span></td><td>$remainingDays</td><td style=\"font-size: 0.9em;\">";
			//We need details of who have already approved 
			$alreadyApprovedList1 = $data1->getAlreadyApprovedList();
			if (! is_null($alreadyApprovedList1))	{
				$window1 .= "<ol>";
				foreach ($alreadyApprovedList1 as $login1)	{
					if (is_null($login1)) continue;
					if (is_null($login1->getJobTitle())) continue;
					$job1 = $login1->getJobTitle();
					$fullname = $login1->getFullname();
					$jobname = $job1->getJobName();
					$window1 .= "<li>$defaultApproveText : $fullname ($jobname)</li>";
				}
				$window1 .= "</ol>";
			}
			$window1 .= "</td><td>$nextJobNameToApprove</td></tr>";
		}
		$window1 .= "</tbody></table></div></div>";
		return $window1;
	}
	public final static function getMyApprovalSequenceWaitingToBeApproved($database, $conn, $loginId)	{
		$query = "SELECT dataId FROM approvalSequenceData WHERE requestedBy='$loginId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("ApprovalSequenceData [static], Could not execute user approval list");
		$list = array();
		while (list($id)=mysql_fetch_row($result))	{
			$list[sizeof($list)] = $id;
		}
		if (sizeof($list) == 0) $list = null;
		return  $list;
	}
	public final static function getDataIdForRequesterInASchema($database, $conn, $loginId, $schemaId, $specialInstruction)	{
		$query = "SELECT dataId FROM approvalSequenceData WHERE requestedBy='$loginId' AND schemaId='$schemaId'";
		if (! is_null($specialInstruction))	{
			$query = "SELECT dataId FROM approvalSequenceData WHERE requestedBy='$loginId' AND schemaId='$schemaId' AND specialInstruction='$specialInstruction'";
		}
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not execute Approval Sequence Data query");
		if (mysql_num_rows($result) != 1) return null;
		list($dataId) = mysql_fetch_row($result);
		return $dataId;
	}
	public final static function isApprovalComplete($config, $loginId, $operationCode, $regExpression, $msgExpression, $serverPath, $specialInstruction)	{
		include($config);
		$conn = mysql_connect($hostname, $user, $pass) or Object::returnBooleanValue(false);
		$customMessage = null;
		//1. Get Reference Schema
		$schema1 = null;
		try {
			$schemaId = ApprovalSequenceSchema::getApprovedSchemaFromCodeAndLogin($database, $conn, $loginId, $operationCode);
			if (is_null($schemaId)) Object::shootException("No Schema were found");
			$schema1 = new ApprovalSequenceSchema($database, $schemaId, $conn);
		} catch (Exception $e)	{
			mysql_close($conn);
			$window1 = ApprovalSequenceSchema::getSchemaNotFoundApprovalSequenceWindow($loginId, $operationCode, $customMessage);
			$customMessage = null;
			echo $window1;
			return false;
		}
		//2. Load data 
		$data1 = null;
		try {
			$dataId = self::getDataIdForRequesterInASchema($database, $conn, $loginId, $schema1->getSchemaId(), $specialInstruction);
			if (is_null($dataId)) Object::shootException("There were not Approval Sequence Data Found");
			$data1 = new ApprovalSequenceData($database, $dataId, $conn);
			//Check if this is Still Valid 
			if (! $data1->isStillValid())	{
				//Remove and restart again 
				$data1->commitDelete();
				$customMessage = "Your Previous Request has expired before execution";
				Object::shootException($customMessage);
			}
		} catch (Exception $e)	{
			mysql_close($conn);
			$window1 = ApprovalSequenceSchema::getNewApprovalSequenceWindow($loginId, $operationCode, $schema1->getSchemaId(), $customMessage, $regExpression, $msgExpression, $serverPath, $specialInstruction);
			$customMessage = null;
			echo $window1;
			return false;
		}
		//3. Check if All Approving Parties has completed 
		if (! $data1->isApprovingComplete())	{
			//Still not yet Completed and it is still valid 
			mysql_close($conn);
			$window1 = ApprovalSequenceSchema::getAwaitingApprovalSequenceWindow($loginId, $operationCode, $schema1->getSchemaId(), null, $serverPath);
			echo $window1;
			return false;
		}
		mysql_close($conn);
		//Now we can rule out all the factors above and assume everything is okay 
		return true;
	}
	public function isStillValid()	{
		//use remaining Days
		return true; //Execute Validity
	}
	public function getRemainingDays()	{
		return 1; //Just for now
	}
	public function isApprovingComplete()	{
		//Algorith for checking that 
		if ($this->isCompleted()) return true;
		$schema1 = $this->schema;
		if (is_null($schema1)) return false;
		if ($schema1->isDefaultApprove() && is_null($schema1->getApprovingJobList())) return true;
		if ($schema1->isDefaultApprove() && (sizeof($schema1->getApprovingJobList()) == 0)) return true;
		if (is_null($schema1->getApprovingJobList())) return false;
		if (is_null($this->alreadyApprovedList)) return false;
		if (sizeof($this->alreadyApprovedList) != sizeof($schema1->getApprovingJobList())) return false;
		$approvalIsComplete = true;
		$loginApproved = $this->alreadyApprovedList;
		$approvingJobs = $schema1->getApprovingJobList();
		for ($i=0; $i< sizeof($approvingJobs); $i++)	{
			$login1 = $loginApproved[$i];
			$job1 = $approvingJobs[$i];
			if (is_null($login1->getJobTitle())) $approvalIsComplete = false;
			$approvalIsComplete = $approvalIsComplete && ($login1->getJobTitle()->getJobId() == $job1->getJobId());
			if (! $approvalIsComplete)	{
				break;
			}
		}
		if ($approvalIsComplete)	{
			//Just Mark it 
			$this->setCompleted("1");
			try {
				$this->commitUpdate();
			} catch (Exception $e)	{
				//Just Leave this 
			}
		}
		return $approvalIsComplete;
	}
	public function isCompleted()	{
		return $this->isFlagSetAt(ApprovalSequenceData::$__IS_COMPLETED);
	}
	public function setCompleted($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(ApprovalSequenceData::$__IS_COMPLETED);
		} else {
			$this->resetFlagAt(ApprovalSequenceData::$__IS_COMPLETED);
		}
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@ApprovalSequenceData/specialInstruction,text,1052;extraFilter,text,1052;extraInformation,text,1052;flags,text,1052";
		$lineToView .= ApprovalSequenceSchema::getAvailableViewableColumns();
		$lineToView .= Login::getAvailableViewableColumns();
		$lineToView .= JobTitle::getAvailableViewableColumns();
		$lineToView .= Login::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "approvalsequencedata";
	}
	public final static function getClassContextName()	{
		return "manageapprovalsequencedata";
	}
	public final static function getUniqueDataId($database, $conn)	{
		$query="SELECT dataId FROM approvalSequenceData";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ApprovalSequenceData, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('ApprovalSequenceData, None or Duplicate Row/Multiple Rows Found');
		list($dataId)=mysql_fetch_row($result);
		return $dataId;
	}
	public final static function add($database, $conn, $schemaId, $requestedBy, $nextJobToApprove, $alreadyApprovedList, $timeOfRegistration, $specialInstruction, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO approvalSequenceData (schemaId, requestedBy, nextJobToApprove, alreadyApprovedList, timeOfRegistration, specialInstruction, extraFilter, extraInformation, flags) VALUES('$schemaId', '$requestedBy', '$nextJobToApprove', '$alreadyApprovedList', '$timeOfRegistration', '$specialInstruction', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ApprovalSequenceData, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ApprovalSequenceData, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('ApprovalSequenceData, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->dataId;
	}
	public function getDataId() {
		return $this->dataId;
	}
	public function getSchema() {
		return $this->schema;
	}
	public function setSchema($schemaId) {
		if (! is_null($schemaId))	{
			$this->addToUpdateList("schemaId", $schemaId);
			$this->schema = null;
			try	{
				$this->schema = new ApprovalSequenceSchema($this->database, $schemaId, $this->conn);
			} catch (Exception $e)	{
				$this->schema = null;
			}
		}
	}
	public function getRequestedBy() {
		return $this->requestedBy;
	}
	public function setRequestedBy($requestedBy) {
		if (! is_null($requestedBy))	{
			$this->addToUpdateList("requestedBy", $requestedBy);
			$this->requestedBy = null;
			try	{
				$this->requestedBy = new Login($this->database, $requestedBy, $this->conn);
			} catch (Exception $e)	{
				$this->requestedBy = null;
			}
		}
	}
	public function getNextJobToApprove() {
		return $this->nextJobToApprove;
	}
	public function setNextJobToApprove($nextJobToApprove) {
		if (! is_null($nextJobToApprove))	{
			$this->addToUpdateList("nextJobToApprove", $nextJobToApprove);
			$this->nextJobToApprove = null;
			try	{
				$this->nextJobToApprove = new JobTitle($this->database, $nextJobToApprove, $this->conn);
			} catch (Exception $e)	{
				$this->nextJobToApprove = null;
			}
		}
	}
	public function getAlreadyApprovedList() {
		return $this->alreadyApprovedList;
	}
	public function setAlreadyApprovedList($alreadyApprovedList) {
		if (! is_null($alreadyApprovedList))	{
			$this->addToUpdateList("alreadyApprovedList", $alreadyApprovedList);
			$this->alreadyApprovedList = array();
			$idListArr = explode(",", $alreadyApprovedList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Login($this->database, $id, $this->conn);
					$this->alreadyApprovedList[sizeof($this->alreadyApprovedList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getTimeOfRegistration() {
		return $this->timeOfRegistration;
	}
	public function setTimeOfRegistration($timeOfRegistration) {
		if (! is_null($timeOfRegistration))	{
			$this->addToUpdateList("timeOfRegistration", $timeOfRegistration);
			$this->timeOfRegistration = null;
			try	{
				$this->timeOfRegistration = new DateAndTime($this->database, $timeOfRegistration, $this->conn);
			} catch (Exception $e)	{
				$this->timeOfRegistration = null;
			}
		}
	}
	public function getSpecialInstruction() {
		return $this->specialInstruction;
	}
	public function setSpecialInstruction($specialInstruction) {
		if (! is_null($specialInstruction))	{
			$this->addToUpdateList("specialInstruction", $specialInstruction);
			$this->specialInstruction = $specialInstruction;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT dataId FROM approvalSequenceData";
		return $query;
	}
	public function __construct($database, $dataId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "ApprovalSequenceData")) Object::shootException("ApprovalSequenceData System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $dataId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->dataId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "ApprovalSequenceData")) Object::shootException("ApprovalSequenceData System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE approvalSequenceData SET $setList WHERE dataId = '$this->dataId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ApprovalSequenceData, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "ApprovalSequenceData")) Object::shootException("ApprovalSequenceData System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM approvalSequenceData WHERE dataId = '$this->dataId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ApprovalSequenceData, Row Deletion Failed');
	}
	public function getClassName()	{
		return "ApprovalSequenceData";
	}
	protected function getProperties()	{
		return "dataId=$this->dataId"."@specialInstruction=$this->specialInstruction"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1052.dataId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->dataId))."@1052.specialInstruction=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->specialInstruction))."@1052.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1052.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1052.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: ApprovalSequenceData (NAMESPACETAG = 1052) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->schema))	{
			$this->schema->debug();
		}
		if (! is_null($this->requestedBy))	{
			$this->requestedBy->debug();
		}
		if (! is_null($this->nextJobToApprove))	{
			$this->nextJobToApprove->debug();
		}
		if (! is_null($this->timeOfRegistration))	{
			$this->timeOfRegistration->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->schema))	{
			$matrix1=$this->schema->searchMatrix($matrix1);
		}
		if (! is_null($this->requestedBy))	{
			$matrix1=$this->requestedBy->searchMatrix($matrix1);
		}
		if (! is_null($this->nextJobToApprove))	{
			$matrix1=$this->nextJobToApprove->searchMatrix($matrix1);
		}
		if (! is_null($this->timeOfRegistration))	{
			$matrix1=$this->timeOfRegistration->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->schema))	{
			$csvProcessor1=$this->schema->processCSV($csvProcessor1);
		}
		if (! is_null($this->requestedBy))	{
			$csvProcessor1=$this->requestedBy->processCSV($csvProcessor1);
		}
		if (! is_null($this->nextJobToApprove))	{
			$csvProcessor1=$this->nextJobToApprove->processCSV($csvProcessor1);
		}
		if (! is_null($this->timeOfRegistration))	{
			$csvProcessor1=$this->timeOfRegistration->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $dataId, $conn) {
		$query="SELECT dataId, schemaId, requestedBy, nextJobToApprove, alreadyApprovedList, timeOfRegistration, specialInstruction, extraFilter, extraInformation, flags FROM approvalSequenceData WHERE dataId = '$dataId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('ApprovalSequenceData, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ApprovalSequenceData, Duplicate or No Record');
		list($dataId, $schemaId, $requestedBy, $nextJobToApprove, $alreadyApprovedList, $timeOfRegistration, $specialInstruction, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->dataId = $dataId;
		if (! is_null($schemaId))	{
			$this->schema = null;
			try	{
				$this->schema = new ApprovalSequenceSchema($this->database, $schemaId, $this->conn);
			} catch (Exception $e)	{
				$this->schema = null;
			}
		}
		if (! is_null($requestedBy))	{
			$this->requestedBy = null;
			try	{
				$this->requestedBy = new Login($this->database, $requestedBy, $this->conn);
			} catch (Exception $e)	{
				$this->requestedBy = null;
			}
		}
		if (! is_null($nextJobToApprove))	{
			$this->nextJobToApprove = null;
			try	{
				$this->nextJobToApprove = new JobTitle($this->database, $nextJobToApprove, $this->conn);
			} catch (Exception $e)	{
				$this->nextJobToApprove = null;
			}
		}
		if (! is_null($alreadyApprovedList))	{
			$this->alreadyApprovedList = array();
			$idListArr = explode(",", $alreadyApprovedList);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Login($this->database, $id, $this->conn);
					$this->alreadyApprovedList[sizeof($this->alreadyApprovedList)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($timeOfRegistration))	{
			$this->timeOfRegistration = null;
			try	{
				$this->timeOfRegistration = new DateAndTime($this->database, $timeOfRegistration, $this->conn);
			} catch (Exception $e)	{
				$this->timeOfRegistration = null;
			}
		}
		if (! is_null($specialInstruction))	{
			$this->specialInstruction = $specialInstruction;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT schemaId, requestedBy, nextJobToApprove, alreadyApprovedList, timeOfRegistration, specialInstruction, extraFilter, extraInformation, flags FROM approvalSequenceData WHERE dataId = '$this->dataId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ApprovalSequenceData, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ApprovalSequenceData, [Clone] Duplicate or No Record');
		list($schemaId, $requestedBy, $nextJobToApprove, $alreadyApprovedList, $timeOfRegistration, $specialInstruction, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['schemaId'] = $schemaId;
		$masterDataArray['requestedBy'] = $requestedBy;
		$masterDataArray['nextJobToApprove'] = $nextJobToApprove;
		$masterDataArray['alreadyApprovedList'] = $alreadyApprovedList;
		$masterDataArray['timeOfRegistration'] = $timeOfRegistration;
		$masterDataArray['specialInstruction'] = $specialInstruction;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO approvalSequenceData ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ApprovalSequenceData [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ApprovalSequenceData [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("ApprovalSequenceData [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class AdmissionProgress extends Object {
	private $progressId;
	private $progressName;
	private $progressPage;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getProgressPageNameFromPageNumber($database, $conn, $progressPage)	{
		$query = "SELECT progressName FROM admissionProgress WHERE progressPage='$progressPage'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Could not Load Progress Page");
		if (mysql_num_rows($result) != 1) Object::shootException("None or Multiple Progress Pages refering to the same page number");
		list($progressName)=mysql_fetch_row($result);
		return $progressName;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@AdmissionProgress/progressName,text,1053;progressPage,text,1053;extraFilter,text,1053;extraInformation,text,1053;flags,text,1053";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "admissionprogress";
	}
	public final static function getClassContextName()	{
		return "manageadmissionprogress";
	}
	public final static function getUniqueProgressId($database, $conn)	{
		$query="SELECT progressId FROM admissionProgress";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('AdmissionProgress, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('AdmissionProgress, None or Duplicate Row/Multiple Rows Found');
		list($progressId)=mysql_fetch_row($result);
		return $progressId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT progressId, progressName FROM admissionProgress";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('AdmissionProgress, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $progressName, $progressPage, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO admissionProgress (progressName, progressPage, extraFilter, extraInformation, flags) VALUES('$progressName', '$progressPage', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('AdmissionProgress, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('AdmissionProgress, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('AdmissionProgress, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->progressId;
	}
	public function getProgressId() {
		return $this->progressId;
	}
	public function getProgressName() {
		return $this->progressName;
	}
	public function setProgressName($progressName) {
		if (! is_null($progressName))	{
			$this->addToUpdateList("progressName", $progressName);
			$this->progressName = $progressName;
		}
	}
	public function getProgressPage() {
		return $this->progressPage;
	}
	public function setProgressPage($progressPage) {
		if (! is_null($progressPage))	{
			$this->addToUpdateList("progressPage", $progressPage);
			$this->progressPage = $progressPage;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT progressId FROM admissionProgress";
		return $query;
	}
	public function __construct($database, $progressId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "AdmissionProgress")) Object::shootException("AdmissionProgress System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $progressId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->progressId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "AdmissionProgress")) Object::shootException("AdmissionProgress System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE admissionProgress SET $setList WHERE progressId = '$this->progressId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('AdmissionProgress, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "AdmissionProgress")) Object::shootException("AdmissionProgress System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM admissionProgress WHERE progressId = '$this->progressId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('AdmissionProgress, Row Deletion Failed');
	}
	public function getClassName()	{
		return "AdmissionProgress";
	}
	protected function getProperties()	{
		return "progressId=$this->progressId"."@progressName=$this->progressName"."@progressPage=$this->progressPage"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1053.progressId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->progressId))."@1053.progressName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->progressName))."@1053.progressPage=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->progressPage))."@1053.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1053.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1053.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: AdmissionProgress (NAMESPACETAG = 1053) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $progressId, $conn) {
		$query="SELECT progressId, progressName, progressPage, extraFilter, extraInformation, flags FROM admissionProgress WHERE progressId = '$progressId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('AdmissionProgress, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('AdmissionProgress, Duplicate or No Record');
		list($progressId, $progressName, $progressPage, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->progressId = $progressId;
		if (! is_null($progressName))	{
			$this->progressName = $progressName;
		}
		if (! is_null($progressPage))	{
			$this->progressPage = $progressPage;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT progressName, progressPage, extraFilter, extraInformation, flags FROM admissionProgress WHERE progressId = '$this->progressId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('AdmissionProgress, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('AdmissionProgress, [Clone] Duplicate or No Record');
		list($progressName, $progressPage, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['progressName'] = $progressName;
		$masterDataArray['progressPage'] = $progressPage;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO admissionProgress ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("AdmissionProgress [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("AdmissionProgress [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("AdmissionProgress [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class ClassOfAward extends Object {
	private $awardId;
	private $awardName;
	private $educationLevel;
	private $lowestGPA;
	private $highestGPA;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__IS_FAILED = 5;
	public function isFailed()	{
		return $this->isFlagSetAt(ClassOfAward::$__IS_FAILED);
	}
	public function setFailed($failed)	{
		if (intval($failed) == 1)	{
			$this->setFlagAt(ClassOfAward::$__IS_FAILED);
		} else {
			$this->resetFlagAt(ClassOfAward::$__IS_FAILED);
		}
	}
	public final static function getClassOfAwardFromGPAAndEducationLevel($database, $conn, $gpa, $levelId)	{
		$query = "SELECT awardId, lowestGPA, highestGPA FROM classOfAward WHERE levelId='$levelId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Class Of Award [static], could not execute query");
		$returnedAwardId = null;
		$gpa = floatval($gpa);
		while (list($awardId, $lowestGPA, $highestGPA)=mysql_fetch_row($result))	{
			if (($gpa >= floatval($lowestGPA)) && ($gpa < floatval($highestGPA)))	{
				$returnedAwardId = $awardId;
				break;
			}
		}
		return $returnedAwardId;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@ClassOfAward/awardName,text,1054;lowestGPA,text,1054;highestGPA,text,1054;extraFilter,text,1054;extraInformation,text,1054;flags,text,1054";
		$lineToView .= EducationLevel::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "classofaward";
	}
	public final static function getClassContextName()	{
		return "manageclassofaward";
	}
	public final static function getUniqueAwardId($database, $conn)	{
		$query="SELECT awardId FROM classOfAward";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ClassOfAward, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('ClassOfAward, None or Duplicate Row/Multiple Rows Found');
		list($awardId)=mysql_fetch_row($result);
		return $awardId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT awardId, awardName FROM classOfAward";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ClassOfAward, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $awardName, $levelId, $lowestGPA, $highestGPA, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO classOfAward (awardName, levelId, lowestGPA, highestGPA, extraFilter, extraInformation, flags) VALUES('$awardName', '$levelId', '$lowestGPA', '$highestGPA', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ClassOfAward, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('ClassOfAward, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('ClassOfAward, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->awardId;
	}
	public function getAwardId() {
		return $this->awardId;
	}
	public function getAwardName() {
		return $this->awardName;
	}
	public function setAwardName($awardName) {
		if (! is_null($awardName))	{
			$this->addToUpdateList("awardName", $awardName);
			$this->awardName = $awardName;
		}
	}
	public function getEducationLevel() {
		return $this->educationLevel;
	}
	public function setEducationLevel($levelId) {
		if (! is_null($levelId))	{
			$this->addToUpdateList("levelId", $levelId);
			$this->educationLevel = null;
			try	{
				$this->educationLevel = new EducationLevel($this->database, $levelId, $this->conn);
			} catch (Exception $e)	{
				$this->educationLevel = null;
			}
		}
	}
	public function getLowestGPA() {
		return $this->lowestGPA;
	}
	public function setLowestGPA($lowestGPA) {
		if (! is_null($lowestGPA))	{
			$this->addToUpdateList("lowestGPA", $lowestGPA);
			$this->lowestGPA = $lowestGPA;
		}
	}
	public function getHighestGPA() {
		return $this->highestGPA;
	}
	public function setHighestGPA($highestGPA) {
		if (! is_null($highestGPA))	{
			$this->addToUpdateList("highestGPA", $highestGPA);
			$this->highestGPA = $highestGPA;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT awardId FROM classOfAward";
		return $query;
	}
	public function __construct($database, $awardId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "ClassOfAward")) Object::shootException("ClassOfAward System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $awardId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->awardId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "ClassOfAward")) Object::shootException("ClassOfAward System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE classOfAward SET $setList WHERE awardId = '$this->awardId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ClassOfAward, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "ClassOfAward")) Object::shootException("ClassOfAward System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM classOfAward WHERE awardId = '$this->awardId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ClassOfAward, Row Deletion Failed');
	}
	public function getClassName()	{
		return "ClassOfAward";
	}
	protected function getProperties()	{
		return "awardId=$this->awardId"."@awardName=$this->awardName"."@lowestGPA=$this->lowestGPA"."@highestGPA=$this->highestGPA"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1054.awardId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->awardId))."@1054.awardName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->awardName))."@1054.lowestGPA=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->lowestGPA))."@1054.highestGPA=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->highestGPA))."@1054.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1054.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1054.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: ClassOfAward (NAMESPACETAG = 1054) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->educationLevel))	{
			$this->educationLevel->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->educationLevel))	{
			$matrix1=$this->educationLevel->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->educationLevel))	{
			$csvProcessor1=$this->educationLevel->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $awardId, $conn) {
		$query="SELECT awardId, awardName, levelId, lowestGPA, highestGPA, extraFilter, extraInformation, flags FROM classOfAward WHERE awardId = '$awardId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('ClassOfAward, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ClassOfAward, Duplicate or No Record');
		list($awardId, $awardName, $levelId, $lowestGPA, $highestGPA, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->awardId = $awardId;
		if (! is_null($awardName))	{
			$this->awardName = $awardName;
		}
		if (! is_null($levelId))	{
			$this->educationLevel = null;
			try	{
				$this->educationLevel = new EducationLevel($this->database, $levelId, $this->conn);
			} catch (Exception $e)	{
				$this->educationLevel = null;
			}
		}
		if (! is_null($lowestGPA))	{
			$this->lowestGPA = $lowestGPA;
		}
		if (! is_null($highestGPA))	{
			$this->highestGPA = $highestGPA;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT awardName, levelId, lowestGPA, highestGPA, extraFilter, extraInformation, flags FROM classOfAward WHERE awardId = '$this->awardId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('ClassOfAward, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('ClassOfAward, [Clone] Duplicate or No Record');
		list($awardName, $levelId, $lowestGPA, $highestGPA, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['awardName'] = $awardName;
		$masterDataArray['levelId'] = $levelId;
		$masterDataArray['lowestGPA'] = $lowestGPA;
		$masterDataArray['highestGPA'] = $highestGPA;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO classOfAward ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ClassOfAward [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("ClassOfAward [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("ClassOfAward [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class MessageAccessList	{
	private $pEnableSaving;
	private $ds1; //Data Structure
	/*
	DataStructure 
	ds1[sequenceNumber][0] = sequenceNumber 
	ds1[sequenceNumber][1] = messageType [Local/Email/Phone/0]
	ds1[sequenceNumber][2] = source_category [Login/Job/Group/0]
	ds1[sequenceNumber][3] = source_addr [id_of_source_category/0]
	ds1[sequenceNumber][4] = dest_category [Login/Job/Group/0]
	ds1[sequenceNumber][5] = dest_addr [id_of_dest_category/0]
	ds1[sequenceNumber][6] = action [i=accept/0=reject] 
	*/
	private $sequenceNumberArray1; /*Need to make sure it is always sorted , especially prior saving*/
	private $sequenceNumber;
	private $filename;
	private $database;
	private $conn;
	static $__MESSAGE_ACCESS_ALL = 0;
	static $__MESSAGE_ACCESS_LOGIN = 1;
	static $__MESSAGE_ACCESS_JOBTITLE = 2;
	static $__MESSAGE_ACCESS_GROUP = 3; 
	/**************/
	static $__MESSAGE_ADDRESS_ALL = 0;
	static $__ACTION_ACCEPT = 1;
	static $__ACTION_REJECT = 0;
	/*For Internal control of this Object*/
	static $__SOURCE_TYPE_ALL = 0;
	static $__SOURCE_TYPE_LOGIN = 1;
	static $__SOURCE_TYPE_JOBTITLE = 2;
	static $__SOURCE_TYPE_GROUP = 3;
	/*End of File Marker*/
	static $__EOF_REACHED = -1;
	//Clone Mode 
	static $__IS_CLONE_MODE = "__is_clone_mode";
	public function __construct($database, $filename, $conn)	{
		if ($filename == MessageAccessList::$__IS_CLONE_MODE) return;
		$this->pEnableSaving = true; //Loading general rules 
		$this->database = $database;
		$this->sequenceNumber = 0;
		$this->conn = $conn;
		$this->filename = $filename;
		if (! file_exists($filename)) Object::shootException("Message Policy file does not exists");
		$file1 = fopen($filename, "r") or Object::shootException("Error in opening message policy file");
		$this->ds1 = array();
		$this->sequenceNumberArray1 = array();
		while (($line = fgets($file1)) !== false)	{
			$dataArray = explode(",", $line);
			if (sizeof($dataArray) != 7) continue; //skip may be last line is empty 
			//Index should be sequence Number 
			$index = intval(trim($dataArray[0]));
			$this->ds1[$index] = array();
			$this->ds1[$index][0] = trim($dataArray[0]);
			$this->ds1[$index][1] = trim($dataArray[1]);
			$this->ds1[$index][2] = trim($dataArray[2]);
			$this->ds1[$index][3] = trim($dataArray[3]);
			$this->ds1[$index][4] = trim($dataArray[4]);
			$this->ds1[$index][5] = trim($dataArray[5]);
			$this->ds1[$index][6] = trim($dataArray[6]);
			/*sequenceNumberArray Now */
			$this->sequenceNumberArray1[sizeof($this->sequenceNumberArray1)] = $index;
		}
		fclose($file1);
	}
	public function __destruct()	{
		/*
		Release system resources at this point if any
		*/
	}
	private function sort()	{
		//We Bubble sort
		$datasize = sizeof($this->sequenceNumberArray1);
		for ($i=0; $i < ($datasize - 1); $i++)	{
			$swapped = false;
			for ($j=0; $j < ($datasize - $i - 1); $j++)	{
				if (intval("".$this->sequenceNumberArray1[$j]) > intval("".$this->sequenceNumberArray1[$j + 1]))	{
					$temp = $this->sequenceNumberArray1[$j];
					$this->sequenceNumberArray1[$j] = $this->sequenceNumberArray1[$j + 1];
					$this->sequenceNumberArray1[$j + 1] = $temp;
					$swapped = true;
				}
			}
			if (! $swapped)	{
				//No need to continue already sorted 
				break;
			}
		}
	}
	public function enableSaving($__enable)	{
		$this->pEnableSaving = (intval($__enable) == 1);
	}
	public function addRule($sequenceNumber, $messageType, $source_category, $source_addr, $dest_category, $dest_addr, $action)	{
		//Message Type can be MessageType.$__MESSAGE_EMAIL 
		$lineStructure1 = array();
		$lineStructure1[0] = $sequenceNumber;
		$lineStructure1[1] = $messageType;
		$lineStructure1[2] = $source_category;
		$lineStructure1[3] = $source_addr;
		$lineStructure1[4] = $dest_category;
		$lineStructure1[5] = $dest_addr;
		$lineStructure1[6] = $action;
		$this->ds1[$sequenceNumber] = $lineStructure1;
		$this->sequenceNumberArray1[sizeof($this->sequenceNumberArray1)] = $sequenceNumber;
	}
	public function removeRule($sequenceNumber)	{
		/*Delete from the control Array*/
		$tempArray1 = array();
		for ($i=0; $i < sizeof($this->sequenceNumberArray1); $i++)	{
			if (intval("".$this->sequenceNumberArray1[$i]) != intval("".$sequenceNumber))	{
				$tempArray1[sizeof($tempArray1)] = $this->sequenceNumberArray1[$i];
			}
		}
		$this->sequenceNumberArray1 = $tempArray1;
		$this->sequenceNumber = $sequenceNumber;
	}
	public function saveRules()	{
		if (! $this->pEnableSaving) Object::shootException("The System does not allow individual rules to be saved");
		/*Sort sequence Number array , this is a control array*/
		$this->sort();
		$file1 = fopen($this->filename, "w") or Object::shootException("Could not open message policy file for writing");
		for ($i=0, $sequenceNumber=10; $i < sizeof($this->sequenceNumberArray1); $i++, $sequenceNumber = $sequenceNumber + 10)	{
			$oldSequenceNumber = $this->sequenceNumberArray1[$i]; //is now sorted 
			$lineStructure1 = $this->ds1[$oldSequenceNumber];
			$line = $sequenceNumber.",".$lineStructure1[1].",".$lineStructure1[2].",".$lineStructure1[3].",".$lineStructure1[4].",".$lineStructure1[5].",".$lineStructure1[6]."\n";
			fwrite($file1, $line) or Object::shootException("Error in Saving file, at line ".($i+1));
		}
		fclose($file1);
	}
	public function loadMyRules($loginId, $messageType, $sourceType)	{
		/*MessageType can be of MessageType::$__MESSAGE_TYPE_EMAIL*/
		$this->pEnableSaving = false;
		/* Preparing picking criteria*/
		$loginArr = array();
		$jobArr = array();
		$groupArr = array();
		if (($loginId != MessageAccessList::$__MESSAGE_ADDRESS_ALL) && ($sourceType == MessageAccessList::$__MESSAGE_ACCESS_LOGIN))	{
			$loginArr[0] = $loginId; //For complience 
			$login1 = new Login($this->database, $loginId, $this->conn);
			$jobArr[0] = $login1->getJobTitle()->getJobId();//For complience 
			$groupArr = Group::getMyGroupHierarchy($this->database, $this->conn, $login1->getGroup()->getGroupId(), null);
		} else if (($loginId != MessageAccessList::$__MESSAGE_ADDRESS_ALL) && ($sourceType == MessageAccessList::$__MESSAGE_ACCESS_JOBTITLE))	{
			$jobArr[0] = $loginId;
		} else if (($loginId != MessageAccessList::$__MESSAGE_ADDRESS_ALL) && ($sourceType == MessageAccessList::$__MESSAGE_ACCESS_GROUP))	{
			$groupArr = Group::getMyGroupHierarchy($this->database, $this->conn, $loginId, null);
		} else if ($loginId != MessageAccessList::$__MESSAGE_ADDRESS_ALL)	{
			Object::shootException("Source Address Submitted was not well understood");
		}
		/*We have loginArr, jobArr and groupArr which will help us to track source depend on the type */
		/*What we can play with is a control Array */
		$sequenceNumberArray1 = array();
		$ds1 = array();
		for ($i = 0; $i < sizeof($this->sequenceNumberArray1); $i++)	{
			$sequenceNumber = $this->sequenceNumberArray1[$i];
			$lineStructure1 = $this->ds1[$sequenceNumber];
			/*Get Lines of Interest*/
			$isLineOfInterest = (($lineStructure1[1] == MessageType::$__MESSAGE_TYPE_ALL) || ($lineStructure1[1] == $messageType)) 
								&& (($lineStructure1[2] == MessageAccessList::$__MESSAGE_ACCESS_ALL) || 
									(
										($lineStructure1[2] == MessageAccessList::$__MESSAGE_ACCESS_GROUP) && 
										(($lineStructure1[3] == MessageAccessList::$__MESSAGE_ADDRESS_ALL) || 
											in_array($lineStructure1[3], $groupArr)) 
									) ||
									(
										($lineStructure1[2] == MessageAccessList::$__MESSAGE_ACCESS_JOBTITLE) && 
										(($lineStructure1[3] == MessageAccessList::$__MESSAGE_ADDRESS_ALL) || 
											in_array($lineStructure1[3], $jobArr)) 
									) ||
									(
										($lineStructure1[2] == MessageAccessList::$__MESSAGE_ACCESS_LOGIN) && 
										(($lineStructure1[3] == MessageAccessList::$__MESSAGE_ADDRESS_ALL) || 
											in_array($lineStructure1[3], $loginArr)) 
									)
								);
			if ($isLineOfInterest)	{
				/*We need to need to add without caring much*/
				$sequenceNumberArray1[sizeof($sequenceNumberArray1)] = $this->sequenceNumberArray1[$i];
				$ds1[$this->sequenceNumberArray1[$i]] = $lineStructure1;
			}
		}
		$this->sequenceNumberArray1 = $sequenceNumberArray1;
		$this->ds1 = $ds1;
		return $this;
	}
	public function getRecordAtSequenceNumber($sequenceNumber)	{
		$lineStructure1 = null;
		if (isset($this->ds1[$sequenceNumber])) $lineStructure1 = $this->ds1[$sequenceNumber];
		return $lineStructure1;
	}
	public function isAccepted($destType, $loginId)	{
		/*This function should be called after loadMyRules */
		/*
		Type has already been loaded in loadMyRules 
		Note:
		dest_type example MessageAccessList::$__MESSAGE_ACCESS_GROUP or 0
		dest_addr or loginId ie groupId or 0
		*/
			/* Preparing picking criteria*/
		$loginArr = array();
		$jobArr = array();
		$groupArr = array();
		if (($loginId != MessageAccessList::$__MESSAGE_ADDRESS_ALL) && ($destType == MessageAccessList::$__MESSAGE_ACCESS_LOGIN))	{
			$loginArr[0] = $loginId; //For complience 
			$login1 = new Login($this->database, $loginId, $this->conn);
			$jobArr[0] = $login1->getJobTitle()->getJobId();//For complience 
			$groupArr = Group::getMyGroupHierarchy($this->database, $this->conn, $login1->getGroup()->getGroupId(), null);
		} else if (($loginId != MessageAccessList::$__MESSAGE_ADDRESS_ALL) && ($destType == MessageAccessList::$__MESSAGE_ACCESS_JOBTITLE))	{
			$jobArr[0] = $loginId;
		} else if (($loginId != MessageAccessList::$__MESSAGE_ADDRESS_ALL) && ($destType == MessageAccessList::$__MESSAGE_ACCESS_GROUP))	{
			$groupArr = Group::getMyGroupHierarchy($this->database, $this->conn, $loginId, null);
		} else if ($loginId != MessageAccessList::$__MESSAGE_ADDRESS_ALL)	{
			Object::shootException("Destination Address Submitted was not well understood");
		}
		/*We have loginArr, jobArr and groupArr which will help us to track source depend on the type */
		
		
		$accept_rule = false;
		$this->sequenceNumber = MessageAccessList::$__EOF_REACHED;
		for ($i=0; $i < sizeof($this->sequenceNumberArray1); $i++)	{
			$sequenceNumber = $this->sequenceNumberArray1[$i];
			$lineStructure1 = $this->ds1[$sequenceNumber];
			
			$ruleIsMatched = 
								(($lineStructure1[4] == MessageAccessList::$__MESSAGE_ACCESS_ALL) || 
									(
										($lineStructure1[4] == MessageAccessList::$__MESSAGE_ACCESS_GROUP) && 
										(($lineStructure1[5] == MessageAccessList::$__MESSAGE_ADDRESS_ALL) || 
											in_array($lineStructure1[5], $groupArr)) 
									) ||
									(
										($lineStructure1[4] == MessageAccessList::$__MESSAGE_ACCESS_JOBTITLE) && 
										(($lineStructure1[5] == MessageAccessList::$__MESSAGE_ADDRESS_ALL) || 
											in_array($lineStructure1[5], $jobArr)) 
									) ||
									(
										($lineStructure1[4] == MessageAccessList::$__MESSAGE_ACCESS_LOGIN) && 
										(($lineStructure1[5] == MessageAccessList::$__MESSAGE_ADDRESS_ALL) || 
											in_array($lineStructure1[5], $loginArr)) 
									)
								);
			if ($ruleIsMatched)	{
				//Make Decision and return 
				$accept_rule = false;
				if ($lineStructure1[6] == MessageAccessList::$__ACTION_ACCEPT)	$accept_rule = true;
				/*We need to save the matched sequence Number for other processes*/
				$this->sequenceNumber = $sequenceNumber;
				break;
			}
			
		}
		return $accept_rule;
	}
	public function getSequenceNumber()	{
		return $this->sequenceNumber;
	}
	public function getDataStructure()	{
		$ds1 = array();
		for ($i=0; $i < sizeof($this->sequenceNumberArray1); $i++)	{
			$index = $this->sequenceNumberArray1[$i];
			$lineStructure1 = $this->ds1[$index];
			$ds1[sizeof($ds1)] = $lineStructure1; /*zero index based to outside*/
		}
		return $ds1;
	}
	public function assignData($database, $conn, $filename, $pEnableSaving, $ds1, $sequenceNumberArray1, $sequenceNumber)	{
		$this->database = $database;
		$this->conn = $conn;
		$this->filename = $filename;
		$this->pEnableSaving = $pEnableSaving;
		$this->ds1 = $ds1;
		$this->sequenceNumberArray1 = $sequenceNumberArray1;
		$this->sequenceNumber = $sequenceNumber;
	}
	public function cloneMe()	{
		$policy1 = new MessageAccessList($this->database, MessageAccessList::$__IS_CLONE_MODE, $this->conn);
		//For Array you have to create a new Object to avoid same reference pointing errors 
		$ds1 = array();
		foreach ($this->ds1 as $key_1 => $array_1)	{
			$ds1[$key_1] = array();
			foreach ($array_1 as $key_2 => $val_2)	{
				$ds1[$key_1][$key_2] = $val_2;
			}
		}
		$sequenceNumberArray1 = array();
		foreach ($this->sequenceNumberArray1 as $key_1 => $val_1)	{
			$sequenceNumberArray1[$key_1] = $val_1;
		}
		$policy1->assignData($this->database, $this->conn, $this->filename, $this->pEnableSaving, $ds1, $sequenceNumberArray1, $this->sequenceNumber);
		return $policy1;
	}
}
class CoursePointLimit extends Object {
	private $limitId;
	private $course;
	private $year;
	private $semester;
	private $minimumPoints;
	private $maximumPoints;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@CoursePointLimit/year,text,1055;semester,text,1055;minimumPoints,text,1055;maximumPoints,text,1055;extraFilter,text,1055;extraInformation,text,1055;flags,text,1055";
		$lineToView .= Course::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "coursepointlimit";
	}
	public final static function getClassContextName()	{
		return "managecoursepointlimit";
	}
	public final static function getUniqueLimitId($database, $conn)	{
		$query="SELECT limitId FROM coursePointLimits";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('CoursePointLimit, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('CoursePointLimit, None or Duplicate Row/Multiple Rows Found');
		list($limitId)=mysql_fetch_row($result);
		return $limitId;
	}
	public final static function add($database, $conn, $courseId, $_year, $_semester, $minimumPoints, $maximumPoints, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO coursePointLimits (courseId, _year, _semester, minimumPoints, maximumPoints, extraFilter, extraInformation, flags) VALUES('$courseId', '$_year', '$_semester', '$minimumPoints', '$maximumPoints', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('CoursePointLimit, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('CoursePointLimit, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('CoursePointLimit, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->limitId;
	}
	public function getLimitId() {
		return $this->limitId;
	}
	public function getCourse() {
		return $this->course;
	}
	public function setCourse($courseId) {
		if (! is_null($courseId))	{
			$this->addToUpdateList("courseId", $courseId);
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
	}
	public function getYear() {
		return $this->year;
	}
	public function setYear($_year) {
		if (! is_null($_year))	{
			$this->addToUpdateList("_year", $_year);
			$this->year = $_year;
		}
	}
	public function getSemester() {
		return $this->semester;
	}
	public function setSemester($_semester) {
		if (! is_null($_semester))	{
			$this->addToUpdateList("_semester", $_semester);
			$this->semester = $_semester;
		}
	}
	public function getMinimumPoints() {
		return $this->minimumPoints;
	}
	public function setMinimumPoints($minimumPoints) {
		if (! is_null($minimumPoints))	{
			$this->addToUpdateList("minimumPoints", $minimumPoints);
			$this->minimumPoints = $minimumPoints;
		}
	}
	public function getMaximumPoints() {
		return $this->maximumPoints;
	}
	public function setMaximumPoints($maximumPoints) {
		if (! is_null($maximumPoints))	{
			$this->addToUpdateList("maximumPoints", $maximumPoints);
			$this->maximumPoints = $maximumPoints;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT limitId FROM coursePointLimits";
		return $query;
	}
	public function __construct($database, $limitId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "CoursePointLimit")) Object::shootException("CoursePointLimit System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $limitId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->limitId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "CoursePointLimit")) Object::shootException("CoursePointLimit System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE coursePointLimits SET $setList WHERE limitId = '$this->limitId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('CoursePointLimit, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "CoursePointLimit")) Object::shootException("CoursePointLimit System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM coursePointLimits WHERE limitId = '$this->limitId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('CoursePointLimit, Row Deletion Failed');
	}
	public function getClassName()	{
		return "CoursePointLimit";
	}
	protected function getProperties()	{
		return "limitId=$this->limitId"."@year=$this->year"."@semester=$this->semester"."@minimumPoints=$this->minimumPoints"."@maximumPoints=$this->maximumPoints"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1055.limitId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->limitId))."@1055.year=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->year))."@1055.semester=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->semester))."@1055.minimumPoints=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->minimumPoints))."@1055.maximumPoints=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->maximumPoints))."@1055.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1055.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1055.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: CoursePointLimit (NAMESPACETAG = 1055) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->course))	{
			$this->course->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->course))	{
			$matrix1=$this->course->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->course))	{
			$csvProcessor1=$this->course->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $limitId, $conn) {
		$query="SELECT limitId, courseId, _year, _semester, minimumPoints, maximumPoints, extraFilter, extraInformation, flags FROM coursePointLimits WHERE limitId = '$limitId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('CoursePointLimit, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('CoursePointLimit, Duplicate or No Record');
		list($limitId, $courseId, $_year, $_semester, $minimumPoints, $maximumPoints, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->limitId = $limitId;
		if (! is_null($courseId))	{
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
		if (! is_null($_year))	{
			$this->year = $_year;
		}
		if (! is_null($_semester))	{
			$this->semester = $_semester;
		}
		if (! is_null($minimumPoints))	{
			$this->minimumPoints = $minimumPoints;
		}
		if (! is_null($maximumPoints))	{
			$this->maximumPoints = $maximumPoints;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT courseId, _year, _semester, minimumPoints, maximumPoints, extraFilter, extraInformation, flags FROM coursePointLimits WHERE limitId = '$this->limitId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('CoursePointLimit, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('CoursePointLimit, [Clone] Duplicate or No Record');
		list($courseId, $_year, $_semester, $minimumPoints, $maximumPoints, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['courseId'] = $courseId;
		$masterDataArray['_year'] = $_year;
		$masterDataArray['_semester'] = $_semester;
		$masterDataArray['minimumPoints'] = $minimumPoints;
		$masterDataArray['maximumPoints'] = $maximumPoints;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO coursePointLimits ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("CoursePointLimit [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("CoursePointLimit [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("CoursePointLimit [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class BriefcaseGroup extends Object {
	private $groupId;
	private $groupName;
	private $course;
	private $year;
	private $batch;
	private $examination;
	private $login;
	private $listOfOwners;
	private $rawMarksCSVFile;
	private $rawMarksCSVFileChecksum;
	private $gradedMarksCSVFile;
	private $gradedMarksCSVFileChecksum;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__IS_RESULTS_LOCKED = 5;
	static $__IS_PUBLISH_RESULTS = 6;
	public final static function getBriefcaseGroupListFromCriteria($database, $conn, $ownerLoginId, $criteriaArray1)	{
		//For this owner , criteriaArray key-value pair, key is a column name 
		$query = "SELECT groupId FROM briefcaseGroup";
		if (! is_null($criteriaArray1))	{
			$columnnumber = 0;
			$setText = "";
			foreach ($criteriaArray1 as $key => $value)	{
				if ($columnnumber == 0)	$setText = " WHERE $key='$value'";
				else $setText .= " AND $key='$value'";
				$columnnumber++;
			}
			$query = $query.$setText;
		}
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("BriefcaseGroup [static], Could not Load Briefcase List");
		//It is time to check for ownership 
		$list = array();
		while (list($groupId)=mysql_fetch_row($result))	{
			$group1 = new BriefcaseGroup($database, $groupId, $conn);
			if ($group1->isAuthorizedOwner($ownerLoginId)) $list[sizeof($list)] = $groupId;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function getBriefcaseGroupList($database, $conn, $accademicYearId, $courseId, $year, $semester, $locked)	{
		//accademicYearId, results for accademicYear 
		$query = "SELECT groupId FROM briefcaseGroup WHERE courseId='$courseId' AND _year='$year' AND batchId='$accademicYearId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("[Briefcase Group], There were problems in pulling the group list data");
		$list = array();
		while (list($groupId)=mysql_fetch_row($result))	{
			$group1 = new BriefcaseGroup($database, $groupId, $conn);
			if (! is_null($group1->getExamination()) && ($group1->isResultsLocked() == $locked) && (intval($group1->getExamination()->getSemester()) == intval($semester)))	{
				$list[sizeof($list)] = $group1->getGroupId();
			}
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public function canEditNow()	{
		return $this->canLockResultsNow();
	}
	public function canDeleteNow()	{
		return $this->canLockResultsNow();
	}
	public function canNullifyNow()	{
		return $this->canLockResultsNow();
	}
	public function canUploadNow()	{
		return $this->canLockResultsNow();
	}
	public function canDownloadNow()	{
		return ! $this->canUploadNow(); /* Upload and Download should not happen together */
	}
	public function canViewResultsDetails()	{
		return true; //Allow this any time
	}
	public function canAddNewItemNow()	{
		return $this->canLockResultsNow(); //Add New Briefcase
	}
	public function canPublishNow()	{
		return ($this->isResultsLocked() && ! $this->isPublishResultsEnabled());
	}
	public function canUnpublishNow()	{
		return ($this->isResultsLocked() && $this->isPublishResultsEnabled());
	}
	public function canLockResultsNow()	{
		return ! $this->isResultsLocked(); //Means you can now compile
	}
	public function canUnlockResultsNow()	{
		return $this->isResultsLocked();
	}
	public function canShareNow()	{
		return true;
	}
	public function isEligibleForPublication()	{
		return ($this->isResultsLocked() && $this->isPublishResultsEnabled());
	}
	public function isPublishResultsEnabled()	{
		return $this->isFlagSetAt(BriefcaseGroup::$__IS_PUBLISH_RESULTS);
	}
	public function setPublishResultsEnabled($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(BriefcaseGroup::$__IS_PUBLISH_RESULTS);
		} else {
			$this->resetFlagAt(BriefcaseGroup::$__IS_PUBLISH_RESULTS);
		}
	}
	public function isAuthorizedOwner($loginId)	{
		$collection1 = new Collection();
		$collection1->addObjectListToCollection($this->listOfOwners);
		return $collection1->isItemInACollection($loginId);
	}
	public final static function getBriefcaseListBelongingToAGroup($database, $conn, $groupId)	{
		//Semester can be false, 1,2 .. 
		$query = "SELECT briefcaseId FROM briefcase WHERE groupId='$groupId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Briefcase [static], Could not fetch results from the group");
		$list = array();
		while (list($id)=mysql_fetch_row($result))	{
			$list[sizeof($list)] = $id;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public function isResultsLocked()	{
		return $this->isFlagSetAt(BriefcaseGroup::$__IS_RESULTS_LOCKED);
	}
	public function setResultsLocked($val)	{
		if (intval($val) == 1)	{
			//We need to make sure the corresponding Results Are Locked the we lock this one too
			$resultsIdList = BriefcaseGroup::getBriefcaseListBelongingToAGroup($this->database, $this->conn, $this->groupId);
			if (! is_null($resultsIdList))	{
				foreach ($resultsIdList as $briefcaseId)	{
					try {
						$briefcase1 = new Briefcase($this->database, $briefcaseId, $this->conn);
						$briefcase1->setResultsLocked($val);
						$briefcase1->commitUpdate();
					} catch (Exception $e)	{
						Object::shootException("One of The Briefcase belonging to this Group Failed to Lock ".$e->getMessage());
					}
				}
			}
			$this->setFlagAt(BriefcaseGroup::$__IS_RESULTS_LOCKED);
		} else {
			$this->resetFlagAt(BriefcaseGroup::$__IS_RESULTS_LOCKED);
		}
	}
	public final static function compileBriefcaseGroup($database, $conn, $targetMaximumScore, $systemTime1, $groupId, $resultsFolder, $listToInclude, $bestCount, $controlFlags)	{
		$promise1 = new Promise();
		$promise1->setPromise(false);
		$promise1->setReason("Compilation Process not completed");
		//Step 1: Get List of All Briefcases in a group 
		$totalList = BriefcaseGroup::getBriefcaseListBelongingToAGroup($database, $conn, $groupId);
		if (is_null($totalList)) Object::shootException("Briefcase Group [compile], The system returned an Empty List");
		//Step 2: We need a dataStuctucture for each list to contain weightedMarks
		$combinedHeader1 = null;
		$ds1 = array(); //index is briefcaseId
		$studentCollection1 = new Collection();
		$headers = null;
		foreach ($totalList as $briefcaseId)	{
			$briefcase1 = new Briefcase($database, $briefcaseId, $conn);
			$filename = $resultsFolder.$briefcase1->getRawMarksCSVFile();
			if (! file_exists($filename)) Object::shootException("Briefcase Group [compile], one of the results data were not found");
			$resultsFile1 = new ResultsFile($database, $filename, $conn);
			//convert marks to marks * weight 
			$resultsFile1->updateScoresBasedOnMaximumScore(intval($targetMaximumScore) * intval($briefcase1->getWeight()), $systemTime1);
			//Save the weight 
			$resultsFile1->setData('weight', $briefcase1->getWeight());
			//Save this briefcase now 
			$ds1[$briefcase1->getBriefcaseId()] = $resultsFile1;
			$combinedHeader1 = ResultsHeaderLine::mergeHeader($combinedHeader1, $resultsFile1->getHeaderLine());
			$studentCollection1->addList($resultsFile1->getListOfStudents());
			//Save headers
			if (! is_null($headers))	{
				$headers1 = $headers;
				$headers2 = $resultsFile1->getHeaders();
				foreach ($headers1 as $key => $val)	{
					if ($key == "columnCount") continue;
					if ($key == "compilationTime") continue;
					if ($key == "maximumScore") continue;
					if ($headers1[$key] != $headers2[$key]) Object::shootException("Could not match the $key. Make sure the data matches the supplied format");
				}
			}
			$headers = $resultsFile1->getHeaders();
		}
		if (is_null($combinedHeader1)) Object::shootException("Briefcase Group [compile], Combined Headers were empty");
		//Step 3: Initialize the combinedResultsFile1 use collection 
		$combinedResultsFile1 = ResultsFile::buildResultsFileFromCollection($database, $conn, $studentCollection1, $combinedHeader1, $controlFlags);
		if (is_null($combinedResultsFile1)) Object::shootException("Briefcase Group [compile], Initial Combined Results are empty");
		$combinedResultsFile1->setData('weight', 0);
		//Step 4: Results File Headers 
		if (is_null($headers)) Object::shootException("Briefcase Group [compile], Headers are empty");
		$headers["columnCount"] = $combinedHeader1->getNumberOfColumns();
		$headers["compilationTime"] = $systemTime1->getDateAndTimeString();
		$headers["maximumScore"] = $targetMaximumScore;
		$combinedResultsFile1->setHeaders($headers);
		//Step 5: Starting Business 
		$listOfStudents = $combinedResultsFile1->getListOfStudents();
		if (is_null($listOfStudents)) Object::shootException("Briefcase Group [compile], Empty List of Students were returned");
		$listOfTransactions = $combinedHeader1->getHeaderArray();
		if (is_null($listOfTransactions)) Object::shootException("Briefcase Group [compile], Empty List of Subjects were returned");
		if (! is_null($listToInclude)) $bestCount = $bestCount - sizeof($listToInclude);
		foreach ($listOfStudents as $studentId)	{
			foreach ($listOfTransactions as $transactionId)	{
				$totalWeightedMarks = 0;
				$totalWeight = 0; //For each student and subject 
				//Phase One Deal with the list which has to be included 
				if (! is_null($listToInclude))	{
					foreach ($listToInclude as $briefcaseId)	{
						if (! isset($ds1[$briefcaseId])) Object::shootException("Briefcase Group [compile], perhaps the list is not in the group list");
						$resultsFile1 = $ds1[$briefcaseId];
						//Proceed 
						$weightedMarks = null;
						try {
							$weightedMarks = $resultsFile1->getMarksAt($studentId, $transactionId);
						} catch (Exception $e)	{
							$weightedMarks = null;
						}
						$weight = intval($resultsFile1->getData('weight'));
						if (is_null($weightedMarks))	{
							$totalWeightedMarks = "";
						} else if (trim($weightedMarks) === "")	{
							$totalWeightedMarks = "";
						}  else if (trim($totalWeightedMarks) !== "")	{
							$totalWeightedMarks = $totalWeightedMarks + floatval($weightedMarks);
							$totalWeight = $totalWeight + floatval($weight);
						}
					}
				}
				//Phase Two Deal with optional list
				if (($bestCount > 0) && ($totalWeightedMarks !== ""))	{
					//Find the remaining list 
					$totalCollection1 = new Collection();
					$totalCollection1->addList($totalList);
					$collectionToRemove1 = new Collection();
					$collectionToRemove1->addList($listToInclude); //Already Included 
					$remainingCollection1 = $totalCollection1->removeCollection($collectionToRemove1);
					$remainingList = $remainingCollection1->getCollection();
					//Now we move on 
					$testingTotalWeight = $totalWeight;
					if (! is_null($remainingList))	{
						//Begin -- my work here 
						//Proceeding 
						$sortDescendingList1 = new DisplayList();
						//We need to get the totalWeight Denominator 
						//This was just to get the denominator 
						foreach ($remainingList as $briefcaseId)	{
							$resultsFile1 = $ds1[$briefcaseId];
							$testingTotalWeight = $testingTotalWeight + $resultsFile1->getData('weight');
						}
						foreach ($remainingList as $briefcaseId)	{
							$resultsFile1 = $ds1[$briefcaseId];
							$weightedMarks = null;
							try {
								$weightedMarks = $resultsFile1->getMarksAt($studentId, $transactionId);
							} catch (Exception $e)	{
								$weightedMarks = null;
							}
							if (! is_null($weightedMarks))	{
								$val = (100 * intval($weightedMarks) / intval($testingTotalWeight));
								$intent1 = new Intent('N.d.i.m.a.n.g.w.a..F.a.d.h.i.l.i..N.g.o.y.a');
								$intent1->putExtra('briefcaseId', $briefcaseId);
								$intent1->putExtra('weight', $resultsFile1->getData('weight'));
								$intent1->putExtra('weightedMarks', $weightedMarks);
								$intent1->putExtra('sortvalue', $val);
								$sortDescendingList1->add($intent1); 
							}
						}
						//Nedd To Sort in descending 
						$sortDescendingList1->sortDescending(); 
						$sortedList1 = $sortDescendingList1->getAllIntents();
						if (is_null($sortedList1))	{
							$totalWeightedMarks = "";
						} else if (sizeof($sortedList1) >= $bestCount)	{
							for ($i=0; $i< $bestCount; $i++)	{
								//Pick the highest 
								$intent1 = $sortedList1[$i];
								$weight = $intent1->getExtra('weight');
								$weightedMarks = $intent1->getExtra('weightedMarks');
								if (trim($weightedMarks) === "")	{
									$totalWeightedMarks = "";
								} else {
									$totalWeightedMarks = $totalWeightedMarks + floatval($weightedMarks);
									$totalWeight = $totalWeight + floatval($weight);
								}
							}
						} else {
							$totalWeightedMarks = ""; //No enough data
						}
						
						//End -- my work here
					}
				}
				//Now set proper Marks 
				if (($totalWeight != 0) && ($totalWeightedMarks !== ""))	{
					$combinedResultsFile1->setMarksAt($studentId, $transactionId, round($totalWeightedMarks / $totalWeight));
				} else {
					$combinedResultsFile1->setMarksAt($studentId, $transactionId, "");
				}
			} //end-foreach-transactionId
		} //end-foreach-student
		//Step 5: Adjust the combinedResultsFile1, with 
		//Entering Saving mode 
		$group1 = new BriefcaseGroup($database, $groupId, $conn);
		//Save only if not locked 
		if ($group1->isResultsLocked()) Object::shootException("Could not process locked Results");
		$groupfilename = "resultsgroup_".$group1->getGroupId().".csv";
		if (! is_null($group1->getRawMarksCSVFile())) $groupfilename = $group1->getRawMarksCSVFile();
		$filename = $resultsFolder.$groupfilename;
		//Update Flags
		$combinedResultsFile1->setCompiledResults("1");
		//RawDataSaving 
		$combinedResultsFile1->setFilename($filename);
		$combinedResultsFile1->round();
		$combinedResultsFile1->save();
		$group1->setRawMarksCSVFile($groupfilename);
		$checksum = md5_file($filename);
		$group1->setRawMarksCSVFileChecksum($checksum);
		//GradedData 
		$groupfilename = $groupfilename.".graded";
		$filename = $resultsFolder.$groupfilename;
		$combinedResultsFile1->grade();
		$combinedResultsFile1->setFilename($filename);
		$combinedResultsFile1->save();
		$group1->setGradedMarksCSVFile($groupfilename);
		$checksum = md5_file($filename);
		$group1->setGradedMarksCSVFileChecksum($checksum);
		//We have finished compiling , just lock the results now 
		$group1->setResultsLocked("1");
		//Commit Saving 
		$group1->commitUpdate();
		//Finalizing Algorithm 		
		$promise1->setPromise(true);
		return $promise1;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@BriefcaseGroup/groupName,text,1056;year,text,1056;rawMarksCSVFile,text,1056;rawMarksCSVFileChecksum,text,1056;gradedMarksCSVFile,text,1056;gradedMarksCSVFileChecksum,text,1056;extraFilter,text,1056;extraInformation,text,1056;flags,text,1056";
		$lineToView .= Course::getAvailableViewableColumns();
		$lineToView .= AccademicYear::getAvailableViewableColumns();
		$lineToView .= Examination::getAvailableViewableColumns();
		$lineToView .= Login::getAvailableViewableColumns();
		$lineToView .= Login::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "briefcasegroup";
	}
	public final static function getClassContextName()	{
		return "managebriefcasegroup";
	}
	public final static function getUniqueGroupId($database, $conn)	{
		$query="SELECT groupId FROM briefcaseGroup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('BriefcaseGroup, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('BriefcaseGroup, None or Duplicate Row/Multiple Rows Found');
		list($groupId)=mysql_fetch_row($result);
		return $groupId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT groupId, groupName FROM briefcaseGroup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('BriefcaseGroup, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $groupName, $courseId, $_year, $batchId, $examinationId, $loginId, $listOfOwners, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO briefcaseGroup (groupName, courseId, _year, batchId, examinationId, loginId, listOfOwners, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, extraFilter, extraInformation, flags) VALUES('$groupName', '$courseId', '$_year', '$batchId', '$examinationId', '$loginId', '$listOfOwners', '$rawMarksCSVFile', '$rawMarksCSVFileChecksum', '$gradedMarksCSVFile', '$gradedMarksCSVFileChecksum', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('BriefcaseGroup, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('BriefcaseGroup, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('BriefcaseGroup, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->groupId;
	}
	public function getGroupId() {
		return $this->groupId;
	}
	public function getGroupName() {
		return $this->groupName;
	}
	public function setGroupName($groupName) {
		if (! is_null($groupName))	{
			$this->addToUpdateList("groupName", $groupName);
			$this->groupName = $groupName;
		}
	}
	public function getCourse() {
		return $this->course;
	}
	public function setCourse($courseId) {
		if (! is_null($courseId))	{
			$this->addToUpdateList("courseId", $courseId);
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
	}
	public function getYear() {
		return $this->year;
	}
	public function setYear($_year) {
		if (! is_null($_year))	{
			$this->addToUpdateList("_year", $_year);
			$this->year = $_year;
		}
	}
	public function getBatch() {
		return $this->batch;
	}
	public function setBatch($batchId) {
		if (! is_null($batchId))	{
			$this->addToUpdateList("batchId", $batchId);
			$this->batch = null;
			try	{
				$this->batch = new AccademicYear($this->database, $batchId, $this->conn);
			} catch (Exception $e)	{
				$this->batch = null;
			}
		}
	}
	public function getExamination() {
		return $this->examination;
	}
	public function setExamination($examinationId) {
		if (! is_null($examinationId))	{
			$this->addToUpdateList("examinationId", $examinationId);
			$this->examination = null;
			try	{
				$this->examination = new Examination($this->database, $examinationId, $this->conn);
			} catch (Exception $e)	{
				$this->examination = null;
			}
		}
	}
	public function getLogin() {
		return $this->login;
	}
	public function setLogin($loginId) {
		if (! is_null($loginId))	{
			$this->addToUpdateList("loginId", $loginId);
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
	}
	public function getListOfOwners() {
		return $this->listOfOwners;
	}
	public function setListOfOwners($listOfOwners) {
		if (! is_null($listOfOwners))	{
			$this->addToUpdateList("listOfOwners", $listOfOwners);
			$this->listOfOwners = array();
			$idListArr = explode(",", $listOfOwners);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Login($this->database, $id, $this->conn);
					$this->listOfOwners[sizeof($this->listOfOwners)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
	}
	public function getRawMarksCSVFile() {
		return $this->rawMarksCSVFile;
	}
	public function setRawMarksCSVFile($rawMarksCSVFile) {
		if (! is_null($rawMarksCSVFile))	{
			$this->addToUpdateList("rawMarksCSVFile", $rawMarksCSVFile);
			$this->rawMarksCSVFile = $rawMarksCSVFile;
		}
	}
	public function getRawMarksCSVFileChecksum() {
		return $this->rawMarksCSVFileChecksum;
	}
	public function setRawMarksCSVFileChecksum($rawMarksCSVFileChecksum) {
		if (! is_null($rawMarksCSVFileChecksum))	{
			$this->addToUpdateList("rawMarksCSVFileChecksum", $rawMarksCSVFileChecksum);
			$this->rawMarksCSVFileChecksum = $rawMarksCSVFileChecksum;
		}
	}
	public function getGradedMarksCSVFile() {
		return $this->gradedMarksCSVFile;
	}
	public function setGradedMarksCSVFile($gradedMarksCSVFile) {
		if (! is_null($gradedMarksCSVFile))	{
			$this->addToUpdateList("gradedMarksCSVFile", $gradedMarksCSVFile);
			$this->gradedMarksCSVFile = $gradedMarksCSVFile;
		}
	}
	public function getGradedMarksCSVFileChecksum() {
		return $this->gradedMarksCSVFileChecksum;
	}
	public function setGradedMarksCSVFileChecksum($gradedMarksCSVFileChecksum) {
		if (! is_null($gradedMarksCSVFileChecksum))	{
			$this->addToUpdateList("gradedMarksCSVFileChecksum", $gradedMarksCSVFileChecksum);
			$this->gradedMarksCSVFileChecksum = $gradedMarksCSVFileChecksum;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT groupId FROM briefcaseGroup";
		return $query;
	}
	public function __construct($database, $groupId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "BriefcaseGroup")) Object::shootException("BriefcaseGroup System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $groupId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->groupId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "BriefcaseGroup")) Object::shootException("BriefcaseGroup System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE briefcaseGroup SET $setList WHERE groupId = '$this->groupId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('BriefcaseGroup, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "BriefcaseGroup")) Object::shootException("BriefcaseGroup System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM briefcaseGroup WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('BriefcaseGroup, Row Deletion Failed');
	}
	public function getClassName()	{
		return "BriefcaseGroup";
	}
	protected function getProperties()	{
		return "groupId=$this->groupId"."@groupName=$this->groupName"."@year=$this->year"."@rawMarksCSVFile=$this->rawMarksCSVFile"."@rawMarksCSVFileChecksum=$this->rawMarksCSVFileChecksum"."@gradedMarksCSVFile=$this->gradedMarksCSVFile"."@gradedMarksCSVFileChecksum=$this->gradedMarksCSVFileChecksum"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1056.groupId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->groupId))."@1056.groupName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->groupName))."@1056.year=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->year))."@1056.rawMarksCSVFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->rawMarksCSVFile))."@1056.rawMarksCSVFileChecksum=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->rawMarksCSVFileChecksum))."@1056.gradedMarksCSVFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradedMarksCSVFile))."@1056.gradedMarksCSVFileChecksum=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradedMarksCSVFileChecksum))."@1056.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1056.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1056.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: BriefcaseGroup (NAMESPACETAG = 1056) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->course))	{
			$this->course->debug();
		}
		if (! is_null($this->batch))	{
			$this->batch->debug();
		}
		if (! is_null($this->examination))	{
			$this->examination->debug();
		}
		if (! is_null($this->login))	{
			$this->login->debug();
		}
		if (! is_null($this->listOfOwners))	{
			foreach ($this->listOfOwners as $listOfOwnersSingleObject)	{
				$listOfOwnersSingleObject->debug();
			}
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->course))	{
			$matrix1=$this->course->searchMatrix($matrix1);
		}
		if (! is_null($this->batch))	{
			$matrix1=$this->batch->searchMatrix($matrix1);
		}
		if (! is_null($this->examination))	{
			$matrix1=$this->examination->searchMatrix($matrix1);
		}
		if (! is_null($this->login))	{
			$matrix1=$this->login->searchMatrix($matrix1);
		}
		if (! is_null($this->listOfOwners))	{
			foreach ($this->listOfOwners as $listOfOwnersSingleObject)	{
				$matrix1=$listOfOwnersSingleObject->searchMatrix($matrix1);
			}
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->course))	{
			$csvProcessor1=$this->course->processCSV($csvProcessor1);
		}
		if (! is_null($this->batch))	{
			$csvProcessor1=$this->batch->processCSV($csvProcessor1);
		}
		if (! is_null($this->examination))	{
			$csvProcessor1=$this->examination->processCSV($csvProcessor1);
		}
		if (! is_null($this->login))	{
			$csvProcessor1=$this->login->processCSV($csvProcessor1);
		}
		if (! is_null($this->listOfOwners))	{
			foreach ($this->listOfOwners as $listOfOwnersSingleObject)	{
				$csvProcessor1=$listOfOwnersSingleObject->processCSV($csvProcessor1);
			}
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $groupId, $conn) {
		$query="SELECT groupId, groupName, courseId, _year, batchId, examinationId, loginId, listOfOwners, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, extraFilter, extraInformation, flags FROM briefcaseGroup WHERE groupId = '$groupId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('BriefcaseGroup, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('BriefcaseGroup, Duplicate or No Record');
		list($groupId, $groupName, $courseId, $_year, $batchId, $examinationId, $loginId, $listOfOwners, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->groupId = $groupId;
		if (! is_null($groupName))	{
			$this->groupName = $groupName;
		}
		if (! is_null($courseId))	{
			$this->course = null;
			try	{
				$this->course = new Course($this->database, $courseId, $this->conn);
			} catch (Exception $e)	{
				$this->course = null;
			}
		}
		if (! is_null($_year))	{
			$this->year = $_year;
		}
		if (! is_null($batchId))	{
			$this->batch = null;
			try	{
				$this->batch = new AccademicYear($this->database, $batchId, $this->conn);
			} catch (Exception $e)	{
				$this->batch = null;
			}
		}
		if (! is_null($examinationId))	{
			$this->examination = null;
			try	{
				$this->examination = new Examination($this->database, $examinationId, $this->conn);
			} catch (Exception $e)	{
				$this->examination = null;
			}
		}
		if (! is_null($loginId))	{
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
		if (! is_null($listOfOwners))	{
			$this->listOfOwners = array();
			$idListArr = explode(",", $listOfOwners);
			foreach ($idListArr as $id)	{
				$id=trim($id);
				$temp=null;
				try {
					$temp=new Login($this->database, $id, $this->conn);
					$this->listOfOwners[sizeof($this->listOfOwners)] = $temp;
				} catch (Exception $e)	{
					/*Do Nothing*/
				}
			}
		}
		if (! is_null($rawMarksCSVFile))	{
			$this->rawMarksCSVFile = $rawMarksCSVFile;
		}
		if (! is_null($rawMarksCSVFileChecksum))	{
			$this->rawMarksCSVFileChecksum = $rawMarksCSVFileChecksum;
		}
		if (! is_null($gradedMarksCSVFile))	{
			$this->gradedMarksCSVFile = $gradedMarksCSVFile;
		}
		if (! is_null($gradedMarksCSVFileChecksum))	{
			$this->gradedMarksCSVFileChecksum = $gradedMarksCSVFileChecksum;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT groupName, courseId, _year, batchId, examinationId, loginId, listOfOwners, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, extraFilter, extraInformation, flags FROM briefcaseGroup WHERE groupId = '$this->groupId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('BriefcaseGroup, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('BriefcaseGroup, [Clone] Duplicate or No Record');
		list($groupName, $courseId, $_year, $batchId, $examinationId, $loginId, $listOfOwners, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['groupName'] = $groupName;
		$masterDataArray['courseId'] = $courseId;
		$masterDataArray['_year'] = $_year;
		$masterDataArray['batchId'] = $batchId;
		$masterDataArray['examinationId'] = $examinationId;
		$masterDataArray['loginId'] = $loginId;
		$masterDataArray['listOfOwners'] = $listOfOwners;
		$masterDataArray['rawMarksCSVFile'] = $rawMarksCSVFile;
		$masterDataArray['rawMarksCSVFileChecksum'] = $rawMarksCSVFileChecksum;
		$masterDataArray['gradedMarksCSVFile'] = $gradedMarksCSVFile;
		$masterDataArray['gradedMarksCSVFileChecksum'] = $gradedMarksCSVFileChecksum;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO briefcaseGroup ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("BriefcaseGroup [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("BriefcaseGroup [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("BriefcaseGroup [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Briefcase extends Object {
	private $briefcaseId;
	private $briefcaseName;
	private $group;
	private $weight;
	private $rawMarksCSVFile;
	private $rawMarksCSVFileChecksum;
	private $gradedMarksCSVFile;
	private $gradedMarksCSVFileChecksum;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__IS_RESULTS_LOCKED = 5;
	static $__IS_PUBLISH_RESULTS = 6;
	public function canEditNow()	{
		return $this->canLockResultsNow();
	}
	public function canDeleteNow()	{
		return $this->canLockResultsNow();
	}
	public function canNullifyNow()	{
		return $this->canLockResultsNow();
	}
	public function canUploadNow()	{
		return $this->canLockResultsNow();
	}
	public function canViewResultsDetails()	{
		return true; //Allow this any time
	}
	public function canPublishNow()	{
		return (! $this->group->isResultsLocked() && $this->isResultsLocked() && ! $this->isPublishResultsEnabled());
	}
	public function canUnpublishNow()	{
		return (! $this->group->isResultsLocked() && $this->isResultsLocked() && $this->isPublishResultsEnabled());
	}
	public function canLockResultsNow()	{
		return (! $this->group->isResultsLocked() && ! $this->isResultsLocked());
	}
	public function canUnlockResultsNow()	{
		return (! $this->group->isResultsLocked() && $this->isResultsLocked());
	}
	public function isEligibleForPublication()	{
		return ($this->isResultsLocked() && $this->isPublishResultsEnabled() && ! $this->group->isResultsLocked());
	}
	public function isPublishResultsEnabled()	{
		return $this->isFlagSetAt(Briefcase::$__IS_PUBLISH_RESULTS);
	}
	public function setPublishResultsEnabled($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(Briefcase::$__IS_PUBLISH_RESULTS);
		} else {
			$this->resetFlagAt(Briefcase::$__IS_PUBLISH_RESULTS);
		}
	}
	public function nullifyMe()	{
		//Expects full path to be in extraInformation
		$filename = $this->extraInformation;
		$filename = $filename.$this->rawMarksCSVFile;
		if (! file_exists($filename)) Object::shootException("The Original Marks File were not found");
		$promise1 = FileFactory::createBackupFile($filename);
		if (! $promise1->isPromising()) Object::shootException("Backup file could not be created");
		if (! unlink($filename)) Object::shootException("Could not remove the Physical File");
		$extraFilter = System::getCodeString(8);
		$query = "UPDATE briefcase SET rawMarksCSVFile=NULL, rawMarksCSVFileChecksum=NULL, gradedMarksCSVFile=NULL, gradedMarksCSVFileChecksum=NULL, extraFilter='$extraFilter' WHERE briefcaseId='$this->briefcaseId'";
		mysql_db_query($this->database, $query, $this->conn) or Object::shootException("Could not update the database system");
	}
	public function getExamination()	{
		return null; //This is for compliance only in uploadResults function , please do not remove this function 
	}
	public function getPercentageWeightInAGroup()	{
		$list = BriefcaseGroup::getBriefcaseListBelongingToAGroup($this->database, $this->conn, $this->group->getGroupId());
		$cummulativeWeight = 0;
		foreach ($list as $briefcaseId)	{
			$briefcase1 = new Briefcase($this->database, $briefcaseId, $this->conn);
			$cummulativeWeight += intval($briefcase1->getWeight());
		}
		if ($cummulativeWeight == 0) Object::shootException("Can not divide by zero list");
		$percentage = (intval($this->weight) * 100) / $cummulativeWeight;
		$percentage = Number::truncateFloatDecimal($percentage, 2);
		return Number::displayFloatDecimal($percentage, 2);
	}
	public function isResultsLocked()	{
		return $this->isFlagSetAt(Briefcase::$__IS_RESULTS_LOCKED);
	}
	public function setResultsLocked($val)	{
		if (intval($val) == 1)	{
			$this->setFlagAt(Briefcase::$__IS_RESULTS_LOCKED);
		} else {
			$this->resetFlagAt(Briefcase::$__IS_RESULTS_LOCKED);
		}
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Briefcase/briefcaseName,text,1057;weight,text,1057;rawMarksCSVFile,text,1057;rawMarksCSVFileChecksum,text,1057;gradedMarksCSVFile,text,1057;gradedMarksCSVFileChecksum,text,1057;extraFilter,text,1057;extraInformation,text,1057;flags,text,1057";
		$lineToView .= BriefcaseGroup::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "briefcase";
	}
	public final static function getClassContextName()	{
		return "managebriefcase";
	}
	public final static function getUniqueBriefcaseId($database, $conn)	{
		$query="SELECT briefcaseId FROM briefcase";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Briefcase, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Briefcase, None or Duplicate Row/Multiple Rows Found');
		list($briefcaseId)=mysql_fetch_row($result);
		return $briefcaseId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT briefcaseId, briefcaseName FROM briefcase";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Briefcase, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $briefcaseName, $groupId, $weight, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO briefcase (briefcaseName, groupId, weight, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, extraFilter, extraInformation, flags) VALUES('$briefcaseName', '$groupId', '$weight', '$rawMarksCSVFile', '$rawMarksCSVFileChecksum', '$gradedMarksCSVFile', '$gradedMarksCSVFileChecksum', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Briefcase, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Briefcase, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Briefcase, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->briefcaseId;
	}
	public function getBriefcaseId() {
		return $this->briefcaseId;
	}
	public function getBriefcaseName() {
		return $this->briefcaseName;
	}
	public function setBriefcaseName($briefcaseName) {
		if (! is_null($briefcaseName))	{
			$this->addToUpdateList("briefcaseName", $briefcaseName);
			$this->briefcaseName = $briefcaseName;
		}
	}
	public function getGroup() {
		return $this->group;
	}
	public function setGroup($groupId) {
		if (! is_null($groupId))	{
			$this->addToUpdateList("groupId", $groupId);
			$this->group = null;
			try	{
				$this->group = new BriefcaseGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->group = null;
			}
		}
	}
	public function getWeight() {
		return $this->weight;
	}
	public function setWeight($weight) {
		if (! is_null($weight))	{
			$this->addToUpdateList("weight", $weight);
			$this->weight = $weight;
		}
	}
	public function getRawMarksCSVFile() {
		return $this->rawMarksCSVFile;
	}
	public function setRawMarksCSVFile($rawMarksCSVFile) {
		if (! is_null($rawMarksCSVFile))	{
			$this->addToUpdateList("rawMarksCSVFile", $rawMarksCSVFile);
			$this->rawMarksCSVFile = $rawMarksCSVFile;
		}
	}
	public function getRawMarksCSVFileChecksum() {
		return $this->rawMarksCSVFileChecksum;
	}
	public function setRawMarksCSVFileChecksum($rawMarksCSVFileChecksum) {
		if (! is_null($rawMarksCSVFileChecksum))	{
			$this->addToUpdateList("rawMarksCSVFileChecksum", $rawMarksCSVFileChecksum);
			$this->rawMarksCSVFileChecksum = $rawMarksCSVFileChecksum;
		}
	}
	public function getGradedMarksCSVFile() {
		return $this->gradedMarksCSVFile;
	}
	public function setGradedMarksCSVFile($gradedMarksCSVFile) {
		if (! is_null($gradedMarksCSVFile))	{
			$this->addToUpdateList("gradedMarksCSVFile", $gradedMarksCSVFile);
			$this->gradedMarksCSVFile = $gradedMarksCSVFile;
		}
	}
	public function getGradedMarksCSVFileChecksum() {
		return $this->gradedMarksCSVFileChecksum;
	}
	public function setGradedMarksCSVFileChecksum($gradedMarksCSVFileChecksum) {
		if (! is_null($gradedMarksCSVFileChecksum))	{
			$this->addToUpdateList("gradedMarksCSVFileChecksum", $gradedMarksCSVFileChecksum);
			$this->gradedMarksCSVFileChecksum = $gradedMarksCSVFileChecksum;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT briefcaseId FROM briefcase";
		return $query;
	}
	public function __construct($database, $briefcaseId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Briefcase")) Object::shootException("Briefcase System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $briefcaseId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->briefcaseId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Briefcase")) Object::shootException("Briefcase System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE briefcase SET $setList WHERE briefcaseId = '$this->briefcaseId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Briefcase, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Briefcase")) Object::shootException("Briefcase System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM briefcase WHERE briefcaseId = '$this->briefcaseId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Briefcase, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Briefcase";
	}
	protected function getProperties()	{
		return "briefcaseId=$this->briefcaseId"."@briefcaseName=$this->briefcaseName"."@weight=$this->weight"."@rawMarksCSVFile=$this->rawMarksCSVFile"."@rawMarksCSVFileChecksum=$this->rawMarksCSVFileChecksum"."@gradedMarksCSVFile=$this->gradedMarksCSVFile"."@gradedMarksCSVFileChecksum=$this->gradedMarksCSVFileChecksum"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1057.briefcaseId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->briefcaseId))."@1057.briefcaseName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->briefcaseName))."@1057.weight=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->weight))."@1057.rawMarksCSVFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->rawMarksCSVFile))."@1057.rawMarksCSVFileChecksum=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->rawMarksCSVFileChecksum))."@1057.gradedMarksCSVFile=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradedMarksCSVFile))."@1057.gradedMarksCSVFileChecksum=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->gradedMarksCSVFileChecksum))."@1057.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1057.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1057.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Briefcase (NAMESPACETAG = 1057) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->group))	{
			$this->group->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->group))	{
			$matrix1=$this->group->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->group))	{
			$csvProcessor1=$this->group->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $briefcaseId, $conn) {
		$query="SELECT briefcaseId, briefcaseName, groupId, weight, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, extraFilter, extraInformation, flags FROM briefcase WHERE briefcaseId = '$briefcaseId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Briefcase, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Briefcase, Duplicate or No Record');
		list($briefcaseId, $briefcaseName, $groupId, $weight, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->briefcaseId = $briefcaseId;
		if (! is_null($briefcaseName))	{
			$this->briefcaseName = $briefcaseName;
		}
		if (! is_null($groupId))	{
			$this->group = null;
			try	{
				$this->group = new BriefcaseGroup($this->database, $groupId, $this->conn);
			} catch (Exception $e)	{
				$this->group = null;
			}
		}
		if (! is_null($weight))	{
			$this->weight = $weight;
		}
		if (! is_null($rawMarksCSVFile))	{
			$this->rawMarksCSVFile = $rawMarksCSVFile;
		}
		if (! is_null($rawMarksCSVFileChecksum))	{
			$this->rawMarksCSVFileChecksum = $rawMarksCSVFileChecksum;
		}
		if (! is_null($gradedMarksCSVFile))	{
			$this->gradedMarksCSVFile = $gradedMarksCSVFile;
		}
		if (! is_null($gradedMarksCSVFileChecksum))	{
			$this->gradedMarksCSVFileChecksum = $gradedMarksCSVFileChecksum;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT briefcaseName, groupId, weight, rawMarksCSVFile, rawMarksCSVFileChecksum, gradedMarksCSVFile, gradedMarksCSVFileChecksum, extraFilter, extraInformation, flags FROM briefcase WHERE briefcaseId = '$this->briefcaseId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Briefcase, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Briefcase, [Clone] Duplicate or No Record');
		list($briefcaseName, $groupId, $weight, $rawMarksCSVFile, $rawMarksCSVFileChecksum, $gradedMarksCSVFile, $gradedMarksCSVFileChecksum, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['briefcaseName'] = $briefcaseName;
		$masterDataArray['groupId'] = $groupId;
		$masterDataArray['weight'] = $weight;
		$masterDataArray['rawMarksCSVFile'] = $rawMarksCSVFile;
		$masterDataArray['rawMarksCSVFileChecksum'] = $rawMarksCSVFileChecksum;
		$masterDataArray['gradedMarksCSVFile'] = $gradedMarksCSVFile;
		$masterDataArray['gradedMarksCSVFileChecksum'] = $gradedMarksCSVFileChecksum;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO briefcase ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Briefcase [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Briefcase [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Briefcase [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Paper extends Object {
	private $paperId;
	private $paperName;
	private $width;
	private $height;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	static $__IS_CLONE_MODE = "is_clone_mode";
	static $__PAPER_FLIP_ORIENTATION = 5;
	public function isOrientationFlipped()	{
		return $this->isFlagSetAt(Paper::$__PAPER_FLIP_ORIENTATION);
	}
	public function setOrientationFlipped($completed)	{
		if (intval($completed) == 1)	{
			$this->setFlagAt(Paper::$__PAPER_FLIP_ORIENTATION);
		} else {
			$this->resetFlagAt(Paper::$__PAPER_FLIP_ORIENTATION);
		}
	}
	public function assignData($database, $conn, $paperName, $width, $height, $flags)	{
		$this->database = $database;
		$this->conn = $conn;
		$this->paperName = $paperName;
		$this->width = $width;
		$this->height = $height;
		$this->flags = $flags;
	}
	public final static function createACustomizedPaper($database, $conn, $paperName, $width, $height, $flags)	{
		$paper1 = new Paper($database, Paper::$__IS_CLONE_MODE, $conn);
		$paper1->assignData($database, $conn, $paperName, $width, $height, $flags);
		return $paper1;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Paper/paperName,text,1058;width,text,1058;height,text,1058;extraFilter,text,1058;extraInformation,text,1058;flags,text,1058";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "paper";
	}
	public final static function getClassContextName()	{
		return "managepaper";
	}
	public final static function getUniquePaperId($database, $conn)	{
		$query="SELECT paperId FROM paper";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Paper, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Paper, None or Duplicate Row/Multiple Rows Found');
		list($paperId)=mysql_fetch_row($result);
		return $paperId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT paperId, paperName FROM paper";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Paper, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $paperName, $width, $height, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO paper (paperName, width, height, extraFilter, extraInformation, flags) VALUES('$paperName', '$width', '$height', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Paper, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Paper, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Paper, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->paperId;
	}
	public function getPaperId() {
		return $this->paperId;
	}
	public function getPaperName() {
		return $this->paperName;
	}
	public function setPaperName($paperName) {
		if (! is_null($paperName))	{
			$this->addToUpdateList("paperName", $paperName);
			$this->paperName = $paperName;
		}
	}
	public function getWidth() {
		return $this->width;
	}
	public function setWidth($width) {
		if (! is_null($width))	{
			$this->addToUpdateList("width", $width);
			$this->width = $width;
		}
	}
	public function getHeight() {
		return $this->height;
	}
	public function setHeight($height) {
		if (! is_null($height))	{
			$this->addToUpdateList("height", $height);
			$this->height = $height;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT paperId FROM paper";
		return $query;
	}
	public function __construct($database, $paperId, $conn) {
		if ($paperId == Paper::$__IS_CLONE_MODE);
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "Paper")) Object::shootException("Paper System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $paperId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->paperId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "Paper")) Object::shootException("Paper System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE paper SET $setList WHERE paperId = '$this->paperId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Paper, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "Paper")) Object::shootException("Paper System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM paper WHERE paperId = '$this->paperId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Paper, Row Deletion Failed');
	}
	public function getClassName()	{
		return "Paper";
	}
	protected function getProperties()	{
		return "paperId=$this->paperId"."@paperName=$this->paperName"."@width=$this->width"."@height=$this->height"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1058.paperId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->paperId))."@1058.paperName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->paperName))."@1058.width=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->width))."@1058.height=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->height))."@1058.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1058.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1058.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Paper (NAMESPACETAG = 1058) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $paperId, $conn) {
		$query="SELECT paperId, paperName, width, height, extraFilter, extraInformation, flags FROM paper WHERE paperId = '$paperId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Paper, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Paper, Duplicate or No Record');
		list($paperId, $paperName, $width, $height, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->paperId = $paperId;
		if (! is_null($paperName))	{
			$this->paperName = $paperName;
		}
		if (! is_null($width))	{
			$this->width = $width;
		}
		if (! is_null($height))	{
			$this->height = $height;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT paperName, width, height, extraFilter, extraInformation, flags FROM paper WHERE paperId = '$this->paperId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Paper, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Paper, [Clone] Duplicate or No Record');
		list($paperName, $width, $height, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['paperName'] = $paperName;
		$masterDataArray['width'] = $width;
		$masterDataArray['height'] = $height;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO paper ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Paper [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Paper [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Paper [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class MACOUILookup extends Object {
	private $ouiId;
	private $vendorName;
	private $vendorOUI;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getVendorOUIFromMacAddress($macAddress)	{
		//mac Address in the form of ad:b2:c1:12:c3:4f
		$lineArr = explode(":", $macAddress);
		if (sizeof($lineArr) != 6) Object::shootException("Mulformed Mac Address, Example: ae:12:de:11:1f:d7");
		return $lineArr[0].":".$lineArr[1].":".$lineArr[2];		
	}
	public final static function getVendorNameFromMacAddress($database, $conn, $macAddress)	{
		$vendorOUI = self::getVendorOUIFromMacAddress($macAddress);
		$query = "SELECT vendorName FROM macOUILookup WHERE vendorOUI='$vendorOUI'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("MACOUILookup [static], Could not fetch Vendor Name from Mac Address");
		$vendorName = null;
		if (mysql_num_rows($result)) list($vendorName)=mysql_fetch_row($result);
		return $vendorName;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@MACOUILookup/vendorName,text,1059;vendorOUI,text,1059;extraFilter,text,1059;extraInformation,text,1059;flags,text,1059";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "macouilookup";
	}
	public final static function getClassContextName()	{
		return "managemacouilookup";
	}
	public final static function getUniqueOuiId($database, $conn)	{
		$query="SELECT ouiId FROM macOUILookup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MACOUILookup, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('MACOUILookup, None or Duplicate Row/Multiple Rows Found');
		list($ouiId)=mysql_fetch_row($result);
		return $ouiId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT ouiId, vendorName FROM macOUILookup";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MACOUILookup, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $vendorName, $vendorOUI, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO macOUILookup (vendorName, vendorOUI, extraFilter, extraInformation, flags) VALUES('$vendorName', '$vendorOUI', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MACOUILookup, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('MACOUILookup, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('MACOUILookup, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->ouiId;
	}
	public function getOuiId() {
		return $this->ouiId;
	}
	public function getVendorName() {
		return $this->vendorName;
	}
	public function setVendorName($vendorName) {
		if (! is_null($vendorName))	{
			$this->addToUpdateList("vendorName", $vendorName);
			$this->vendorName = $vendorName;
		}
	}
	public function getVendorOUI() {
		return $this->vendorOUI;
	}
	public function setVendorOUI($vendorOUI) {
		if (! is_null($vendorOUI))	{
			$this->addToUpdateList("vendorOUI", $vendorOUI);
			$this->vendorOUI = $vendorOUI;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT ouiId FROM macOUILookup";
		return $query;
	}
	public function __construct($database, $ouiId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "MACOUILookup")) Object::shootException("MACOUILookup System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $ouiId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->ouiId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "MACOUILookup")) Object::shootException("MACOUILookup System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE macOUILookup SET $setList WHERE ouiId = '$this->ouiId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MACOUILookup, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "MACOUILookup")) Object::shootException("MACOUILookup System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM macOUILookup WHERE ouiId = '$this->ouiId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MACOUILookup, Row Deletion Failed');
	}
	public function getClassName()	{
		return "MACOUILookup";
	}
	protected function getProperties()	{
		return "ouiId=$this->ouiId"."@vendorName=$this->vendorName"."@vendorOUI=$this->vendorOUI"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1059.ouiId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->ouiId))."@1059.vendorName=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->vendorName))."@1059.vendorOUI=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->vendorOUI))."@1059.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1059.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1059.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: MACOUILookup (NAMESPACETAG = 1059) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $ouiId, $conn) {
		$query="SELECT ouiId, vendorName, vendorOUI, extraFilter, extraInformation, flags FROM macOUILookup WHERE ouiId = '$ouiId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('MACOUILookup, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('MACOUILookup, Duplicate or No Record');
		list($ouiId, $vendorName, $vendorOUI, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->ouiId = $ouiId;
		if (! is_null($vendorName))	{
			$this->vendorName = $vendorName;
		}
		if (! is_null($vendorOUI))	{
			$this->vendorOUI = $vendorOUI;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT vendorName, vendorOUI, extraFilter, extraInformation, flags FROM macOUILookup WHERE ouiId = '$this->ouiId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('MACOUILookup, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('MACOUILookup, [Clone] Duplicate or No Record');
		list($vendorName, $vendorOUI, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['vendorName'] = $vendorName;
		$masterDataArray['vendorOUI'] = $vendorOUI;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO macOUILookup ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("MACOUILookup [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("MACOUILookup [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("MACOUILookup [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class WirelessConnection extends Object {
	private $connectionId;
	private $login;
	private $username;
	private $timeOfConnection;
	private $wirelessIdentifier;
	private $extraFilter;
	private $extraInformation;
	private $flags;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getListOfConnectedDevicesForUser($database, $conn, $loginId)	{
		$query="SELECT connectionId FROM wirelessConnection WHERE loginId='$loginId'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("WirelessConnection [static], Connected device list could not be pulled");
		$list = array();
		while(list($connectionId)=mysql_fetch_row($result))	{
			$list[sizeof($list)] = $connectionId;
		}
		if (sizeof($list) == 0) $list = null;
		return $list;
	}
	public final static function getReferenceFromUsername($database, $conn, $username)	{
		$query="SELECT connectionId FROM wirelessConnection WHERE username='$username'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("WirelessConnection [static], Could not execute reference query");
		$connectionId = null;
		if (mysql_num_rows($result) == 1) list($connectionId) = mysql_fetch_row($result);
		return $connectionId;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@WirelessConnection/username,text,1060;wirelessIdentifier,text,1060;extraFilter,text,1060;extraInformation,text,1060;flags,text,1060";
		$lineToView .= Login::getAvailableViewableColumns();
		$lineToView .= DateAndTime::getAvailableViewableColumns();
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "wirelessconnection";
	}
	public final static function getClassContextName()	{
		return "managewirelessconnection";
	}
	public final static function getUniqueConnectionId($database, $conn)	{
		$query="SELECT connectionId FROM wirelessConnection";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('WirelessConnection, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('WirelessConnection, None or Duplicate Row/Multiple Rows Found');
		list($connectionId)=mysql_fetch_row($result);
		return $connectionId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT connectionId, username FROM wirelessConnection";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('WirelessConnection, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $loginId, $username, $connectionTime, $wirelessId, $extraFilter, $extraInformation, $flags)	{
		$query="INSERT INTO wirelessConnection (loginId, username, connectionTime, wirelessId, extraFilter, extraInformation, flags) VALUES('$loginId', '$username', '$connectionTime', '$wirelessId', '$extraFilter', '$extraInformation', '$flags')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('WirelessConnection, Static Addition Failed '.mysql_error());
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('WirelessConnection, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('WirelessConnection, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->connectionId;
	}
	public function getConnectionId() {
		return $this->connectionId;
	}
	public function getLogin() {
		return $this->login;
	}
	public function setLogin($loginId) {
		if (! is_null($loginId))	{
			$this->addToUpdateList("loginId", $loginId);
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
	}
	public function getUsername() {
		return $this->username;
	}
	public function setUsername($username) {
		if (! is_null($username))	{
			$this->addToUpdateList("username", $username);
			$this->username = $username;
		}
	}
	public function getTimeOfConnection() {
		return $this->timeOfConnection;
	}
	public function setTimeOfConnection($connectionTime) {
		if (! is_null($connectionTime))	{
			$this->addToUpdateList("connectionTime", $connectionTime);
			$this->timeOfConnection = null;
			try	{
				$this->timeOfConnection = new DateAndTime($this->database, $connectionTime, $this->conn);
			} catch (Exception $e)	{
				$this->timeOfConnection = null;
			}
		}
	}
	public function getWirelessIdentifier() {
		return $this->wirelessIdentifier;
	}
	public function setWirelessIdentifier($wirelessId) {
		if (! is_null($wirelessId))	{
			$this->addToUpdateList("wirelessId", $wirelessId);
			$this->wirelessIdentifier = $wirelessId;
		}
	}
	public function getExtraFilter() {
		return $this->extraFilter;
	}
	public function setExtraFilter($extraFilter) {
		if (! is_null($extraFilter))	{
			$this->addToUpdateList("extraFilter", $extraFilter);
			$this->extraFilter = $extraFilter;
		}
	}
	public function getExtraInformation() {
		return $this->extraInformation;
	}
	public function setExtraInformation($extraInformation) {
		if (! is_null($extraInformation))	{
			$this->addToUpdateList("extraInformation", $extraInformation);
			$this->extraInformation = $extraInformation;
		}
	}
	public function getFlags() {
		return $this->flags;
	}
	public function setFlags($flags) {
		if (! is_null($flags))	{
			$this->addToUpdateList("flags", $flags);
			$this->flags = $flags;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT connectionId FROM wirelessConnection";
		return $query;
	}
	public function __construct($database, $connectionId, $conn) {
		if (! SystemPolicy::isCreateObjectEnabled($database, $conn, "WirelessConnection")) Object::shootException("WirelessConnection System Policy could not allow creation of this kind of Object");
		$this->setMe($database, $connectionId, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->connectionId, $this->conn);
	}
	public function commitUpdate()	{
		if (! SystemPolicy::isEditRecordEnabled($this->database, $this->conn, "WirelessConnection")) Object::shootException("WirelessConnection System Policy could not allow modification of this type of Object");
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE wirelessConnection SET $setList WHERE connectionId = '$this->connectionId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('WirelessConnection, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		if (! SystemPolicy::isDeleteRecordEnabled($this->database, $this->conn, "WirelessConnection")) Object::shootException("WirelessConnection System Policy could not allow delete of this kind of Object");
		$query="DELETE FROM wirelessConnection WHERE connectionId = '$this->connectionId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('WirelessConnection, Row Deletion Failed');
	}
	public function getClassName()	{
		return "WirelessConnection";
	}
	protected function getProperties()	{
		return "connectionId=$this->connectionId"."@username=$this->username"."@wirelessIdentifier=$this->wirelessIdentifier"."@extraFilter=$this->extraFilter"."@extraInformation=$this->extraInformation"."@flags=$this->flags";
	}
	protected function getAdvancedProperties()	{
		return "1060.connectionId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->connectionId))."@1060.username=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->username))."@1060.wirelessIdentifier=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->wirelessIdentifier))."@1060.extraFilter=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraFilter))."@1060.extraInformation=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->extraInformation))."@1060.flags=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->flags));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: WirelessConnection (NAMESPACETAG = 1060) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
		if (! is_null($this->login))	{
			$this->login->debug();
		}
		if (! is_null($this->timeOfConnection))	{
			$this->timeOfConnection->debug();
		}
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		if (! is_null($this->login))	{
			$matrix1=$this->login->searchMatrix($matrix1);
		}
		if (! is_null($this->timeOfConnection))	{
			$matrix1=$this->timeOfConnection->searchMatrix($matrix1);
		}
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		if (! is_null($this->login))	{
			$csvProcessor1=$this->login->processCSV($csvProcessor1);
		}
		if (! is_null($this->timeOfConnection))	{
			$csvProcessor1=$this->timeOfConnection->processCSV($csvProcessor1);
		}
		return $csvProcessor1;
	}
	protected function setMe($database, $connectionId, $conn) {
		$query="SELECT connectionId, loginId, username, connectionTime, wirelessId, extraFilter, extraInformation, flags FROM wirelessConnection WHERE connectionId = '$connectionId'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('WirelessConnection, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('WirelessConnection, Duplicate or No Record');
		list($connectionId, $loginId, $username, $connectionTime, $wirelessId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->connectionId = $connectionId;
		if (! is_null($loginId))	{
			$this->login = null;
			try	{
				$this->login = new Login($this->database, $loginId, $this->conn);
			} catch (Exception $e)	{
				$this->login = null;
			}
		}
		if (! is_null($username))	{
			$this->username = $username;
		}
		if (! is_null($connectionTime))	{
			$this->timeOfConnection = null;
			try	{
				$this->timeOfConnection = new DateAndTime($this->database, $connectionTime, $this->conn);
			} catch (Exception $e)	{
				$this->timeOfConnection = null;
			}
		}
		if (! is_null($wirelessId))	{
			$this->wirelessIdentifier = $wirelessId;
		}
		if (! is_null($extraFilter))	{
			$this->extraFilter = $extraFilter;
		}
		if (! is_null($extraInformation))	{
			$this->extraInformation = $extraInformation;
		}
		if (! is_null($flags))	{
			$this->flags = $flags;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT loginId, username, connectionTime, wirelessId, extraFilter, extraInformation, flags FROM wirelessConnection WHERE connectionId = '$this->connectionId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('WirelessConnection, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('WirelessConnection, [Clone] Duplicate or No Record');
		list($loginId, $username, $connectionTime, $wirelessId, $extraFilter, $extraInformation, $flags)=mysql_fetch_row($result);
		$masterDataArray['loginId'] = $loginId;
		$masterDataArray['username'] = $username;
		$masterDataArray['connectionTime'] = $connectionTime;
		$masterDataArray['wirelessId'] = $wirelessId;
		$masterDataArray['extraFilter'] = $extraFilter;
		$masterDataArray['extraInformation'] = $extraInformation;
		$masterDataArray['flags'] = $flags;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO wirelessConnection ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("WirelessConnection [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("WirelessConnection [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("WirelessConnection [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class Radius extends Object {
	private $radiusId;
	private $username;
	private $attribute;
	private $op;
	private $value;
	private $database;
	private $conn;
	/* BEGIN::   You should Add your custom made static methods from this point */
	public final static function getReferenceFromUsername($database, $conn, $username)	{
		$query="SELECT id FROM radcheck WHERE username='$username'";
		$result = mysql_db_query($database, $query, $conn) or Object::shootException("Radius [static], Could not execute reference query");
		$radiusId = null;
		if (mysql_num_rows($result) == 1) list($radiusId) = mysql_fetch_row($result);
		return $radiusId;
	}
	/* END  ::   Your custom made static methods should be above this line      */
	public final static function getAvailableViewableColumns()	{
		/*format of data @classname/propertyname,propertytype,namespaceTag;propertyname,propertytype,namespaceTag;*/
		$lineToView = "@Radius/username,text,1061;attribute,text,1061;op,text,1061;value,text,1061";
		return $lineToView;
	}
	public final static function getDataFolder()	{
		return "radius";
	}
	public final static function getClassContextName()	{
		return "manageradius";
	}
	public final static function getUniqueRadiusId($database, $conn)	{
		$query="SELECT id FROM radcheck";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Radius, Static Get Unique Row Query Failed');
		if (mysql_num_rows($result) != 1)  Object::shootException('Radius, None or Duplicate Row/Multiple Rows Found');
		list($radiusId)=mysql_fetch_row($result);
		return $radiusId;
	}
	public final static function loadAllData($database, $conn)	{
		$query="SELECT id, username FROM radcheck";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Radius, Static Load All Data Failed');
		$list=array();
		while(list($__id, $__val)=mysql_fetch_row($result))	{
			$listsize=sizeof($list);
			$list[$listsize]=array();
			$list[$listsize]['id']=$__id;
			$list[$listsize]['val']=$__val;
		}
		return $list;
	}
	public final static function add($database, $conn, $username, $attribute, $op, $value)	{
		$query="INSERT INTO radcheck (username, attribute, op, value) VALUES('$username', '$attribute', '$op', '$value')";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Radius, Static Addition Failed');
		$query="SELECT LAST_INSERT_ID()";
		$result=mysql_db_query($database, $query, $conn) or Object::shootException('Radius, Could not Extract Last Inserted ID');
		if (mysql_num_rows($result) != 1) Object::shootException('Radius, Last Inserted ID is Not Unique');
		list($lastId)=mysql_fetch_row($result);
		return $lastId;
	}
	public function getId() {
		return $this->radiusId;
	}
	public function getRadiusId() {
		return $this->radiusId;
	}
	public function getUsername() {
		return $this->username;
	}
	public function setUsername($username) {
		if (! is_null($username))	{
			$this->addToUpdateList("username", $username);
			$this->username = $username;
		}
	}
	public function getAttribute() {
		return $this->attribute;
	}
	public function setAttribute($attribute) {
		if (! is_null($attribute))	{
			$this->addToUpdateList("attribute", $attribute);
			$this->attribute = $attribute;
		}
	}
	public function getOp() {
		return $this->op;
	}
	public function setOp($op) {
		if (! is_null($op))	{
			$this->addToUpdateList("op", $op);
			$this->op = $op;
		}
	}
	public function getValue() {
		return $this->value;
	}
	public function setValue($value) {
		if (! is_null($value))	{
			$this->addToUpdateList("value", $value);
			$this->value = $value;
		}
	}
	public final static function getQueryText()	{
		$query="SELECT id FROM radcheck";
		return $query;
	}
	public function __construct($database, $id, $conn) {
		$this->setMe($database, $id, $conn);
	}
	public function __destruct()	{
		/*Release the System Resources at this point @Ndimangwa*/
	}
	public function reload() {
		$this->setMe($this->database, $this->radiusId, $this->conn);
	}
	public function commitUpdate()	{
		$setList = $this->getUpdateList();
		if ($this->getUpdateListLength() > 0)	{
			$query="UPDATE radcheck SET $setList WHERE id = '$this->radiusId'";
			$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Radius, Row Updation Failed');
		}
	}
	public function commitDelete()	{
		$query="DELETE FROM radcheck WHERE id = '$this->radiusId'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Radius, Row Deletion Failed ');
	}
	public function getClassName()	{
		return "Radius";
	}
	protected function getProperties()	{
		return "radiusId=$this->radiusId"."@username=$this->username"."@attribute=$this->attribute"."@op=$this->op"."@value=$this->value";
	}
	protected function getAdvancedProperties()	{
		return "1061.radiusId=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->radiusId))."@1061.username=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->username))."@1061.attribute=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->attribute))."@1061.op=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->op))."@1061.value=".str_replace("@", "_kdAt_", str_replace("=", "_kdEq_", $this->value));
	}
	public function debug()	{
		$string1 = $this->getProperties();
		$keyValueArr = explode("@",$string1);
		echo "********************************************************************************\n";
		$displayLine = "****** CLASSNAME: Radius (NAMESPACETAG = 1061) ";
		$linesize = strlen($displayLine);
		for ($i=$linesize; $i < 80; $i++)	{
			$displayLine = $displayLine."*";
		}
		echo $displayLine."\n";
		foreach ($keyValueArr as $aKeyVal)	{
			$kvArr = explode("=",$aKeyVal);
			$val = "---------";
			$key = $kvArr[0];
			if (isset($kvArr[1])) $val=$kvArr[1];
			$displayLine="** ".$key."  =  ".$val;
			$linesize=strlen($displayLine);
			for ($i=$linesize; $i < 79; $i++)	{
				$displayLine = $displayLine." ";
			}
			$displayLine = $displayLine."*";
			echo $displayLine."\n";
		}
		echo "********************************************************************************\n";
	}
	public function searchMatrix($matrix1)	{
		$string1=$this->getProperties();
		$matrix1->searchText($string1);
		return $matrix1;
	}
	public function processCSV($csvProcessor1)	{
		$string1=$this->getAdvancedProperties();
		$csvProcessor1->appendCSVData($string1);
		return $csvProcessor1;
	}
	protected function setMe($database, $id, $conn) {
		$query="SELECT id, username, attribute, op, value FROM radcheck WHERE id = '$id'";
		$result=mysql_db_query($database, $query, $conn) or $this->throwMe('Radius, Object Creation Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Radius, Duplicate or No Record');
		list($id, $username, $attribute, $op, $value)=mysql_fetch_row($result);
		$this->database=$database;
		$this->conn=$conn;
		$this->radiusId = $id;
		if (! is_null($username))	{
			$this->username = $username;
		}
		if (! is_null($attribute))	{
			$this->attribute = $attribute;
		}
		if (! is_null($op))	{
			$this->op = $op;
		}
		if (! is_null($value))	{
			$this->value = $value;
		}
	}
	public function cloneMe($updateDataArray)	{
		$masterDataArray = array();
		$query="SELECT username, attribute, op, value FROM radcheck WHERE id = '$this->id'";
		$result=mysql_db_query($this->database, $query, $this->conn) or $this->throwMe('Radius, [Clone] Data Pulling Failed');
		if (mysql_num_rows($result) != 1) $this->throwMe('Radius, [Clone] Duplicate or No Record');
		list($username, $attribute, $op, $value)=mysql_fetch_row($result);
		$masterDataArray['username'] = $username;
		$masterDataArray['attribute'] = $attribute;
		$masterDataArray['op'] = $op;
		$masterDataArray['value'] = $value;
		foreach ($updateDataArray as $dtKey => $dtVal)	{
			if (isset($masterDataArray[$dtKey]))	{
				$masterDataArray[$dtKey] = $dtVal;
			}
		}
		$columnList = "";
		$dataList = "";
		$cloneCounter = 0;
		foreach ($masterDataArray as $__key => $__val)	{
			if (! is_null($__val))	{
				if ($cloneCounter == 0)	{
					$columnList = $__key;
					$dataList = "'".$__val."'";
				} else {
					$columnList = $columnList.", ".$__key;
					$dataList = $dataList.", '".$__val."'";
				}
				$cloneCounter++;
			}
		}
		$query="INSERT INTO radcheck ($columnList) VALUES ($dataList)";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Radius [Clone] Could not push record to database");
		$query = "SELECT LAST_INSERT_ID()";
		$result = mysql_db_query($this->database, $query, $this->conn) or $this->throwMe("Radius [Clone] Could not Extract Last Insert Id");
		if (mysql_num_rows($result) != 1) $this->throwMe("Radius [Clone] Last Insert Id not unique");
		list($lastInsertId)=mysql_fetch_row($result);
		return $lastInsertId;
	}
}
class ClassRegistry	{
	public final static function getAvailableClassList()	{
		$list = array();
		$list[sizeof($list)] = "PHPTimezone";
		$list[sizeof($list)] = "DaysOfAWeek";
		$list[sizeof($list)] = "MonthOfAYear";
		$list[sizeof($list)] = "Theme";
		$list[sizeof($list)] = "Country";
		$list[sizeof($list)] = "AccademicYear";
		$list[sizeof($list)] = "Profile";
		$list[sizeof($list)] = "EducationLevel";
		$list[sizeof($list)] = "Department";
		$list[sizeof($list)] = "Course";
		$list[sizeof($list)] = "Subject";
		$list[sizeof($list)] = "CourseAndSubjectTransaction";
		$list[sizeof($list)] = "SecurityQuestion";
		$list[sizeof($list)] = "UserType";
		$list[sizeof($list)] = "UserStatus";
		$list[sizeof($list)] = "Sex";
		$list[sizeof($list)] = "Marital";
		$list[sizeof($list)] = "Group";
		$list[sizeof($list)] = "JobTitle";
		$list[sizeof($list)] = "Religion";
		$list[sizeof($list)] = "Denomination";
		$list[sizeof($list)] = "Login";
		$list[sizeof($list)] = "User";
		$list[sizeof($list)] = "CourseInstructor";
		$list[sizeof($list)] = "Student";
		$list[sizeof($list)] = "ExaminationGroup";
		$list[sizeof($list)] = "Examination";
		$list[sizeof($list)] = "ExaminationNumberScope";
		$list[sizeof($list)] = "ExaminationNumber";
		$list[sizeof($list)] = "Grade";
		$list[sizeof($list)] = "ResultsGroup";
		$list[sizeof($list)] = "Results";
		$list[sizeof($list)] = "Currency";
		$list[sizeof($list)] = "FeeStructure";
		$list[sizeof($list)] = "FeeInvoiceGroup";
		$list[sizeof($list)] = "FeeInvoice";
		$list[sizeof($list)] = "FeePayer";
		$list[sizeof($list)] = "FeePayment";
		$list[sizeof($list)] = "Venue";
		$list[sizeof($list)] = "Timetable";
		$list[sizeof($list)] = "Schedule";
		$list[sizeof($list)] = "Holiday";
		$list[sizeof($list)] = "Attendance";
		$list[sizeof($list)] = "LeaveType";
		$list[sizeof($list)] = "LeaveApprovalSchemaGroup";
		$list[sizeof($list)] = "LeaveApprovalSchema";
		$list[sizeof($list)] = "LeaveApplication";
		$list[sizeof($list)] = "MessageType";
		$list[sizeof($list)] = "MessagePolicyType";
		$list[sizeof($list)] = "EntryCriteria";
		$list[sizeof($list)] = "ApprovalSequenceSchema";
		$list[sizeof($list)] = "ApprovalSequenceData";
		$list[sizeof($list)] = "AdmissionProgress";
		$list[sizeof($list)] = "ClassOfAward";
		$list[sizeof($list)] = "CoursePointLimit";
		$list[sizeof($list)] = "BriefcaseGroup";
		$list[sizeof($list)] = "Briefcase";
		$list[sizeof($list)] = "Paper";
		$list[sizeof($list)] = "MACOUILookup";
		$list[sizeof($list)] = "WirelessConnection";
		$list[sizeof($list)] = "Radius";
		return $list;
	}
	public final static function isClassRegistered($__classname)	{
		$listOfRegisteredClasses = self::getAvailableClassList();
		return in_array($__classname, $listOfRegisteredClasses);
	}
	public final static function getQueryText($__classname)	{
		$line = null;
		if ($__classname == "PHPTimezone")	{
			$line =  "SELECT zoneId FROM pHPTimezone";
		}
		else if ($__classname == "DaysOfAWeek")	{
			$line =  "SELECT dayId FROM daysOfAWeek";
		}
		else if ($__classname == "MonthOfAYear")	{
			$line =  "SELECT monthId FROM monthOfAYear";
		}
		else if ($__classname == "Theme")	{
			$line =  "SELECT themeId FROM themes";
		}
		else if ($__classname == "Country")	{
			$line =  "SELECT countryId FROM country";
		}
		else if ($__classname == "AccademicYear")	{
			$line =  "SELECT accademicYearId FROM accademicYear";
		}
		else if ($__classname == "Profile")	{
			$line =  "SELECT profileId FROM profile";
		}
		else if ($__classname == "EducationLevel")	{
			$line =  "SELECT levelId FROM educationLevel";
		}
		else if ($__classname == "Department")	{
			$line =  "SELECT departmentId FROM departments";
		}
		else if ($__classname == "Course")	{
			$line =  "SELECT courseId FROM course";
		}
		else if ($__classname == "Subject")	{
			$line =  "SELECT subjectId FROM subject";
		}
		else if ($__classname == "CourseAndSubjectTransaction")	{
			$line =  "SELECT transactionId FROM courseAndSubjectTransaction";
		}
		else if ($__classname == "SecurityQuestion")	{
			$line =  "SELECT questionId FROM securityQuestion";
		}
		else if ($__classname == "UserType")	{
			$line =  "SELECT typeId FROM userType";
		}
		else if ($__classname == "UserStatus")	{
			$line =  "SELECT statusId FROM userStatus";
		}
		else if ($__classname == "Sex")	{
			$line =  "SELECT sexId FROM sex";
		}
		else if ($__classname == "Marital")	{
			$line =  "SELECT maritalId FROM marital";
		}
		else if ($__classname == "Group")	{
			$line =  "SELECT groupId FROM groups";
		}
		else if ($__classname == "JobTitle")	{
			$line =  "SELECT jobId FROM jobTitle";
		}
		else if ($__classname == "Religion")	{
			$line =  "SELECT religionId FROM religion";
		}
		else if ($__classname == "Denomination")	{
			$line =  "SELECT denominationId FROM denomination";
		}
		else if ($__classname == "Login")	{
			$line =  "SELECT loginId FROM login";
		}
		else if ($__classname == "User")	{
			$line =  "SELECT userId FROM users";
		}
		else if ($__classname == "CourseInstructor")	{
			$line =  "SELECT instructorId FROM courseInstructors";
		}
		else if ($__classname == "Student")	{
			$line =  "SELECT studentId FROM students";
		}
		else if ($__classname == "ExaminationGroup")	{
			$line =  "SELECT groupId FROM examinationGroup";
		}
		else if ($__classname == "Examination")	{
			$line =  "SELECT examinationId FROM examination";
		}
		else if ($__classname == "ExaminationNumberScope")	{
			$line =  "SELECT scopeId FROM examinationNumberScope";
		}
		else if ($__classname == "ExaminationNumber")	{
			$line =  "SELECT numberId FROM examinationNumber";
		}
		else if ($__classname == "Grade")	{
			$line =  "SELECT gradeId FROM grades";
		}
		else if ($__classname == "ResultsGroup")	{
			$line =  "SELECT groupId FROM resultsGroup";
		}
		else if ($__classname == "Results")	{
			$line =  "SELECT resultsId FROM results";
		}
		else if ($__classname == "Currency")	{
			$line =  "SELECT currencyId FROM currency";
		}
		else if ($__classname == "FeeStructure")	{
			$line =  "SELECT structureId FROM feeStructure";
		}
		else if ($__classname == "FeeInvoiceGroup")	{
			$line =  "SELECT groupId FROM feeInvoiceGroup";
		}
		else if ($__classname == "FeeInvoice")	{
			$line =  "SELECT invoiceId FROM feeInvoices";
		}
		else if ($__classname == "FeePayer")	{
			$line =  "SELECT payerId FROM feePayer";
		}
		else if ($__classname == "FeePayment")	{
			$line =  "SELECT paymentId FROM feePayments";
		}
		else if ($__classname == "Venue")	{
			$line =  "SELECT venueId FROM venue";
		}
		else if ($__classname == "Timetable")	{
			$line =  "SELECT ttId FROM timetable";
		}
		else if ($__classname == "Schedule")	{
			$line =  "SELECT scheduleId FROM schedule";
		}
		else if ($__classname == "Holiday")	{
			$line =  "SELECT holidayId FROM holiday";
		}
		else if ($__classname == "Attendance")	{
			$line =  "SELECT attendanceId FROM attendance";
		}
		else if ($__classname == "LeaveType")	{
			$line =  "SELECT typeId FROM leaveType";
		}
		else if ($__classname == "LeaveApprovalSchemaGroup")	{
			$line =  "SELECT groupId FROM leaveApprovalSchemaGroup";
		}
		else if ($__classname == "LeaveApprovalSchema")	{
			$line =  "SELECT schemaId FROM leaveApprovalSchema";
		}
		else if ($__classname == "LeaveApplication")	{
			$line =  "SELECT leaveId FROM leaveApplication";
		}
		else if ($__classname == "MessageType")	{
			$line =  "SELECT typeId FROM messageType";
		}
		else if ($__classname == "MessagePolicyType")	{
			$line =  "SELECT typeId FROM messagePolicyType";
		}
		else if ($__classname == "EntryCriteria")	{
			$line =  "SELECT criteriaId FROM entryCriteria";
		}
		else if ($__classname == "ApprovalSequenceSchema")	{
			$line =  "SELECT schemaId FROM approvalSequenceSchema";
		}
		else if ($__classname == "ApprovalSequenceData")	{
			$line =  "SELECT dataId FROM approvalSequenceData";
		}
		else if ($__classname == "AdmissionProgress")	{
			$line =  "SELECT progressId FROM admissionProgress";
		}
		else if ($__classname == "ClassOfAward")	{
			$line =  "SELECT awardId FROM classOfAward";
		}
		else if ($__classname == "CoursePointLimit")	{
			$line =  "SELECT limitId FROM coursePointLimits";
		}
		else if ($__classname == "BriefcaseGroup")	{
			$line =  "SELECT groupId FROM briefcaseGroup";
		}
		else if ($__classname == "Briefcase")	{
			$line =  "SELECT briefcaseId FROM briefcase";
		}
		else if ($__classname == "Paper")	{
			$line =  "SELECT paperId FROM paper";
		}
		else if ($__classname == "MACOUILookup")	{
			$line =  "SELECT ouiId FROM macOUILookup";
		}
		else if ($__classname == "WirelessConnection")	{
			$line =  "SELECT connectionId FROM wirelessConnection";
		}
		else if ($__classname == "Radius")	{
			$line =  "SELECT id FROM radius";
		}
		return $line;
	}
	public final static function getObjectReference($__database, $__conn, $__classname, $__id)	{
		$refobj = null;
		if ($__classname == "PHPTimezone")	{
			$refobj = new PHPTimezone($__database, $__id, $__conn) or Object::shootException('PHPTimezone, creation failed');
		}
		else if ($__classname == "DaysOfAWeek")	{
			$refobj = new DaysOfAWeek($__database, $__id, $__conn) or Object::shootException('DaysOfAWeek, creation failed');
		}
		else if ($__classname == "MonthOfAYear")	{
			$refobj = new MonthOfAYear($__database, $__id, $__conn) or Object::shootException('MonthOfAYear, creation failed');
		}
		else if ($__classname == "Theme")	{
			$refobj = new Theme($__database, $__id, $__conn) or Object::shootException('Theme, creation failed');
		}
		else if ($__classname == "Country")	{
			$refobj = new Country($__database, $__id, $__conn) or Object::shootException('Country, creation failed');
		}
		else if ($__classname == "AccademicYear")	{
			$refobj = new AccademicYear($__database, $__id, $__conn) or Object::shootException('AccademicYear, creation failed');
		}
		else if ($__classname == "Profile")	{
			$refobj = new Profile($__database, $__id, $__conn) or Object::shootException('Profile, creation failed');
		}
		else if ($__classname == "EducationLevel")	{
			$refobj = new EducationLevel($__database, $__id, $__conn) or Object::shootException('EducationLevel, creation failed');
		}
		else if ($__classname == "Department")	{
			$refobj = new Department($__database, $__id, $__conn) or Object::shootException('Department, creation failed');
		}
		else if ($__classname == "Course")	{
			$refobj = new Course($__database, $__id, $__conn) or Object::shootException('Course, creation failed');
		}
		else if ($__classname == "Subject")	{
			$refobj = new Subject($__database, $__id, $__conn) or Object::shootException('Subject, creation failed');
		}
		else if ($__classname == "CourseAndSubjectTransaction")	{
			$refobj = new CourseAndSubjectTransaction($__database, $__id, $__conn) or Object::shootException('CourseAndSubjectTransaction, creation failed');
		}
		else if ($__classname == "SecurityQuestion")	{
			$refobj = new SecurityQuestion($__database, $__id, $__conn) or Object::shootException('SecurityQuestion, creation failed');
		}
		else if ($__classname == "UserType")	{
			$refobj = new UserType($__database, $__id, $__conn) or Object::shootException('UserType, creation failed');
		}
		else if ($__classname == "UserStatus")	{
			$refobj = new UserStatus($__database, $__id, $__conn) or Object::shootException('UserStatus, creation failed');
		}
		else if ($__classname == "Sex")	{
			$refobj = new Sex($__database, $__id, $__conn) or Object::shootException('Sex, creation failed');
		}
		else if ($__classname == "Marital")	{
			$refobj = new Marital($__database, $__id, $__conn) or Object::shootException('Marital, creation failed');
		}
		else if ($__classname == "Group")	{
			$refobj = new Group($__database, $__id, $__conn) or Object::shootException('Group, creation failed');
		}
		else if ($__classname == "JobTitle")	{
			$refobj = new JobTitle($__database, $__id, $__conn) or Object::shootException('JobTitle, creation failed');
		}
		else if ($__classname == "Religion")	{
			$refobj = new Religion($__database, $__id, $__conn) or Object::shootException('Religion, creation failed');
		}
		else if ($__classname == "Denomination")	{
			$refobj = new Denomination($__database, $__id, $__conn) or Object::shootException('Denomination, creation failed');
		}
		else if ($__classname == "Login")	{
			$refobj = new Login($__database, $__id, $__conn) or Object::shootException('Login, creation failed');
		}
		else if ($__classname == "User")	{
			$refobj = new User($__database, $__id, $__conn) or Object::shootException('User, creation failed');
		}
		else if ($__classname == "CourseInstructor")	{
			$refobj = new CourseInstructor($__database, $__id, $__conn) or Object::shootException('CourseInstructor, creation failed');
		}
		else if ($__classname == "Student")	{
			$refobj = new Student($__database, $__id, $__conn) or Object::shootException('Student, creation failed');
		}
		else if ($__classname == "ExaminationGroup")	{
			$refobj = new ExaminationGroup($__database, $__id, $__conn) or Object::shootException('ExaminationGroup, creation failed');
		}
		else if ($__classname == "Examination")	{
			$refobj = new Examination($__database, $__id, $__conn) or Object::shootException('Examination, creation failed');
		}
		else if ($__classname == "ExaminationNumberScope")	{
			$refobj = new ExaminationNumberScope($__database, $__id, $__conn) or Object::shootException('ExaminationNumberScope, creation failed');
		}
		else if ($__classname == "ExaminationNumber")	{
			$refobj = new ExaminationNumber($__database, $__id, $__conn) or Object::shootException('ExaminationNumber, creation failed');
		}
		else if ($__classname == "Grade")	{
			$refobj = new Grade($__database, $__id, $__conn) or Object::shootException('Grade, creation failed');
		}
		else if ($__classname == "ResultsGroup")	{
			$refobj = new ResultsGroup($__database, $__id, $__conn) or Object::shootException('ResultsGroup, creation failed');
		}
		else if ($__classname == "Results")	{
			$refobj = new Results($__database, $__id, $__conn) or Object::shootException('Results, creation failed');
		}
		else if ($__classname == "Currency")	{
			$refobj = new Currency($__database, $__id, $__conn) or Object::shootException('Currency, creation failed');
		}
		else if ($__classname == "FeeStructure")	{
			$refobj = new FeeStructure($__database, $__id, $__conn) or Object::shootException('FeeStructure, creation failed');
		}
		else if ($__classname == "FeeInvoiceGroup")	{
			$refobj = new FeeInvoiceGroup($__database, $__id, $__conn) or Object::shootException('FeeInvoiceGroup, creation failed');
		}
		else if ($__classname == "FeeInvoice")	{
			$refobj = new FeeInvoice($__database, $__id, $__conn) or Object::shootException('FeeInvoice, creation failed');
		}
		else if ($__classname == "FeePayer")	{
			$refobj = new FeePayer($__database, $__id, $__conn) or Object::shootException('FeePayer, creation failed');
		}
		else if ($__classname == "FeePayment")	{
			$refobj = new FeePayment($__database, $__id, $__conn) or Object::shootException('FeePayment, creation failed');
		}
		else if ($__classname == "Venue")	{
			$refobj = new Venue($__database, $__id, $__conn) or Object::shootException('Venue, creation failed');
		}
		else if ($__classname == "Timetable")	{
			$refobj = new Timetable($__database, $__id, $__conn) or Object::shootException('Timetable, creation failed');
		}
		else if ($__classname == "Schedule")	{
			$refobj = new Schedule($__database, $__id, $__conn) or Object::shootException('Schedule, creation failed');
		}
		else if ($__classname == "Holiday")	{
			$refobj = new Holiday($__database, $__id, $__conn) or Object::shootException('Holiday, creation failed');
		}
		else if ($__classname == "Attendance")	{
			$refobj = new Attendance($__database, $__id, $__conn) or Object::shootException('Attendance, creation failed');
		}
		else if ($__classname == "LeaveType")	{
			$refobj = new LeaveType($__database, $__id, $__conn) or Object::shootException('LeaveType, creation failed');
		}
		else if ($__classname == "LeaveApprovalSchemaGroup")	{
			$refobj = new LeaveApprovalSchemaGroup($__database, $__id, $__conn) or Object::shootException('LeaveApprovalSchemaGroup, creation failed');
		}
		else if ($__classname == "LeaveApprovalSchema")	{
			$refobj = new LeaveApprovalSchema($__database, $__id, $__conn) or Object::shootException('LeaveApprovalSchema, creation failed');
		}
		else if ($__classname == "LeaveApplication")	{
			$refobj = new LeaveApplication($__database, $__id, $__conn) or Object::shootException('LeaveApplication, creation failed');
		}
		else if ($__classname == "MessageType")	{
			$refobj = new MessageType($__database, $__id, $__conn) or Object::shootException('MessageType, creation failed');
		}
		else if ($__classname == "MessagePolicyType")	{
			$refobj = new MessagePolicyType($__database, $__id, $__conn) or Object::shootException('MessagePolicyType, creation failed');
		}
		else if ($__classname == "EntryCriteria")	{
			$refobj = new EntryCriteria($__database, $__id, $__conn) or Object::shootException('EntryCriteria, creation failed');
		}
		else if ($__classname == "ApprovalSequenceSchema")	{
			$refobj = new ApprovalSequenceSchema($__database, $__id, $__conn) or Object::shootException('ApprovalSequenceSchema, creation failed');
		}
		else if ($__classname == "ApprovalSequenceData")	{
			$refobj = new ApprovalSequenceData($__database, $__id, $__conn) or Object::shootException('ApprovalSequenceData, creation failed');
		}
		else if ($__classname == "AdmissionProgress")	{
			$refobj = new AdmissionProgress($__database, $__id, $__conn) or Object::shootException('AdmissionProgress, creation failed');
		}
		else if ($__classname == "ClassOfAward")	{
			$refobj = new ClassOfAward($__database, $__id, $__conn) or Object::shootException('ClassOfAward, creation failed');
		}
		else if ($__classname == "CoursePointLimit")	{
			$refobj = new CoursePointLimit($__database, $__id, $__conn) or Object::shootException('CoursePointLimit, creation failed');
		}
		else if ($__classname == "BriefcaseGroup")	{
			$refobj = new BriefcaseGroup($__database, $__id, $__conn) or Object::shootException('BriefcaseGroup, creation failed');
		}
		else if ($__classname == "Briefcase")	{
			$refobj = new Briefcase($__database, $__id, $__conn) or Object::shootException('Briefcase, creation failed');
		}
		else if ($__classname == "Paper")	{
			$refobj = new Paper($__database, $__id, $__conn) or Object::shootException('Paper, creation failed');
		}
		else if ($__classname == "MACOUILookup")	{
			$refobj = new MACOUILookup($__database, $__id, $__conn) or Object::shootException('MACOUILookup, creation failed');
		}
		else if ($__classname == "WirelessConnection")	{
			$refobj = new WirelessConnection($__database, $__id, $__conn) or Object::shootException('WirelessConnection, creation failed');
		}
		else if ($__classname == "Radius")	{
			$refobj = new Radius($__database, $__id, $__conn) or Object::shootException('Radius, creation failed');
		}
		return $refobj;
	}
	public final static function loadAllData($__database, $__conn, $__classname)	{
		$__dataArray = null;
		if ($__classname == "PHPTimezone")	{
			$__dataArray = PHPTimezone::loadAllData($__database, $__conn);
		}
		else if ($__classname == "DaysOfAWeek")	{
			$__dataArray = DaysOfAWeek::loadAllData($__database, $__conn);
		}
		else if ($__classname == "MonthOfAYear")	{
			$__dataArray = MonthOfAYear::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Theme")	{
			$__dataArray = Theme::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Country")	{
			$__dataArray = Country::loadAllData($__database, $__conn);
		}
		else if ($__classname == "AccademicYear")	{
			$__dataArray = AccademicYear::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Profile")	{
			$__dataArray = Profile::loadAllData($__database, $__conn);
		}
		else if ($__classname == "EducationLevel")	{
			$__dataArray = EducationLevel::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Department")	{
			$__dataArray = Department::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Course")	{
			$__dataArray = Course::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Subject")	{
			$__dataArray = Subject::loadAllData($__database, $__conn);
		}
		else if ($__classname == "CourseAndSubjectTransaction")	{
			$__dataArray = CourseAndSubjectTransaction::loadAllData($__database, $__conn);
		}
		else if ($__classname == "SecurityQuestion")	{
			$__dataArray = SecurityQuestion::loadAllData($__database, $__conn);
		}
		else if ($__classname == "UserType")	{
			$__dataArray = UserType::loadAllData($__database, $__conn);
		}
		else if ($__classname == "UserStatus")	{
			$__dataArray = UserStatus::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Sex")	{
			$__dataArray = Sex::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Marital")	{
			$__dataArray = Marital::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Group")	{
			$__dataArray = Group::loadAllData($__database, $__conn);
		}
		else if ($__classname == "JobTitle")	{
			$__dataArray = JobTitle::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Religion")	{
			$__dataArray = Religion::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Denomination")	{
			$__dataArray = Denomination::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Login")	{
			$__dataArray = Login::loadAllData($__database, $__conn);
		}
		else if ($__classname == "User")	{
			$__dataArray = User::loadAllData($__database, $__conn);
		}
		else if ($__classname == "CourseInstructor")	{
			$__dataArray = CourseInstructor::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Student")	{
			$__dataArray = Student::loadAllData($__database, $__conn);
		}
		else if ($__classname == "ExaminationGroup")	{
			$__dataArray = ExaminationGroup::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Examination")	{
			$__dataArray = Examination::loadAllData($__database, $__conn);
		}
		else if ($__classname == "ExaminationNumberScope")	{
			$__dataArray = ExaminationNumberScope::loadAllData($__database, $__conn);
		}
		else if ($__classname == "ExaminationNumber")	{
			$__dataArray = ExaminationNumber::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Grade")	{
			$__dataArray = Grade::loadAllData($__database, $__conn);
		}
		else if ($__classname == "ResultsGroup")	{
			$__dataArray = ResultsGroup::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Results")	{
			$__dataArray = Results::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Currency")	{
			$__dataArray = Currency::loadAllData($__database, $__conn);
		}
		else if ($__classname == "FeeStructure")	{
			$__dataArray = FeeStructure::loadAllData($__database, $__conn);
		}
		else if ($__classname == "FeeInvoiceGroup")	{
			$__dataArray = FeeInvoiceGroup::loadAllData($__database, $__conn);
		}
		else if ($__classname == "FeeInvoice")	{
			$__dataArray = FeeInvoice::loadAllData($__database, $__conn);
		}
		else if ($__classname == "FeePayer")	{
			$__dataArray = FeePayer::loadAllData($__database, $__conn);
		}
		else if ($__classname == "FeePayment")	{
			$__dataArray = FeePayment::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Venue")	{
			$__dataArray = Venue::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Timetable")	{
			$__dataArray = Timetable::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Schedule")	{
			$__dataArray = Schedule::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Holiday")	{
			$__dataArray = Holiday::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Attendance")	{
			$__dataArray = Attendance::loadAllData($__database, $__conn);
		}
		else if ($__classname == "LeaveType")	{
			$__dataArray = LeaveType::loadAllData($__database, $__conn);
		}
		else if ($__classname == "LeaveApprovalSchemaGroup")	{
			$__dataArray = LeaveApprovalSchemaGroup::loadAllData($__database, $__conn);
		}
		else if ($__classname == "LeaveApprovalSchema")	{
			$__dataArray = LeaveApprovalSchema::loadAllData($__database, $__conn);
		}
		else if ($__classname == "LeaveApplication")	{
			$__dataArray = LeaveApplication::loadAllData($__database, $__conn);
		}
		else if ($__classname == "MessageType")	{
			$__dataArray = MessageType::loadAllData($__database, $__conn);
		}
		else if ($__classname == "MessagePolicyType")	{
			$__dataArray = MessagePolicyType::loadAllData($__database, $__conn);
		}
		else if ($__classname == "EntryCriteria")	{
			$__dataArray = EntryCriteria::loadAllData($__database, $__conn);
		}
		else if ($__classname == "ApprovalSequenceSchema")	{
			$__dataArray = ApprovalSequenceSchema::loadAllData($__database, $__conn);
		}
		else if ($__classname == "ApprovalSequenceData")	{
			$__dataArray = ApprovalSequenceData::loadAllData($__database, $__conn);
		}
		else if ($__classname == "AdmissionProgress")	{
			$__dataArray = AdmissionProgress::loadAllData($__database, $__conn);
		}
		else if ($__classname == "ClassOfAward")	{
			$__dataArray = ClassOfAward::loadAllData($__database, $__conn);
		}
		else if ($__classname == "CoursePointLimit")	{
			$__dataArray = CoursePointLimit::loadAllData($__database, $__conn);
		}
		else if ($__classname == "BriefcaseGroup")	{
			$__dataArray = BriefcaseGroup::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Briefcase")	{
			$__dataArray = Briefcase::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Paper")	{
			$__dataArray = Paper::loadAllData($__database, $__conn);
		}
		else if ($__classname == "MACOUILookup")	{
			$__dataArray = MACOUILookup::loadAllData($__database, $__conn);
		}
		else if ($__classname == "WirelessConnection")	{
			$__dataArray = WirelessConnection::loadAllData($__database, $__conn);
		}
		else if ($__classname == "Radius")	{
			$__dataArray = Radius::loadAllData($__database, $__conn);
		}
		return $__dataArray;
	}
}
?>